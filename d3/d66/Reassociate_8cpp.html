<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: Reassociate.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/d66/Reassociate_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Reassociate.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dc/dd6/Transforms_2Scalar_8h_source.html">llvm/Transforms/Scalar.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d73/DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/dbd/PostOrderIterator_8h_source.html">llvm/ADT/PostOrderIterator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d98/STLExtras_8h_source.html">llvm/ADT/STLExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/dd6/SetVector_8h_source.html">llvm/ADT/SetVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d4b/IR_2CFG_8h_source.html">llvm/IR/CFG.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d45/Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/df5/DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/df5/Function_8h_source.html">llvm/IR/Function.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d60/IRBuilder_8h_source.html">llvm/IR/IRBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dd5/Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../da/d31/ValueHandle_8h_source.html">llvm/IR/ValueHandle.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d29/Pass_8h_source.html">llvm/Pass.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d82/raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d6f/Local_8h_source.html">llvm/Transforms/Utils/Local.h</a>&quot;</code><br/>
<code>#include &lt;algorithm&gt;</code><br/>
</div>
<p><a href="../../d3/d66/Reassociate_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;reassociate&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a16254da0c95d3c3ade9165fca5e192b6"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a16254da0c95d3c3ade9165fca5e192b6">RepeatedValue</a></td></tr>
<tr class="separator:a16254da0c95d3c3ade9165fca5e192b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:accc461d406589e0d5f010481a3095dc5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#accc461d406589e0d5f010481a3095dc5">STATISTIC</a> (NumChanged,&quot;Number of insts reassociated&quot;)</td></tr>
<tr class="separator:accc461d406589e0d5f010481a3095dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23c4e4980f845c7d3d09143673718b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#ad23c4e4980f845c7d3d09143673718b8">STATISTIC</a> (NumAnnihil,&quot;Number of expr tree annihilated&quot;)</td></tr>
<tr class="separator:ad23c4e4980f845c7d3d09143673718b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addf135572039b35513623e9a82aee929"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#addf135572039b35513623e9a82aee929">STATISTIC</a> (NumFactor,&quot;Number of multiplies factored&quot;)</td></tr>
<tr class="separator:addf135572039b35513623e9a82aee929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035830591fff503ea933e8c88c84f3f8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a035830591fff503ea933e8c88c84f3f8">PrintOps</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;Ops)</td></tr>
<tr class="separator:a035830591fff503ea933e8c88c84f3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c09b1da0dee14d7f8c81a90992712e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#ac2c09b1da0dee14d7f8c81a90992712e">INITIALIZE_PASS</a> (Reassociate,&quot;reassociate&quot;,&quot;Reassociate expressions&quot;, false, <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>) <a class="el" href="../../d5/d43/classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="el" href="../../d3/d9e/IndVarSimplify2_8cpp.html#ac4f815981d19a995ed4c02690e805630">llvm</a></td></tr>
<tr class="separator:ac2c09b1da0dee14d7f8c81a90992712e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bd7f001f64bd74e1ed4bc26d7e47b64"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, unsigned Opcode)</td></tr>
<tr class="separator:a0bd7f001f64bd74e1ed4bc26d7e47b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1916c6024adf200133717bb5227fcbf4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a1916c6024adf200133717bb5227fcbf4">isUnmovableInstruction</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</td></tr>
<tr class="separator:a1916c6024adf200133717bb5227fcbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd28e5089281e47a20646dd504218f3b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#abd28e5089281e47a20646dd504218f3b">LowerNegateToMultiply</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Neg)</td></tr>
<tr class="separator:abd28e5089281e47a20646dd504218f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5239d08485869f6cb244badd0727fd"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a3b5239d08485869f6cb244badd0727fd">CarmichaelShift</a> (unsigned Bitwidth)</td></tr>
<tr class="separator:a3b5239d08485869f6cb244badd0727fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838450a1f01fb48a3cc7da747418a8c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a838450a1f01fb48a3cc7da747418a8c5">IncorporateWeight</a> (<a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;LHS, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;RHS, unsigned Opcode)</td></tr>
<tr class="separator:a838450a1f01fb48a3cc7da747418a8c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628b394cb65dc0a50e31719469cad132"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a628b394cb65dc0a50e31719469cad132">LinearizeExprTree</a> (<a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d3/d66/Reassociate_8cpp.html#a16254da0c95d3c3ade9165fca5e192b6">RepeatedValue</a> &gt; &amp;Ops)</td></tr>
<tr class="separator:a628b394cb65dc0a50e31719469cad132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b0ec8ef22f4b5a509119d94069f7fb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *BI)</td></tr>
<tr class="separator:a48b0ec8ef22f4b5a509119d94069f7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d2abc5a580be68aa7751c0e1ce7263"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a19d2abc5a580be68aa7751c0e1ce7263">ShouldBreakUpSubtract</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Sub)</td></tr>
<tr class="separator:a19d2abc5a580be68aa7751c0e1ce7263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae20b217e73a0ca8f5d8841ce09d7f144"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#ae20b217e73a0ca8f5d8841ce09d7f144">BreakUpSubtract</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Sub)</td></tr>
<tr class="separator:ae20b217e73a0ca8f5d8841ce09d7f144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1f6d5922fdbea17fd61e9b033d0e0c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a0f1f6d5922fdbea17fd61e9b033d0e0c">ConvertShiftToMul</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Shl)</td></tr>
<tr class="separator:a0f1f6d5922fdbea17fd61e9b033d0e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a009b54c05762d1e08d2ed83a0f26865a"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a009b54c05762d1e08d2ed83a0f26865a">FindInOperandList</a> (<a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;Ops, unsigned i, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="el" href="../../d2/d61/TestPasses_8cpp.html#af8fc01af387e8354dd2367faafad6040">X</a>)</td></tr>
<tr class="separator:a009b54c05762d1e08d2ed83a0f26865a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5dd8cc53e4d4c3e0d2100880d874a7d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#aa5dd8cc53e4d4c3e0d2100880d874a7d">EmitAddTreeOfValues</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../db/d22/classllvm_1_1WeakVH.html">WeakVH</a> &gt; &amp;Ops)</td></tr>
<tr class="separator:aa5dd8cc53e4d4c3e0d2100880d874a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fa38b27266e65a5b9940a0c3f00f1f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#aa2fa38b27266e65a5b9940a0c3f00f1f">FindSingleUseMultiplyFactors</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Factors, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;Ops)</td></tr>
<tr class="separator:aa2fa38b27266e65a5b9940a0c3f00f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ebb022565fd67aef7b89a88b69dca9d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a9ebb022565fd67aef7b89a88b69dca9d">OptimizeAndOrXor</a> (unsigned Opcode, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;Ops)</td></tr>
<tr class="separator:a9ebb022565fd67aef7b89a88b69dca9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad517e28695345579aa30fae8783953d2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#ad517e28695345579aa30fae8783953d2">createAndInstr</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertBefore, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Opnd, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;ConstOpnd)</td></tr>
<tr class="separator:ad517e28695345579aa30fae8783953d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1544550a3fa7e797ff4dae2e6149ce"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d66/Reassociate_8cpp.html#a2a1544550a3fa7e797ff4dae2e6149ce">buildMultiplyTree</a> (<a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Ops)</td></tr>
<tr class="memdesc:a2a1544550a3fa7e797ff4dae2e6149ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a tree of multiplies, computing the product of Ops.  <a href="#a2a1544550a3fa7e797ff4dae2e6149ce">More...</a><br/></td></tr>
<tr class="separator:a2a1544550a3fa7e797ff4dae2e6149ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;reassociate&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00044">44</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a16254da0c95d3c3ade9165fca5e192b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>*, <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>&gt; <a class="el" href="../../d3/d66/Reassociate_8cpp.html#a16254da0c95d3c3ade9165fca5e192b6">RepeatedValue</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00421">421</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae20b217e73a0ca8f5d8841ce09d7f144"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>* BreakUpSubtract </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>BreakUpSubtract - If we have (X-Y), and if either X is an add, or if this is only used by an add, transform this into (X+(0-Y)) to promote better reassociation. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00926">926</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                                         {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// Convert a subtract into an add and a neg instruction. This allows sub</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// instructions to be commuted with other add instructions.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Calculate the negative value of Operand 1 of the sub instruction,</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// and set it as the RHS of the add instruction we just made.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NegVal = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a>(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Sub);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *New =</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    BinaryOperator::CreateAdd(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), NegVal, <span class="stringliteral">&quot;&quot;</span>, Sub);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Constant::getNullValue(Sub-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())); <span class="comment">// Drop use of op.</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, Constant::getNullValue(Sub-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())); <span class="comment">// Drop use of op.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  New-&gt;takeName(Sub);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">// Everyone now refers to the add instruction.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  Sub-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(New);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  New-&gt;setDebugLoc(Sub-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Negated: &quot;</span> &lt;&lt; *New &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a48b0ec8ef22f4b5a509119d94069f7fb"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a></div><div class="ttdeci">static Value * NegateValue(Value *V, Instruction *BI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00836">Reassociate.cpp:836</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2a1544550a3fa7e797ff4dae2e6149ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* buildMultiplyTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a tree of multiplies, computing the product of Ops. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l01628">1628</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                                              {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordflow">if</span> (Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">return</span> Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LHS = Ops.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    LHS = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a94c18bf85a5105e0a22fba23b0bedafa">CreateMul</a>(LHS, Ops.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>());</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  } <span class="keywordflow">while</span> (!Ops.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keywordflow">return</span> LHS;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00406">SmallVector.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00158">SmallVector.h:158</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a94c18bf85a5105e0a22fba23b0bedafa"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a94c18bf85a5105e0a22fba23b0bedafa">llvm::IRBuilder::CreateMul</a></div><div class="ttdeci">Value * CreateMul(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00676">IRBuilder.h:676</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b5239d08485869f6cb244badd0727fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned CarmichaelShift </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Bitwidth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CarmichaelShift - Returns k such that lambda(2^Bitwidth) = 2^k, where lambda is the Carmichael function. This means that x^(2^k) === 1 mod 2^Bitwidth for every odd x, i.e. x^(2^k) = 1 for every odd x in Bitwidth-bit arithmetic. Note that 0 &lt;= k &lt; Bitwidth, and if Bitwidth &gt; 3 then x^(2^k) = 0 for every even x in Bitwidth-bit arithmetic. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00336">336</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                                   {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> (Bitwidth &lt; 3)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> Bitwidth - 1;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">return</span> Bitwidth - 2;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f1f6d5922fdbea17fd61e9b033d0e0c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>* ConvertShiftToMul </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Shl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ConvertShiftToMul - If this is a shift of a reassociable multiply or is used by one, change this into a multiply by a constant to assist with further reassociation. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00951">951</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                                           {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *MulCst = ConstantInt::get(Shl-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  MulCst = ConstantExpr::getShl(MulCst, cast&lt;Constant&gt;(Shl-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)));</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Mul =</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    BinaryOperator::CreateMul(Shl-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), MulCst, <span class="stringliteral">&quot;&quot;</span>, Shl);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  Shl-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, UndefValue::get(Shl-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())); <span class="comment">// Drop use of op.</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  Mul-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Shl);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  Shl-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Mul);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  Mul-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(Shl-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">return</span> Mul;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00193">Instruction.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad517e28695345579aa30fae8783953d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* createAndInstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>InsertBefore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Opnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;&#160;</td>
          <td class="paramname"><em>ConstOpnd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper funciton of CombineXorOpnd(). It creates a bitwise-and instruction with the given two operands, and return the resulting instruction. There are two special cases: 1) if the constant operand is 0, it will return NULL. 2) if the constant is ~0, the symbolic operand will be returned. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l01126">1126</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                                     {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (ConstOpnd != 0) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">if</span> (!ConstOpnd.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">isAllOnesValue</a>()) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <a class="code" href="../../d5/d1d/classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Opnd-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      I = BinaryOperator::CreateAnd(Opnd, ConstantInt::get(Ctx, ConstOpnd),</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                    <span class="stringliteral">&quot;and.ra&quot;</span>, InsertBefore);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(InsertBefore-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span> Opnd;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00193">Instruction.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="../../d5/d1d/classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6b/LLVMContext_8h_source.html#l00040">LLVMContext.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a21260f8037e665d235ace5718cf68bc4"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">llvm::APInt::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdoc">Determine if all bits are set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00338">APInt.h:338</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5dd8cc53e4d4c3e0d2100880d874a7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* EmitAddTreeOfValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../db/d22/classllvm_1_1WeakVH.html">WeakVH</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EmitAddTreeOfValues - Emit a tree of add instructions, summing Ops together and returning the result. Insert the tree before I. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00984">984</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                                               {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">if</span> (Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1) <span class="keywordflow">return</span> Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V1 = Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  Ops.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="code" href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#aa5dd8cc53e4d4c3e0d2100880d874a7d">EmitAddTreeOfValues</a>(I, Ops);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">return</span> BinaryOperator::CreateAdd(V2, V1, <span class="stringliteral">&quot;tmp&quot;</span>, I);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0f/NVPTX_8h_source.html#l00131">NVPTX.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00158">SmallVector.h:158</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_aa5dd8cc53e4d4c3e0d2100880d874a7d"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#aa5dd8cc53e4d4c3e0d2100880d874a7d">EmitAddTreeOfValues</a></div><div class="ttdeci">static Value * EmitAddTreeOfValues(Instruction *I, SmallVectorImpl&lt; WeakVH &gt; &amp;Ops)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00984">Reassociate.cpp:984</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00239">SmallVector.h:239</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a009b54c05762d1e08d2ed83a0f26865a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned FindInOperandList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>X</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FindInOperandList - Scan backwards and forwards among values with the same rank as element i to see if X exists. If X does not exist, return i. This is useful when scanning for 'x' when we see '-x' because they both get the same rank. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00968">968</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                            {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordtype">unsigned</span> XRank = Ops[i].Rank;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordtype">unsigned</span> e = Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = i+1; j != e &amp;&amp; Ops[j].Rank == XRank; ++j)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span> (Ops[j].Op == X)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="keywordflow">return</span> j;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// Scan backwards.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = i-1; j != ~0U &amp;&amp; Ops[j].Rank == XRank; --j)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (Ops[j].Op == X)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> j;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa2fa38b27266e65a5b9940a0c3f00f1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FindSingleUseMultiplyFactors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Factors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FindSingleUseMultiplyFactors - If V is a single-use multiply, recursively add its operands as factors, otherwise add V to the list of factors.</p>
<p>Ops is the top-level list of add operands we're trying to factor. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l01058">1058</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                                                               {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(V, Instruction::Mul);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">if</span> (!BO) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    Factors.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(V);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// Otherwise, add the LHS and RHS to the list of factors.</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="../../d3/d66/Reassociate_8cpp.html#aa2fa38b27266e65a5b9940a0c3f00f1f">FindSingleUseMultiplyFactors</a>(BO-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Factors, Ops);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="../../d3/d66/Reassociate_8cpp.html#aa2fa38b27266e65a5b9940a0c3f00f1f">FindSingleUseMultiplyFactors</a>(BO-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Factors, Ops);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_aa2fa38b27266e65a5b9940a0c3f00f1f"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#aa2fa38b27266e65a5b9940a0c3f00f1f">FindSingleUseMultiplyFactors</a></div><div class="ttdeci">static void FindSingleUseMultiplyFactors(Value *V, SmallVectorImpl&lt; Value * &gt; &amp;Factors, const SmallVectorImpl&lt; ValueEntry &gt; &amp;Ops)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l01058">Reassociate.cpp:1058</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a0bd7f001f64bd74e1ed4bc26d7e47b64"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a></div><div class="ttdeci">static BinaryOperator * isReassociableOp(Value *V, unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00236">Reassociate.cpp:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a838450a1f01fb48a3cc7da747418a8c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void IncorporateWeight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;&#160;</td>
          <td class="paramname"><em>LHS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;&#160;</td>
          <td class="paramname"><em>RHS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Opcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>IncorporateWeight - Add the extra weight 'RHS' to the existing weight 'LHS', reducing the combined weight using any special properties of the operation. The existing weight LHS represents the computation X op X op ... op X where X occurs LHS times. The combined weight represents X op X op ... op X with X occurring LHS + RHS times. If op is "Xor" for example then the combined operation is equivalent to X if LHS + RHS is odd, or 0 if LHS + RHS is even; the routine returns 1 in LHS in the first case, and 0 in LHS in the second. </p>
<p>CM - The value of Carmichael's lambda function. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00349">349</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                                                             {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// If we were working with infinite precision arithmetic then the combined</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// weight would be LHS + RHS.  But we are using finite precision arithmetic,</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// and the APInt sum LHS + RHS may not be correct if it wraps (it is correct</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// for nilpotent operations and addition, but not for idempotent operations</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// and multiplication), so it is important to correctly reduce the combined</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// weight back into range if wrapping would be wrong.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// If RHS is zero then the weight didn&#39;t change.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (RHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>())</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// If LHS is zero then the combined weight is RHS.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (LHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>()) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    LHS = RHS;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// From this point on we know that neither LHS nor RHS is zero.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (Instruction::isIdempotent(Opcode)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// Idempotent means X op X === X, so any non-zero weight is equivalent to a</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// weight of 1.  Keeping weights at zero or one also means that wrapping is</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// not a problem.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LHS == 1 &amp;&amp; RHS == 1 &amp;&amp; <span class="stringliteral">&quot;Weights not reduced!&quot;</span>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// Return a weight of 1.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">if</span> (Instruction::isNilpotent(Opcode)) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// Nilpotent means X op X === 0, so reduce weights modulo 2.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LHS == 1 &amp;&amp; RHS == 1 &amp;&amp; <span class="stringliteral">&quot;Weights not reduced!&quot;</span>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    LHS = 0; <span class="comment">// 1 + 1 === 0 modulo 2.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span> (Opcode == Instruction::Add) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// TODO: Reduce the weight by exploiting nsw/nuw?</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    LHS += RHS;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Opcode == Instruction::Mul &amp;&amp; <span class="stringliteral">&quot;Unknown associative operation!&quot;</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = LHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// If CM is the Carmichael number then a weight W satisfying W &gt;= CM+Bitwidth</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// can be replaced with W-CM.  That&#39;s because x^W=x^(W-CM) for every Bitwidth</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// bit number x, since either x is odd in which case x^CM = 1, or x is even in</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// which case both x^W and x^(W - CM) are zero.  By subtracting off multiples</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// of CM like this weights can always be reduced to the range [0, CM+Bitwidth)</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// which by a happy accident means that they can always be represented using</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// Bitwidth bits.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// TODO: Reduce the weight by exploiting nsw/nuw?  (Could do much better than</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// the Carmichael number).</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (Bitwidth &gt; 3) {<span class="comment"></span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">    /// CM - The value of Carmichael&#39;s lambda function.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span>    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> CM = APInt::getOneBitSet(Bitwidth, <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a3b5239d08485869f6cb244badd0727fd">CarmichaelShift</a>(Bitwidth));</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// Any weight W &gt;= Threshold can be replaced with W - CM.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> <a class="code" href="../../dd/d68/CaptureTracking_8cpp.html#ac30708db2a991631cbf3d95c6324d929">Threshold</a> = CM + Bitwidth;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Threshold) &amp;&amp; RHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Threshold) &amp;&amp; <span class="stringliteral">&quot;Weights not reduced!&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// For Bitwidth 4 or more the following sum does not overflow.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    LHS += RHS;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">while</span> (LHS.uge(Threshold))</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      LHS -= CM;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// To avoid problems with overflow do everything the same as above but using</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// a larger type.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">unsigned</span> CM = 1U &lt;&lt; <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a3b5239d08485869f6cb244badd0727fd">CarmichaelShift</a>(Bitwidth);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">unsigned</span> Threshold = CM + Bitwidth;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LHS.getZExtValue() &lt; Threshold &amp;&amp; RHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>() &lt; Threshold &amp;&amp;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;           <span class="stringliteral">&quot;Weights not reduced!&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">unsigned</span> Total = LHS.getZExtValue() + RHS.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">while</span> (Total &gt;= Threshold)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      Total -= CM;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    LHS = Total;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1APInt_html_a7dc983ebf0eb2d255fa90a67063c72e2"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Get zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01302">APInt.h:1302</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a1dc5339334162e650ff87e89629bf66c"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l00516">APInt.cpp:516</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01248">APInt.h:1248</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a3b5239d08485869f6cb244badd0727fd"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a3b5239d08485869f6cb244badd0727fd">CarmichaelShift</a></div><div class="ttdeci">static unsigned CarmichaelShift(unsigned Bitwidth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00336">Reassociate.cpp:336</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a963c4f881fbc3e316e8260bf98453ce4"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">llvm::APInt::isMinValue</a></div><div class="ttdeci">bool isMinValue() const </div><div class="ttdoc">Determine if this is the smallest unsigned value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00363">APInt.h:363</a></div></div>
<div class="ttc" id="CaptureTracking_8cpp_html_ac30708db2a991631cbf3d95c6324d929"><div class="ttname"><a href="../../dd/d68/CaptureTracking_8cpp.html#ac30708db2a991631cbf3d95c6324d929">Threshold</a></div><div class="ttdeci">static int const Threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d68/CaptureTracking_8cpp_source.html#l00167">CaptureTracking.cpp:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2c09b1da0dee14d7f8c81a90992712e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS </td>
          <td>(</td>
          <td class="paramtype">Reassociate&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;reassociate&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Reassociate expressions&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00228">228</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                          { <span class="keywordflow">return</span> <span class="keyword">new</span> Reassociate(); }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0bd7f001f64bd74e1ed4bc26d7e47b64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>* isReassociableOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Opcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isReassociableOp - Return true if V is an instruction of the specified opcode and if it only has one use. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00236">236</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                                   {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; isa&lt;Instruction&gt;(V) &amp;&amp;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      cast&lt;Instruction&gt;(V)-&gt;getOpcode() == Opcode)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> cast&lt;BinaryOperator&gt;(V);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1916c6024adf200133717bb5227fcbf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isUnmovableInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00243">243</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                   {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>:</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">case</span> Instruction::LandingPad:</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">case</span> Instruction::Alloca:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">case</span> Instruction::Invoke:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">Instruction::Call</a>:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> !isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/CallingConvLower_8h_source.html#l00167">CallingConvLower.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8e/SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a628b394cb65dc0a50e31719469cad132"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool LinearizeExprTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d3/d66/Reassociate_8cpp.html#a16254da0c95d3c3ade9165fca5e192b6">RepeatedValue</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LinearizeExprTree - Given an associative binary expression, return the leaf nodes in Ops along with their weights (how many times the leaf occurs). The original expression is the same as (Ops[0].first op Ops[0].first op ... Ops[0].first) &lt;- Ops[0].second times op (Ops[1].first op Ops[1].first op ... Ops[1].first) &lt;- Ops[1].second times op ... op (Ops[N].first op Ops[N].first op ... Ops[N].first) &lt;- Ops[N].second times</p>
<p>Note that the values Ops[0].first, ..., Ops[N].first are all distinct.</p>
<p>This routine may modify the function, in which case it returns 'true'. The changes it makes may well be destructive, changing the value computed by 'I' to something completely different. Thus if the routine returns 'true' then you MUST either replace I with a new expression computed from the Ops array, or use RewriteExprTree to put the values back in.</p>
<p><a class="el" href="../../d4/dc4/structA.html">A</a> leaf node is either not a binary operation of the same kind as the root node 'I' (i.e. is not a binary operator at all, or is, but with a different opcode), or is the same kind of binary operator but has a use which either does not belong to the expression, or does belong to the expression but is a leaf node. Every leaf node has at least one use that is a non-leaf node of the expression, while for non-leaf nodes (except for the root 'I') every use is a non-leaf node of the expression.</p>
<p>For example: expression graph node names </p>
<pre class="fragment">      +        |        I
     / \       |
    +   +      |      A,  B
   / \ / \     |
  *   +   *    |    C,  D,  E
 / \ / \ / \   |
    +   *      |      F,  G
</pre><p>The leaf nodes are <a class="el" href="../../db/db2/structC.html">C</a>, E, F and G. The Ops array will contain (maybe not in that order) (<a class="el" href="../../db/db2/structC.html">C</a>, 1), (E, 1), (F, 2), (G, 2).</p>
<p>The expression is maximal: if some instruction is a binary operator of the same kind as 'I', and all of its uses are non-leaf nodes of the expression, then the instruction also belongs to the expression, is not a leaf node of it, and its operands also belong to the expression (but may be leaf nodes).</p>
<p>NOTE: This routine will set operands of non-leaf non-root nodes to undef in order to ensure that every non-root node in the expression has <em>exactly one</em> use by a non-leaf node of the expression. This destruction means that the caller MUST either replace 'I' with a new expression or use something like RewriteExprTree to put the values back in if the routine indicates that it made a change by returning 'true'.</p>
<p>In the above example either the right operand of <a class="el" href="../../d4/dc4/structA.html">A</a> or the left operand of B will be replaced by undef. If it is B's operand then this gives: </p>
<pre class="fragment">                +        |        I
               / \       |
              +   +      |      A,  B - operand of B replaced with undef
             / \   \     |
            *   +   *    |    C,  D,  E
           / \ / \ / \   |
              +   *      |      F,  G
</pre><p>Note that such undef operands can only be reached by passing through 'I'. For example, if you visit operands recursively starting from a leaf node then you will never see such an undef operand unless you get back to 'I', which requires passing through a phi node.</p>
<p>Note that this routine may also mutate binary operators of the wrong type that have all uses inside the expression (i.e. only used by non-leaf nodes of the expression) if it can turn them into binary operators of the right type and thus make the expression bigger. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00497">497</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                                                   {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LINEARIZE: &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = I-&gt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Instruction::isAssociative(Opcode) &amp;&amp;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         Instruction::isCommutative(Opcode) &amp;&amp;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <span class="stringliteral">&quot;Expected an associative and commutative operation!&quot;</span>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// Visit all operands of the expression, keeping track of their weight (the</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// number of paths from the expression root to the operand, or if you like</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// the number of times that operand occurs in the linearized expression).</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// For example, if I = X + A, where X = A + B, then I, X and B have weight 1</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// while A has weight two.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// Worklist of non-leaf nodes (their operands are in the expression too) along</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// with their weights, representing a certain number of paths to the operator.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// If an operator occurs in the worklist multiple times then we found multiple</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// ways to get to it.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BinaryOperator*, APInt&gt;</a>, 8&gt; Worklist; <span class="comment">// (Op, Weight)</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  Worklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(I, <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>(Bitwidth, 1)));</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Leaves of the expression are values that either aren&#39;t the right kind of</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// operation (eg: a constant, or a multiply in an add tree), or are, but have</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// some uses that are not inside the expression.  For example, in I = X + X,</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// X = A + B, the value X has two uses (by I) that are in the expression.  If</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// X has any other uses, for example in a return instruction, then we consider</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// X to be a leaf, and won&#39;t analyze it further.  When we first visit a value,</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// if it has more than one use then at first we conservatively consider it to</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// be a leaf.  Later, as the expression is explored, we may discover some more</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// uses of the value from inside the expression.  If all uses turn out to be</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// from within the expression (and the value is a binary operator of the right</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// kind) then the value is no longer considered to be a leaf, and its operands</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// are explored.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// Leaves - Keeps track of the set of putative leaves as well as the number of</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// paths to each leaf seen so far.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;Value*, APInt&gt;</a> LeafMap;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  LeafMap Leaves; <span class="comment">// Leaf -&gt; Total weight so far.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> LeafOrder; <span class="comment">// Ensure deterministic leaf output order.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="preprocessor"></span>  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value*, 8&gt;</a> Visited; <span class="comment">// For sanity checking the iteration scheme.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">while</span> (!Worklist.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    std::pair&lt;BinaryOperator*, APInt&gt; <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Worklist.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    I = P.first; <span class="comment">// We examine the operands of this binary operator.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OpIdx = 0; OpIdx &lt; 2; ++OpIdx) { <span class="comment">// Visit operands.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Op = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(OpIdx);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Weight = P.second; <span class="comment">// Number of paths to this operand.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;OPERAND: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; Weight &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; <span class="stringliteral">&quot;No uses, so how did we get to it?!&quot;</span>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="comment">// If this is a binary operation of the right kind with only one use then</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// add its operands to the expression.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Op, Opcode)) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(Op) &amp;&amp; <span class="stringliteral">&quot;Not first visit!&quot;</span>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DIRECT ADD: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; Weight &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        Worklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(BO, Weight));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">// Appears to be a leaf.  Is the operand already in the set of leaves?</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      LeafMap::iterator It = Leaves.find(Op);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">if</span> (It == Leaves.end()) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment">// Not in the leaf map.  Must be the first time we saw this operand.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(Op) &amp;&amp; <span class="stringliteral">&quot;Not first visit!&quot;</span>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <span class="comment">// This value has uses not accounted for by the expression, so it is</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          <span class="comment">// not safe to modify.  Mark it as being a leaf.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ADD USES LEAF: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; Weight &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          LeafOrder.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          Leaves[Op] = Weight;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// No uses outside the expression, try morphing it.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (It != Leaves.end()) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// Already in the leaf map.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">count</a>(Op) &amp;&amp; <span class="stringliteral">&quot;In leaf map but not visited!&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="comment">// Update the number of paths to the leaf.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a838450a1f01fb48a3cc7da747418a8c5">IncorporateWeight</a>(It-&gt;second, Weight, Opcode);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#if 0   // TODO: Re-enable once PR13021 is fixed.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor"></span>        <span class="comment">// The leaf already has one use from inside the expression.  As we want</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="comment">// exactly one such use, drop this new use of the leaf.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Only one use, but we got here twice!&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(OpIdx, UndefValue::get(I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment">// If the leaf is a binary operation of the right kind and we now see</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">// that its multiple original uses were in fact all by nodes belonging</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="comment">// to the expression, then no longer consider it to be a leaf and add</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// its operands to the expression.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Op, Opcode)) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;UNLEAF: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; It-&gt;second &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          Worklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(BO, It-&gt;second));</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          Leaves.erase(It);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">// If we still have uses that are not accounted for by the expression</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">// then it is not safe to modify the value.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="comment">// No uses outside the expression, try morphing it.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        Weight = It-&gt;second;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        Leaves.erase(It); <span class="comment">// Since the value may be morphed below.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// At this point we have a value which, first of all, is not a binary</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="comment">// expression of the right kind, and secondly, is only used inside the</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// expression.  This means that it can safely be modified.  See if we</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="comment">// can usefully morph it into an expression of the right kind.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((!isa&lt;Instruction&gt;(Op) ||</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;              cast&lt;Instruction&gt;(Op)-&gt;getOpcode() != Opcode) &amp;&amp;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;             <span class="stringliteral">&quot;Should have been handled above!&quot;</span>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Has uses outside the expression tree!&quot;</span>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// If this is a multiply expression, turn any internal negations into</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// multiplies by -1 so they can be reassociated.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (Opcode == Instruction::Mul &amp;&amp; BO &amp;&amp; BinaryOperator::isNeg(BO)) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MORPH LEAF: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; Weight &lt;&lt; <span class="stringliteral">&quot;) TO &quot;</span>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        BO = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#abd28e5089281e47a20646dd504218f3b">LowerNegateToMultiply</a>(BO);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *BO &lt;&lt; <span class="charliteral">&#39;n&#39;</span>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        Worklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(BO, Weight));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">// Failed to morph into an expression of the right type.  This really is</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="comment">// a leaf.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ADD LEAF: &quot;</span> &lt;&lt; *Op &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; Weight &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!<a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Op, Opcode) &amp;&amp; <span class="stringliteral">&quot;Value was morphed?&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      LeafOrder.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      Leaves[Op] = Weight;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// The leaves, repeated according to their weights, represent the linearized</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// form of the expression.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = LeafOrder.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = LeafOrder[i];</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    LeafMap::iterator It = Leaves.find(V);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span> (It == Leaves.end())</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">// Node initially thought to be a leaf wasn&#39;t.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!<a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(V, Opcode) &amp;&amp; <span class="stringliteral">&quot;Shouldn&#39;t be a leaf!&quot;</span>);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Weight = It-&gt;second;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (Weight.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>())</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="comment">// Leaf already output or weight reduction eliminated it.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// Ensure the leaf is only output once.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    It-&gt;second = 0;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    Ops.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(V, Weight));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// For nilpotent operations or addition there may be no operands, for example</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// because the expression was &quot;X xor X&quot; or consisted of 2^Bitwidth additions:</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// in both cases the weight reduces to 0 causing the value to be skipped.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">if</span> (Ops.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Identity = ConstantExpr::getBinOpIdentity(Opcode, I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Identity &amp;&amp; <span class="stringliteral">&quot;Associative operation without identity!&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    Ops.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(Identity, <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>(Bitwidth, 1)));</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_abd28e5089281e47a20646dd504218f3b"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#abd28e5089281e47a20646dd504218f3b">LowerNegateToMultiply</a></div><div class="ttdeci">static BinaryOperator * LowerNegateToMultiply(Instruction *Neg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00319">Reassociate.cpp:319</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a99bfcab10bf4bc0a3a712eb7bd215965"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(PtrType Ptr) const </div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00267">SmallPtrSet.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00406">SmallVector.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a963c4f881fbc3e316e8260bf98453ce4"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">llvm::APInt::isMinValue</a></div><div class="ttdeci">bool isMinValue() const </div><div class="ttdoc">Determine if this is the smallest unsigned value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00363">APInt.h:363</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a838450a1f01fb48a3cc7da747418a8c5"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a838450a1f01fb48a3cc7da747418a8c5">IncorporateWeight</a></div><div class="ttdeci">static void IncorporateWeight(APInt &amp;LHS, const APInt &amp;RHS, unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00349">Reassociate.cpp:349</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a0bd7f001f64bd74e1ed4bc26d7e47b64"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a></div><div class="ttdeci">static BinaryOperator * isReassociableOp(Value *V, unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00236">Reassociate.cpp:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd28e5089281e47a20646dd504218f3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>* LowerNegateToMultiply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Neg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LowerNegateToMultiply - Replace 0-X with X*-1. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00319">319</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                                               {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Cst = Constant::getAllOnesValue(Neg-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Res =</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    BinaryOperator::CreateMul(Neg-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Cst, <span class="stringliteral">&quot;&quot;</span>,Neg);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  Neg-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, Constant::getNullValue(Neg-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())); <span class="comment">// Drop use of op.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  Res-&gt;takeName(Neg);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  Neg-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Res);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  Res-&gt;setDebugLoc(Neg-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48b0ec8ef22f4b5a509119d94069f7fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* NegateValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>BI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>NegateValue - Insert instructions before the instruction pointed to by BI, that computes the negative version of the value specified. The negative version of the value is returned, and BI is left pointing at the instruction that should be processed next by the reassociation pass. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00836">836</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                                                     {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getNeg(<a class="code" href="../../db/db2/structC.html">C</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// We are trying to expose opportunity for reassociation.  One of the things</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// that we want to do to achieve this is to push a negation as deep into an</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// expression chain as possible, to expose the add instructions.  In practice,</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// this means that we turn this:</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">//   X = -(A+12+C+D)   into    X = -A + -12 + -C + -D = -12 + -A + -C + -D</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// so that later, a: Y = 12+X could get reassociated with the -12 to eliminate</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// the constants.  We assume that instcombine will clean up the mess later if</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// we introduce tons of unnecessary negation instructions.</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(V, Instruction::Add)) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">// Push the negates through the add.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setOperand(0, <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), BI));</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setOperand(1, <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), BI));</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">// We must move the add instruction here, because the neg instructions do</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// not dominate the old add instruction in general.  By moving it, we are</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// assured that the neg instructions we just inserted dominate the</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// instruction we are about to insert after them.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveBefore(BI);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setName(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName()+<span class="stringliteral">&quot;.neg&quot;</span>);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// Okay, we need to materialize a negated version of V with an instruction.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// Scan the use lists of V to see if we have one already.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (!BinaryOperator::isNeg(U)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// We found one!  Now we have to make sure that the definition dominates</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// this use.  We do this by moving it to the entry block (if it is a</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// non-instruction value) or right after the definition.  These negates will</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// be zapped by reassociate later, so we don&#39;t need much finesse here.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *TheNeg = cast&lt;BinaryOperator&gt;(U);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Verify that the negate is in this function, V might be a constant expr.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (TheNeg-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>() != BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>())</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPt;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InstInput = dyn_cast&lt;Instruction&gt;(V)) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/ded/classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(InstInput)) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        InsertPt = II-&gt;getNormalDest()-&gt;begin();</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        InsertPt = InstInput;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        ++InsertPt;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="keywordflow">while</span> (isa&lt;PHINode&gt;(InsertPt)) ++InsertPt;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      InsertPt = TheNeg-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    TheNeg-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(InsertPt);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> TheNeg;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Insert a &#39;neg&#39; instruction that subtracts the value from zero to get the</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// negation.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">return</span> BinaryOperator::CreateNeg(V, V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.neg&quot;</span>, BI);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a48b0ec8ef22f4b5a509119d94069f7fb"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a48b0ec8ef22f4b5a509119d94069f7fb">NegateValue</a></div><div class="ttdeci">static Value * NegateValue(Value *V, Instruction *BI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00836">Reassociate.cpp:836</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00387">Function.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00095">Instruction.cpp:95</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a0bd7f001f64bd74e1ed4bc26d7e47b64"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a></div><div class="ttdeci">static BinaryOperator * isReassociableOp(Value *V, unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00236">Reassociate.cpp:236</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="../../d3/ded/classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02957">Instructions.h:2957</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9ebb022565fd67aef7b89a88b69dca9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* OptimizeAndOrXor </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeAndOrXor - Optimize a series of operands to an 'and', 'or', or 'xor' instruction. This optimizes based on identities. If it can be reduced to a single Value, it is returned, otherwise the Ops list is mutated as necessary. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l01076">1076</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                                                                 {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// Scan the operand lists looking for X and ~X pairs, along with X,X pairs.</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// If we find any, we can simplify the expression. X&amp;~X == 0, X|~X == -1.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// First, check for X and ~X in the operand list.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(i &lt; Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (BinaryOperator::isNot(Ops[i].Op)) {    <span class="comment">// Cannot occur for ^.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="code" href="../../dc/d16/ErlangGCPrinter_8cpp.html#a2ee26aa2a311452eade9497011b86343">X</a> = BinaryOperator::getNotArgument(Ops[i].Op);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordtype">unsigned</span> FoundX = <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a009b54c05762d1e08d2ed83a0f26865a">FindInOperandList</a>(Ops, i, X);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">if</span> (FoundX != i) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">if</span> (Opcode == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>)   <span class="comment">// ...&amp;X&amp;~X = 0</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;          <span class="keywordflow">return</span> Constant::getNullValue(X-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">if</span> (Opcode == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>)    <span class="comment">// ...|X|~X = -1</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;          <span class="keywordflow">return</span> Constant::getAllOnesValue(X-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// Next, check for duplicate pairs of values, which we assume are next to</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// each other, due to our sorting criteria.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(i &lt; Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (i+1 != Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp; Ops[i+1].Op == Ops[i].Op) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (Opcode == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> || Opcode == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="comment">// Drop duplicate values for And and Or.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        Ops.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>()+i);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        --i; --e;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        ++NumAnnihil;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="comment">// Drop pairs of values for Xor.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Opcode == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">if</span> (e == 2)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">return</span> Constant::getNullValue(Ops[0].Op-&gt;getType());</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="comment">// Y ^ X^X -&gt; Y</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      Ops.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>()+i, Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>()+i+2);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      i -= 1; e -= 2;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      ++NumAnnihil;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01875">APInt.h:1875</a></div></div>
<div class="ttc" id="ErlangGCPrinter_8cpp_html_a2ee26aa2a311452eade9497011b86343"><div class="ttname"><a href="../../dc/d16/ErlangGCPrinter_8cpp.html#a2ee26aa2a311452eade9497011b86343">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;,&quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00450">SmallVector.h:450</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00113">SmallVector.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a009b54c05762d1e08d2ed83a0f26865a"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a009b54c05762d1e08d2ed83a0f26865a">FindInOperandList</a></div><div class="ttdeci">static unsigned FindInOperandList(SmallVectorImpl&lt; ValueEntry &gt; &amp;Ops, unsigned i, Value *X)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00968">Reassociate.cpp:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a035830591fff503ea933e8c88c84f3f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void PrintOps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; ValueEntry &gt; &amp;&#160;</td>
          <td class="paramname"><em>Ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PrintOps - Print out the expression identified in the Ops list. </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00064">64</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                                                             {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *M = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="../../d7/dce/FastISelEmitter_8cpp.html#af9c98c6400764781f845594d9436f8b5">Instruction::getOpcodeName</a>(I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;       &lt;&lt; *Ops[0].Op-&gt;getType() &lt;&lt; <span class="charliteral">&#39;\t&#39;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Ops.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    Ops[i].Op-&gt;printAsOperand(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), <span class="keyword">false</span>, M);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, #&quot;</span> &lt;&lt; Ops[i].Rank &lt;&lt; <span class="stringliteral">&quot;] &quot;</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00115">Module.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="FastISelEmitter_8cpp_html_af9c98c6400764781f845594d9436f8b5"><div class="ttname"><a href="../../d7/dce/FastISelEmitter_8cpp.html#af9c98c6400764781f845594d9436f8b5">getOpcodeName</a></div><div class="ttdeci">static std::string getOpcodeName(Record *Op, CodeGenDAGPatterns &amp;CGP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dce/FastISelEmitter_8cpp_source.html#l00390">FastISelEmitter.cpp:390</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a19d2abc5a580be68aa7751c0e1ce7263"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ShouldBreakUpSubtract </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ShouldBreakUpSubtract - Return true if we should break up this subtract of X-Y into (X + -Y). </p>

<p>Definition at line <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html#l00902">902</a> of file <a class="el" href="../../d3/d66/Reassociate_8cpp_source.html">Reassociate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                                    {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// If this is a negation, we can&#39;t split it up!</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">if</span> (BinaryOperator::isNeg(Sub))</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// Don&#39;t bother to break this up unless either the LHS is an associable add or</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// subtract or if this is only used by one.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Instruction::Add) ||</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Instruction::Sub))</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Instruction::Add) ||</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Instruction::Sub))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">if</span> (Sub-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      (<a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>(), Instruction::Add) ||</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;       <a class="code" href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a>(Sub-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>(), Instruction::Sub)))</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="Reassociate_8cpp_html_a0bd7f001f64bd74e1ed4bc26d7e47b64"><div class="ttname"><a href="../../d3/d66/Reassociate_8cpp.html#a0bd7f001f64bd74e1ed4bc26d7e47b64">isReassociableOp</a></div><div class="ttdeci">static BinaryOperator * isReassociableOp(Value *V, unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d66/Reassociate_8cpp_source.html#l00236">Reassociate.cpp:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="accc461d406589e0d5f010481a3095dc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumChanged&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of insts reassociated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad23c4e4980f845c7d3d09143673718b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAnnihil&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of expr tree annihilated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="addf135572039b35513623e9a82aee929"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumFactor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of multiplies factored&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_f536250b88bf40822ad9f2d04ff3a034.html">Scalar</a></li><li class="navelem"><a class="el" href="../../d3/d66/Reassociate_8cpp.html">Reassociate.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:45:17 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
