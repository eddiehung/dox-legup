<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: GlobalOpt.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/d9c/GlobalOpt_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">GlobalOpt.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/df6/Transforms_2IPO_8h_source.html">llvm/Transforms/IPO.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d73/DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d98/STLExtras_8h_source.html">llvm/ADT/STLExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d89/SmallPtrSet_8h_source.html">llvm/ADT/SmallPtrSet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/d64/SmallSet_8h_source.html">llvm/ADT/SmallSet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d33/SmallVector_8h_source.html">llvm/ADT/SmallVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d0a/ConstantFolding_8h_source.html">llvm/Analysis/ConstantFolding.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/de0/MemoryBuiltins_8h_source.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/daf/CallSite_8h_source.html">llvm/IR/CallSite.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d55/CallingConv_8h_source.html">llvm/IR/CallingConv.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d45/Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/df5/DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html">llvm/IR/GetElementPtrTypeIterator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dd5/Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/dc7/Module_8h_source.html">llvm/IR/Module.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/ddf/Operator_8h_source.html">llvm/IR/Operator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../da/d31/ValueHandle_8h_source.html">llvm/IR/ValueHandle.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d29/Pass_8h_source.html">llvm/Pass.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d3f/ErrorHandling_8h_source.html">llvm/Support/ErrorHandling.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dab/MathExtras_8h_source.html">llvm/Support/MathExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d82/raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d1a/TargetLibraryInfo_8h_source.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/dab/CtorUtils_8h_source.html">llvm/Transforms/Utils/CtorUtils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/d81/GlobalStatus_8h_source.html">llvm/Transforms/Utils/GlobalStatus.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d0/d96/ModuleUtils_8h_source.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</code><br/>
<code>#include &lt;algorithm&gt;</code><br/>
<code>#include &lt;deque&gt;</code><br/>
</div>
<p><a href="../../d6/d9c/GlobalOpt_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;globalopt&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7c6c460a78701817b3c5a6bb5d788272"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a7c6c460a78701817b3c5a6bb5d788272">STATISTIC</a> (NumMarked,&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> marked constant&quot;)</td></tr>
<tr class="separator:a7c6c460a78701817b3c5a6bb5d788272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ee612df6b5d8b666b63bc5f592091f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ab5ee612df6b5d8b666b63bc5f592091f">STATISTIC</a> (NumUnnamed,&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> marked unnamed_addr&quot;)</td></tr>
<tr class="separator:ab5ee612df6b5d8b666b63bc5f592091f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ca6a508657d3a3222fb09a30ee0eed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a92ca6a508657d3a3222fb09a30ee0eed">STATISTIC</a> (NumSRA,&quot;Number of aggregate <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> broken into <a class="el" href="../../d3/dde/ArgumentPromotion_8cpp.html#ad6f471355f16d777b075f7d1884d3622">scalars</a>&quot;)</td></tr>
<tr class="separator:a92ca6a508657d3a3222fb09a30ee0eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9420c1be8c72dcd5872d59dcb2c68558"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a9420c1be8c72dcd5872d59dcb2c68558">STATISTIC</a> (NumHeapSRA,&quot;Number of heap objects SRA'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;)</td></tr>
<tr class="separator:a9420c1be8c72dcd5872d59dcb2c68558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6747c5fc541c115ca1d7e3e13b94d4ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a6747c5fc541c115ca1d7e3e13b94d4ed">STATISTIC</a> (NumSubstitute,&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> with initializers stored into them&quot;)</td></tr>
<tr class="separator:a6747c5fc541c115ca1d7e3e13b94d4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a242796495d087689e5974d45ce929b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a5a242796495d087689e5974d45ce929b">STATISTIC</a> (NumDeleted,&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> deleted&quot;)</td></tr>
<tr class="separator:a5a242796495d087689e5974d45ce929b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2868127d4513caa06afdb3aac05127f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a2868127d4513caa06afdb3aac05127f2">STATISTIC</a> (NumFnDeleted,&quot;Number of <a class="el" href="../../d9/d58/LoopExtractor_8cpp.html#ac6229e61e0214888a5ad66ac60cb36ec">functions</a> deleted&quot;)</td></tr>
<tr class="separator:a2868127d4513caa06afdb3aac05127f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017f0480c069b3d669c55362498712ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a017f0480c069b3d669c55362498712ea">STATISTIC</a> (NumGlobUses,&quot;Number of global uses devirtualized&quot;)</td></tr>
<tr class="separator:a017f0480c069b3d669c55362498712ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57bd2d525288ccfe6cc8e665ffe1d151"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a57bd2d525288ccfe6cc8e665ffe1d151">STATISTIC</a> (NumLocalized,&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> localized&quot;)</td></tr>
<tr class="separator:a57bd2d525288ccfe6cc8e665ffe1d151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b54f08be2f986d98b602c695805b7d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a9b54f08be2f986d98b602c695805b7d1">STATISTIC</a> (NumShrunkToBool,&quot;Number of global vars shrunk to booleans&quot;)</td></tr>
<tr class="separator:a9b54f08be2f986d98b602c695805b7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa2d02e8571cda1f9cfb4f0ca72bae2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a9aa2d02e8571cda1f9cfb4f0ca72bae2">STATISTIC</a> (NumFastCallFns,&quot;Number of <a class="el" href="../../d9/d58/LoopExtractor_8cpp.html#ac6229e61e0214888a5ad66ac60cb36ec">functions</a> converted to fastcc&quot;)</td></tr>
<tr class="separator:a9aa2d02e8571cda1f9cfb4f0ca72bae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74434e3335b4763216f66e62d3f5197e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a74434e3335b4763216f66e62d3f5197e">STATISTIC</a> (NumCtorsEvaluated,&quot;Number of static ctors evaluated&quot;)</td></tr>
<tr class="separator:a74434e3335b4763216f66e62d3f5197e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a59ff13fca7e242c7985162f5c6a306"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a9a59ff13fca7e242c7985162f5c6a306">STATISTIC</a> (NumNestRemoved,&quot;Number of nest <a class="el" href="../../d2/d92/FunctionAttrs_8cpp.html#a07522de877d8a6f09f42438dab01a434">attributes</a> removed&quot;)</td></tr>
<tr class="separator:a9a59ff13fca7e242c7985162f5c6a306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec66735becbd98e61f9e8e8f719f359"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aeec66735becbd98e61f9e8e8f719f359">STATISTIC</a> (NumAliasesResolved,&quot;Number of global aliases resolved&quot;)</td></tr>
<tr class="separator:aeec66735becbd98e61f9e8e8f719f359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53f6d5a2288069c28b77631870cb0f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ab53f6d5a2288069c28b77631870cb0f7">STATISTIC</a> (NumAliasesRemoved,&quot;Number of global aliases eliminated&quot;)</td></tr>
<tr class="separator:ab53f6d5a2288069c28b77631870cb0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbe33c6b315527ee03f023e6657d301"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aedbe33c6b315527ee03f023e6657d301">STATISTIC</a> (NumCXXDtorsRemoved,&quot;Number of global <a class="el" href="../../db/db2/structC.html">C</a>++ destructors removed&quot;)</td></tr>
<tr class="separator:aedbe33c6b315527ee03f023e6657d301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c164feceeaa7db7809c9c82c4b7568"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ae7c164feceeaa7db7809c9c82c4b7568">INITIALIZE_PASS_BEGIN</a> (GlobalOpt,&quot;globalopt&quot;,&quot;Global Variable <a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a23fd01d07baea6623f8b2019dd8f2f21">Optimizer</a>&quot;, false, <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>) <a class="el" href="../../dc/d6f/JumpInstrTables_8cpp.html#afdca0f03e5390cb037c356a5e4ab4363">INITIALIZE_PASS_END</a>(GlobalOpt</td></tr>
<tr class="separator:ae7c164feceeaa7db7809c9c82c4b7568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2885fc42e68606f270bfd3180d5f26"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV)</td></tr>
<tr class="separator:ace2885fc42e68606f270bfd3180d5f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae32894671894c23afc705c218f76ea03"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ae32894671894c23afc705c218f76ea03">IsSafeComputationToRemove</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:ae32894671894c23afc705c218f76ea03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60254fdb6128ce676768cdc8f7227433"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a60254fdb6128ce676768cdc8f7227433">CleanupPointerRootUsers</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:a60254fdb6128ce676768cdc8f7227433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc332b04dd81f0f8973d20754ad9dc66"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../df/d88/classllvm_1_1Init.html">Init</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:acc332b04dd81f0f8973d20754ad9dc66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc21b8049c491d3f4b42eaeec97f6cc7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#acc21b8049c491d3f4b42eaeec97f6cc7">isSafeSROAElementUse</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V)</td></tr>
<tr class="separator:acc21b8049c491d3f4b42eaeec97f6cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6407ecfeeaabe2cb5df433a895498b58"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a6407ecfeeaabe2cb5df433a895498b58">IsUserOfGlobalSafeForSRA</a> (<a class="el" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U, <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV)</td></tr>
<tr class="separator:a6407ecfeeaabe2cb5df433a895498b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732909ea600e927d4123ba6f844c4035"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a732909ea600e927d4123ba6f844c4035">GlobalUsersSafeToSRA</a> (<a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV)</td></tr>
<tr class="separator:a732909ea600e927d4123ba6f844c4035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c88cc0fdb561f4a44ebd45b201a07dc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a7c88cc0fdb561f4a44ebd45b201a07dc">SRAGlobal</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a7c88cc0fdb561f4a44ebd45b201a07dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62584dc0c8f12c3b4fc85f84dbd08313"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 8 &gt; &amp;PHIs)</td></tr>
<tr class="separator:a62584dc0c8f12c3b4fc85f84dbd08313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6534eab7f2125fdeff4232f790c07e05"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a6534eab7f2125fdeff4232f790c07e05">AllUsesOfLoadedValueWillTrapIfNull</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV)</td></tr>
<tr class="separator:a6534eab7f2125fdeff4232f790c07e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef572ae661cf9f5b14651ef952629c10"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NewV)</td></tr>
<tr class="separator:aef572ae661cf9f5b14651ef952629c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9767ff7ade0f492d8ba272ec52f6b74"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad9767ff7ade0f492d8ba272ec52f6b74">OptimizeAwayTrappingUsesOfLoads</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *LV, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:ad9767ff7ade0f492d8ba272ec52f6b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbae63c4ac9d6cc5251c7e88f9fc2242"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#acbae63c4ac9d6cc5251c7e88f9fc2242">ConstantPropUsersOf</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:acbae63c4ac9d6cc5251c7e88f9fc2242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a3d2441b80cfd0f2c6e78bca95d53f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ac3a3d2441b80cfd0f2c6e78bca95d53f">OptimizeGlobalAddressOfMalloc</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *AllocTy, <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *NElements, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:ac3a3d2441b80cfd0f2c6e78bca95d53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad509f84445ce77b94e2d70042449202f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 8 &gt; &amp;PHIs)</td></tr>
<tr class="separator:ad509f84445ce77b94e2d70042449202f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35445872809e31831849ca99f41540d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Alloc, <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV)</td></tr>
<tr class="separator:a35445872809e31831849ca99f41540d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5abddaa1ca2270d02c0344679d425538"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a5abddaa1ca2270d02c0344679d425538">LoadUsesSimpleEnoughForHeapSRA</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 32 &gt; &amp;LoadUsingPHIs, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 32 &gt; &amp;LoadUsingPHIsPerLoad)</td></tr>
<tr class="separator:a5abddaa1ca2270d02c0344679d425538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab190ff057361c31a374b5feefc10f586"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ab190ff057361c31a374b5feefc10f586">AllGlobalLoadUsesSimpleEnoughForHeapSRA</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *StoredVal)</td></tr>
<tr class="separator:ab190ff057361c31a374b5feefc10f586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f39e494317a93a9f9c798714c44029"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, unsigned FieldNo, <a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;PHIsToRewrite)</td></tr>
<tr class="separator:a33f39e494317a93a9f9c798714c44029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b41afcb0ed58c8ecb4b49fc1554c583"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a3b41afcb0ed58c8ecb4b49fc1554c583">RewriteHeapSROALoadUser</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *LoadUser, <a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;PHIsToRewrite)</td></tr>
<tr class="separator:a3b41afcb0ed58c8ecb4b49fc1554c583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423016bbd81dcc13bc4855bf1bebca9b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a423016bbd81dcc13bc4855bf1bebca9b">RewriteUsesOfLoadForHeapSRoA</a> (<a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *Load, <a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;PHIsToRewrite)</td></tr>
<tr class="separator:a423016bbd81dcc13bc4855bf1bebca9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b41d9e9bd58de6b67b26bc33126c8a3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a8b41d9e9bd58de6b67b26bc33126c8a3">PerformHeapAllocSRoA</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NElems, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:a8b41d9e9bd58de6b67b26bc33126c8a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec25966d7b058f58e1223c51d9f3ebb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aeec25966d7b058f58e1223c51d9f3ebb">TryToOptimizeStoreOfMallocToGlobal</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *AllocTy, <a class="el" href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> Ordering, <a class="el" href="../../de/d27/classllvm_1_1Module.html#ab3ec4cb27a9893405bb7eb997d5b716d">Module::global_iterator</a> &amp;GVI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:aeec25966d7b058f58e1223c51d9f3ebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccd7f8dd63fd17b03ffc8673e8a3c71"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a0ccd7f8dd63fd17b03ffc8673e8a3c71">OptimizeOnceStoredGlobal</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StoredOnceVal, <a class="el" href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> Ordering, <a class="el" href="../../de/d27/classllvm_1_1Module.html#ab3ec4cb27a9893405bb7eb997d5b716d">Module::global_iterator</a> &amp;GVI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:a0ccd7f8dd63fd17b03ffc8673e8a3c71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77de6d50432bef62e38fd24f2030026c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a77de6d50432bef62e38fd24f2030026c">TryToShrinkGlobalToBoolean</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *OtherVal)</td></tr>
<tr class="separator:a77de6d50432bef62e38fd24f2030026c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b97d3981d965c0884878bca5be437ff"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a7b97d3981d965c0884878bca5be437ff">ChangeCalleesToFastCall</a> (<a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *<a class="el" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)</td></tr>
<tr class="separator:a7b97d3981d965c0884878bca5be437ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3494615b004b675f8266605bcd0421"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/d16/classllvm_1_1AttributeSet.html">AttributeSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#acc3494615b004b675f8266605bcd0421">StripNest</a> (<a class="el" href="../../d5/d1d/classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="el" href="../../db/db2/structC.html">C</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/d16/classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;Attrs)</td></tr>
<tr class="separator:acc3494615b004b675f8266605bcd0421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d5794196f5b9b7477429aec29ad157"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ae7d5794196f5b9b7477429aec29ad157">RemoveNestAttribute</a> (<a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *<a class="el" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)</td></tr>
<tr class="separator:ae7d5794196f5b9b7477429aec29ad157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0048936ebbb543ade082597abf2370"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a0a0048936ebbb543ade082597abf2370">isProfitableToMakeFastCC</a> (<a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *<a class="el" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)</td></tr>
<tr class="separator:a0a0048936ebbb543ade082597abf2370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa880e570cc60e683e3f4a528a75c098e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *, 8 &gt; &amp;SimpleConstants, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:aa880e570cc60e683e3f4a528a75c098e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a440432f716abf9f965015d99ee6f00aa"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a440432f716abf9f965015d99ee6f00aa">isSimpleEnoughValueToCommitHelper</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *, 8 &gt; &amp;SimpleConstants, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a440432f716abf9f965015d99ee6f00aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3622348f4394efe3dbe9b1e6366e7235"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a3622348f4394efe3dbe9b1e6366e7235">isSimpleEnoughPointerToCommit</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>)</td></tr>
<tr class="separator:a3622348f4394efe3dbe9b1e6366e7235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e0f87ba24074dd68abfa5a29e7db6a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../df/d88/classllvm_1_1Init.html">Init</a>, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Val, <a class="el" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *Addr, unsigned OpNo)</td></tr>
<tr class="separator:ad5e0f87ba24074dd68abfa5a29e7db6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a261cccda692dd81df2689f3d494ad4d9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a261cccda692dd81df2689f3d494ad4d9">CommitValueTo</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Val, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Addr)</td></tr>
<tr class="separator:a261cccda692dd81df2689f3d494ad4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba8b01879e70a5c086b4bede17ed97c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a3ba8b01879e70a5c086b4bede17ed97c">EvaluateStaticConstructor</a> (<a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *<a class="el" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:a3ba8b01879e70a5c086b4bede17ed97c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ef9dbac3fbf9cc30e63d86bf9d7e34"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *<a class="el" href="../../d4/dc4/structA.html">A</a>, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *B)</td></tr>
<tr class="separator:ad9ef9dbac3fbf9cc30e63d86bf9d7e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e14161646470e3bf6e583ffe2f6bf8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a89e14161646470e3bf6e583ffe2f6bf8">setUsedInitializer</a> (<a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;V, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *, 8 &gt; <a class="el" href="../../df/d88/classllvm_1_1Init.html">Init</a>)</td></tr>
<tr class="separator:a89e14161646470e3bf6e583ffe2f6bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa93649aba5a7b6388adff903a4a6085"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a> (<a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;U)</td></tr>
<tr class="separator:afa93649aba5a7b6388adff903a4a6085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31232d0640fc51e777d8e48e48f45c89"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a> (<a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;U)</td></tr>
<tr class="separator:a31232d0640fc51e777d8e48e48f45c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef58549c87cd57b83dcd7ce2d92cc03"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a> (<a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;U)</td></tr>
<tr class="separator:a6ef58549c87cd57b83dcd7ce2d92cc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38a6c2bc68401a0464fc5f818ffc3a2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ac38a6c2bc68401a0464fc5f818ffc3a2">hasUsesToReplace</a> (<a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, LLVMUsed &amp;U, bool &amp;RenameTarget)</td></tr>
<tr class="separator:ac38a6c2bc68401a0464fc5f818ffc3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38e073a20e77512a43dcdc9d2dea742"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#ad38e073a20e77512a43dcdc9d2dea742">FindCXAAtExit</a> (<a class="el" href="../../de/d27/classllvm_1_1Module.html">Module</a> &amp;M, <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI)</td></tr>
<tr class="separator:ad38e073a20e77512a43dcdc9d2dea742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad94ee43b92bdf7558036edccd3fcaa"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a2ad94ee43b92bdf7558036edccd3fcaa">cxxDtorIsEmpty</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> &amp;Fn, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *, 8 &gt; &amp;CalledFunctions)</td></tr>
<tr class="separator:a2ad94ee43b92bdf7558036edccd3fcaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a549419dff8d79e0f9e6f6e76770ef251"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a549419dff8d79e0f9e6f6e76770ef251">globalopt</a></td></tr>
<tr class="separator:a549419dff8d79e0f9e6f6e76770ef251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23fd01d07baea6623f8b2019dd8f2f21"><td class="memItemLeft" align="right" valign="top">Global Variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a23fd01d07baea6623f8b2019dd8f2f21">Optimizer</a></td></tr>
<tr class="separator:a23fd01d07baea6623f8b2019dd8f2f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8181c471fa8c685aa401ba2dedd448"><td class="memItemLeft" align="right" valign="top">Global Variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#aea8181c471fa8c685aa401ba2dedd448">false</a></td></tr>
<tr class="separator:aea8181c471fa8c685aa401ba2dedd448"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;globalopt&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00049">49</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab190ff057361c31a374b5feefc10f586"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool AllGlobalLoadUsesSimpleEnoughForHeapSRA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>StoredVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AllGlobalLoadUsesSimpleEnoughForHeapSRA - If all users of values loaded from GV are simple enough to perform HeapSRA, return true. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01101">1101</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                                                                            {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode*, 32&gt;</a> LoadUsingPHIs;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode*, 32&gt;</a> LoadUsingPHIsPerLoad;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a5abddaa1ca2270d02c0344679d425538">LoadUsesSimpleEnoughForHeapSRA</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, LoadUsingPHIs,</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                          LoadUsingPHIsPerLoad))</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      LoadUsingPHIsPerLoad.<a class="code" href="../../d4/dd1/classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// If we reach here, we know that all uses of the loads and transitive uses</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// (through PHI nodes) are simple enough to transform.  However, we don&#39;t know</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// that all inputs the to the PHI nodes are in the same equivalence sets.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="comment">// Check to verify that all operands of the PHIs are either PHIS that can be</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// transformed, loads from GV, or MI itself.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode*, 32&gt;::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LoadUsingPHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a6068bbc6011a275c906dd6618b46a57a">begin</a>()</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;       , E = LoadUsingPHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a429c2bd6ae05fb65e6275f56dd572759">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> op = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); op != e; ++op) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(op);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="comment">// PHI of the stored value itself is ok.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">if</span> (InVal == StoredVal) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *InPN = dyn_cast&lt;PHINode&gt;(InVal)) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="comment">// One of the PHIs in our set is (optimistically) ok.</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span> (LoadUsingPHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">count</a>(InPN))</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="comment">// Load from GV is ok.</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(InVal))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getOperand(0) == GV)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="comment">// UNDEF? NULL?</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="comment">// Anything else is rejected.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a99bfcab10bf4bc0a3a712eb7bd215965"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(PtrType Ptr) const </div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00267">SmallPtrSet.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="../../d4/dd1/classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00080">SmallPtrSet.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a6068bbc6011a275c906dd6618b46a57a"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a6068bbc6011a275c906dd6618b46a57a">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00279">SmallPtrSet.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a429c2bd6ae05fb65e6275f56dd572759"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a429c2bd6ae05fb65e6275f56dd572759">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00282">SmallPtrSet.h:282</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a5abddaa1ca2270d02c0344679d425538"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a5abddaa1ca2270d02c0344679d425538">LoadUsesSimpleEnoughForHeapSRA</a></div><div class="ttdeci">static bool LoadUsesSimpleEnoughForHeapSRA(const Value *V, SmallPtrSet&lt; const PHINode *, 32 &gt; &amp;LoadUsingPHIs, SmallPtrSet&lt; const PHINode *, 32 &gt; &amp;LoadUsingPHIsPerLoad)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01049">GlobalOpt.cpp:1049</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6534eab7f2125fdeff4232f790c07e05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool AllUsesOfLoadedValueWillTrapIfNull </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AllUsesOfLoadedValueWillTrapIfNull - Return true if all uses of any loads from GV will trap if the loaded value is null. Note that this also permits comparisons of the loaded value against null, as a special case. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00657">657</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                                                         {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode*, 8&gt;</a> PHIs;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, PHIs))</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="comment">// Ignore stores to the global.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="comment">// We don&#39;t know or understand this user, bail out.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;UNKNOWN USER OF GLOBAL!: &quot; &lt;&lt; *U;</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a62584dc0c8f12c3b4fc85f84dbd08313"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a></div><div class="ttdeci">static bool AllUsesOfValueWillTrapIfNull(const Value *V, SmallPtrSet&lt; const PHINode *, 8 &gt; &amp;PHIs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00614">GlobalOpt.cpp:614</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62584dc0c8f12c3b4fc85f84dbd08313"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool AllUsesOfValueWillTrapIfNull </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>PHIs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AllUsesOfValueWillTrapIfNull - Return true if all users of the specified value will trap if the value is dynamically null. PHIs keeps track of any phi nodes we've seen to avoid reprocessing them. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00614">614</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                                                               {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">// Will trap.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">if</span> (SI-&gt;getOperand(0) == V) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;NONTRAPPING USE: &quot; &lt;&lt; *U;</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Storing the value.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(U)) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;getCalledValue() != V) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;NONTRAPPING USE: &quot; &lt;&lt; *U;</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not calling the ptr</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d3/ded/classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(U)) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getCalledValue() != V) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;NONTRAPPING USE: &quot; &lt;&lt; *U;</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not calling the ptr</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *CI = dyn_cast&lt;BitCastInst&gt;(U)) {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a>(CI, PHIs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a>(GEPI, PHIs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(U)) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">// If we&#39;ve already seen this phi node, ignore it, it has already been</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="comment">// checked.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">if</span> (PHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(PN) &amp;&amp; !<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a>(PN, PHIs))</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ICmpInst&gt;(U) &amp;&amp;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;               isa&lt;ConstantPointerNull&gt;(U-&gt;getOperand(1))) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="comment">// Ignore icmp X, null</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;NONTRAPPING USE: &quot; &lt;&lt; *U;</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01227">Instructions.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a62584dc0c8f12c3b4fc85f84dbd08313"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a62584dc0c8f12c3b4fc85f84dbd08313">AllUsesOfValueWillTrapIfNull</a></div><div class="ttdeci">static bool AllUsesOfValueWillTrapIfNull(const Value *V, SmallPtrSet&lt; const PHINode *, 8 &gt; &amp;PHIs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00614">GlobalOpt.cpp:614</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="../../d3/ded/classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02957">Instructions.h:2957</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b97d3981d965c0884878bca5be437ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ChangeCalleesToFastCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td>
          <td class="paramname"><em>F</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ChangeCalleesToFastCall - Walk all of the direct calls of the specified function, changing them to FastCC. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01863">1863</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                                                 {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="../../d2/d8d/classllvm_1_1CallSite.html">CallSite</a> CS(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    CS.setCallingConv(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974abc8e2ee40a84687a9e12fd08784b87ba">CallingConv::Fast</a>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974abc8e2ee40a84687a9e12fd08784b87ba"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974abc8e2ee40a84687a9e12fd08784b87ba">llvm::CallingConv::Fast</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00039">CallingConv.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="../../d2/d8d/classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daf/CallSite_8h_source.html#l00350">CallSite.h:350</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc332b04dd81f0f8973d20754ad9dc66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CleanupConstantGlobalUsers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>Init</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CleanupConstantGlobalUsers - We just marked GV constant. Loop over all users of the global, cleaning up the obvious ones. This is largely just a quick scan over the use list to clean up the easy and obvious cruft. This returns true if it made a change. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00270">270</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                                               {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// Note that we need to use a weak value handle for the worklist items. When</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// we delete a constant array, we may also be holding pointer to one of its</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// elements (or an element of one of its elements if we&#39;re dealing with an</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// array of arrays) in the worklist.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 8&gt;</a> WorkList(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>());</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *UV = WorkList.pop_back_val();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (!UV)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U = cast&lt;User&gt;(UV);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> (Init) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// Replace the load with the initializer.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;replaceAllUsesWith(Init);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// Store must be unreachable or storing Init into the global.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      SI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(U)) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *SubInit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (Init)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          SubInit = <a class="code" href="../../d9/d4a/namespacellvm.html#af2c14d2f82bff2130daf86f4e22ae14d">ConstantFoldLoadThroughGEPConstantExpr</a>(Init, CE);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a>(CE, SubInit, DL, TLI);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((CE-&gt;getOpcode() == Instruction::BitCast &amp;&amp;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                  CE-&gt;getType()-&gt;isPointerTy()) ||</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                 CE-&gt;getOpcode() == Instruction::AddrSpaceCast) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="comment">// Pointer cast, delete any stores and memsets to the global.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a>(CE, <span class="keyword">nullptr</span>, DL, TLI);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;use_empty()) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        CE-&gt;destroyConstant();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">// Do not transform &quot;gepinst (gep constexpr (GV))&quot; here, because forming</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">// &quot;gepconstexpr (gep constexpr (GV))&quot; will cause the two gep&#39;s to fold</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// and will invalidate our notion of what Init is.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *SubInit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(GEP-&gt;getOperand(0))) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE =</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          dyn_cast_or_null&lt;ConstantExpr&gt;(<a class="code" href="../../d9/d4a/namespacellvm.html#a2eefd1a5039f8f9b37b021bcc64fec50">ConstantFoldInstruction</a>(GEP, DL, TLI));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (Init &amp;&amp; CE &amp;&amp; CE-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>() == Instruction::GetElementPtr)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          SubInit = <a class="code" href="../../d9/d4a/namespacellvm.html#af2c14d2f82bff2130daf86f4e22ae14d">ConstantFoldLoadThroughGEPConstantExpr</a>(Init, CE);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">// If the initializer is an all-null value and we have an inbounds GEP,</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// we already know what the result of any load from that GEP is.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// TODO: Handle splats.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> (Init &amp;&amp; isa&lt;ConstantAggregateZero&gt;(Init) &amp;&amp; GEP-&gt;isInBounds())</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          SubInit = Constant::getNullValue(GEP-&gt;getType()-&gt;getElementType());</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a>(GEP, SubInit, DL, TLI);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (GEP-&gt;use_empty()) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        GEP-&gt;eraseFromParent();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(U)) { <span class="comment">// memset/cpy/mv</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>-&gt;getRawDest() == V) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(U)) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// If we have a chain of dead constantexprs or other things dangling from</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// us, and if they are all dead, nuke them without remorse.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(<a class="code" href="../../db/db2/structC.html">C</a>)) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="../../db/db2/structC.html">C</a>-&gt;destroyConstant();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a>(V, Init, DL, TLI);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a2eefd1a5039f8f9b37b021bcc64fec50"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a2eefd1a5039f8f9b37b021bcc64fec50">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l00895">ConstantFolding.cpp:895</a></div></div>
<div class="ttc" id="namespacellvm_html_af2c14d2f82bff2130daf86f4e22ae14d"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af2c14d2f82bff2130daf86f4e22ae14d">llvm::ConstantFoldLoadThroughGEPConstantExpr</a></div><div class="ttdeci">Constant * ConstantFoldLoadThroughGEPConstantExpr(Constant *C, ConstantExpr *CE)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l01198">ConstantFolding.cpp:1198</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acc332b04dd81f0f8973d20754ad9dc66"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a></div><div class="ttdeci">static bool CleanupConstantGlobalUsers(Value *V, Constant *Init, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00270">GlobalOpt.cpp:270</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="namespacellvm_html_a6b369f94d5ebc6e107a988f17b42b3eb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">llvm::isSafeToDestroyConstant</a></div><div class="ttdeci">bool isSafeToDestroyConstant(const Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de0/GlobalStatus_8cpp_source.html#l00034">GlobalStatus.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">llvm::AArch64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00197">AArch64BaseInfo.h:197</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60254fdb6128ce676768cdc8f7227433"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CleanupPointerRootUsers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CleanupPointerRootUsers - This GV is a pointer root. Loop over all users of the global and clean up any that obviously don't assign the global a value that isn't dynamically allocated. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00183">183</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                                  {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// A brief explanation of leak checkers.  The goal is to find bugs where</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// pointers are forgotten, causing an accumulating growth in memory</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// usage over time.  The common strategy for leak checkers is to whitelist the</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// memory pointed to by globals at exit.  This is popular because it also</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// solves another problem where the main thread of a C++ program may shut down</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// before other threads that are still expecting to use those globals.  To</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// handle that case, we expect the program may create a singleton and never</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// destroy it.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// If Dead[n].first is the only use of a malloc result, we can delete its</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// chain of computation and the store to the global in Dead[n].second.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Instruction *, Instruction *&gt;</a>, 32&gt; <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca2fee1a7db4e84247a193a9af1f907013">Dead</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// Constants can&#39;t be pointers to dynamically allocated memory.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">Value::user_iterator</a> UI = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;       UI != E;) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U = *UI++;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = SI-&gt;getValueOperand();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        SI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V)) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          Dead.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SI));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d37/classllvm_1_1MemSetInst.html">MemSetInst</a> *MSI = dyn_cast&lt;MemSetInst&gt;(U)) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(MSI-&gt;getValue())) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        MSI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(MSI-&gt;getValue())) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          Dead.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MSI));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = dyn_cast&lt;MemTransferInst&gt;(U)) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *MemSrc = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a>&gt;(MTI-&gt;getSource());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">if</span> (MemSrc &amp;&amp; MemSrc-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>()) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        MTI-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(MemSrc)) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          Dead.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MTI));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(U)) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;use_empty()) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        CE-&gt;destroyConstant();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(U)) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(<a class="code" href="../../db/db2/structC.html">C</a>)) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="../../db/db2/structC.html">C</a>-&gt;destroyConstant();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">// This could have invalidated UI, start over from scratch.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        Dead.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a60254fdb6128ce676768cdc8f7227433">CleanupPointerRootUsers</a>(GV, TLI);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, e = Dead.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ae32894671894c23afc705c218f76ea03">IsSafeComputationToRemove</a>(Dead[i].first, TLI)) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      Dead[i].second-&gt;eraseFromParent();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Dead[i].first;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">isAllocationFn</a>(I, TLI))</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *J = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (!J)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        I = J;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      } <span class="keywordflow">while</span> (1);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="namespacellvm_html_a455d82c49557ac1d6c8da8e8d86a94b5"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">llvm::isAllocationFn</a></div><div class="ttdeci">bool isAllocationFn(const Value *V, const TargetLibraryInfo *TLI, bool LookThroughBitCast=false)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates or reallocates memory (eith...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00151">MemoryBuiltins.cpp:151</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a1fb8480941b7c54f5dcd665aa6f964cca2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00034">MachineInstrBuilder.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ae32894671894c23afc705c218f76ea03"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ae32894671894c23afc705c218f76ea03">IsSafeComputationToRemove</a></div><div class="ttdeci">static bool IsSafeComputationToRemove(Value *V, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00153">GlobalOpt.cpp:153</a></div></div>
<div class="ttc" id="classllvm_1_1Value_1_1user__iterator__impl_html"><div class="ttname"><a href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">llvm::Value::user_iterator_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00134">Value.h:134</a></div></div>
<div class="ttc" id="classllvm_1_1MemSetInst_html"><div class="ttname"><a href="../../dd/d37/classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00195">IntrinsicInst.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00371">SmallVector.h:371</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="namespacellvm_html_a6b369f94d5ebc6e107a988f17b42b3eb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">llvm::isSafeToDestroyConstant</a></div><div class="ttdeci">bool isSafeToDestroyConstant(const Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de0/GlobalStatus_8cpp_source.html#l00034">GlobalStatus.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a1500a3fe55cf38153aa1e0fbe7284e05"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00144">GlobalVariable.h:144</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:220</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a60254fdb6128ce676768cdc8f7227433"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a60254fdb6128ce676768cdc8f7227433">CleanupPointerRootUsers</a></div><div class="ttdeci">static bool CleanupPointerRootUsers(GlobalVariable *GV, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00183">GlobalOpt.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a261cccda692dd81df2689f3d494ad4d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CommitValueTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>Addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CommitValueTo - We have decided that Addr (which satisfies the predicate isSimpleEnoughPointerToCommit) should get Val as its value. Make it happen. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02160">2160</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                                                         {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(Addr)) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(GV-&gt;hasInitializer());</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    GV-&gt;setInitializer(Val);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = cast&lt;ConstantExpr&gt;(Addr);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = cast&lt;GlobalVariable&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#a095f8f031d99ce3c0b25478713293dea">setInitializer</a>(<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a>(GV-&gt;getInitializer(), Val, CE, 2));</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;}</div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad5e0f87ba24074dd68abfa5a29e7db6a"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a></div><div class="ttdeci">static Constant * EvaluateStoreInto(Constant *Init, Constant *Val, ConstantExpr *Addr, unsigned OpNo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02112">GlobalOpt.cpp:2112</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a095f8f031d99ce3c0b25478713293dea"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#a095f8f031d99ce3c0b25478713293dea">llvm::GlobalVariable::setInitializer</a></div><div class="ttdeci">void setInitializer(Constant *InitVal)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00211">Globals.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9ef9dbac3fbf9cc30e63d86bf9d7e34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int compareNames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02712">2712</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                                                                {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="keywordflow">return</span> (*A)-&gt;getName().compare((*B)-&gt;getName());</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acbae63c4ac9d6cc5251c7e88f9fc2242"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ConstantPropUsersOf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ConstantPropUsersOf - Walk the use list of V, constant folding all of the instructions that are foldable. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00804">804</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                                        {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">Value::user_iterator</a> UI = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != E; )</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(*UI++))</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="../../d9/d4a/namespacellvm.html#a2eefd1a5039f8f9b37b021bcc64fec50">ConstantFoldInstruction</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DL, TLI)) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(NewC);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">// Advance UI to the next non-I use to avoid invalidating it!</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// Instructions could multiply use V.</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">while</span> (UI != E &amp;&amp; *UI == <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          ++UI;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a2eefd1a5039f8f9b37b021bcc64fec50"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a2eefd1a5039f8f9b37b021bcc64fec50">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l00895">ConstantFolding.cpp:895</a></div></div>
<div class="ttc" id="classllvm_1_1Value_1_1user__iterator__impl_html"><div class="ttname"><a href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">llvm::Value::user_iterator_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00134">Value.h:134</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ad94ee43b92bdf7558036edccd3fcaa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool cxxDtorIsEmpty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> &amp;&#160;</td>
          <td class="paramname"><em>Fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>CalledFunctions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>cxxDtorIsEmpty - Returns whether the given function is an empty C++ destructor and can therefore be eliminated. Note that we assume that other optimization passes have already simplified the code so we only look for a function with a single basic block, where the only allowed instructions are 'ret', 'call' to an empty C++ dtor and other side-effect free instructions. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02940">2940</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                                                                              {</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  <span class="comment">// FIXME: We could eliminate C++ destructors if they&#39;re readonly/readnone and</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <span class="comment">// nounwind, but that doesn&#39;t seem worth doing.</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>())</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  <span class="keywordflow">if</span> (++Fn.<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>() != Fn.<a class="code" href="../../de/d7c/classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>())</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;EntryBlock = Fn.<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>();</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = EntryBlock.<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = EntryBlock.<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="comment">// Ignore debug intrinsics.</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(CI))</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *CalledFn = CI-&gt;getCalledFunction();</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      <span class="keywordflow">if</span> (!CalledFn)</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Function *, 8&gt;</a> NewCalledFunctions(CalledFunctions);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="comment">// Don&#39;t treat recursive functions as empty.</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      <span class="keywordflow">if</span> (!NewCalledFunctions.insert(CalledFn))</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a2ad94ee43b92bdf7558036edccd3fcaa">cxxDtorIsEmpty</a>(*CalledFn, NewCalledFunctions))</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// We&#39;re done.</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayHaveSideEffects())</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Destructor with side effects, bail.</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  }</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00404">Function.h:404</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01227">Instructions.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00071">Function.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00402">Function.h:402</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a2ad94ee43b92bdf7558036edccd3fcaa"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a2ad94ee43b92bdf7558036edccd3fcaa">cxxDtorIsEmpty</a></div><div class="ttdeci">static bool cxxDtorIsEmpty(const Function &amp;Fn, SmallPtrSet&lt; const Function *, 8 &gt; &amp;CalledFunctions)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02940">GlobalOpt.cpp:2940</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00387">Function.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a4640d98233102674ddb6d6efaf2b7f97"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00113">Globals.cpp:113</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ba8b01879e70a5c086b4bede17ed97c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool EvaluateStaticConstructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td>
          <td class="paramname"><em>F</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EvaluateStaticConstructor - Evaluate static constructors in the function, if we can. Return true if we can, false otherwise. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02684">2684</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                                                                    {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="comment">// Call the function.</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  <a class="code" href="../../d1/d4c/AliasAnalysisEvaluator_8cpp.html#ad8b296a21110ccf9f34e73e4507dda2e">Evaluator</a> <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>(DL, TLI);</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *RetValDummy;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <span class="keywordtype">bool</span> EvalSuccess = <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.EvaluateFunction(F, RetValDummy,</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                           <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 0&gt;</a>());</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="keywordflow">if</span> (EvalSuccess) {</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    ++NumCtorsEvaluated;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment">// We succeeded at evaluation: commit the result.</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FULLY EVALUATED GLOBAL CTOR FUNCTION &#39;&quot;</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;          &lt;&lt; F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; to &quot;</span> &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.getMutatedMemory().size()</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; stores.\n&quot;</span>);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;Constant*, Constant*&gt;::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;           <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.getMutatedMemory().begin(), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.getMutatedMemory().end();</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;         <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a261cccda692dd81df2689f3d494ad4d9">CommitValueTo</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second, <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first);</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalVariable*, 8&gt;::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;           <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.getInvariants().begin(), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">Eval</a>.getInvariants().end();</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;         <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;      (*I)-&gt;setConstant(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  }</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <span class="keywordflow">return</span> EvalSuccess;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="AliasAnalysisEvaluator_8cpp_html_ad8b296a21110ccf9f34e73e4507dda2e"><div class="ttname"><a href="../../d1/d4c/AliasAnalysisEvaluator_8cpp.html#ad8b296a21110ccf9f34e73e4507dda2e">Evaluator</a></div><div class="ttdeci">aa Exhaustive Alias Analysis Precision Evaluator</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/AliasAnalysisEvaluator_8cpp_source.html#l00085">AliasAnalysisEvaluator.cpp:85</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a261cccda692dd81df2689f3d494ad4d9"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a261cccda692dd81df2689f3d494ad4d9">CommitValueTo</a></div><div class="ttdeci">static void CommitValueTo(Constant *Val, Constant *Addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02160">GlobalOpt.cpp:2160</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="namespacellvm_html_a26dc52adbcc98fa9f17b055b0025e41f"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a26dc52adbcc98fa9f17b055b0025e41f">llvm::Eval</a></div><div class="ttdeci">GraphT::NodeType * Eval(DominatorTreeBase&lt; typename GraphT::NodeType &gt; &amp;DT, typename GraphT::NodeType *VIn, unsigned LastLinked)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d71/GenericDomTreeConstruction_8h_source.html#l00108">GenericDomTreeConstruction.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5e0f87ba24074dd68abfa5a29e7db6a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* EvaluateStoreInto </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>Init</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *&#160;</td>
          <td class="paramname"><em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>OpNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EvaluateStoreInto - Evaluate a piece of a constantexpr store into a global initializer. This returns 'Init' modified to reflect 'Val' stored into it. At this point, the GEP operands of Addr [0, OpNo) have been stepped into. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02112">2112</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                                                                      {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="comment">// Base case of the recursion.</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="keywordflow">if</span> (OpNo == Addr-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>()) {</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Val-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Init-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() &amp;&amp; <span class="stringliteral">&quot;Type mismatch!&quot;</span>);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 32&gt;</a> Elts;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Init-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="comment">// Break up the constant into its elements.</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = STy-&gt;getNumElements(); i != e; ++i)</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      Elts.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Init-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(i));</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="comment">// Replace the element that we are supposed to.</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CU = cast&lt;ConstantInt&gt;(Addr-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(OpNo));</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordtype">unsigned</span> Idx = CU-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Idx &lt; STy-&gt;getNumElements() &amp;&amp; <span class="stringliteral">&quot;Struct index out of range!&quot;</span>);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    Elts[Idx] = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a>(Elts[Idx], Val, Addr, OpNo+1);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="comment">// Return the modified struct.</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keywordflow">return</span> ConstantStruct::get(STy, Elts);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = cast&lt;ConstantInt&gt;(Addr-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(OpNo));</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *InitTy = cast&lt;SequentialType&gt;(Init-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  uint64_t NumElts;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(InitTy))</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    NumElts = ATy-&gt;getNumElements();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    NumElts = InitTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">// Break up the array into elements.</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="keywordflow">for</span> (uint64_t i = 0, e = NumElts; i != e; ++i)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    Elts.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Init-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(i));</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() &lt; NumElts);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  Elts[CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>()] =</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a>(Elts[CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>()], Val, Addr, OpNo+1);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">if</span> (Init-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <span class="keywordflow">return</span> ConstantArray::get(cast&lt;ArrayType&gt;(InitTy), Elts);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="keywordflow">return</span> ConstantVector::get(Elts);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad5e0f87ba24074dd68abfa5a29e7db6a"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad5e0f87ba24074dd68abfa5a29e7db6a">EvaluateStoreInto</a></div><div class="ttdeci">static Constant * EvaluateStoreInto(Constant *Init, Constant *Val, ConstantExpr *Addr, unsigned OpNo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02112">GlobalOpt.cpp:2112</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a01fee21e2c679094ce5ab193369d5198"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00205">Constants.cpp:205</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad8f27f0b94a56abcd296b8461737a3af"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00208">Type.cpp:208</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad38e073a20e77512a43dcdc9d2dea742"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a>* FindCXAAtExit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d27/classllvm_1_1Module.html">Module</a> &amp;&#160;</td>
          <td class="paramname"><em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02911">2911</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                                                                  {</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keywordflow">if</span> (!TLI-&gt;<a class="code" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">has</a>(<a class="code" href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa75da4c0488acc8319e47f53d82822837">LibFunc::cxa_atexit</a>))</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *Fn = M.<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(TLI-&gt;<a class="code" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">getName</a>(<a class="code" href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa75da4c0488acc8319e47f53d82822837">LibFunc::cxa_atexit</a>));</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <span class="keywordflow">if</span> (!Fn)</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html">FunctionType</a> *FTy = Fn-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// Checking that the function has the right return type, the right number of</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="comment">// parameters and that they all have pointer types should be enough.</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="keywordflow">if</span> (!FTy-&gt;<a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() ||</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      FTy-&gt;<a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">getNumParams</a>() != 3 ||</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      !FTy-&gt;<a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">getParamType</a>(0)-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() ||</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      !FTy-&gt;<a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">getParamType</a>(1)-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() ||</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      !FTy-&gt;<a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">getParamType</a>(2)-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a97cf043af111c14bb4d03a99cf42af03"><div class="ttname"><a href="../../d3/da8/classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">llvm::FunctionType::getNumParams</a></div><div class="ttdeci">unsigned getNumParams() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00133">DerivedTypes.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00071">Function.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html_a986085d3cd43522192d93e84bc660978"><div class="ttname"><a href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">llvm::TargetLibraryInfo::has</a></div><div class="ttdeci">bool has(LibFunc::Func F) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/TargetLibraryInfo_8h_source.html#l00706">TargetLibraryInfo.h:706</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa75da4c0488acc8319e47f53d82822837"><div class="ttname"><a href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa75da4c0488acc8319e47f53d82822837">llvm::LibFunc::cxa_atexit</a></div><div class="ttdoc">int __cxa_atexit(void (*f)(void *), void *p, void *d); </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/TargetLibraryInfo_8h_source.html#l00054">TargetLibraryInfo.h:54</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="../../d3/da8/classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a3f156c68d0efa530f05698ca15d66593"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">llvm::Module::getFunction</a></div><div class="ttdeci">Function * getFunction(StringRef Name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd4/Module_8cpp_source.html#l00170">Module.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a176b84b12bc19326444728c6404dd068"><div class="ttname"><a href="../../d3/da8/classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">llvm::FunctionType::getParamType</a></div><div class="ttdeci">Type * getParamType(unsigned i) const </div><div class="ttdoc">Parameter type accessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00128">DerivedTypes.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html_a0fe1c6579053c75b2089f8c2e60c65e0"><div class="ttname"><a href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">llvm::TargetLibraryInfo::getName</a></div><div class="ttdeci">StringRef getName(LibFunc::Func F) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/TargetLibraryInfo_8h_source.html#l00742">TargetLibraryInfo.h:742</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_adf66d58e85fb4e46e9c1ae55186a6930"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00206">Function.cpp:206</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a9eda832d6e80bc19b98f22f4ec714e3f"><div class="ttname"><a href="../../d3/da8/classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">llvm::FunctionType::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00121">DerivedTypes.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33f39e494317a93a9f9c798714c44029"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* GetHeapSROAValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>FieldNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>InsertedScalarizedValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>PHIsToRewrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01149">1149</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                                                                           {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  std::vector&lt;Value*&gt; &amp;FieldVals = InsertedScalarizedValues[V];</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> (FieldNo &gt;= FieldVals.size())</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    FieldVals.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a1ac0d6aa06b27d943bacdfc985a17cf8">resize</a>(FieldNo+1);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// If we already have this value, just reuse the previously scalarized</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// version.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FieldVal = FieldVals[FieldNo])</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">return</span> FieldVal;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">// Depending on what instruction this is, we have several cases.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Result;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(V)) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// This is a scalarized version of the load from the global.  Just create</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// a new Load of the scalarized global.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    Result = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getOperand(0), FieldNo,</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                                           InsertedScalarizedValues,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                           PHIsToRewrite),</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                          <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getName()+<span class="stringliteral">&quot;.f&quot;</span>+<a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(FieldNo), <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">// PN&#39;s type is pointer to struct.  Make a new PHI of pointer to struct</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">// field.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PTy = cast&lt;PointerType&gt;(PN-&gt;getType());</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *<a class="code" href="../../d9/d6e/namespacellvm_1_1AArch64DB.html#a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4">ST</a> = cast&lt;StructType&gt;(PTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordtype">unsigned</span> AS = PTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *NewPN =</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">PHINode::Create</a>(PointerType::get(ST-&gt;getElementType(FieldNo), AS),</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                     PN-&gt;getNumIncomingValues(),</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                     PN-&gt;getName()+<span class="stringliteral">&quot;.f&quot;</span>+<a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(FieldNo), PN);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    Result = NewPN;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    PHIsToRewrite.push_back(std::make_pair(PN, FieldNo));</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown usable value&quot;</span>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordflow">return</span> FieldVals[FieldNo] = Result;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="../../db/d5e/classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3f/ErrorHandling_8h_source.html#l00098">ErrorHandling.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a33f39e494317a93a9f9c798714c44029"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a></div><div class="ttdeci">static Value * GetHeapSROAValue(Value *V, unsigned FieldNo, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01149">GlobalOpt.cpp:1149</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64DB_html_a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4"><div class="ttname"><a href="../../d9/d6e/namespacellvm_1_1AArch64DB.html#a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4">llvm::AArch64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00339">AArch64BaseInfo.h:339</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a1ac0d6aa06b27d943bacdfc985a17cf8"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a1ac0d6aa06b27d943bacdfc985a17cf8">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::resize</a></div><div class="ttdeci">void resize(size_type Size)</div><div class="ttdoc">Grow the densemap so that it has at least Size buckets. Does not shrink. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00074">DenseMap.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a732909ea600e927d4123ba6f844c4035"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool GlobalUsersSafeToSRA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *&#160;</td>
          <td class="paramname"><em>GV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GlobalUsersSafeToSRA - Look at all uses of the global and decide whether it is safe for us to perform this transformation. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00458">458</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                                  {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a6407ecfeeaabe2cb5df433a895498b58">IsUserOfGlobalSafeForSRA</a>(U, GV))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a6407ecfeeaabe2cb5df433a895498b58"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a6407ecfeeaabe2cb5df433a895498b58">IsUserOfGlobalSafeForSRA</a></div><div class="ttdeci">static bool IsUserOfGlobalSafeForSRA(User *U, GlobalValue *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00391">GlobalOpt.cpp:391</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a31232d0640fc51e777d8e48e48f45c89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasMoreThanOneUseOtherThanLLVMUsed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;&#160;</td>
          <td class="paramname"><em>U</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02799">2799</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                                                                  {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = 2;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((!U.usedCount(&amp;V) || !U.compilerUsedCount(&amp;V)) &amp;&amp;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         <span class="stringliteral">&quot;We should have removed the duplicated &quot;</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;         <span class="stringliteral">&quot;element from llvm.compiler.used&quot;</span>);</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <span class="keywordflow">if</span> (U.usedCount(&amp;V) || U.compilerUsedCount(&amp;V))</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    ++N;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <span class="keywordflow">return</span> V.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a9ea9a909185ecbf9fc81ab35ebfb11d6">hasNUsesOrMore</a>(N);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;}</div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1Value_html_a9ea9a909185ecbf9fc81ab35ebfb11d6"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a9ea9a909185ecbf9fc81ab35ebfb11d6">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00104">Value.cpp:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afa93649aba5a7b6388adff903a4a6085"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasUseOtherThanLLVMUsed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;&#160;</td>
          <td class="paramname"><em>GA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;&#160;</td>
          <td class="paramname"><em>U</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02783">2783</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                                                                        {</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="keywordflow">if</span> (GA.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) <span class="comment">// No use at all.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((!U.usedCount(&amp;GA) || !U.compilerUsedCount(&amp;GA)) &amp;&amp;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;         <span class="stringliteral">&quot;We should have removed the duplicated &quot;</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;         <span class="stringliteral">&quot;element from llvm.compiler.used&quot;</span>);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="keywordflow">if</span> (!GA.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="comment">// Strictly more than one use. So at least one is not in llvm.used and</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="comment">// llvm.compiler.used.</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="comment">// Exactly one use. Check if it is in llvm.used or llvm.compiler.used.</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="keywordflow">return</span> !U.usedCount(&amp;GA) &amp;&amp; !U.compilerUsedCount(&amp;GA);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;}</div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac38a6c2bc68401a0464fc5f818ffc3a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasUsesToReplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;&#160;</td>
          <td class="paramname"><em>GA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LLVMUsed &amp;&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>RenameTarget</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02817">2817</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                                                                               {</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  RenameTarget = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a>(GA, U))</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    Ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <span class="comment">// If the alias is externally visible, we may still be able to simplify it.</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a>(GA, U))</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="comment">// If the aliasee has internal linkage, give it the name and linkage</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="comment">// of the alias, and delete the alias.  This turns:</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="comment">//   define internal ... @f(...)</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <span class="comment">//   @a = alias ... @f</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <span class="comment">// into:</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="comment">//   define ... @a(...)</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Aliasee = GA.<a class="code" href="../../d0/d19/classllvm_1_1GlobalAlias.html#a7b0b0296ad4af9b9847b4405c7885161">getAliasee</a>();</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *<a class="code" href="../../da/d57/classllvm_1_1Target.html">Target</a> = cast&lt;GlobalValue&gt;(Aliasee-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#a56db2775b3027843eb5fff12bdb264c9">stripPointerCasts</a>());</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="keywordflow">if</span> (!Target-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>())</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <span class="keywordflow">return</span> Ret;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// Do not perform the transform if multiple aliases potentially target the</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="comment">// aliasee. This check also ensures that it is safe to replace the section</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="comment">// and other attributes of the aliasee with those of the alias.</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a>(*Target, U))</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">return</span> Ret;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  RenameTarget = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1GlobalAlias_html_a7b0b0296ad4af9b9847b4405c7885161"><div class="ttname"><a href="../../d0/d19/classllvm_1_1GlobalAlias.html#a7b0b0296ad4af9b9847b4405c7885161">llvm::GlobalAlias::getAliasee</a></div><div class="ttdeci">const Constant * getAliasee() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d9c/GlobalAlias_8h_source.html#l00083">GlobalAlias.h:83</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a6ef58549c87cd57b83dcd7ce2d92cc03"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a></div><div class="ttdeci">static bool mayHaveOtherReferences(GlobalAlias &amp;GA, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02810">GlobalOpt.cpp:2810</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_afa93649aba5a7b6388adff903a4a6085"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a></div><div class="ttdeci">static bool hasUseOtherThanLLVMUsed(GlobalAlias &amp;GA, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02783">GlobalOpt.cpp:2783</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a56db2775b3027843eb5fff12bdb264c9"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#a56db2775b3027843eb5fff12bdb264c9">llvm::Constant::stripPointerCasts</a></div><div class="ttdeci">Constant * stripPointerCasts()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00173">Constant.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a31232d0640fc51e777d8e48e48f45c89"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a></div><div class="ttdeci">static bool hasMoreThanOneUseOtherThanLLVMUsed(GlobalValue &amp;V, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02799">GlobalOpt.cpp:2799</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00030">GlobalValue.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1Target_html"><div class="ttname"><a href="../../da/d57/classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dfa/TargetRegistry_8h_source.html#l00076">TargetRegistry.h:76</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/MipsISelLowering_8h_source.html#l00067">MipsISelLowering.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_abefc2d8baa67d6f9e49c95912cfde480"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00261">GlobalValue.h:261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7c164feceeaa7db7809c9c82c4b7568"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS_BEGIN </td>
          <td>(</td>
          <td class="paramtype">GlobalOpt&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;globalopt&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Global Variable <a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html#a23fd01d07baea6623f8b2019dd8f2f21">Optimizer</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ace2885fc42e68606f270bfd3180d5f26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isLeakCheckerRoot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isLeakCheckerRoot - Is this global variable possibly used by a leak checker as a root? If so, we might not really want to eliminate the stores to it. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00105">105</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                                  {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// A global variable is a root if it is a pointer, or could plausibly contain</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// a pointer.  There are two challenges; one is that we could have a struct</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// the has an inner member which is a pointer.  We recurse through the type to</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// detect these (up to a point).  The other is that we may actually be a union</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// of a pointer and another type, and so our LLVM type is an integer which</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// gets converted into a pointer, or our type is an [i8 x #] with a pointer</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// potentially contained here.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a2d8e04fc14cc2b3c6005d3baa8562639">hasPrivateLinkage</a>())</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Type *, 4&gt;</a> Types;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  Types.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(cast&lt;PointerType&gt;(GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>())-&gt;getElementType());</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordtype">unsigned</span> Limit = 20;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = Types.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">switch</span> (Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>()) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">case</span> Type::PointerTyID: <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">case</span> Type::ArrayTyID:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">case</span> Type::VectorTyID: {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *STy = cast&lt;SequentialType&gt;(Ty);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        Types.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(STy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">case</span> Type::StructTyID: {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(Ty);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a47f8a52ece53e2e1ef08ab2d58f93c88">isOpaque</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a93ee26a67ca79e4ba796dcccb55e8c19">StructType::element_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a8d85840dbf6b7eff52721aafae9df0f6">element_begin</a>(),</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                 E = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a1a716e87e6d2a1de3fcfd0682ed3fd1f">element_end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *InnerTy = *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <span class="keywordflow">if</span> (isa&lt;PointerType&gt;(InnerTy)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <span class="keywordflow">if</span> (isa&lt;CompositeType&gt;(InnerTy))</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            Types.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(InnerTy);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (--Limit == 0) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  } <span class="keywordflow">while</span> (!Types.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a47f8a52ece53e2e1ef08ab2d58f93c88"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a47f8a52ece53e2e1ef08ab2d58f93c88">llvm::StructType::isOpaque</a></div><div class="ttdeci">bool isOpaque() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00249">DerivedTypes.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a1a716e87e6d2a1de3fcfd0682ed3fd1f"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a1a716e87e6d2a1de3fcfd0682ed3fd1f">llvm::StructType::element_end</a></div><div class="ttdeci">element_iterator element_end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00279">DerivedTypes.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a93ee26a67ca79e4ba796dcccb55e8c19"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a93ee26a67ca79e4ba796dcccb55e8c19">llvm::StructType::element_iterator</a></div><div class="ttdeci">Type::subtype_iterator element_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00277">DerivedTypes.h:277</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00406">SmallVector.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a8d85840dbf6b7eff52721aafae9df0f6"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a8d85840dbf6b7eff52721aafae9df0f6">llvm::StructType::element_begin</a></div><div class="ttdeci">element_iterator element_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00278">DerivedTypes.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a2d8e04fc14cc2b3c6005d3baa8562639"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a2d8e04fc14cc2b3c6005d3baa8562639">llvm::GlobalValue::hasPrivateLinkage</a></div><div class="ttdeci">bool hasPrivateLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00260">GlobalValue.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e08dfcb75ff1b4b38c352bc0d9db223"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">llvm::Type::getTypeID</a></div><div class="ttdeci">TypeID getTypeID() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00134">Type.h:134</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a0048936ebbb543ade082597abf2370"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isProfitableToMakeFastCC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td>
          <td class="paramname"><em>F</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return true if this is a calling convention that we'd like to change. The idea here is that we don't want to mess with the convention if the user explicitly requested something with performance implications like coldcc, GHC, or anyregcc. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01899">1899</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                                                  {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">CallingConv::ID</a> CC = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#af4d5ada526cdf057f5f29047e058187d">getCallingConv</a>();</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="comment">// FIXME: Is it worth transforming x86_stdcallcc and x86_fastcallcc?</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordflow">return</span> CC == <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">CallingConv::C</a> || CC == <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974a97109ccd68cac64fb38dbd24fc4589c6">CallingConv::X86_ThisCall</a>;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_af4d5ada526cdf057f5f29047e058187d"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#af4d5ada526cdf057f5f29047e058187d">llvm::Function::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00161">Function.h:161</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974a97109ccd68cac64fb38dbd24fc4589c6"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974a97109ccd68cac64fb38dbd24fc4589c6">llvm::CallingConv::X86_ThisCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00101">CallingConv.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae32894671894c23afc705c218f76ea03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsSafeComputationToRemove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Given a value that is stored to a global but never read, determine whether it's safe to remove the store and the chain of computation that feeds the store. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00153">153</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                                              {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(V) || isa&lt;InvokeInst&gt;(V) || isa&lt;Argument&gt;(V) ||</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        isa&lt;GlobalValue&gt;(V))</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">isAllocationFn</a>(V, TLI))</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>())</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(I)) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">if</span> (!GEP-&gt;hasAllConstantIndices())</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() != 1) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    V = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  } <span class="keywordflow">while</span> (1);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a455d82c49557ac1d6c8da8e8d86a94b5"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">llvm::isAllocationFn</a></div><div class="ttdeci">bool isAllocationFn(const Value *V, const TargetLibraryInfo *TLI, bool LookThroughBitCast=false)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates or reallocates memory (eith...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00151">MemoryBuiltins.cpp:151</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00342">Instruction.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc21b8049c491d3f4b42eaeec97f6cc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSafeSROAElementUse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isSafeSROAElementUse - Return true if the specified instruction is a safe user of a derived expression from a global that we want to SROA. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00358">358</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                           {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// We might have a dead and dangling constant hanging off of here.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(<a class="code" href="../../db/db2/structC.html">C</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// Loads are ok.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(I)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Stores *to* the pointer are ok.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I))</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> SI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) != V;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// Otherwise, it must be a GEP.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (!GEPI) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">if</span> (GEPI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &lt; 3 || !isa&lt;Constant&gt;(GEPI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) ||</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      !cast&lt;Constant&gt;(GEPI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;isNullValue())</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : GEPI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc21b8049c491d3f4b42eaeec97f6cc7">isSafeSROAElementUse</a>(U))</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acc21b8049c491d3f4b42eaeec97f6cc7"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acc21b8049c491d3f4b42eaeec97f6cc7">isSafeSROAElementUse</a></div><div class="ttdeci">static bool isSafeSROAElementUse(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00358">GlobalOpt.cpp:358</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="namespacellvm_html_a6b369f94d5ebc6e107a988f17b42b3eb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">llvm::isSafeToDestroyConstant</a></div><div class="ttdeci">bool isSafeToDestroyConstant(const Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de0/GlobalStatus_8cpp_source.html#l00034">GlobalStatus.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3622348f4394efe3dbe9b1e6366e7235"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSimpleEnoughPointerToCommit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isSimpleEnoughPointerToCommit - Return true if this constant is simple enough for us to understand. In particular, if it is a cast to anything other than from one pointer type to another pointer type, we punt. We basically just support direct accesses to globals and GEP's of globals. This should be kept up to date with CommitValueTo. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02063">2063</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                                                       {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// Conservatively, avoid aggregate types. This is because we don&#39;t</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">// want to worry about them partially overlapping other stores.</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keywordflow">if</span> (!cast&lt;PointerType&gt;(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getElementType()-&gt;isSingleValueType())</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(C))</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="comment">// Do not allow weak/*_odr/linkonce linkage or external globals.</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">return</span> GV-&gt;hasUniqueInitializer();</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(C)) {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="comment">// Handle a constantexpr gep.</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr &amp;&amp;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        isa&lt;GlobalVariable&gt;(CE-&gt;getOperand(0)) &amp;&amp;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        cast&lt;GEPOperator&gt;(CE)-&gt;isInBounds()) {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = cast&lt;GlobalVariable&gt;(CE-&gt;getOperand(0));</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <span class="comment">// Do not allow weak/*_odr/linkonce/dllimport/dllexport linkage or</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="comment">// external globals.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <span class="keywordflow">if</span> (!GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aaf76909687fcdf2acb3cddab7db498f8">hasUniqueInitializer</a>())</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="comment">// The first index must be zero.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(*<a class="code" href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">std::next</a>(CE-&gt;op_begin()));</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">if</span> (!CI || !CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="comment">// The remaining indices must be compile-time known integers within the</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="comment">// notional bounds of the corresponding static array types.</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordflow">if</span> (!CE-&gt;isGEPWithNoNotionalOverIndexing())</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#af2c14d2f82bff2130daf86f4e22ae14d">ConstantFoldLoadThroughGEPConstantExpr</a>(GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>(), CE);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <span class="comment">// A constantexpr bitcast from a pointer to another pointer is a no-op,</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="comment">// and we know how to evaluate it by moving the bitcast from the pointer</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="comment">// operand to the value operand.</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::BitCast &amp;&amp;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;               isa&lt;GlobalVariable&gt;(CE-&gt;getOperand(0))) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="comment">// Do not allow weak/*_odr/linkonce/dllimport/dllexport linkage or</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="comment">// external globals.</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">return</span> cast&lt;GlobalVariable&gt;(CE-&gt;getOperand(0))-&gt;hasUniqueInitializer();</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  }</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_af2c14d2f82bff2130daf86f4e22ae14d"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af2c14d2f82bff2130daf86f4e22ae14d">llvm::ConstantFoldLoadThroughGEPConstantExpr</a></div><div class="ttdeci">Constant * ConstantFoldLoadThroughGEPConstantExpr(Constant *C, ConstantExpr *CE)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l01198">ConstantFolding.cpp:1198</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00127">GlobalVariable.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aaf76909687fcdf2acb3cddab7db498f8"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#aaf76909687fcdf2acb3cddab7db498f8">llvm::GlobalVariable::hasUniqueInitializer</a></div><div class="ttdeci">bool hasUniqueInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00108">GlobalVariable.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacebranch-range-01_html_a02ead9d2b33486f3c82bfae74da33a5a"><div class="ttname"><a href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">branch-range-01.next</a></div><div class="ttdeci">string next</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d37/branch-range-01_8py_source.html#l00079">branch-range-01.py:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa880e570cc60e683e3f4a528a75c098e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSimpleEnoughValueToCommit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>SimpleConstants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02048">2048</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                                                  {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// If we already checked this constant, we win.</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordflow">if</span> (!SimpleConstants.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(C)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="comment">// Check the constant.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a440432f716abf9f965015d99ee6f00aa">isSimpleEnoughValueToCommitHelper</a>(C, SimpleConstants, DL);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a440432f716abf9f965015d99ee6f00aa"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a440432f716abf9f965015d99ee6f00aa">isSimpleEnoughValueToCommitHelper</a></div><div class="ttdeci">static bool isSimpleEnoughValueToCommitHelper(Constant *C, SmallPtrSet&lt; Constant *, 8 &gt; &amp;SimpleConstants, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01990">GlobalOpt.cpp:1990</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a440432f716abf9f965015d99ee6f00aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSimpleEnoughValueToCommitHelper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>SimpleConstants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isSimpleEnoughValueToCommit - Return true if the specified constant can be handled by the code generator. We don't want to generate something like: void *X = &amp;X/42; because the code generator doesn't have a relocation that can handle that.</p>
<p>This function should be called if <a class="el" href="../../db/db2/structC.html">C</a> was not found (but just got inserted) in SimpleConstants to avoid having to rescan the same constants all the time. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01990">1990</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                                         {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">// Simple global addresses are supported, do not allow dllimport or</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="comment">// thread-local globals.</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalValue&gt;(C))</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">return</span> !GV-&gt;hasDLLImportStorageClass() &amp;&amp; !GV-&gt;isThreadLocal();</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">// Simple integer, undef, constant aggregate zero, etc are all supported.</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordflow">if</span> (C-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 0 || isa&lt;BlockAddress&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>))</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="comment">// Aggregate values are safe if all their elements are.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantArray&gt;(C) || isa&lt;ConstantStruct&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>) ||</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      isa&lt;ConstantVector&gt;(C)) {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = C-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); i != e; ++i) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Op = cast&lt;Constant&gt;(C-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i));</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a>(Op, SimpleConstants, DL))</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    }</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// We don&#39;t know exactly what relocations are allowed in constant expressions,</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// so we allow &amp;global+constantoffset, which is safe and uniformly supported</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// across targets.</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = cast&lt;ConstantExpr&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordflow">switch</span> (CE-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>()) {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="comment">// Bitcast is fine if the casted value is fine.</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), SimpleConstants, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keywordflow">case</span> Instruction::PtrToInt:</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="comment">// int &lt;=&gt; ptr is fine if the int type is the same size as the</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="comment">// pointer type.</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">if</span> (!DL || DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(CE-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) !=</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;               DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), SimpleConstants, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="comment">// GEP is fine if it is simple + constant offset.</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); i != e; ++i)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)))</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), SimpleConstants, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="comment">// We allow simple+cst.</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), SimpleConstants, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  }</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_aa880e570cc60e683e3f4a528a75c098e"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#aa880e570cc60e683e3f4a528a75c098e">isSimpleEnoughValueToCommit</a></div><div class="ttdeci">static bool isSimpleEnoughValueToCommit(Constant *C, SmallPtrSet&lt; Constant *, 8 &gt; &amp;SimpleConstants, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02048">GlobalOpt.cpp:2048</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6407ecfeeaabe2cb5df433a895498b58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsUserOfGlobalSafeForSRA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d1b/classllvm_1_1User.html">User</a> *&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *&#160;</td>
          <td class="paramname"><em>GV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>IsUserOfGlobalSafeForSRA - U is a direct user of the specified global value. Look at it and its uses and decide whether it is safe to SROA this global. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00391">391</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                                               {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// The user of the global must be a GEP Inst or a ConstantExpr GEP.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;GetElementPtrInst&gt;(U) &amp;&amp;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      (!isa&lt;ConstantExpr&gt;(U) ||</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;       cast&lt;ConstantExpr&gt;(U)-&gt;getOpcode() != Instruction::GetElementPtr))</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// Check to see if this ConstantExpr GEP is SRA&#39;able.  In particular, we</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// don&#39;t like &lt; 3 operand CE&#39;s, and we don&#39;t like non-constant integer</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// indices.  This enforces that all uses are &#39;gep GV, 0, C, ...&#39; for some</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// value of C.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &lt; 3 || !isa&lt;Constant&gt;(U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) ||</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      !cast&lt;Constant&gt;(U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;isNullValue() ||</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      !isa&lt;ConstantInt&gt;(U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2)))</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GEPI = <a class="code" href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(U), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(U);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  ++GEPI;  <span class="comment">// Skip over the pointer index.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// If this is a use of an array allocation, do a bit more checking for sanity.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *AT = dyn_cast&lt;ArrayType&gt;(*GEPI)) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    uint64_t NumElements = AT-&gt;getNumElements();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Idx = cast&lt;ConstantInt&gt;(U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// Check to make sure that index falls within the array.  If not,</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// something funny is going on, so we won&#39;t do the optimization.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (Idx-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() &gt;= NumElements)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// We cannot scalar repl this level of the array unless any array</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// sub-indices are in-range constants.  In particular, consider:</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// A[0][i].  We cannot know that the user isn&#39;t doing invalid things like</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// allowing i to index an out-of-range subscript that accesses A[1].</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Scalar replacing *just* the outer index of the array is probably not</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// going to be a win anyway, so just give up.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">for</span> (++GEPI; <span class="comment">// Skip array index.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         GEPI != E;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;         ++GEPI) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      uint64_t NumElements;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *SubArrayTy = dyn_cast&lt;ArrayType&gt;(*GEPI))</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        NumElements = SubArrayTy-&gt;getNumElements();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *SubVectorTy = dyn_cast&lt;VectorType&gt;(*GEPI))</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        NumElements = SubVectorTy-&gt;getNumElements();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((*GEPI)-&gt;isStructTy() &amp;&amp;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;               <span class="stringliteral">&quot;Indexed GEP type is not array, vector, or struct!&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *IdxVal = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(GEPI.<a class="code" href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html#a8ca2ac53bb7661363b852abc99971d74">getOperand</a>());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">if</span> (!IdxVal || IdxVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() &gt;= NumElements)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *UU : U-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc21b8049c491d3f4b42eaeec97f6cc7">isSafeSROAElementUse</a>(UU))</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acc21b8049c491d3f4b42eaeec97f6cc7"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acc21b8049c491d3f4b42eaeec97f6cc7">isSafeSROAElementUse</a></div><div class="ttdeci">static bool isSafeSROAElementUse(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00358">GlobalOpt.cpp:358</a></div></div>
<div class="ttc" id="namespacellvm_html_a43c6ebb4fd35ebd815d66a2df4eed0b9"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">llvm::gep_type_end</a></div><div class="ttdeci">gep_type_iterator gep_type_end(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00089">GetElementPtrTypeIterator.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html_a8ca2ac53bb7661363b852abc99971d74"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html#a8ca2ac53bb7661363b852abc99971d74">llvm::generic_gep_type_iterator::getOperand</a></div><div class="ttdeci">Value * getOperand() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00066">GetElementPtrTypeIterator.h:66</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5abddaa1ca2270d02c0344679d425538"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool LoadUsesSimpleEnoughForHeapSRA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>LoadUsingPHIs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>LoadUsingPHIsPerLoad</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LoadUsesSimpleEnoughForHeapSRA - Verify that all uses of V (a load, or a phi of a load) are simple enough to perform heap SRA on. This permits GEP's that index through the array and struct field, icmps of null, and PHIs. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01049">1049</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                                                                               {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// We permit two users of the load: setcc comparing against the null</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// pointer, and a getelementptr of a specific form.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// Comparison against null is ok.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = dyn_cast&lt;ICmpInst&gt;(UI)) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantPointerNull&gt;(ICI-&gt;getOperand(1)))</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// getelementptr is also ok, but only a simple form.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(UI)) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">// Must index into the array and into the struct.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">if</span> (GEPI-&gt;getNumOperands() &lt; 3)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="comment">// Otherwise the GEP is ok.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(UI)) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">if</span> (!LoadUsingPHIsPerLoad.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(PN))</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// This means some phi nodes are dependent on each other.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="comment">// Avoid infinite looping!</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">if</span> (!LoadUsingPHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(PN))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">// If we have already analyzed this PHI, then it is safe.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="comment">// Make sure all uses of the PHI are simple enough to transform.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a5abddaa1ca2270d02c0344679d425538">LoadUsesSimpleEnoughForHeapSRA</a>(PN,</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                          LoadUsingPHIs, LoadUsingPHIsPerLoad))</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// Otherwise we don&#39;t know what this is, not ok.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a5abddaa1ca2270d02c0344679d425538"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a5abddaa1ca2270d02c0344679d425538">LoadUsesSimpleEnoughForHeapSRA</a></div><div class="ttdeci">static bool LoadUsesSimpleEnoughForHeapSRA(const Value *V, SmallPtrSet&lt; const PHINode *, 32 &gt; &amp;LoadUsingPHIs, SmallPtrSet&lt; const PHINode *, 32 &gt; &amp;LoadUsingPHIsPerLoad)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01049">GlobalOpt.cpp:1049</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ef58549c87cd57b83dcd7ce2d92cc03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mayHaveOtherReferences </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;&#160;</td>
          <td class="paramname"><em>GA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> LLVMUsed &amp;&#160;</td>
          <td class="paramname"><em>U</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02810">2810</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;                                                                       {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="keywordflow">if</span> (!GA.<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>())</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="keywordflow">return</span> U.usedCount(&amp;GA) || U.compilerUsedCount(&amp;GA);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_abefc2d8baa67d6f9e49c95912cfde480"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00261">GlobalValue.h:261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9767ff7ade0f492d8ba272ec52f6b74"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OptimizeAwayTrappingUsesOfLoads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>LV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeAwayTrappingUsesOfLoads - The specified global has only one non-null value stored into it. If there are uses of the loaded value that would trap if the loaded value is dynamically null, then we know that they cannot be reachable with a null optimize away the load. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00740">740</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                                                    {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Keep track of whether we are able to remove all the uses of the global</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// other than the store that defines it.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordtype">bool</span> AllNonStoreUsesGone = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// Replace all uses of loads with uses of uses of the stored value.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">Value::user_iterator</a> GUI = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); GUI != E;){</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *GlobalUser = *GUI++;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(GlobalUser)) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, LV);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">// If we were able to delete all uses of the loads</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;use_empty()) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        AllNonStoreUsesGone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(GlobalUser)) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="comment">// Ignore the store that stores &quot;LV&quot; to the global.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(GlobalUser-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == GV &amp;&amp;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;             <span class="stringliteral">&quot;Must be storing *to* the global&quot;</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      AllNonStoreUsesGone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="comment">// If we get here we could have other crazy uses that are transitively</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="comment">// loaded.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((isa&lt;PHINode&gt;(GlobalUser) || isa&lt;SelectInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;              isa&lt;ConstantExpr&gt;(GlobalUser) || isa&lt;CmpInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;              isa&lt;BitCastInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;              isa&lt;GetElementPtrInst&gt;(GlobalUser)) &amp;&amp;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;             <span class="stringliteral">&quot;Only expect load and stores!&quot;</span>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;OPTIMIZED LOADS FROM STORED ONCE POINTER: &quot;</span> &lt;&lt; *GV);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    ++NumGlobUses;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// If we nuked all of the loads, then none of the stores are needed either,</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// nor is the global.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (AllNonStoreUsesGone) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a>(GV)) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a60254fdb6128ce676768cdc8f7227433">CleanupPointerRootUsers</a>(GV, TLI);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a>(GV, <span class="keyword">nullptr</span>, DL, TLI);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** GLOBAL NOW DEAD!\n&quot;</span>);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      ++NumDeleted;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="ttc" id="GlobalOpt_8cpp_html_ace2885fc42e68606f270bfd3180d5f26"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a></div><div class="ttdeci">static bool isLeakCheckerRoot(GlobalVariable *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00105">GlobalOpt.cpp:105</a></div></div>
<div class="ttc" id="classllvm_1_1Value_1_1user__iterator__impl_html"><div class="ttname"><a href="../../d7/d1e/classllvm_1_1Value_1_1user__iterator__impl.html">llvm::Value::user_iterator_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00134">Value.h:134</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acc332b04dd81f0f8973d20754ad9dc66"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acc332b04dd81f0f8973d20754ad9dc66">CleanupConstantGlobalUsers</a></div><div class="ttdeci">static bool CleanupConstantGlobalUsers(Value *V, Constant *Init, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00270">GlobalOpt.cpp:270</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_aef572ae661cf9f5b14651ef952629c10"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a></div><div class="ttdeci">static bool OptimizeAwayTrappingUsesOfValue(Value *V, Constant *NewV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00673">GlobalOpt.cpp:673</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a60254fdb6128ce676768cdc8f7227433"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a60254fdb6128ce676768cdc8f7227433">CleanupPointerRootUsers</a></div><div class="ttdeci">static bool CleanupPointerRootUsers(GlobalVariable *GV, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00183">GlobalOpt.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef572ae661cf9f5b14651ef952629c10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OptimizeAwayTrappingUsesOfValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>NewV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00673">673</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                                                                      {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> UI = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != E; ) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(*UI++);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(I)) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;setOperand(0, NewV);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I)) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">if</span> (SI-&gt;getOperand(1) == V) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        SI-&gt;setOperand(1, NewV);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(I) || isa&lt;InvokeInst&gt;(I)) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="../../d2/d8d/classllvm_1_1CallSite.html">CallSite</a> CS(I);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">if</span> (CS.getCalledValue() == V) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="comment">// Calling through the pointer!  Turn into a direct call, but be careful</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">// that the pointer is not also being passed as an argument.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        CS.setCalledFunction(NewV);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordtype">bool</span> PassedAsArg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = CS.arg_size(); i != e; ++i)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;          <span class="keywordflow">if</span> (CS.getArgument(i) == V) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            PassedAsArg = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            CS.setArgument(i, NewV);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">if</span> (PassedAsArg) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <span class="comment">// Being passed as an argument also.  Be careful to not invalidate UI!</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          UI = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/dcc/classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(I)) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(CI,</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                ConstantExpr::getCast(CI-&gt;getOpcode(),</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                                      NewV, CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;use_empty()) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        CI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(I)) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="comment">// Should handle GEP here.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 8&gt;</a> Idxs;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      Idxs.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(GEPI-&gt;getNumOperands()-1);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/d66/classllvm_1_1Use.html">User::op_iterator</a> i = GEPI-&gt;op_begin() + 1, e = GEPI-&gt;op_end();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;           i != e; ++i)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(*i))</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          Idxs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="../../db/db2/structC.html">C</a>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span> (Idxs.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == GEPI-&gt;getNumOperands()-1)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        Changed |= <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(GEPI,</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                          ConstantExpr::getGetElementPtr(NewV, Idxs));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (GEPI-&gt;use_empty()) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        GEPI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="../../de/dcc/classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_aef572ae661cf9f5b14651ef952629c10"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a></div><div class="ttdeci">static bool OptimizeAwayTrappingUsesOfValue(Value *V, Constant *NewV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00673">GlobalOpt.cpp:673</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="../../d2/d8d/classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daf/CallSite_8h_source.html#l00350">CallSite.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3a3d2441b80cfd0f2c6e78bca95d53f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a>* OptimizeGlobalAddressOfMalloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>AllocTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *&#160;</td>
          <td class="paramname"><em>NElements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeGlobalAddressOfMalloc - This function takes the specified global variable, and transforms the program as if it always contained the result of the specified malloc. Because it is always the result of the specified malloc, there is no reason to actually DO the malloc. Instead, turn the malloc into a global, and any loads of GV as uses of the new global. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00824">824</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                                                             {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;PROMOTING GLOBAL: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;  CALL = &quot;</span> &lt;&lt; *CI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *GlobalType;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">if</span> (NElements-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() == 1)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    GlobalType = AllocTy;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// If we have an array allocation, the global variable is of an array.</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    GlobalType = ArrayType::get(AllocTy, NElements-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>());</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// Create the new global variable.  The contents of the malloc&#39;d memory is</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// undefined, so initialize with an undef value.</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NewGV = <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(*GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(),</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                             GlobalType, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                             GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                                             UndefValue::get(GlobalType),</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                                             GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.body&quot;</span>,</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                             GV,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                                             GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>());</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// If there are bitcast users of the malloc (which is typical, usually we have</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">// a malloc + bitcast) then replace them with uses of the new global.  Update</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// other users to use the global as well.</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *TheBC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">while</span> (!CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(CI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(User)) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">if</span> (BCI-&gt;getType() == NewGV-&gt;getType()) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        BCI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewGV);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        BCI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        BCI-&gt;setOperand(0, NewGV);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">if</span> (!TheBC)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        TheBC = <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(NewGV, CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;newgv&quot;</span>, CI);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      User-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(CI, TheBC);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *RepValue = NewGV;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">if</span> (NewGV-&gt;getType() != GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>())</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    RepValue = ConstantExpr::getBitCast(RepValue,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                        GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// If there is a comparison against null, we will insert a global bool to</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="comment">// keep track of whether the global was initialized yet or not.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *InitBool =</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(Type::getInt1Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                       GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                       <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                       GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.init&quot;</span>, GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordtype">bool</span> InitBoolUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Loop over all uses of GV, processing them in turn.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">while</span> (!GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>())) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="comment">// The global is initialized when the store to it occurs.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">ConstantInt::getTrue</a>(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()), InitBool, <span class="keyword">false</span>, 0,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                    SI-&gt;getOrdering(), SI-&gt;getSynchScope(), SI);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = cast&lt;LoadInst&gt;(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>());</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">while</span> (!LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="../../d0/d66/classllvm_1_1Use.html">Use</a> &amp;LoadUse = *LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>&gt;(LoadUse.<a class="code" href="../../d0/d66/classllvm_1_1Use.html#ac3564961c33fa9f636c6444db4c7fa85">getUser</a>());</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (!ICI) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        LoadUse = RepValue;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="comment">// Replace the cmp X, 0 with a use of the bool value.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="comment">// Sink the load to where the compare was, if atomic rules allow us to.</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LV = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(InitBool, InitBool-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.val&quot;</span>, <span class="keyword">false</span>, 0,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                               LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">getOrdering</a>(), LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">getSynchScope</a>(),</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                               LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#af5ed72f95abe438ddf3dff1c76c9ea42">isUnordered</a>() ? (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>*)ICI : LI);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      InitBoolUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">switch</span> (ICI-&gt;<a class="code" href="../../df/de6/classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown ICmp Predicate!&quot;</span>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_ULT:</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_SLT:   <span class="comment">// X &lt; null -&gt; always false</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        LV = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_ULE:</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_SLE:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_EQ:</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        LV = BinaryOperator::CreateNot(LV, <span class="stringliteral">&quot;notinit&quot;</span>, ICI);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_NE:</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_UGE:</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_SGE:</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_UGT:</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">case</span> ICmpInst::ICMP_SGT:</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">break</span>;  <span class="comment">// no change.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      ICI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(LV);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// If the initialization boolean was used, insert it, otherwise delete it.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">if</span> (!InitBoolUsed) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">while</span> (!InitBool-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())  <span class="comment">// Delete initializations</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      cast&lt;StoreInst&gt;(InitBool-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>())-&gt;eraseFromParent();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keyword">delete</span> InitBool;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">getGlobalList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(GV, InitBool);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">// Now the GV is dead, nuke it and the malloc..</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  CI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// To further other optimizations, loop over all users of NewGV and try to</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// constant prop them.  This will promote GEP instructions with constant</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// indices into GEP constant-exprs, which will allow global-opt to hack on it.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acbae63c4ac9d6cc5251c7e88f9fc2242">ConstantPropUsersOf</a>(NewGV, DL, TLI);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (RepValue != NewGV)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acbae63c4ac9d6cc5251c7e88f9fc2242">ConstantPropUsersOf</a>(RepValue, DL, TLI);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">return</span> NewGV;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5f/raw__ostream_8cpp_source.html#l00671">raw_ostream.cpp:671</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acbae63c4ac9d6cc5251c7e88f9fc2242"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acbae63c4ac9d6cc5251c7e88f9fc2242">ConstantPropUsersOf</a></div><div class="ttdeci">static void ConstantPropUsersOf(Value *V, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00804">GlobalOpt.cpp:804</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a28c0310f56c2ea41ff7012df55ac6dc5"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">llvm::Module::getGlobalList</a></div><div class="ttdeci">const GlobalListType &amp; getGlobalList() const </div><div class="ttdoc">Get the Module&#39;s list of global variables (constant). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00488">Module.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_a565dd825f238fa0a8c4bbfe562635f7c"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">getTrue</a></div><div class="ttdeci">static Constant * getTrue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00072">InstructionSimplify.cpp:72</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_af5ed72f95abe438ddf3dff1c76c9ea42"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#af5ed72f95abe438ddf3dff1c76c9ea42">llvm::LoadInst::isUnordered</a></div><div class="ttdeci">bool isUnordered() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00236">Instructions.h:236</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3f/ErrorHandling_8h_source.html#l00098">ErrorHandling.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a4df7359cb36b166c0878e16291cbe183"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">llvm::LoadInst::getSynchScope</a></div><div class="ttdeci">SynchronizationScope getSynchScope() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00216">Instructions.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd1/User_8cpp_source.html#l00026">User.cpp:26</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html_ac3564961c33fa9f636c6444db4c7fa85"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html#ac3564961c33fa9f636c6444db4c7fa85">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const </div><div class="ttdoc">Returns the User that contains this Use. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/Use_8cpp_source.html#l00041">Use.cpp:41</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="../../df/de6/classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00735">InstrTypes.h:735</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8c0a29ecc14dc5afe7573bf616da2361"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this fence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00205">Instructions.h:205</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_adb39181b87dffcd61082d08e02bf314e"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">getFalse</a></div><div class="ttdeci">static Constant * getFalse(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00064">InstructionSimplify.cpp:64</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a29bdc3f0c9dfcfe44a7eb9826a09c475"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00141">GlobalValue.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00254">Value.h:254</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac2e338e4c120fc3ea43099b54880f1f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">llvm::Value::user_back</a></div><div class="ttdeci">User * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00271">Value.h:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ccd7f8dd63fd17b03ffc8673e8a3c71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OptimizeOnceStoredGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>StoredOnceVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a>&#160;</td>
          <td class="paramname"><em>Ordering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d27/classllvm_1_1Module.html#ab3ec4cb27a9893405bb7eb997d5b716d">Module::global_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>GVI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01564">1564</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                                                             {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="comment">// Ignore no-op GEPs and bitcasts.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  StoredOnceVal = StoredOnceVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// If we are dealing with a pointer global that is initialized to null and</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// only has one (non-null) value stored into it, then we can optimize any</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// users of the loaded value (often calls and loads) that would trap if the</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// value was null.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>()-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *SOVC = dyn_cast&lt;Constant&gt;(StoredOnceVal)) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != SOVC-&gt;getType())</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        SOVC = ConstantExpr::getBitCast(SOVC, GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="comment">// Optimize away any trapping uses of the loaded value.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad9767ff7ade0f492d8ba272ec52f6b74">OptimizeAwayTrappingUsesOfLoads</a>(GV, SOVC, DL, TLI))</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="../../d9/d4a/namespacellvm.html#a557c0bd50d6a6439ad6a9afcf8e340b5">extractMallocCall</a>(StoredOnceVal, TLI)) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *MallocType = <a class="code" href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">getMallocAllocatedType</a>(CI, TLI);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">if</span> (MallocType &amp;&amp;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;          <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#aeec25966d7b058f58e1223c51d9f3ebb">TryToOptimizeStoreOfMallocToGlobal</a>(GV, CI, MallocType, Ordering, GVI,</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                                             DL, TLI))</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    }</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad9767ff7ade0f492d8ba272ec52f6b74"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad9767ff7ade0f492d8ba272ec52f6b74">OptimizeAwayTrappingUsesOfLoads</a></div><div class="ttdeci">static bool OptimizeAwayTrappingUsesOfLoads(GlobalVariable *GV, Constant *LV, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00740">GlobalOpt.cpp:740</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_aeec25966d7b058f58e1223c51d9f3ebb"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#aeec25966d7b058f58e1223c51d9f3ebb">TryToOptimizeStoreOfMallocToGlobal</a></div><div class="ttdeci">static bool TryToOptimizeStoreOfMallocToGlobal(GlobalVariable *GV, CallInst *CI, Type *AllocTy, AtomicOrdering Ordering, Module::global_iterator &amp;GVI, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01463">GlobalOpt.cpp:1463</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01227">Instructions.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00127">GlobalVariable.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="namespacellvm_html_a557c0bd50d6a6439ad6a9afcf8e340b5"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a557c0bd50d6a6439ad6a9afcf8e340b5">llvm::extractMallocCall</a></div><div class="ttdeci">const CallInst * extractMallocCall(const Value *I, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00204">MemoryBuiltins.cpp:204</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a38ea12c04523d63adda732b9c5d6da0a"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">Value * stripPointerCasts()</div><div class="ttdoc">Strips off any unneeded pointer casts, all-zero GEPs and aliases from the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00423">Value.cpp:423</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="namespacellvm_html_adc3d427ae53571c61269b58488af05df"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">llvm::getMallocAllocatedType</a></div><div class="ttdeci">Type * getMallocAllocatedType(const CallInst *CI, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00289">MemoryBuiltins.cpp:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b41d9e9bd58de6b67b26bc33126c8a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a>* PerformHeapAllocSRoA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>NElems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PerformHeapAllocSRoA - CI is an allocation of an array of structures. Break it up into multiple allocations of arrays of the fields. </p>
<p>InsertedScalarizedLoads - As we process loads, if we can't immediately update all uses of the load, keep track of what scalarized loads are inserted for a given load. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01274">1274</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                                                          {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SROA HEAP ALLOC: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;  MALLOC = &quot;</span> &lt;&lt; *CI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *MAT = <a class="code" href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">getMallocAllocatedType</a>(CI, TLI);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(MAT);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// There is guaranteed to be at least one use of the malloc (storing</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">// it into GV).  If there are other uses, change them to be uses of</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="comment">// the global to simplify later code.  This also deletes the store</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// into GV.</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a>(CI, GV);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// Okay, at this point, there are no users of the malloc.  Insert N</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">// new mallocs at the same place as CI, and N globals.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  std::vector&lt;Value*&gt; FieldGlobals;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  std::vector&lt;Value*&gt; FieldMallocs;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordtype">unsigned</span> AS = GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> FieldNo = 0, e = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>(); FieldNo != e;++FieldNo){</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *FieldTy = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(FieldNo);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PFieldTy = PointerType::get(FieldTy, AS);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV =</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(*GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(),</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                         PFieldTy, <span class="keyword">false</span>, GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                         Constant::getNullValue(PFieldTy),</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                         GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.f&quot;</span> + <a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(FieldNo), GV,</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                         GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>());</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    FieldGlobals.push_back(NGV);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordtype">unsigned</span> TypeSize = DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(FieldTy);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *<a class="code" href="../../d9/d6e/namespacellvm_1_1AArch64DB.html#a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4">ST</a> = dyn_cast&lt;StructType&gt;(FieldTy))</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      TypeSize = DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(<a class="code" href="../../d9/d6e/namespacellvm_1_1AArch64DB.html#a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4">ST</a>)-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>();</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *IntPtrTy = DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NMI = CallInst::CreateMalloc(CI, IntPtrTy, FieldTy,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                                        ConstantInt::get(IntPtrTy, TypeSize),</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                        NElems, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                                        CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.f&quot;</span> + <a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(FieldNo));</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    FieldMallocs.push_back(NMI);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(NMI, NGV, CI);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">// The tricky aspect of this transformation is handling the case when malloc</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// fails.  In the original code, malloc failing would set the result pointer</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">// of malloc to null.  In this case, some mallocs could succeed and others</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// could fail.  As such, we emit code that looks like this:</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">//    F0 = malloc(field0)</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">//    F1 = malloc(field1)</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">//    F2 = malloc(field2)</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">//    if (F0 == 0 || F1 == 0 || F2 == 0) {</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">//      if (F0) { free(F0); F0 = 0; }</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">//      if (F1) { free(F1); F1 = 0; }</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">//      if (F2) { free(F2); F2 = 0; }</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// The malloc can also fail if its argument is too large.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *ConstantZero = ConstantInt::get(CI-&gt;<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 0);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RunningOr = <span class="keyword">new</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>(CI, ICmpInst::ICMP_SLT, CI-&gt;<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0),</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                                  ConstantZero, <span class="stringliteral">&quot;isneg&quot;</span>);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = FieldMallocs.size(); i != e; ++i) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cond = <span class="keyword">new</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>(CI, ICmpInst::ICMP_EQ, FieldMallocs[i],</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                             Constant::getNullValue(FieldMallocs[i]-&gt;<a class="code" href="../../d4/db0/namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">getType</a>()),</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                               <span class="stringliteral">&quot;isnull&quot;</span>);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    RunningOr = BinaryOperator::CreateOr(RunningOr, Cond, <span class="stringliteral">&quot;tmp&quot;</span>, CI);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="comment">// Split the basic block at the old malloc.</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigBB = CI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *ContBB = OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">splitBasicBlock</a>(CI, <span class="stringliteral">&quot;malloc_cont&quot;</span>);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// Create the block to check the first condition.  Put all these blocks at the</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// end of the function as they are unlikely to be executed.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *NullPtrBlock = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(),</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                                                <span class="stringliteral">&quot;malloc_ret_null&quot;</span>,</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                                                OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>());</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// Remove the uncond branch from OrigBB to ContBB, turning it into a cond</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// branch on RunningOr.</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(NullPtrBlock, ContBB, RunningOr, OrigBB);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">// Within the NullPtrBlock, we need to emit a comparison and branch for each</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// pointer, because some may be null while others are not.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = FieldGlobals.size(); i != e; ++i) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *GVVal = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(FieldGlobals[i], <span class="stringliteral">&quot;tmp&quot;</span>, NullPtrBlock);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cmp = <span class="keyword">new</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>(*NullPtrBlock, ICmpInst::ICMP_NE, GVVal,</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                              Constant::getNullValue(GVVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *FreeBlock = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(Cmp-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), <span class="stringliteral">&quot;free_it&quot;</span>,</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                                               OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>());</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *NextBlock = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(Cmp-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), <span class="stringliteral">&quot;next&quot;</span>,</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                                               OrigBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>());</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *BI = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(FreeBlock, NextBlock,</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                                         Cmp, NullPtrBlock);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// Fill in FreeBlock.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    CallInst::CreateFree(GVVal, BI);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(Constant::getNullValue(GVVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), FieldGlobals[i],</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                  FreeBlock);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(NextBlock, FreeBlock);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    NullPtrBlock = NextBlock;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(ContBB, NullPtrBlock);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="comment">// CI is no longer needed, remove it.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  CI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">  /// InsertedScalarizedLoads - As we process loads, if we can&#39;t immediately</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">  /// update all uses of the load, keep track of what scalarized loads are</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">  /// inserted for a given load.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment"></span>  <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;Value*, std::vector&lt;Value*&gt;</a> &gt; InsertedScalarizedValues;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  InsertedScalarizedValues[GV] = FieldGlobals;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  std::vector&lt;std::pair&lt;PHINode*, unsigned&gt; &gt; PHIsToRewrite;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// Okay, the malloc site is completely handled.  All of the uses of GV are now</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// loads, and all uses of those loads are simple.  Rewrite them to use loads</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// of the per-field globals instead.</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> UI = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != E;) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI++);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(User)) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a423016bbd81dcc13bc4855bf1bebca9b">RewriteUsesOfLoadForHeapSRoA</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, InsertedScalarizedValues, PHIsToRewrite);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// Must be a store of null.</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = cast&lt;StoreInst&gt;(User);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(isa&lt;ConstantPointerNull&gt;(SI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) &amp;&amp;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;           <span class="stringliteral">&quot;Unexpected heap-sra user!&quot;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// Insert a store of null into each global.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = FieldGlobals.size(); i != e; ++i) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PT = cast&lt;PointerType&gt;(FieldGlobals[i]-&gt;getType());</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Null = Constant::getNullValue(PT-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(Null, FieldGlobals[i], SI);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// Erase the original store.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// While we have PHIs that are interesting to rewrite, do it.</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">while</span> (!PHIsToRewrite.empty()) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = PHIsToRewrite.back().first;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordtype">unsigned</span> FieldNo = PHIsToRewrite.back().second;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    PHIsToRewrite.pop_back();</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *FieldPN = cast&lt;PHINode&gt;(InsertedScalarizedValues[PN][FieldNo]);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(FieldPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>() == 0 &amp;&amp;<span class="stringliteral">&quot;Already processed this phi&quot;</span>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// Add all the incoming values.  This can materialize more phis.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      InVal = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a>(InVal, FieldNo, InsertedScalarizedValues,</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                               PHIsToRewrite);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      FieldPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InVal, PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i));</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">// Drop all inter-phi links and any loads that made it this far.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a>*, std::vector&lt;Value*&gt; &gt;::iterator</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = InsertedScalarizedValues.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), E = InsertedScalarizedValues.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      PN-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">dropAllReferences</a>();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;dropAllReferences();</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// Delete all the phis and loads now that inter-references are dead.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a>*, std::vector&lt;Value*&gt; &gt;::iterator</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = InsertedScalarizedValues.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), E = InsertedScalarizedValues.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// The old global is now dead, remove it.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  ++NumHeapSRA;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordflow">return</span> cast&lt;GlobalVariable&gt;(FieldGlobals[0]);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a48ec5fcee6d2c17c723e8e67f169f948"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">llvm::User::dropAllReferences</a></div><div class="ttdeci">void dropAllReferences()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00161">User.h:161</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a35445872809e31831849ca99f41540d0"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a></div><div class="ttdeci">static void ReplaceUsesOfMallocWithGlobal(Instruction *Alloc, GlobalVariable *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01006">GlobalOpt.cpp:1006</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_ac015f68d60ea67a2e31bc10bc720d3e8"><div class="ttname"><a href="../../d4/db0/namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">llvm::Intrinsic::getType</a></div><div class="ttdeci">FunctionType * getType(LLVMContext &amp;Context, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00711">Function.cpp:711</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00212">Type.cpp:212</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="../../db/d5e/classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a33f39e494317a93a9f9c798714c44029"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a></div><div class="ttdeci">static Value * GetHeapSROAValue(Value *V, unsigned FieldNo, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01149">GlobalOpt.cpp:1149</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00058">DenseMap.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00488">DataLayout.h:488</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01321">Instructions.h:1321</a></div></div>
<div class="ttc" id="namespacellvm_html_adc3d427ae53571c61269b58488af05df"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">llvm::getMallocAllocatedType</a></div><div class="ttdeci">Type * getMallocAllocatedType(const CallInst *CI, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00289">MemoryBuiltins.cpp:289</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00054">DenseMap.h:54</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a29bdc3f0c9dfcfe44a7eb9826a09c475"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00141">GlobalValue.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64DB_html_a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4"><div class="ttname"><a href="../../d9/d6e/namespacellvm_1_1AArch64DB.html#a0c353863a53e67dfe0414f1ab52e0c79a926f30d4227df40d4021a1a65fca93d4">llvm::AArch64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00339">AArch64BaseInfo.h:339</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a19445f836d9e1ecb32cba27ec4338fff"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00302">BasicBlock.cpp:302</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a423016bbd81dcc13bc4855bf1bebca9b"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a423016bbd81dcc13bc4855bf1bebca9b">RewriteUsesOfLoadForHeapSRoA</a></div><div class="ttdeci">static void RewriteUsesOfLoadForHeapSRoA(LoadInst *Load, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01258">GlobalOpt.cpp:1258</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00037">BasicBlock.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_aa2113dcf8c96c19c9a2abf786b9ad3b7"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">llvm::StructType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Random access to the elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00286">DerivedTypes.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7d5794196f5b9b7477429aec29ad157"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void RemoveNestAttribute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td>
          <td class="paramname"><em>F</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01885">1885</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                                             {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#ad1efd93bf021addd8ac8a48a0c5fa3dd">setAttributes</a>(<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc3494615b004b675f8266605bcd0421">StripNest</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>()));</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="../../d2/d8d/classllvm_1_1CallSite.html">CallSite</a> CS(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    CS.setAttributes(<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#acc3494615b004b675f8266605bcd0421">StripNest</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), CS.getAttributes()));</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00202">Function.cpp:202</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_acc3494615b004b675f8266605bcd0421"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#acc3494615b004b675f8266605bcd0421">StripNest</a></div><div class="ttdeci">static AttributeSet StripNest(LLVMContext &amp;C, const AttributeSet &amp;Attrs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01872">GlobalOpt.cpp:1872</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ad1efd93bf021addd8ac8a48a0c5fa3dd"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#ad1efd93bf021addd8ac8a48a0c5fa3dd">llvm::Function::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeSet attrs)</div><div class="ttdoc">Set the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00173">Function.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="../../d2/d8d/classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daf/CallSite_8h_source.html#l00350">CallSite.h:350</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35445872809e31831849ca99f41540d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ReplaceUsesOfMallocWithGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ReplaceUsesOfMallocWithGlobal - The Alloc pointer is stored into GV somewhere. Transform all uses of the allocation into loads from the global and uses of the resultant pointer. Further, delete the store into GV. This assumes that these value pass the 'ValueIsOnlyUsedLocallyOrStoredToOneGlobal' predicate. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01006">1006</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                                              {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">while</span> (!Alloc-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *U = cast&lt;Instruction&gt;(*Alloc-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>());</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt = U;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="comment">// If this is the store of the allocation into the global, remove it.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">if</span> (SI-&gt;getOperand(1) == GV) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(U)) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="comment">// Insert the load in the corresponding predecessor, not right before the</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="comment">// PHI.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      InsertPt = PN-&gt;getIncomingBlock(*Alloc-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>())-&gt;getTerminator();</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(U)) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="comment">// Must be bitcast between the malloc and store to initialize the global.</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a>(U, GV);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      U-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="comment">// If this is a &quot;GEP bitcast&quot; and the user is a store to the global, then</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="comment">// just process it as a bitcast.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span> (GEPI-&gt;hasAllZeroIndices() &amp;&amp; GEPI-&gt;hasOneUse())</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(GEPI-&gt;user_back()))</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;          <span class="keywordflow">if</span> (SI-&gt;getOperand(1) == GV) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="comment">// Must be bitcast GEP between the malloc and store to initialize</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="comment">// the global.</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a>(GEPI, GV);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            GEPI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;          }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="comment">// Insert a load from the global, and use it instead of the malloc.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NL = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(GV, GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.val&quot;</span>, InsertPt);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    U-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(Alloc, NL);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a35445872809e31831849ca99f41540d0"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a35445872809e31831849ca99f41540d0">ReplaceUsesOfMallocWithGlobal</a></div><div class="ttdeci">static void ReplaceUsesOfMallocWithGlobal(Instruction *Alloc, GlobalVariable *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01006">GlobalOpt.cpp:1006</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd1/User_8cpp_source.html#l00026">User.cpp:26</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00254">Value.h:254</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b41afcb0ed58c8ecb4b49fc1554c583"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void RewriteHeapSROALoadUser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>LoadUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>InsertedScalarizedValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>PHIsToRewrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>RewriteHeapSROALoadUser - Given a load instruction and a value derived from the load, rewrite the derived value to use the HeapSRoA'd load. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01194">1194</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                                                                           {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// If this is a comparison against null, handle it.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *SCI = dyn_cast&lt;ICmpInst&gt;(LoadUser)) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(isa&lt;ConstantPointerNull&gt;(SCI-&gt;getOperand(1)));</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// If we have a setcc of the loaded pointer, we can use a setcc of any</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">// field.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NPtr = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a>(SCI-&gt;getOperand(0), 0,</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                   InsertedScalarizedValues, PHIsToRewrite);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *New = <span class="keyword">new</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>(SCI, SCI-&gt;getPredicate(), NPtr,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                              Constant::getNullValue(NPtr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                              SCI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    SCI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(New);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    SCI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// Handle &#39;getelementptr Ptr, Idx, i32 FieldNo ...&#39;</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(LoadUser)) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(GEPI-&gt;getNumOperands() &gt;= 3 &amp;&amp; isa&lt;ConstantInt&gt;(GEPI-&gt;getOperand(2))</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;           &amp;&amp; <span class="stringliteral">&quot;Unexpected GEPI!&quot;</span>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// Load the pointer for this field.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordtype">unsigned</span> FieldNo = cast&lt;ConstantInt&gt;(GEPI-&gt;getOperand(2))-&gt;getZExtValue();</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NewPtr = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a>(GEPI-&gt;getOperand(0), FieldNo,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                                     InsertedScalarizedValues, PHIsToRewrite);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// Create the new GEP idx vector.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> GEPIdx;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    GEPIdx.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(GEPI-&gt;getOperand(1));</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    GEPIdx.append(GEPI-&gt;op_begin()+3, GEPI-&gt;op_end());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NGEPI = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">GetElementPtrInst::Create</a>(NewPtr, GEPIdx,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                                             GEPI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>(), GEPI);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    GEPI-&gt;replaceAllUsesWith(NGEPI);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    GEPI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// Recursively transform the users of PHI nodes.  This will lazily create the</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// PHIs that are needed for individual elements.  Keep track of what PHIs we</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// see in InsertedScalarizedValues so that we don&#39;t get infinite loops (very</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// antisocial).  If the PHI is already in InsertedScalarizedValues, it has</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// already been seen first by another load, so its uses have already been</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// processed.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(LoadUser);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> (!InsertedScalarizedValues.insert(std::make_pair(PN,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                              std::vector&lt;Value*&gt;())).second)</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// If this is the first time we&#39;ve seen this PHI, recursively process all</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// users.</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> UI = PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != E;) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI++);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a3b41afcb0ed58c8ecb4b49fc1554c583">RewriteHeapSROALoadUser</a>(User, InsertedScalarizedValues, PHIsToRewrite);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a3b41afcb0ed58c8ecb4b49fc1554c583"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a3b41afcb0ed58c8ecb4b49fc1554c583">RewriteHeapSROALoadUser</a></div><div class="ttdeci">static void RewriteHeapSROALoadUser(Instruction *LoadUser, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01194">GlobalOpt.cpp:1194</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a33f39e494317a93a9f9c798714c44029"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a33f39e494317a93a9f9c798714c44029">GetHeapSROAValue</a></div><div class="ttdeci">static Value * GetHeapSROAValue(Value *V, unsigned FieldNo, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01149">GlobalOpt.cpp:1149</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a423016bbd81dcc13bc4855bf1bebca9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void RewriteUsesOfLoadForHeapSRoA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *&#160;</td>
          <td class="paramname"><em>Load</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, std::vector&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>InsertedScalarizedValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, unsigned &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>PHIsToRewrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>RewriteUsesOfLoadForHeapSRoA - We are performing Heap SRoA on a global. Ptr is a value loaded from the global. Eliminate all uses of Ptr, making them use FieldGlobals instead. All uses of loaded values satisfy AllGlobalLoadUsesSimpleEnoughForHeapSRA. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01258">1258</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                                                                           {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> UI = Load-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), E = Load-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != E;) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI++);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a3b41afcb0ed58c8ecb4b49fc1554c583">RewriteHeapSROALoadUser</a>(User, InsertedScalarizedValues, PHIsToRewrite);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordflow">if</span> (Load-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    Load-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    InsertedScalarizedValues.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(Load);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a3b41afcb0ed58c8ecb4b49fc1554c583"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a3b41afcb0ed58c8ecb4b49fc1554c583">RewriteHeapSROALoadUser</a></div><div class="ttdeci">static void RewriteHeapSROALoadUser(Instruction *LoadUser, DenseMap&lt; Value *, std::vector&lt; Value * &gt; &gt; &amp;InsertedScalarizedValues, std::vector&lt; std::pair&lt; PHINode *, unsigned &gt; &gt; &amp;PHIsToRewrite)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01194">GlobalOpt.cpp:1194</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a269c7b8adcd29645a4f901196fc08806"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00189">DenseMap.h:189</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00269">Value.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a89e14161646470e3bf6e583ffe2f6bf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setUsedInitializer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *, 8 &gt;&#160;</td>
          <td class="paramname"><em>Init</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02716">2716</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                                                                   {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  <span class="keywordflow">if</span> (Init.<a class="code" href="../../d4/dd1/classllvm_1_1SmallPtrSetImplBase.html#afddf148ec66de4d27e7540d8a631a307">empty</a>()) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    V.<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  }</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <span class="comment">// Type of pointer to the array of pointers.</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *Int8PtrTy = Type::getInt8PtrTy(V.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), 0);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;llvm::Constant *, 8&gt;</a> UsedArray;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalValue *, 8&gt;::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Init.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a6068bbc6011a275c906dd6618b46a57a">begin</a>(), E = Init.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a429c2bd6ae05fb65e6275f56dd572759">end</a>();</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Cast</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      = ConstantExpr::getPointerBitCastOrAddrSpaceCast(*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Int8PtrTy);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    UsedArray.push_back(Cast);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  }</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <span class="comment">// Sort to get deterministic order.</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(UsedArray.begin(), UsedArray.end(), <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a>);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = ArrayType::get(Int8PtrTy, UsedArray.size());</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *M = V.<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  V.<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#a2fcdac04778aae87d649c965122531ed">removeFromParent</a>();</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">NV</a> =</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(*M, ATy, <span class="keyword">false</span>, <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99">llvm::GlobalValue::AppendingLinkage</a>,</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                         <a class="code" href="../../d7/dc1/classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a>(ATy, UsedArray), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  NV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;V);</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  NV-&gt;<a class="code" href="../../dc/d30/classllvm_1_1GlobalObject.html#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(<span class="stringliteral">&quot;llvm.metadata&quot;</span>);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="keyword">delete</span> &amp;V;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99">llvm::GlobalValue::AppendingLinkage</a></div><div class="ttdoc">Special purpose, only applies to global arrays. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00041">GlobalValue.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImplBase_html_afddf148ec66de4d27e7540d8a631a307"><div class="ttname"><a href="../../d4/dd1/classllvm_1_1SmallPtrSetImplBase.html#afddf148ec66de4d27e7540d8a631a307">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00077">SmallPtrSet.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00115">Module.h:115</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad9ef9dbac3fbf9cc30e63d86bf9d7e34"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a></div><div class="ttdeci">static int compareNames(Constant *const *A, Constant *const *B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l02712">GlobalOpt.cpp:2712</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">llvm::AArch64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00208">AArch64BaseInfo.h:208</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="namespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/STLExtras_8h_source.html#l00335">STLExtras.h:335</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="../../d7/dc1/classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00783">Constants.cpp:783</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a6068bbc6011a275c906dd6618b46a57a"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a6068bbc6011a275c906dd6618b46a57a">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00279">SmallPtrSet.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a429c2bd6ae05fb65e6275f56dd572759"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a429c2bd6ae05fb65e6275f56dd572759">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00282">SmallPtrSet.h:282</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalObject_html_a959c99adbdc7f8375cf866916c6b60f2"><div class="ttname"><a href="../../dc/d30/classllvm_1_1GlobalObject.html#a959c99adbdc7f8375cf866916c6b60f2">llvm::GlobalObject::setSection</a></div><div class="ttdeci">void setSection(StringRef S)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00111">Globals.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a2fcdac04778aae87d649c965122531ed"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#a2fcdac04778aae87d649c965122531ed">llvm::GlobalVariable::removeFromParent</a></div><div class="ttdeci">void removeFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00183">Globals.cpp:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c88cc0fdb561f4a44ebd45b201a07dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a>* SRAGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SRAGlobal - Perform scalar replacement of aggregates on the specified global variable. This opens the door for other optimizations by exposing the behavior of the program in a more fine-grained way. We have determined that this transformation is safe already. We return the first global variable we insert so that the caller can reprocess it. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00472">472</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                                                           {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// Make sure this global only has simple uses that we can SRA.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a732909ea600e927d4123ba6f844c4035">GlobalUsersSafeToSRA</a>(GV))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>() &amp;&amp; !GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../df/d88/classllvm_1_1Init.html">Init</a> = GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = Init-&gt;getType();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  std::vector&lt;GlobalVariable*&gt; NewGlobals;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="../../d0/dc9/classllvm_1_1iplist.html">Module::GlobalListType</a> &amp;Globals = GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">getGlobalList</a>();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// Get the alignment of the global, either explicit or target-specific.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordtype">unsigned</span> StartAlignment = GV-&gt;<a class="code" href="../../dc/d30/classllvm_1_1GlobalObject.html#a4250755163d1cae49ce9081aa9dfe638">getAlignment</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">if</span> (StartAlignment == 0)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    StartAlignment = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">getABITypeAlignment</a>(GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>());</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    NewGlobals.reserve(STy-&gt;getNumElements());</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html">StructLayout</a> &amp;Layout = *DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = STy-&gt;getNumElements(); i != e; ++i) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = Init-&gt;getAggregateElement(i);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(In &amp;&amp; <span class="stringliteral">&quot;Couldn&#39;t get element of initializer?&quot;</span>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV = <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(STy-&gt;getElementType(i), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                               GlobalVariable::InternalLinkage,</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                               <a class="code" href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(i),</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                               GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                              GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      Globals.<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(GV, NGV);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      NewGlobals.push_back(NGV);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="comment">// Calculate the known alignment of the field.  If the original aggregate</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// had 256 byte alignment for example, something might depend on that:</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// propagate info to each field.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      uint64_t FieldOffset = Layout.<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(i);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordtype">unsigned</span> NewAlign = (unsigned)<a class="code" href="../../d9/d4a/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">MinAlign</a>(StartAlignment, FieldOffset);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">if</span> (NewAlign &gt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">getABITypeAlignment</a>(STy-&gt;getElementType(i)))</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        NGV-&gt;<a class="code" href="../../dc/d30/classllvm_1_1GlobalObject.html#aa9d353366e13d2fbda3acccd21ce51b7">setAlignment</a>(NewAlign);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *STy = dyn_cast&lt;SequentialType&gt;(Ty)) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordtype">unsigned</span> NumElements = 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(STy))</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      NumElements = ATy-&gt;getNumElements();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      NumElements = cast&lt;VectorType&gt;(STy)-&gt;getNumElements();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (NumElements &gt; 16 &amp;&amp; GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a9ea9a909185ecbf9fc81ab35ebfb11d6">hasNUsesOrMore</a>(16))</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// It&#39;s not worth it.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    NewGlobals.reserve(NumElements);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    uint64_t EltSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(STy-&gt;getElementType());</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">unsigned</span> EltAlign = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">getABITypeAlignment</a>(STy-&gt;getElementType());</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NumElements; i != e; ++i) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *In = Init-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(i);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(In &amp;&amp; <span class="stringliteral">&quot;Couldn&#39;t get element of initializer?&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV = <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(STy-&gt;getElementType(), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                               GlobalVariable::InternalLinkage,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                               <a class="code" href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(i),</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                               GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                              GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      Globals.<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(GV, NGV);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      NewGlobals.push_back(NGV);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="comment">// Calculate the known alignment of the field.  If the original aggregate</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="comment">// had 256 byte alignment for example, something might depend on that:</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="comment">// propagate info to each field.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordtype">unsigned</span> NewAlign = (unsigned)<a class="code" href="../../d9/d4a/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">MinAlign</a>(StartAlignment, EltSize*i);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">if</span> (NewAlign &gt; EltAlign)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        NGV-&gt;<a class="code" href="../../dc/d30/classllvm_1_1GlobalObject.html#aa9d353366e13d2fbda3acccd21ce51b7">setAlignment</a>(NewAlign);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">if</span> (NewGlobals.empty())</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;PERFORMING GLOBAL SRA ON: &quot;</span> &lt;&lt; *GV);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NullInt =Constant::getNullValue(Type::getInt32Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// Loop over all of the uses of the global, replacing the constantexpr geps,</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// with smaller constantexpr geps or direct references.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">while</span> (!GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *GEP = GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(((isa&lt;ConstantExpr&gt;(GEP) &amp;&amp;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;             cast&lt;ConstantExpr&gt;(GEP)-&gt;getOpcode()==Instruction::GetElementPtr)||</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            isa&lt;GetElementPtrInst&gt;(GEP)) &amp;&amp; <span class="stringliteral">&quot;NonGEP CE&#39;s are not SRAable!&quot;</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Ignore the 1th operand, which has to be zero or else the program is quite</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// broken (undefined).  Get the 2nd operand, which is the structure or array</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// index.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">unsigned</span> Val = cast&lt;ConstantInt&gt;(GEP-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2))-&gt;getZExtValue();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (Val &gt;= NewGlobals.size()) Val = 0; <span class="comment">// Out of bound array access.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NewPtr = NewGlobals[Val];</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// Form a shorter GEP if needed.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">if</span> (GEP-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &gt; 3) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(GEP)) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 8&gt;</a> Idxs;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        Idxs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(NullInt);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 3, e = CE-&gt;getNumOperands(); i != e; ++i)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          Idxs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CE-&gt;getOperand(i));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        NewPtr = ConstantExpr::getGetElementPtr(cast&lt;Constant&gt;(NewPtr), Idxs);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = cast&lt;GetElementPtrInst&gt;(GEP);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Idxs;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        Idxs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(NullInt);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 3, e = GEPI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); i != e; ++i)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          Idxs.push_back(GEPI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        NewPtr = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">GetElementPtrInst::Create</a>(NewPtr, Idxs,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                           GEPI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>(Val),GEPI);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    GEP-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewPtr);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(GEP))</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      GEPI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      cast&lt;ConstantExpr&gt;(GEP)-&gt;destroyConstant();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// Delete the old global, now that it is dead.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  Globals.<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a5c2aa38108db7a66ac5e8da547f64ad7">erase</a>(GV);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  ++NumSRA;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Loop over the new globals array deleting any globals that are obviously</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// dead.  This can arise due to scalarization of a structure or an array that</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// has elements that are dead.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordtype">unsigned</span> FirstGlobal = 0;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NewGlobals.size(); i != e; ++i)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (NewGlobals[i]-&gt;use_empty()) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      Globals.<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a5c2aa38108db7a66ac5e8da547f64ad7">erase</a>(NewGlobals[i]);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">if</span> (FirstGlobal == i) ++FirstGlobal;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">return</span> FirstGlobal != NewGlobals.size() ? NewGlobals[FirstGlobal] : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac"><div class="ttname"><a href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">llvm::tgtok::In</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a28c0310f56c2ea41ff7012df55ac6dc5"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">llvm::Module::getGlobalList</a></div><div class="ttdeci">const GlobalListType &amp; getGlobalList() const </div><div class="ttdoc">Get the Module&#39;s list of global variables (constant). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00488">Module.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalObject_html_aa9d353366e13d2fbda3acccd21ce51b7"><div class="ttname"><a href="../../dc/d30/classllvm_1_1GlobalObject.html#aa9d353366e13d2fbda3acccd21ce51b7">llvm::GlobalObject::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00076">Globals.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00127">GlobalVariable.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00481">DataLayout.h:481</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="../../db/d5e/classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalObject_html_a4250755163d1cae49ce9081aa9dfe638"><div class="ttname"><a href="../../dc/d30/classllvm_1_1GlobalObject.html#a4250755163d1cae49ce9081aa9dfe638">llvm::GlobalObject::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc6/GlobalObject_8h_source.html#l00039">GlobalObject.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00505">DataLayout.h:505</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a01fee21e2c679094ce5ab193369d5198"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00205">Constants.cpp:205</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html">llvm::iplist&lt; GlobalVariable &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a5c2aa38108db7a66ac5e8da547f64ad7"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a5c2aa38108db7a66ac5e8da547f64ad7">llvm::iplist::erase</a></div><div class="ttdeci">iterator erase(iterator where)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00465">ilist.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_abb381519d34dcb9ccf673bf7689d0721"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">llvm::DataLayout::getABITypeAlignment</a></div><div class="ttdeci">unsigned getABITypeAlignment(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00683">DataLayout.cpp:683</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a1500a3fe55cf38153aa1e0fbe7284e05"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00144">GlobalVariable.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a29bdc3f0c9dfcfe44a7eb9826a09c475"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00141">GlobalValue.h:141</a></div></div>
<div class="ttc" id="namespacellvm_html_af36d7e69ab16b64b2e3a48c83aa9f0f6"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">llvm::MinAlign</a></div><div class="ttdeci">uint64_t MinAlign(uint64_t A, uint64_t B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00544">MathExtras.h:544</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a732909ea600e927d4123ba6f844c4035"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a732909ea600e927d4123ba6f844c4035">GlobalUsersSafeToSRA</a></div><div class="ttdeci">static bool GlobalUsersSafeToSRA(GlobalValue *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00458">GlobalOpt.cpp:458</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a9ea9a909185ecbf9fc81ab35ebfb11d6"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a9ea9a909185ecbf9fc81ab35ebfb11d6">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00104">Value.cpp:104</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_abefc2d8baa67d6f9e49c95912cfde480"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00261">GlobalValue.h:261</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Init_html"><div class="ttname"><a href="../../df/d88/classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/Record_8h_source.html#l00418">Record.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac2e338e4c120fc3ea43099b54880f1f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">llvm::Value::user_back</a></div><div class="ttdeci">User * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00271">Value.h:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c6c460a78701817b3c5a6bb5d788272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumMarked&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> marked constant&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab5ee612df6b5d8b666b63bc5f592091f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumUnnamed&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> marked unnamed_addr&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a92ca6a508657d3a3222fb09a30ee0eed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumSRA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of aggregate <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> broken into <a class="el" href="../../d3/dde/ArgumentPromotion_8cpp.html#ad6f471355f16d777b075f7d1884d3622">scalars</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9420c1be8c72dcd5872d59dcb2c68558"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumHeapSRA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of heap objects SRA'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6747c5fc541c115ca1d7e3e13b94d4ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumSubstitute&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> with initializers stored into them&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5a242796495d087689e5974d45ce929b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumDeleted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> deleted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2868127d4513caa06afdb3aac05127f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumFnDeleted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d9/d58/LoopExtractor_8cpp.html#ac6229e61e0214888a5ad66ac60cb36ec">functions</a> deleted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a017f0480c069b3d669c55362498712ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGlobUses&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of global uses devirtualized&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a57bd2d525288ccfe6cc8e665ffe1d151"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLocalized&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/d1f/GlobalsModRef_8cpp.html#a79a824a017314e01a69240621102bc28">globals</a> localized&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9b54f08be2f986d98b602c695805b7d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumShrunkToBool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of global vars shrunk to booleans&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9aa2d02e8571cda1f9cfb4f0ca72bae2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumFastCallFns&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d9/d58/LoopExtractor_8cpp.html#ac6229e61e0214888a5ad66ac60cb36ec">functions</a> converted to fastcc&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a74434e3335b4763216f66e62d3f5197e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumCtorsEvaluated&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of static ctors evaluated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a59ff13fca7e242c7985162f5c6a306"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumNestRemoved&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of nest <a class="el" href="../../d2/d92/FunctionAttrs_8cpp.html#a07522de877d8a6f09f42438dab01a434">attributes</a> removed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aeec66735becbd98e61f9e8e8f719f359"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAliasesResolved&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of global aliases resolved&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab53f6d5a2288069c28b77631870cb0f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAliasesRemoved&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of global aliases eliminated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aedbe33c6b315527ee03f023e6657d301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumCXXDtorsRemoved&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of global <a class="el" href="../../db/db2/structC.html">C</a>++ destructors removed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acc3494615b004b675f8266605bcd0421"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/d16/classllvm_1_1AttributeSet.html">AttributeSet</a> StripNest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d1d/classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/d16/classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;&#160;</td>
          <td class="paramname"><em>Attrs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01872">1872</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                                                                         {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Attrs.<a class="code" href="../../dc/d16/classllvm_1_1AttributeSet.html#a048066a2eb851073ae71cf3dc7a2bfe7">getNumSlots</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordtype">unsigned</span> Index = Attrs.<a class="code" href="../../dc/d16/classllvm_1_1AttributeSet.html#a564314dce5264ab0cfe6ae3d9f3f9c12">getSlotIndex</a>(i);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> (!Attrs.<a class="code" href="../../dc/d16/classllvm_1_1AttributeSet.html#a43d638279385ef1f48cb3e4990482e4c">getSlotAttributes</a>(i).<a class="code" href="../../dc/d16/classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(Index, Attribute::Nest))</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="comment">// There can be only one.</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">return</span> Attrs.<a class="code" href="../../dc/d16/classllvm_1_1AttributeSet.html#a206bb7d4b3f7e63b4cc0e83b8c120b80">removeAttribute</a>(C, Index, Attribute::Nest);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordflow">return</span> Attrs;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a54abbe67d4a53c92652f1666dc19281f"><div class="ttname"><a href="../../dc/d16/classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">llvm::AttributeSet::hasAttribute</a></div><div class="ttdeci">bool hasAttribute(unsigned Index, Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d65/Attributes_8cpp_source.html#l00872">Attributes.cpp:872</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a206bb7d4b3f7e63b4cc0e83b8c120b80"><div class="ttname"><a href="../../dc/d16/classllvm_1_1AttributeSet.html#a206bb7d4b3f7e63b4cc0e83b8c120b80">llvm::AttributeSet::removeAttribute</a></div><div class="ttdeci">AttributeSet removeAttribute(LLVMContext &amp;C, unsigned Index, Attribute::AttrKind Attr) const </div><div class="ttdoc">Remove the specified attribute at the specified index from this attribute list. Since attribute lists...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d65/Attributes_8cpp_source.html#l00787">Attributes.cpp:787</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a048066a2eb851073ae71cf3dc7a2bfe7"><div class="ttname"><a href="../../dc/d16/classllvm_1_1AttributeSet.html#a048066a2eb851073ae71cf3dc7a2bfe7">llvm::AttributeSet::getNumSlots</a></div><div class="ttdeci">unsigned getNumSlots() const </div><div class="ttdoc">Return the number of slots used in this attribute list. This is the number of arguments that have an ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d65/Attributes_8cpp_source.html#l00965">Attributes.cpp:965</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a43d638279385ef1f48cb3e4990482e4c"><div class="ttname"><a href="../../dc/d16/classllvm_1_1AttributeSet.html#a43d638279385ef1f48cb3e4990482e4c">llvm::AttributeSet::getSlotAttributes</a></div><div class="ttdeci">AttributeSet getSlotAttributes(unsigned Slot) const </div><div class="ttdoc">Return the attributes at the given slot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d65/Attributes_8cpp_source.html#l00975">Attributes.cpp:975</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a564314dce5264ab0cfe6ae3d9f3f9c12"><div class="ttname"><a href="../../dc/d16/classllvm_1_1AttributeSet.html#a564314dce5264ab0cfe6ae3d9f3f9c12">llvm::AttributeSet::getSlotIndex</a></div><div class="ttdeci">unsigned getSlotIndex(unsigned Slot) const </div><div class="ttdoc">Return the index for the given slot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d65/Attributes_8cpp_source.html#l00969">Attributes.cpp:969</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeec25966d7b058f58e1223c51d9f3ebb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TryToOptimizeStoreOfMallocToGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>AllocTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a>&#160;</td>
          <td class="paramname"><em>Ordering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d27/classllvm_1_1Module.html#ab3ec4cb27a9893405bb7eb997d5b716d">Module::global_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>GVI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d91/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *&#160;</td>
          <td class="paramname"><em>TLI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TryToOptimizeStoreOfMallocToGlobal - This function is called when we see a pointer global variable with a single value stored it that is a malloc or cast of malloc. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01463">1463</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                                                       {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordflow">if</span> (!DL)</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="comment">// If this is a malloc of an abstract type, don&#39;t touch it.</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordflow">if</span> (!AllocTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9cc8764485bccd20414348ca962c02c4">isSized</a>())</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// We can&#39;t optimize this global unless all uses of it are *known* to be</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// of the malloc value, not of the null initializer value (consider a use</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// that compares the global&#39;s value against zero to see if the malloc has</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// been reached).  To do this, we check to see if all uses of the global</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// would trap if the global were null: this proves that they must all</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// happen after the malloc.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a6534eab7f2125fdeff4232f790c07e05">AllUsesOfLoadedValueWillTrapIfNull</a>(GV))</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// We can&#39;t optimize this if the malloc itself is used in a complex way,</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// for example, being stored into multiple globals.  This allows the</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// malloc to be stored into the specified global, loaded icmp&#39;d, and</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// GEP&#39;d.  These are all things we could transform to using the global</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// for.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode*, 8&gt;</a> PHIs;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(CI, GV, PHIs))</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// If we have a global that is only initialized with a fixed size malloc,</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// transform the program to use global memory instead of malloc&#39;d memory.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// This eliminates dynamic allocation, avoids an indirection accessing the</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="comment">// data, and exposes the resultant global to further GlobalOpt.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="comment">// We cannot optimize the malloc if we cannot determine malloc array size.</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NElems = <a class="code" href="../../d9/d4a/namespacellvm.html#ab2a615783bce35374d64da662869ac3d">getMallocArraySize</a>(CI, DL, TLI, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="keywordflow">if</span> (!NElems)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *NElements = dyn_cast&lt;ConstantInt&gt;(NElems))</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="comment">// Restrict this transformation to only working on small allocations</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// (2048 bytes currently), as we don&#39;t want to introduce a 16M global or</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// something.</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (NElements-&gt;getZExtValue() * DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(AllocTy) &lt; 2048) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      GVI = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ac3a3d2441b80cfd0f2c6e78bca95d53f">OptimizeGlobalAddressOfMalloc</a>(GV, CI, AllocTy, NElements, DL, TLI);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// If the allocation is an array of structures, consider transforming this</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// into multiple malloc&#39;d arrays, one for each field.  This is basically</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="comment">// SRoA for malloc&#39;d memory.</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keywordflow">if</span> (Ordering != <a class="code" href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02afa0db9301c0ca52afd5cc30684556ebd">NotAtomic</a>)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// If this is an allocation of a fixed size array of structs, analyze as a</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// variable size array.  malloc [100 x struct],1 -&gt; malloc struct, 100</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordflow">if</span> (NElems == ConstantInt::get(CI-&gt;<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1))</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *AT = dyn_cast&lt;ArrayType&gt;(AllocTy))</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      AllocTy = AT-&gt;getElementType();</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *AllocSTy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a>&gt;(AllocTy);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordflow">if</span> (!AllocSTy)</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// This the structure has an unreasonable number of fields, leave it</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// alone.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">if</span> (AllocSTy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>() &lt;= 16 &amp;&amp; AllocSTy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>() != 0 &amp;&amp;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ab190ff057361c31a374b5feefc10f586">AllGlobalLoadUsesSimpleEnoughForHeapSRA</a>(GV, CI)) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="comment">// If this is a fixed size array, transform the Malloc to be an alloc of</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">// structs.  malloc [100 x struct],1 -&gt; malloc struct, 100</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *AT = dyn_cast&lt;ArrayType&gt;(<a class="code" href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">getMallocAllocatedType</a>(CI, TLI))) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *IntPtrTy = DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordtype">unsigned</span> TypeSize = DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(AllocSTy)-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>();</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *AllocSize = ConstantInt::get(IntPtrTy, TypeSize);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NumElements = ConstantInt::get(IntPtrTy, AT-&gt;getNumElements());</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Malloc = CallInst::CreateMalloc(CI, IntPtrTy, AllocSTy,</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                                                   AllocSize, NumElements,</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                                                   <span class="keyword">nullptr</span>, CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Cast = <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(Malloc, CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;tmp&quot;</span>, CI);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Cast);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      CI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(Malloc))</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        CI = cast&lt;CallInst&gt;(BCI-&gt;getOperand(0));</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        CI = cast&lt;CallInst&gt;(Malloc);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    GVI = <a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#a8b41d9e9bd58de6b67b26bc33126c8a3">PerformHeapAllocSRoA</a>(GV, CI, <a class="code" href="../../d9/d4a/namespacellvm.html#ab2a615783bce35374d64da662869ac3d">getMallocArraySize</a>(CI, DL, TLI, <span class="keyword">true</span>),</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                               DL, TLI);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02afa0db9301c0ca52afd5cc30684556ebd"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02afa0db9301c0ca52afd5cc30684556ebd">llvm::NotAtomic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00038">Instructions.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a6534eab7f2125fdeff4232f790c07e05"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a6534eab7f2125fdeff4232f790c07e05">AllUsesOfLoadedValueWillTrapIfNull</a></div><div class="ttdeci">static bool AllUsesOfLoadedValueWillTrapIfNull(const GlobalVariable *GV)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00657">GlobalOpt.cpp:657</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_a8b41d9e9bd58de6b67b26bc33126c8a3"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#a8b41d9e9bd58de6b67b26bc33126c8a3">PerformHeapAllocSRoA</a></div><div class="ttdeci">static GlobalVariable * PerformHeapAllocSRoA(GlobalVariable *GV, CallInst *CI, Value *NElems, const DataLayout *DL, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01274">GlobalOpt.cpp:1274</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00488">DataLayout.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01321">Instructions.h:1321</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9cc8764485bccd20414348ca962c02c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9cc8764485bccd20414348ca962c02c4">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSet&lt; const Type *, 4 &gt; *Visited=nullptr) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00268">Type.h:268</a></div></div>
<div class="ttc" id="namespacellvm_html_adc3d427ae53571c61269b58488af05df"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#adc3d427ae53571c61269b58488af05df">llvm::getMallocAllocatedType</a></div><div class="ttdeci">Type * getMallocAllocatedType(const CallInst *CI, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00289">MemoryBuiltins.cpp:289</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_html_ab2a615783bce35374d64da662869ac3d"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ab2a615783bce35374d64da662869ac3d">llvm::getMallocArraySize</a></div><div class="ttdeci">Value * getMallocArraySize(CallInst *CI, const DataLayout *DL, const TargetLibraryInfo *TLI, bool LookThroughSExt=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/MemoryBuiltins_8cpp_source.html#l00300">MemoryBuiltins.cpp:300</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ab190ff057361c31a374b5feefc10f586"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ab190ff057361c31a374b5feefc10f586">AllGlobalLoadUsesSimpleEnoughForHeapSRA</a></div><div class="ttdeci">static bool AllGlobalLoadUsesSimpleEnoughForHeapSRA(const GlobalVariable *GV, Instruction *StoredVal)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01101">GlobalOpt.cpp:1101</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ac3a3d2441b80cfd0f2c6e78bca95d53f"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ac3a3d2441b80cfd0f2c6e78bca95d53f">OptimizeGlobalAddressOfMalloc</a></div><div class="ttdeci">static GlobalVariable * OptimizeGlobalAddressOfMalloc(GlobalVariable *GV, CallInst *CI, Type *AllocTy, ConstantInt *NElements, const DataLayout *DL, TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00824">GlobalOpt.cpp:824</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad509f84445ce77b94e2d70042449202f"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a></div><div class="ttdeci">static bool ValueIsOnlyUsedLocallyOrStoredToOneGlobal(const Instruction *V, const GlobalVariable *GV, SmallPtrSet&lt; const PHINode *, 8 &gt; &amp;PHIs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00958">GlobalOpt.cpp:958</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_aa2113dcf8c96c19c9a2abf786b9ad3b7"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">llvm::StructType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Random access to the elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00286">DerivedTypes.h:286</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a77de6d50432bef62e38fd24f2030026c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TryToShrinkGlobalToBoolean </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>OtherVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TryToShrinkGlobalToBoolean - At this point, we have learned that the only two values ever stored into GV are its initializer and OtherVal. See if we can shrink the global into a boolean and select between the two values whenever it is used. This exposes the values to other scalar optimizations. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l01601">1601</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                                                                               {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *GVElType = GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// If GVElType is already i1, it is already shrunk.  If the type of the GV is</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="comment">// an FP value, pointer or vector, don&#39;t do this optimization because a select</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="comment">// between them is very expensive and unlikely to lead to later</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="comment">// simplification.  In these cases, we typically end up with &quot;cond ? v1 : v2&quot;</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="comment">// where v1 and v2 both require constant pool loads, a big loss.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="keywordflow">if</span> (GVElType == Type::getInt1Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()) ||</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      GVElType-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a40113570b0c52a18c34cabed8359e2c8">isFloatingPointTy</a>() ||</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      GVElType-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() || GVElType-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// Walk the use list of the global seeing if all the uses are load or store.</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// If there is anything else, bail out.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;LoadInst&gt;(U) &amp;&amp; !isa&lt;StoreInst&gt;(U))</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   *** SHRINKING TO BOOL: &quot;</span> &lt;&lt; *GV);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">// Create the new global, initializing it to false.</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NewGV = <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(Type::getInt1Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                                             <span class="keyword">false</span>,</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                                             GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                                        <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                                             GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.b&quot;</span>,</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                             GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                             GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  GV-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">getGlobalList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(GV, NewGV);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *InitVal = GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>();</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(InitVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != Type::getInt1Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()) &amp;&amp;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;         <span class="stringliteral">&quot;No reason to shrink to bool!&quot;</span>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="comment">// If initialized to zero and storing one into the global, we can use a cast</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">// instead of a select to synthesize the desired value.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keywordtype">bool</span> IsOneZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal))</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    IsOneZero = InitVal-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>() &amp;&amp; CI-&gt;isOne();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="keywordflow">while</span> (!GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>());</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(UI)) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="comment">// Change the store into a boolean store.</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordtype">bool</span> StoringOther = SI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == OtherVal;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <span class="comment">// Only do this if we weren&#39;t storing a loaded value.</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StoreVal;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">if</span> (StoringOther || SI-&gt;getOperand(0) == InitVal) {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        StoreVal = ConstantInt::get(Type::getInt1Ty(GV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                                    StoringOther);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <span class="comment">// Otherwise, we are storing a previously loaded copy.  To do this,</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="comment">// change the copy from copying the original value to just copying the</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="comment">// bool.</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *StoredVal = cast&lt;Instruction&gt;(SI-&gt;getOperand(0));</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="comment">// If we&#39;ve already replaced the input, StoredVal will be a cast or</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="comment">// select instruction.  If not, it will be a load of the original</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="comment">// global.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(StoredVal)) {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getOperand(0) == GV &amp;&amp; <span class="stringliteral">&quot;Not a copy!&quot;</span>);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;          <span class="comment">// Insert a new load, to preserve the saved value.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;          StoreVal = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(NewGV, <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getName()+<span class="stringliteral">&quot;.b&quot;</span>, <span class="keyword">false</span>, 0,</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                                  <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getOrdering(), <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getSynchScope(), <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;          <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((isa&lt;CastInst&gt;(StoredVal) || isa&lt;SelectInst&gt;(StoredVal)) &amp;&amp;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                 <span class="stringliteral">&quot;This is not a form that we understand!&quot;</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;          StoreVal = StoredVal-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;          <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(isa&lt;LoadInst&gt;(StoreVal) &amp;&amp; <span class="stringliteral">&quot;Not a load of NewGV!&quot;</span>);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(StoreVal, NewGV, <span class="keyword">false</span>, 0,</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                    SI-&gt;getOrdering(), SI-&gt;getSynchScope(), SI);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="comment">// Change the load into a load of bool then a select.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = cast&lt;LoadInst&gt;(UI);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *NLI = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(NewGV, LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.b&quot;</span>, <span class="keyword">false</span>, 0,</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                                   LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">getOrdering</a>(), LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">getSynchScope</a>(), <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NSI;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">if</span> (IsOneZero)</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        NSI = <span class="keyword">new</span> <a class="code" href="../../d1/dca/classllvm_1_1ZExtInst.html">ZExtInst</a>(NLI, LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        NSI = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">SelectInst::Create</a>(NLI, OtherVal, InitVal, <span class="stringliteral">&quot;&quot;</span>, LI);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      NSI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LI);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NSI);</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    UI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  }</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// Retain the name of the old global variable. People who are debugging their</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">// programs may expect these variables to be named the same.</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  NewGV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(GV);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">eraseFromParent</a>();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1ZExtInst_html"><div class="ttname"><a href="../../d1/dca/classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03353">Instructions.h:3353</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a28c0310f56c2ea41ff7012df55ac6dc5"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a28c0310f56c2ea41ff7012df55ac6dc5">llvm::Module::getGlobalList</a></div><div class="ttdeci">const GlobalListType &amp; getGlobalList() const </div><div class="ttdoc">Get the Module&#39;s list of global variables (constant). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00488">Module.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00127">GlobalVariable.h:127</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ad8c4996613982e324059f6df226263da"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#ad8c4996613982e324059f6df226263da">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent() override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00187">Globals.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a4df7359cb36b166c0878e16291cbe183"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">llvm::LoadInst::getSynchScope</a></div><div class="ttdeci">SynchronizationScope getSynchScope() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00216">Instructions.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a40113570b0c52a18c34cabed8359e2c8"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a40113570b0c52a18c34cabed8359e2c8">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00159">Type.h:159</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00226">Type.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8c0a29ecc14dc5afe7573bf616da2361"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this fence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00205">Instructions.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_adb39181b87dffcd61082d08e02bf314e"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">getFalse</a></div><div class="ttdeci">static Constant * getFalse(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00064">InstructionSimplify.cpp:64</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a29bdc3f0c9dfcfe44a7eb9826a09c475"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a29bdc3f0c9dfcfe44a7eb9826a09c475">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00141">GlobalValue.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac2e338e4c120fc3ea43099b54880f1f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">llvm::Value::user_back</a></div><div class="ttdeci">User * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00271">Value.h:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad509f84445ce77b94e2d70042449202f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ValueIsOnlyUsedLocallyOrStoredToOneGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>PHIs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ValueIsOnlyUsedLocallyOrStoredToOneGlobal - Scan the use-list of V checking to make sure that there are no complex uses of V. We permit simple things like dereferencing the pointer, but not storing through the address, unless it is to the specified global. </p>

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00958">958</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                                                               {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Inst = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Inst) || isa&lt;CmpInst&gt;(Inst)) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Fine, ignore.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(Inst)) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordflow">if</span> (SI-&gt;getOperand(0) == V &amp;&amp; SI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) != GV)</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Storing the pointer itself... bad.</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Otherwise, storing through it, or storing into GV... fine.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">// Must index into the array and into the struct.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (isa&lt;GetElementPtrInst&gt;(Inst) &amp;&amp; Inst-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &gt;= 3) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(Inst, GV, PHIs))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(Inst)) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="comment">// PHIs are ok if all uses are ok.  Don&#39;t infinitely recurse through PHI</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="comment">// cycles.</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">if</span> (PHIs.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(PN))</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(PN, GV, PHIs))</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(Inst)) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(BCI, GV, PHIs))</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="GlobalOpt_8cpp_html_ad509f84445ce77b94e2d70042449202f"><div class="ttname"><a href="../../d6/d9c/GlobalOpt_8cpp.html#ad509f84445ce77b94e2d70042449202f">ValueIsOnlyUsedLocallyOrStoredToOneGlobal</a></div><div class="ttdeci">static bool ValueIsOnlyUsedLocallyOrStoredToOneGlobal(const Instruction *V, const GlobalVariable *GV, SmallPtrSet&lt; const PHINode *, 8 &gt; &amp;PHIs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00958">GlobalOpt.cpp:958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aea8181c471fa8c685aa401ba2dedd448"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Global Variable false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00098">98</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a549419dff8d79e0f9e6f6e76770ef251"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">globalopt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00098">98</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a23fd01d07baea6623f8b2019dd8f2f21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Global Variable Optimizer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html#l00098">98</a> of file <a class="el" href="../../d6/d9c/GlobalOpt_8cpp_source.html">GlobalOpt.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_f8458966ae5c12ab04224ed6827e9ee5.html">IPO</a></li><li class="navelem"><a class="el" href="../../d6/d9c/GlobalOpt_8cpp.html">GlobalOpt.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:45 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
