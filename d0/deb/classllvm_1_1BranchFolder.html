<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: llvm::BranchFolder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/deb/classllvm_1_1BranchFolder.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">llvm::BranchFolder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da2/classllvm_1_1BranchFolder_1_1MergePotentialsElt.html">MergePotentialsElt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/db3/classllvm_1_1BranchFolder_1_1SameTailElt.html">SameTailElt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3c040a6585de941fbc6f26336f9ea9a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a3c040a6585de941fbc6f26336f9ea9a6">BranchFolder</a> (bool defaultEnableTailMerge, bool CommonHoist)</td></tr>
<tr class="separator:a3c040a6585de941fbc6f26336f9ea9a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c0c5340d25122d14d264f3281bdfe4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a79c0c5340d25122d14d264f3281bdfe4">OptimizeFunction</a> (<a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../de/d06/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *tii, <a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *tri, <a class="el" href="../../d4/d0c/classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *mmi)</td></tr>
<tr class="separator:a79c0c5340d25122d14d264f3281bdfe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a830bc8d0a52811afb66498efca9b3d27"><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d9/da2/classllvm_1_1BranchFolder_1_1MergePotentialsElt.html">MergePotentialsElt</a> &gt;<br class="typebreak"/>
::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">MPIterator</a></td></tr>
<tr class="separator:a830bc8d0a52811afb66498efca9b3d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a95bc0bb858b1c2a366d7f274b6144af2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a95bc0bb858b1c2a366d7f274b6144af2">TailMergeBlocks</a> (<a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)</td></tr>
<tr class="separator:a95bc0bb858b1c2a366d7f274b6144af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d167f61121aaa0057efb35f48b2c5fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a9d167f61121aaa0057efb35f48b2c5fd">TryTailMergeBlocks</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB)</td></tr>
<tr class="separator:a9d167f61121aaa0057efb35f48b2c5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a0b65c92fc7e2a1d6b0dc784c0d42c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a01a0b65c92fc7e2a1d6b0dc784c0d42c">MaintainLiveIns</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CurMBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewMBB)</td></tr>
<tr class="separator:a01a0b65c92fc7e2a1d6b0dc784c0d42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b0a3a3253f9d9f9f8ee3d256f05103"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad2b0a3a3253f9d9f9f8ee3d256f05103">ReplaceTailWithBranchTo</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> OldInst, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewDest)</td></tr>
<tr class="separator:ad2b0a3a3253f9d9f9f8ee3d256f05103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a099fe69a19df662adcc320a2f261cda5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a099fe69a19df662adcc320a2f261cda5">SplitMBBAt</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;CurMBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> BBI1, <a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB)</td></tr>
<tr class="separator:a099fe69a19df662adcc320a2f261cda5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad186c4ee71ad0df3a205364aa9165cb6"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad186c4ee71ad0df3a205364aa9165cb6">ComputeSameTails</a> (unsigned CurHash, unsigned minCommonTailLength, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB)</td></tr>
<tr class="separator:ad186c4ee71ad0df3a205364aa9165cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0aea67e2238c93f33e6a4b4acc483dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ab0aea67e2238c93f33e6a4b4acc483dc">RemoveBlocksWithHash</a> (unsigned CurHash, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB)</td></tr>
<tr class="separator:ab0aea67e2238c93f33e6a4b4acc483dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e7b78443bf2ff7fcc0063e11db34a1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ae1e7b78443bf2ff7fcc0063e11db34a1">CreateCommonTailOnlyBlock</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&amp;PredBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB, unsigned maxCommonTailLength, unsigned &amp;commonTailIndex)</td></tr>
<tr class="separator:ae1e7b78443bf2ff7fcc0063e11db34a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049e89ea0f4677d14ac181d3f6b2785c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a049e89ea0f4677d14ac181d3f6b2785c">OptimizeBranches</a> (<a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)</td></tr>
<tr class="separator:a049e89ea0f4677d14ac181d3f6b2785c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4d278656e7fa6ad21f02e32e99e577"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#aba4d278656e7fa6ad21f02e32e99e577">OptimizeBlock</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)</td></tr>
<tr class="separator:aba4d278656e7fa6ad21f02e32e99e577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9014a13a9c23df95aa56bc094f80a8c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a9014a13a9c23df95aa56bc094f80a8c9">RemoveDeadBlock</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)</td></tr>
<tr class="separator:a9014a13a9c23df95aa56bc094f80a8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a74b223c150acd0d91c953ba880867"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#af6a74b223c150acd0d91c953ba880867">OptimizeImpDefsBlock</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)</td></tr>
<tr class="separator:af6a74b223c150acd0d91c953ba880867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c32a92b590c0414b041cabe00a4cbb0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a1c32a92b590c0414b041cabe00a4cbb0">HoistCommonCode</a> (<a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)</td></tr>
<tr class="separator:a1c32a92b590c0414b041cabe00a4cbb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba24911a0f7e8ee167b8e3816ca453d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a2ba24911a0f7e8ee167b8e3816ca453d">HoistCommonCodeInSuccs</a> (<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)</td></tr>
<tr class="separator:a2ba24911a0f7e8ee167b8e3816ca453d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5e878e98e6d772cf2ef21e14fab45971"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d9/da2/classllvm_1_1BranchFolder_1_1MergePotentialsElt.html">MergePotentialsElt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a></td></tr>
<tr class="separator:a5e878e98e6d772cf2ef21e14fab45971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32313ebde0d0b7162a90b12628b06f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <br class="typebreak"/>
<a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a></td></tr>
<tr class="separator:af32313ebde0d0b7162a90b12628b06f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a7b562e71ba28a15b2f1f2251f97fb"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../de/db3/classllvm_1_1BranchFolder_1_1SameTailElt.html">SameTailElt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a></td></tr>
<tr class="separator:a52a7b562e71ba28a15b2f1f2251f97fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3567149b3e5bac53145d96a4f4dff59"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">EnableTailMerge</a></td></tr>
<tr class="separator:aa3567149b3e5bac53145d96a4f4dff59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08d297cc6c155672a598262a82ba4c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ae08d297cc6c155672a598262a82ba4c1">EnableHoistCommonCode</a></td></tr>
<tr class="separator:ae08d297cc6c155672a598262a82ba4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa353388470cfc66ce071957127dbea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../de/d06/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a></td></tr>
<tr class="separator:acaa353388470cfc66ce071957127dbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374176ed65c181b7123ff067bbf804ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a></td></tr>
<tr class="separator:a374176ed65c181b7123ff067bbf804ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a012792fcd5de1e99103b6d92a3263"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d0c/classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a43a012792fcd5de1e99103b6d92a3263">MMI</a></td></tr>
<tr class="separator:a43a012792fcd5de1e99103b6d92a3263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9f2dba0009b1d6a2db7683b26aa098d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9a/classllvm_1_1RegScavenger.html">RegScavenger</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a></td></tr>
<tr class="separator:ad9f2dba0009b1d6a2db7683b26aa098d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00024">24</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a830bc8d0a52811afb66498efca9b3d27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../d9/da2/classllvm_1_1BranchFolder_1_1MergePotentialsElt.html">MergePotentialsElt</a>&gt;::iterator <a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">llvm::BranchFolder::MPIterator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00049">49</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3c040a6585de941fbc6f26336f9ea9a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BranchFolder::BranchFolder </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>defaultEnableTailMerge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>CommonHoist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00102">102</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                                                        {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#ae07ef8db7162ea7ac8f04e13f75a3580">FlagEnableTailMerge</a>) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43">cl::BOU_UNSET</a>: <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">EnableTailMerge</a> = defaultEnableTailMerge; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736">cl::BOU_TRUE</a>: <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">EnableTailMerge</a> = <span class="keyword">true</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef">cl::BOU_FALSE</a>: <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">EnableTailMerge</a> = <span class="keyword">false</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ae08d297cc6c155672a598262a82ba4c1">EnableHoistCommonCode</a> = CommonHoist;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ae08d297cc6c155672a598262a82ba4c1"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ae08d297cc6c155672a598262a82ba4c1">llvm::BranchFolder::EnableHoistCommonCode</a></div><div class="ttdeci">bool EnableHoistCommonCode</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00089">BranchFolding.h:89</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef"><div class="ttname"><a href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef">llvm::cl::BOU_FALSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00439">CommandLine.h:439</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_ae07ef8db7162ea7ac8f04e13f75a3580"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#ae07ef8db7162ea7ac8f04e13f75a3580">FlagEnableTailMerge</a></div><div class="ttdeci">static cl::opt&lt; cl::boolOrDefault &gt; FlagEnableTailMerge(&quot;enable-tail-merge&quot;, cl::init(cl::BOU_UNSET), cl::Hidden)</div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43"><div class="ttname"><a href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43">llvm::cl::BOU_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00439">CommandLine.h:439</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736"><div class="ttname"><a href="../../dd/df9/namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736">llvm::cl::BOU_TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00439">CommandLine.h:439</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_aa3567149b3e5bac53145d96a4f4dff59"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">llvm::BranchFolder::EnableTailMerge</a></div><div class="ttdeci">bool EnableTailMerge</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00088">BranchFolding.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad186c4ee71ad0df3a205364aa9165cb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned BranchFolder::ComputeSameTails </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>CurHash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>minCommonTailLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>SuccBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>PredBB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ComputeSameTails - Look through all the blocks in MergePotentials that have hash CurHash (guaranteed to match the last element). Build the vector SameTails of all those that have the (same) largest number of instructions in common of any pair of these blocks. SameTails entries contain an iterator into MergePotentials (from which the <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> can be found) and a <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> into that MBB indicating the instruction where the matching code sequence begins. Order of elements in SameTails is the reverse of the order in which those blocks appear in MergePotentials (where they are not necessarily consecutive). </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00600">600</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                                                   {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">unsigned</span> maxCommonTailLength = 0U;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.clear();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> TrialBBI1, TrialBBI2;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">MPIterator</a> HighestMPIter = std::prev(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.end());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">MPIterator</a> CurMPIter = std::prev(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.end()),</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                  B = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;       CurMPIter != B &amp;&amp; CurMPIter-&gt;getHash() == CurHash; --CurMPIter) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">MPIterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = std::prev(CurMPIter); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getHash() == CurHash; --<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordtype">unsigned</span> CommonTailLen;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a0a05cc04c5d50a14920721da5f53e1fe">ProfitableToMerge</a>(CurMPIter-&gt;getBlock(), <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getBlock(),</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                            minCommonTailLength,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            CommonTailLen, TrialBBI1, TrialBBI2,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                            SuccBB, PredBB)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> (CommonTailLen &gt; maxCommonTailLength) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.clear();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          maxCommonTailLength = CommonTailLen;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          HighestMPIter = CurMPIter;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.push_back(SameTailElt(CurMPIter, TrialBBI1));</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> (HighestMPIter == CurMPIter &amp;&amp;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            CommonTailLen == maxCommonTailLength)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.push_back(SameTailElt(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TrialBBI2));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == B)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">return</span> maxCommonTailLength;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a5e878e98e6d772cf2ef21e14fab45971"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">llvm::BranchFolder::MergePotentials</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt; MergePotentials</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00050">BranchFolding.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a830bc8d0a52811afb66498efca9b3d27"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">llvm::BranchFolder::MPIterator</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt;::iterator MPIterator</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00049">BranchFolding.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a0a05cc04c5d50a14920721da5f53e1fe"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a0a05cc04c5d50a14920721da5f53e1fe">ProfitableToMerge</a></div><div class="ttdeci">static bool ProfitableToMerge(MachineBasicBlock *MBB1, MachineBasicBlock *MBB2, unsigned minCommonTailLength, unsigned &amp;CommonTailLen, MachineBasicBlock::iterator &amp;I1, MachineBasicBlock::iterator &amp;I2, MachineBasicBlock *SuccBB, MachineBasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00530">BranchFolding.cpp:530</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a52a7b562e71ba28a15b2f1f2251f97fb"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">llvm::BranchFolder::SameTails</a></div><div class="ttdeci">std::vector&lt; SameTailElt &gt; SameTails</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00086">BranchFolding.h:86</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae1e7b78443bf2ff7fcc0063e11db34a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::CreateCommonTailOnlyBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&amp;&#160;</td>
          <td class="paramname"><em>PredBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>SuccBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>maxCommonTailLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>commonTailIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CreateCommonTailOnlyBlock - None of the blocks to be tail-merged consist only of the common tail. Create a block that does by splitting one. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00657">657</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                                                        {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  commonTailIndex = 0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordtype">unsigned</span> TimeEstimate = ~0U;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size(); i != e; ++i) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// Use PredBB if possible; that doesn&#39;t require a new branch.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getBlock() == PredBB) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      commonTailIndex = i;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Otherwise, make a (fairly bogus) choice based on estimate of</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="comment">// how long it will take the various blocks to execute.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">unsigned</span> t = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a0df528512b8aed2e9f70a3f9b3128507">EstimateRuntime</a>(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getBlock()-&gt;<a class="code" href="../../dc/dbc/namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(),</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                                 <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getTailStartPos());</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> (t &lt;= TimeEstimate) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      TimeEstimate = t;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      commonTailIndex = i;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> BBI =</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].getTailStartPos();</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].getBlock();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// If the common tail includes any debug info we will take it pretty</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">// randomly from one of the inputs.  Might be better to remove it?</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nSplitting BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot;, size &quot;</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;               &lt;&lt; maxCommonTailLength);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// If the split block unconditionally falls-thru to SuccBB, it will be</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// merged. In control flow terms it should then take SuccBB&#39;s name. e.g. If</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// SuccBB is an inner loop, the common tail is still part of the inner loop.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = (SuccBB &amp;&amp; MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() == 1) ?</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    SuccBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>() : MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *newMBB = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a099fe69a19df662adcc320a2f261cda5">SplitMBBAt</a>(*MBB, BBI, BB);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (!newMBB) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;... failed!&quot;</span>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].setBlock(newMBB);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].setTailStartPos(newMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>());</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// If we split PredBB, newMBB is the new predecessor.</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (PredBB == MBB)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    PredBB = newMBB;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9ac05913a143322136efcad10ed7548c"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00298">MachineBasicBlock.h:298</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a0df528512b8aed2e9f70a3f9b3128507"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a0df528512b8aed2e9f70a3f9b3128507">EstimateRuntime</a></div><div class="ttdeci">static unsigned EstimateRuntime(MachineBasicBlock::iterator I, MachineBasicBlock::iterator E)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00446">BranchFolding.cpp:446</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00644">MachineBasicBlock.h:644</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="../../dc/dbc/namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9d/lib_2Support_2Path_8cpp_source.html#l00243">lib/Support/Path.cpp:243</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a2961c31b29db17a4f2964899c8569a64"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">llvm::MachineBasicBlock::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00117">MachineBasicBlock.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a52a7b562e71ba28a15b2f1f2251f97fb"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">llvm::BranchFolder::SameTails</a></div><div class="ttdeci">std::vector&lt; SameTailElt &gt; SameTails</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00086">BranchFolding.h:86</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00241">MachineBasicBlock.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a099fe69a19df662adcc320a2f261cda5"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a099fe69a19df662adcc320a2f261cda5">llvm::BranchFolder::SplitMBBAt</a></div><div class="ttdeci">MachineBasicBlock * SplitMBBAt(MachineBasicBlock &amp;CurMBB, MachineBasicBlock::iterator BBI1, const BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00416">BranchFolding.cpp:416</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1c32a92b590c0414b041cabe00a4cbb0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::HoistCommonCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>MF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>HoistCommonCode - Hoist common instruction sequences at the start of basic blocks to their common predecessor. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l01458">1458</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                                      {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    MadeChange |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a2ba24911a0f7e8ee167b8e3816ca453d">HoistCommonCodeInSuccs</a>(MBB);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00314">MachineFunction.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00312">MachineFunction.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a2ba24911a0f7e8ee167b8e3816ca453d"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a2ba24911a0f7e8ee167b8e3816ca453d">llvm::BranchFolder::HoistCommonCodeInSuccs</a></div><div class="ttdeci">bool HoistCommonCodeInSuccs(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01592">BranchFolding.cpp:1592</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ba24911a0f7e8ee167b8e3816ca453d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::HoistCommonCodeInSuccs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>MBB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>HoistCommonCodeInSuccs - If the successors of MBB has common instruction sequence at the start of the function, move the instructions before MBB terminator if it's legal. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l01592">1592</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                                                                {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB = <span class="keyword">nullptr</span>, *FBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*MBB, TBB, FBB, Cond, <span class="keyword">true</span>) || !TBB || Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">if</span> (!FBB) FBB = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">findFalseBlock</a>(MBB, TBB);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">if</span> (!FBB)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// Malformed bcc? True and false blocks are the same?</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="comment">// Restrict the optimization to cases where MBB is the only predecessor,</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// it is an obvious win.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="keywordflow">if</span> (TBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() &gt; 1 || FBB-&gt;pred_size() &gt; 1)</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="comment">// Find a suitable position to hoist the common instructions to. Also figure</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// out which registers are used or defined by instructions from the insertion</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// point to the end of the block.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> Uses, Defs;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> Loc =</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aeaa3cf4dae61117e2ed40085d8b119bb">findHoistingInsertPosAndDeps</a>(MBB, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>, Uses, Defs);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span> (Loc == MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="keywordtype">bool</span> HasDups = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> LocalDefs;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> LocalDefsSet;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> TIB = TBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> FIB = FBB-&gt;begin();</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> TIE = TBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> FIE = FBB-&gt;end();</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="keywordflow">while</span> (TIB != TIE &amp;&amp; FIB != FIE) {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="comment">// Skip dbg_value instructions. These do not count.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (TIB-&gt;isDebugValue()) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="keywordflow">while</span> (TIB != TIE &amp;&amp; TIB-&gt;isDebugValue())</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        ++TIB;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="keywordflow">if</span> (TIB == TIE)</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (FIB-&gt;isDebugValue()) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">while</span> (FIB != FIE &amp;&amp; FIB-&gt;isDebugValue())</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        ++FIB;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">if</span> (FIB == FIE)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (!TIB-&gt;isIdenticalTo(FIB, <a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ab7650f958c093f7c5faf8c69dbc8c462ad84865ceeee6b326942a3ed2ad37f815">MachineInstr::CheckKillDead</a>))</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(TIB))</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="comment">// Hard to reason about register liveness with predicated instruction.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordtype">bool</span> IsSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = TIB-&gt;getNumOperands(); i != e; ++i) {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = TIB-&gt;getOperand(i);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="comment">// Don&#39;t attempt to hoist instructions with register masks.</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">isRegMask</a>()) {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        IsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../df/db6/namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">if</span> (!Reg)</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">if</span> (Uses.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg)) {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;          <span class="comment">// Avoid clobbering a register that&#39;s used by the instruction at</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;          <span class="comment">// the point of insertion.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          IsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="keywordflow">if</span> (Defs.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg) &amp;&amp; !MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>()) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;          <span class="comment">// Don&#39;t hoist the instruction if the def would be clobber by the</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;          <span class="comment">// instruction at the point insertion. FIXME: This is overly</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;          <span class="comment">// conservative. It should be possible to hoist the instructions</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;          <span class="comment">// in BB2 in the following example:</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;          <span class="comment">// BB1:</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;          <span class="comment">// r1, eflag = op1 r2, r3</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;          <span class="comment">// brcc eflag</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;          <span class="comment">// BB2:</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;          <span class="comment">// r1 = op2, ...</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;          <span class="comment">//    = op3, r1&lt;kill&gt;</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;          IsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!LocalDefsSet.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg)) {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <span class="keywordflow">if</span> (Defs.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg)) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;          <span class="comment">// Use is defined by the instruction at the point of insertion.</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;          IsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>() &amp;&amp; Uses.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg))</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;          <span class="comment">// Kills a register that&#39;s read by the instruction at the point of</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;          <span class="comment">// insertion. Remove the kill marker.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;          MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    }</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (!IsSafe)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordtype">bool</span> DontMoveAcrossStore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">if</span> (!TIB-&gt;isSafeToMove(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>, <span class="keyword">nullptr</span>, DontMoveAcrossStore))</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">// Remove kills from LocalDefsSet, these registers had short live ranges.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = TIB-&gt;getNumOperands(); i != e; ++i) {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = TIB-&gt;getOperand(i);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() || !MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>())</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <span class="keywordflow">if</span> (!Reg || !LocalDefsSet.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg))</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>, <span class="keyword">true</span>); AI.<a class="code" href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI)</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        LocalDefsSet.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75a2d2ad3b3dce6702750d570ee8f343">erase</a>(*AI);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="comment">// Track local defs so we can update liveins.</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = TIB-&gt;getNumOperands(); i != e; ++i) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = TIB-&gt;getOperand(i);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() || MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>())</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">if</span> (!Reg)</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      LocalDefs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>, <span class="keyword">true</span>); AI.<a class="code" href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI)</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        LocalDefsSet.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(*AI);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    HasDups = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    ++TIB;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    ++FIB;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  }</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> (!HasDups)</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(Loc, TBB, TBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), TIB);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  FBB-&gt;erase(FBB-&gt;begin(), FIB);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// Update livein&#39;s.</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = LocalDefs.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = LocalDefs[i];</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">if</span> (LocalDefsSet.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Def)) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      TBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">addLiveIn</a>(Def);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      FBB-&gt;addLiveIn(Def);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  ++NumHoist;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00289">TargetInstrInfo.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae26efdb76d5c56388c65dc5b02a2ae6f"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">llvm::MachineBasicBlock::addLiveIn</a></div><div class="ttdeci">void addLiveIn(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00320">MachineBasicBlock.h:320</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00243">MachineBasicBlock.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a75a2d2ad3b3dce6702750d570ee8f343"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#a75a2d2ad3b3dce6702750d570ee8f343">llvm::SmallSet::erase</a></div><div class="ttdeci">bool erase(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00090">SmallSet.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00227">MachineOperand.h:227</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="../../df/db6/namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc3/X86DisassemblerDecoder_8h_source.html#l00429">X86DisassemblerDecoder.h:429</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html_abf2eadac3ea84e2e2739444c40421eac"><div class="ttname"><a href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">llvm::MCRegAliasIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/MCRegisterInfo_8h_source.html#l00580">MCRegisterInfo.h:580</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aa21b508be8c212bdb0b28d734ab0ddb8"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">llvm::MachineOperand::isKill</a></div><div class="ttdeci">bool isKill() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00294">MachineOperand.h:294</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00063">SmallSet.h:63</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_aeaa3cf4dae61117e2ed40085d8b119bb"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#aeaa3cf4dae61117e2ed40085d8b119bb">findHoistingInsertPosAndDeps</a></div><div class="ttdeci">static MachineBasicBlock::iterator findHoistingInsertPosAndDeps(MachineBasicBlock *MBB, const TargetInstrInfo *TII, const TargetRegisterInfo *TRI, SmallSet&lt; unsigned, 4 &gt; &amp;Uses, SmallSet&lt; unsigned, 4 &gt; &amp;Defs)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01489">BranchFolding.cpp:1489</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html"><div class="ttname"><a href="../../d8/dfb/classllvm_1_1MCRegAliasIterator.html">llvm::MCRegAliasIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/MCRegisterInfo_8h_source.html#l00555">MCRegisterInfo.h:555</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00372">MachineOperand.h:372</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2c5eddfba64e7a44deba1b5a0d45a017"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">llvm::MachineOperand::isRegMask</a></div><div class="ttdeci">bool isRegMask() const </div><div class="ttdoc">isRegMask - Tests if this is a MO_RegisterMask operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00251">MachineOperand.h:251</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a75238c8d967e3014bc35c24c843c230f"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">llvm::SmallSet::count</a></div><div class="ttdeci">size_type count(const T &amp;V) const </div><div class="ttdoc">count - Return 1 if the element is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00052">SmallSet.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00279">MachineOperand.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ab7650f958c093f7c5faf8c69dbc8c462ad84865ceeee6b326942a3ed2ad37f815"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#ab7650f958c093f7c5faf8c69dbc8c462ad84865ceeee6b326942a3ed2ad37f815">llvm::MachineInstr::CheckKillDead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00644">MachineInstr.h:644</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a374176ed65c181b7123ff067bbf804ab"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">llvm::BranchFolder::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00091">BranchFolding.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00565">MachineBasicBlock.h:565</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00241">MachineBasicBlock.h:241</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_ac3ecfd2e4efef37daed6d6fdea800a28"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">findFalseBlock</a></div><div class="ttdeci">static MachineBasicBlock * findFalseBlock(MachineBasicBlock *BB, MachineBasicBlock *TrueBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01470">BranchFolding.cpp:1470</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a2a69dd402cbc7f6282c93c32161395bc"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">llvm::TargetInstrInfo::isPredicated</a></div><div class="ttdeci">virtual bool isPredicated(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00688">TargetInstrInfo.h:688</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00282">MachineBasicBlock.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a01a0b65c92fc7e2a1d6b0dc784c0d42c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BranchFolder::MaintainLiveIns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>CurMBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>NewMBB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00385">385</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                                              {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>-&gt;<a class="code" href="../../d9/d9a/classllvm_1_1RegScavenger.html#a20ef9205cdd28f324f8b04cd8a6e2c0b">enterBasicBlock</a>(CurMBB);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (!CurMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a>())</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>-&gt;<a class="code" href="../../d9/d9a/classllvm_1_1RegScavenger.html#afe23dbb6421b62ff369b85cd8436d483">forward</a>(std::prev(CurMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()));</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="../../d4/d1f/classllvm_1_1BitVector.html">BitVector</a> RegsLiveAtExit(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>-&gt;<a class="code" href="../../d1/dc7/classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>());</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>-&gt;<a class="code" href="../../d9/d9a/classllvm_1_1RegScavenger.html#adf1066a889ca6e807f328e84a1731a5b">getRegsUsed</a>(RegsLiveAtExit, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>-&gt;<a class="code" href="../../d1/dc7/classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(); i != e; i++)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (RegsLiveAtExit[i])</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        NewMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">addLiveIn</a>(i);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae26efdb76d5c56388c65dc5b02a2ae6f"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">llvm::MachineBasicBlock::addLiveIn</a></div><div class="ttdeci">void addLiveIn(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00320">MachineBasicBlock.h:320</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00243">MachineBasicBlock.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa37d95a1d7bc824da0c596d8334c4ceb"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00220">MachineBasicBlock.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1RegScavenger_html_afe23dbb6421b62ff369b85cd8436d483"><div class="ttname"><a href="../../d9/d9a/classllvm_1_1RegScavenger.html#afe23dbb6421b62ff369b85cd8436d483">llvm::RegScavenger::forward</a></div><div class="ttdeci">void forward()</div><div class="ttdoc">forward - Move the internal MBB iterator and update register states. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/RegisterScavenging_8cpp_source.html#l00172">RegisterScavenging.cpp:172</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_a56e9a625f708912164f16c178ceb97d7"><div class="ttname"><a href="../../d1/dc7/classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">llvm::MCRegisterInfo::getNumRegs</a></div><div class="ttdeci">unsigned getNumRegs() const </div><div class="ttdoc">Return the number of registers this target has (useful for sizing arrays holding per register informa...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/MCRegisterInfo_8h_source.html#l00359">MCRegisterInfo.h:359</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="../../d4/d1f/classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1RegScavenger_html_a20ef9205cdd28f324f8b04cd8a6e2c0b"><div class="ttname"><a href="../../d9/d9a/classllvm_1_1RegScavenger.html#a20ef9205cdd28f324f8b04cd8a6e2c0b">llvm::RegScavenger::enterBasicBlock</a></div><div class="ttdeci">void enterBasicBlock(MachineBasicBlock *mbb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/RegisterScavenging_8cpp_source.html#l00071">RegisterScavenging.cpp:71</a></div></div>
<div class="ttc" id="classllvm_1_1RegScavenger_html_adf1066a889ca6e807f328e84a1731a5b"><div class="ttname"><a href="../../d9/d9a/classllvm_1_1RegScavenger.html#adf1066a889ca6e807f328e84a1731a5b">llvm::RegScavenger::getRegsUsed</a></div><div class="ttdeci">void getRegsUsed(BitVector &amp;used, bool includeReserved)</div><div class="ttdoc">getRegsUsed - return all registers currently in use in used. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/RegisterScavenging_8cpp_source.html#l00250">RegisterScavenging.cpp:250</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ad9f2dba0009b1d6a2db7683b26aa098d"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">llvm::BranchFolder::RS</a></div><div class="ttdeci">RegScavenger * RS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00093">BranchFolding.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a374176ed65c181b7123ff067bbf804ab"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">llvm::BranchFolder::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00091">BranchFolding.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba4d278656e7fa6ad21f02e32e99e577"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::OptimizeBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>MBB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeBlock - Analyze and optimize control flow related to the specified block. This is never called on the entry block. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l01066">1066</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                                                       {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;ReoptimizeBlock:</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> FallThrough = MBB;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  ++FallThrough;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// If this block is empty, make everyone use its fall-through, not the block</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// explicitly.  Landing pads should not do this since the landing-pad table</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// points to this block.  Blocks with their addresses taken shouldn&#39;t be</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// optimized away.</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a87d0fbdabd17122a3febe35d7fbefb60">IsEmptyBlock</a>(MBB) &amp;&amp; !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>() &amp;&amp; !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">hasAddressTaken</a>()) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// Dead block?  Leave for cleanup later.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>()) <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> (FallThrough == MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>()) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="comment">// TODO: Simplify preds to not branch here if possible!</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="comment">// Rewrite all predecessors of the old block to go to the fallthrough</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="comment">// instead.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="keywordflow">while</span> (!MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>()) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Pred = *(MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>()-1);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        Pred-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab9a54fdc7456ee97cb54ff30d625b6b7">ReplaceUsesOfBlockWith</a>(MBB, FallThrough);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="comment">// If MBB was the target of a jump table, update jump tables to go to the</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="comment">// fallthrough instead.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html">MachineJumpTableInfo</a> *MJTI = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a99e93c9b5c2f41b3d601d129a6f60a6e">getJumpTableInfo</a>())</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        MJTI-&gt;ReplaceMBBInJumpTables(MBB, FallThrough);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// Check to see if we can simplify the terminator of the block before this</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// one.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;PrevBB = *std::prev(<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a>(MBB));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PriorTBB = <span class="keyword">nullptr</span>, *PriorFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PriorCond;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordtype">bool</span> PriorUnAnalyzable =</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(PrevBB, PriorTBB, PriorFBB, PriorCond, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keywordflow">if</span> (!PriorUnAnalyzable) {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// If the CFG for the prior block has extra edges, remove them.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    MadeChange |= PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">CorrectExtraCFGEdges</a>(PriorTBB, PriorFBB,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                              !PriorCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// If the previous branch is conditional and both conditions go to the same</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// destination, remove the branch, replacing it with an unconditional one or</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// a fall-through.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (PriorTBB &amp;&amp; PriorTBB == PriorFBB) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(PrevBB);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      PriorCond.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keywordflow">if</span> (PriorTBB != MBB)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(PrevBB, PriorTBB, <span class="keyword">nullptr</span>, PriorCond, dl);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      ++NumBranchOpts;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// If the previous block unconditionally falls through to this block and</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">// this block has no other predecessors, move the contents of this block</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// into the prior block. This doesn&#39;t usually happen when SimplifyCFG</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// has been used, but it can happen if tail merging splits a fall-through</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// predecessor of a block.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">// This has to check PrevBB-&gt;succ_size() because EH edges are ignored by</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">// AnalyzeBranch.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (PriorCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; !PriorTBB &amp;&amp; MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">hasAddressTaken</a>() &amp;&amp; !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>()) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nMerging into block: &quot;</span> &lt;&lt; PrevBB</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;From MBB: &quot;</span> &lt;&lt; *MBB);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="comment">// Remove redundant DBG_VALUEs first.</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">if</span> (PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() != PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> PrevBBIter = PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        --PrevBBIter;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> MBBIter = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="comment">// Check if DBG_VALUE at the end of PrevBB is identical to the</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="comment">// DBG_VALUE at the beginning of MBB.</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keywordflow">while</span> (PrevBBIter != PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() &amp;&amp; MBBIter != MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;               &amp;&amp; PrevBBIter-&gt;isDebugValue() &amp;&amp; MBBIter-&gt;isDebugValue()) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;          <span class="keywordflow">if</span> (!MBBIter-&gt;isIdenticalTo(PrevBBIter))</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;          <a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> *DuplicateDbg = MBBIter;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;          ++MBBIter; -- PrevBBIter;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;          DuplicateDbg-&gt;<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), MBB, MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>());</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">succ_empty</a>());</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3c5c3bd0c015f3134dc19fe194f635dd">transferSuccessors</a>(MBB);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// If the previous branch *only* branches to *this* block (conditional or</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// not) remove the branch.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">if</span> (PriorTBB == MBB &amp;&amp; !PriorFBB) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      ++NumBranchOpts;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">// If the prior block branches somewhere else on the condition and here if</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">// the condition is false, remove the uncond second branch.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (PriorFBB == MBB) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(PrevBB);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(PrevBB, PriorTBB, <span class="keyword">nullptr</span>, PriorCond, dl);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      ++NumBranchOpts;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// If the prior block branches here on true and somewhere else on false, and</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// if the branch condition is reversible, reverse the branch to create a</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// fall-through.</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">if</span> (PriorTBB == MBB) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> NewPriorCond(PriorCond);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(NewPriorCond)) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(PrevBB);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(PrevBB, PriorFBB, <span class="keyword">nullptr</span>, NewPriorCond, dl);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        ++NumBranchOpts;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// If this block has no successors (e.g. it is a return block or ends with</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// a call to a no-return function like abort or __cxa_throw) and if the pred</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// falls through into this block, and if it would otherwise fall through</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">// into the block after this, move this block to the end of the function.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// We consider it more likely that execution will stay in the function (e.g.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="comment">// due to loops) than it is to exit it.  This asserts in loops etc, moving</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// the assert condition out of the loop body.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">succ_empty</a>() &amp;&amp; !PriorCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; !PriorFBB &amp;&amp;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a>(PriorTBB) == FallThrough &amp;&amp;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>()) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordtype">bool</span> DoTransform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="comment">// We have to be careful that the succs of PredBB aren&#39;t both no-successor</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="comment">// blocks.  If neither have successors and if PredBB is the second from</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="comment">// last block in the function, we&#39;d just keep swapping the two blocks for</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="comment">// last.  Only do the swap if one is clearly better to fall through than</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="comment">// the other.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">if</span> (FallThrough == --MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>() &amp;&amp;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;          !<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#acda790896623fd894c71bf79f1bbcfea">IsBetterFallthrough</a>(PriorTBB, MBB))</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        DoTransform = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">if</span> (DoTransform) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="comment">// Reverse the branch so we will fall through on the previous true cond.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> NewPriorCond(PriorCond);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(NewPriorCond)) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;          <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nMoving MBB: &quot;</span> &lt;&lt; *MBB</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;To make fallthrough to: &quot;</span> &lt;&lt; *PriorTBB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;          <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(PrevBB);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(PrevBB, MBB, <span class="keyword">nullptr</span>, NewPriorCond, dl);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;          <span class="comment">// Move this block to the end of the function.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;          MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">moveAfter</a>(--MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>());</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;          MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;          ++NumBranchOpts;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;          <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// Analyze the branch in the current block.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CurTBB = <span class="keyword">nullptr</span>, *CurFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> CurCond;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordtype">bool</span> CurUnAnalyzable= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*MBB, CurTBB, CurFBB, CurCond, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">if</span> (!CurUnAnalyzable) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// If the CFG for the prior block has extra edges, remove them.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    MadeChange |= MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">CorrectExtraCFGEdges</a>(CurTBB, CurFBB, !CurCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="comment">// If this is a two-way branch, and the FBB branches to this block, reverse</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// the condition so the single-basic-block loop is faster.  Instead of:</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="comment">//    Loop: xxx; jcc Out; jmp Loop</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// we want:</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">//    Loop: xxx; jncc Loop; jmp Out</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">if</span> (CurTBB &amp;&amp; CurFBB &amp;&amp; CurFBB == MBB &amp;&amp; CurTBB != MBB) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> NewCond(CurCond);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(NewCond)) {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(*MBB);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*MBB);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*MBB, CurFBB, CurTBB, NewCond, dl);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        ++NumBranchOpts;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="comment">// If this branch is the only thing in its block, see if we can forward</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// other blocks across it.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (CurTBB &amp;&amp; CurCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; !CurFBB &amp;&amp;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#ab17cea834a55a63f670e77230917423e">IsBranchOnlyBlock</a>(MBB) &amp;&amp; CurTBB != MBB &amp;&amp;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        !MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">hasAddressTaken</a>()) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(*MBB);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="comment">// This block may contain just an unconditional branch.  Because there can</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="comment">// be &#39;non-branch terminators&#39; in the block, try removing the branch and</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="comment">// then seeing if the block is empty.</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*MBB);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="comment">// If the only things remaining in the block are debug info, remove these</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="comment">// as well, so this will behave the same as an empty block in non-debug</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <span class="comment">// mode.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">if</span> (!MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a>()) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordtype">bool</span> NonDebugInfoFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;             <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugValue()) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            NonDebugInfoFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;          }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <span class="keywordflow">if</span> (!NonDebugInfoFound)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;          <span class="comment">// Make the block empty, losing the debug info (we could probably</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;          <span class="comment">// improve this in some cases.)</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;          MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="comment">// If this block is just an unconditional branch to CurTBB, we can</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">// usually completely eliminate the block.  The only case we cannot</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="comment">// completely eliminate the block is when the block before this one</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="comment">// falls through into MBB and we can&#39;t understand the prior block&#39;s branch</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="comment">// condition.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a>()) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordtype">bool</span> PredHasNoFallThrough = !PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">if</span> (PredHasNoFallThrough || !PriorUnAnalyzable ||</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            !PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(MBB)) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;          <span class="comment">// If the prior block falls through into us, turn it into an</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;          <span class="comment">// explicit branch to us to make updates simpler.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;          <span class="keywordflow">if</span> (!PredHasNoFallThrough &amp;&amp; PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(MBB) &amp;&amp;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;              PriorTBB != MBB &amp;&amp; PriorFBB != MBB) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <span class="keywordflow">if</span> (!PriorTBB) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;              <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(PriorCond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; !PriorFBB &amp;&amp;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                     <span class="stringliteral">&quot;Bad branch analysis&quot;</span>);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;              PriorTBB = MBB;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;              <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!PriorFBB &amp;&amp; <span class="stringliteral">&quot;Machine CFG out of date!&quot;</span>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;              PriorFBB = MBB;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> pdl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(PrevBB);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(PrevBB);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(PrevBB, PriorTBB, PriorFBB, PriorCond, pdl);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;          <span class="comment">// Iterate through all the predecessors, revectoring each in-turn.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          <span class="keywordtype">size_t</span> PI = 0;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;          <span class="keywordtype">bool</span> DidChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          <span class="keywordtype">bool</span> HasBranchToSelf = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;          <span class="keywordflow">while</span>(PI != MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>()) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PMBB = *(MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>() + PI);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            <span class="keywordflow">if</span> (PMBB == MBB) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;              <span class="comment">// If this block has an uncond branch to itself, leave it.</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;              ++PI;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;              HasBranchToSelf = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;              DidChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;              PMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab9a54fdc7456ee97cb54ff30d625b6b7">ReplaceUsesOfBlockWith</a>(MBB, CurTBB);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;              <span class="comment">// If this change resulted in PMBB ending in a conditional</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;              <span class="comment">// branch where both conditions go to the same destination,</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;              <span class="comment">// change this to an unconditional branch (and fix the CFG).</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;              <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewCurTBB = <span class="keyword">nullptr</span>, *NewCurFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;              <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> NewCurCond;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;              <span class="keywordtype">bool</span> NewCurUnAnalyzable = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*PMBB, NewCurTBB,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                      NewCurFBB, NewCurCond, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;              <span class="keywordflow">if</span> (!NewCurUnAnalyzable &amp;&amp; NewCurTBB &amp;&amp; NewCurTBB == NewCurFBB) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> pdl = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a>(*PMBB);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*PMBB);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                NewCurCond.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*PMBB, NewCurTBB, <span class="keyword">nullptr</span>, NewCurCond, pdl);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                ++NumBranchOpts;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                PMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">CorrectExtraCFGEdges</a>(NewCurTBB, <span class="keyword">nullptr</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;              }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;          }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;          <span class="comment">// Change any jumptables to go to the new MBB.</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html">MachineJumpTableInfo</a> *MJTI = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a99e93c9b5c2f41b3d601d129a6f60a6e">getJumpTableInfo</a>())</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            MJTI-&gt;ReplaceMBBInJumpTables(MBB, CurTBB);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;          <span class="keywordflow">if</span> (DidChange) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            ++NumBranchOpts;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="keywordflow">if</span> (!HasBranchToSelf) <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;          }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="comment">// Add the branch back if the block is more than just an uncond branch.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*MBB, CurTBB, <span class="keyword">nullptr</span>, CurCond, dl);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">// If the prior block doesn&#39;t fall through into this block, and if this</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// block doesn&#39;t fall through into some other block, see if we can find a</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// place to move this block where a fall-through will happen.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (!PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>()) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="comment">// Now we know that there was no fall-through into this block, check to</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">// see if it has a fall-through into its successor.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordtype">bool</span> CurFallsThru = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span> (!MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>()) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="comment">// Check all the predecessors of this block.  If one of them has no fall</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="comment">// throughs, move this block right after it.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;           E = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != E; ++PI) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="comment">// Analyze the branch at the end of the pred.</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB = *PI;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> PredFallthrough = PredBB; ++PredFallthrough;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredTBB = <span class="keyword">nullptr</span>, *PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PredCond;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">if</span> (PredBB != MBB &amp;&amp; !PredBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>() &amp;&amp;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            !<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*PredBB, PredTBB, PredFBB, PredCond, <span class="keyword">true</span>)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            &amp;&amp; (!CurFallsThru || !CurTBB || !CurFBB)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            &amp;&amp; (!CurFallsThru || MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &gt;= PredBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>())) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;          <span class="comment">// If the current block doesn&#39;t fall through, just move it.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;          <span class="comment">// If the current block can fall through and does not end with a</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;          <span class="comment">// conditional branch, we need to append an unconditional jump to</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          <span class="comment">// the (current) next block.  To avoid a possible compile-time</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;          <span class="comment">// infinite loop, move blocks only backward in this case.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;          <span class="comment">// Also, if there are already 2 branches here, we cannot add a third;</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;          <span class="comment">// this means we have the case</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;          <span class="comment">// Bcc next</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;          <span class="comment">// B elsewhere</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;          <span class="comment">// next:</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;          <span class="keywordflow">if</span> (CurFallsThru) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NextBB =</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                <a class="code" href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">std::next</a>(<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a>(MBB));</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            CurCond.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*MBB, NextBB, <span class="keyword">nullptr</span>, CurCond, <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a>());</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;          }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;          MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">moveAfter</a>(PredBB);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;          MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;          <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (!CurFallsThru) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="comment">// Check all successors to see if we can move this block before it.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">MachineBasicBlock::succ_iterator</a> SI = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;           E = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); SI != E; ++SI) {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="comment">// Analyze the branch at the end of the block before the succ.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB = *SI;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> SuccPrev = SuccBB; --SuccPrev;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="comment">// If this block doesn&#39;t already fall-through to that successor, and if</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="comment">// the succ doesn&#39;t already have a block that can fall through into it,</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="comment">// and if the successor isn&#39;t an EH destination, we can arrange for the</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="comment">// fallthrough to happen.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="keywordflow">if</span> (SuccBB != MBB &amp;&amp; &amp;*SuccPrev != MBB &amp;&amp;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            !SuccPrev-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>() &amp;&amp; !CurUnAnalyzable &amp;&amp;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            !SuccBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>()) {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;          MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a25c2a6ee39d0d97dac2184e8bd942300">moveBefore</a>(SuccBB);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;          <span class="keywordflow">goto</span> ReoptimizeBlock;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="comment">// Okay, there is no really great place to put this block.  If, however,</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="comment">// the block before this one would be a fall-through if this block were</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// removed, move this block to the end of the function.</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PrevTBB = <span class="keyword">nullptr</span>, *PrevFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PrevCond;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (FallThrough != MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>() &amp;&amp;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;          !<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(PrevBB, PrevTBB, PrevFBB, PrevCond, <span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;          PrevBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(FallThrough)) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">moveAfter</a>(--MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>());</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9ac05913a143322136efcad10ed7548c"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00298">MachineBasicBlock.h:298</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a537a9265c55392ab47d44954f27db538"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00314">MachineFunction.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00644">MachineBasicBlock.h:644</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00289">TargetInstrInfo.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af3c2dc75190645b72eee3c416cd14885"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">llvm::MachineBasicBlock::moveAfter</a></div><div class="ttdeci">void moveAfter(MachineBasicBlock *NewBefore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00387">MachineBasicBlock.cpp:387</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="../../dc/d65/classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d2d/DebugLoc_8h_source.html#l00029">DebugLoc.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_abce62a681f245fc78059890e4ca83210"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">llvm::TargetInstrInfo::RemoveBranch</a></div><div class="ttdeci">virtual unsigned RemoveBranch(MachineBasicBlock &amp;MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00299">TargetInstrInfo.h:299</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_aebca59e55e33781db69d5909a2b2bc49"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#aebca59e55e33781db69d5909a2b2bc49">getBranchDebugLoc</a></div><div class="ttdeci">static DebugLoc getBranchDebugLoc(MachineBasicBlock &amp;MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01052">BranchFolding.cpp:1052</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00243">MachineBasicBlock.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae1612b06274368fe13b574cbd9c4f768"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00285">MachineBasicBlock.h:285</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab9a54fdc7456ee97cb54ff30d625b6b7"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab9a54fdc7456ee97cb54ff30d625b6b7">llvm::MachineBasicBlock::ReplaceUsesOfBlockWith</a></div><div class="ttdeci">void ReplaceUsesOfBlockWith(MachineBasicBlock *Old, MachineBasicBlock *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l01019">MachineBasicBlock.cpp:1019</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d36/MachineInstr_8cpp_source.html#l00863">MachineInstr.cpp:863</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aefba5f2af370add1bc8aaceedf7878ef"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">llvm::MachineBasicBlock::succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a87d0fbdabd17122a3febe35d7fbefb60"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a87d0fbdabd17122a3febe35d7fbefb60">IsEmptyBlock</a></div><div class="ttdeci">static bool IsEmptyBlock(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00998">BranchFolding.cpp:998</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa37d95a1d7bc824da0c596d8334c4ceb"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00220">MachineBasicBlock.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3c5c3bd0c015f3134dc19fe194f635dd"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3c5c3bd0c015f3134dc19fe194f635dd">llvm::MachineBasicBlock::transferSuccessors</a></div><div class="ttdeci">void transferSuccessors(MachineBasicBlock *fromMBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00580">MachineBasicBlock.cpp:580</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a5ffb77c69d69a5beff906caaecfd7be4"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">llvm::MachineBasicBlock::canFallThrough</a></div><div class="ttdeci">bool canFallThrough()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00634">MachineBasicBlock.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a99e93c9b5c2f41b3d601d129a6f60a6e"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a99e93c9b5c2f41b3d601d129a6f60a6e">llvm::MachineFunction::getJumpTableInfo</a></div><div class="ttdeci">const MachineJumpTableInfo * getJumpTableInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00181">MachineFunction.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a051d866f5c8c28d14ebe529a33f5f7b1"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">llvm::TargetInstrInfo::ReverseBranchCondition</a></div><div class="ttdeci">virtual bool ReverseBranchCondition(SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00670">TargetInstrInfo.h:670</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00258">MachineBasicBlock.h:258</a></div></div>
<div class="ttc" id="classllvm_1_1MachineJumpTableInfo_html"><div class="ttname"><a href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html">llvm::MachineJumpTableInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/MachineJumpTableInfo_8h_source.html#l00042">MachineJumpTableInfo.h:42</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00371">SmallVector.h:371</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a1570dd3a2568ba5e52073cdf6d904ee9"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">llvm::MachineBasicBlock::succ_empty</a></div><div class="ttdeci">bool succ_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00301">MachineBasicBlock.h:301</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_acda790896623fd894c71bf79f1bbcfea"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#acda790896623fd894c71bf79f1bbcfea">IsBetterFallthrough</a></div><div class="ttdeci">static bool IsBetterFallthrough(MachineBasicBlock *MBB1, MachineBasicBlock *MBB2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01024">BranchFolding.cpp:1024</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00286">MachineBasicBlock.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aabc149950316b323f9cdac2122ff0131"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">llvm::MachineBasicBlock::removeSuccessor</a></div><div class="ttdeci">void removeSuccessor(MachineBasicBlock *succ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00502">MachineBasicBlock.cpp:502</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a25c2a6ee39d0d97dac2184e8bd942300"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a25c2a6ee39d0d97dac2184e8bd942300">llvm::MachineBasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(MachineBasicBlock *NewAfter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00383">MachineBasicBlock.cpp:383</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00270">MachineBasicBlock.h:270</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a57f25804288bc580d7b2e4016a38aec9"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">llvm::MachineBasicBlock::isSuccessor</a></div><div class="ttdeci">bool isSuccessor(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00625">MachineBasicBlock.cpp:625</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a8afe41bda071ea77c815f7bd436fdd82"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">llvm::TargetInstrInfo::InsertBranch</a></div><div class="ttdeci">virtual unsigned InsertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, DebugLoc DL) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00313">TargetInstrInfo.h:313</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00051">MachineInstr.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9832fb14c5aeb2277bc66d72cc99d105"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">llvm::MachineBasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00129">MachineBasicBlock.h:129</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3f522ae33859d693fb5781efe690e9e6"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">llvm::MachineBasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00354">MachineBasicBlock.h:354</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00565">MachineBasicBlock.h:565</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_ab17cea834a55a63f670e77230917423e"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#ab17cea834a55a63f670e77230917423e">IsBranchOnlyBlock</a></div><div class="ttdeci">static bool IsBranchOnlyBlock(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01011">BranchFolding.cpp:1011</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00241">MachineBasicBlock.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00282">MachineBasicBlock.h:282</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa20773d21c44eb6e0e330d96636cc4b0"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">llvm::MachineBasicBlock::CorrectExtraCFGEdges</a></div><div class="ttdeci">bool CorrectExtraCFGEdges(MachineBasicBlock *DestA, MachineBasicBlock *DestB, bool isCond)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l01048">MachineBasicBlock.cpp:1048</a></div></div>
<div class="ttc" id="namespacebranch-range-01_html_a02ead9d2b33486f3c82bfae74da33a5a"><div class="ttname"><a href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">branch-range-01.next</a></div><div class="ttdeci">string next</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d37/branch-range-01_8py_source.html#l00079">branch-range-01.py:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a049e89ea0f4677d14ac181d3f6b2785c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::OptimizeBranches </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>MF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00975">975</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                                                       {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Make sure blocks are numbered in order</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ac85349aab432e6b7d8b2e8926048a6de">RenumberBlocks</a>();</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">std::next</a>(MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>()), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    MadeChange |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#aba4d278656e7fa6ad21f02e32e99e577">OptimizeBlock</a>(MBB);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// If it is dead, remove it.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>()) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a9014a13a9c23df95aa56bc094f80a8c9">RemoveDeadBlock</a>(MBB);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      ++NumDeadBlocks;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ac85349aab432e6b7d8b2e8926048a6de"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ac85349aab432e6b7d8b2e8926048a6de">llvm::MachineFunction::RenumberBlocks</a></div><div class="ttdeci">void RenumberBlocks(MachineBasicBlock *MBBFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d76/MachineFunction_8cpp_source.html#l00138">MachineFunction.cpp:138</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00314">MachineFunction.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00312">MachineFunction.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae1612b06274368fe13b574cbd9c4f768"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00285">MachineBasicBlock.h:285</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a9014a13a9c23df95aa56bc094f80a8c9"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a9014a13a9c23df95aa56bc094f80a8c9">llvm::BranchFolder::RemoveDeadBlock</a></div><div class="ttdeci">void RemoveDeadBlock(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00114">BranchFolding.cpp:114</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_aba4d278656e7fa6ad21f02e32e99e577"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#aba4d278656e7fa6ad21f02e32e99e577">llvm::BranchFolder::OptimizeBlock</a></div><div class="ttdeci">bool OptimizeBlock(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01066">BranchFolding.cpp:1066</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
<div class="ttc" id="namespacebranch-range-01_html_a02ead9d2b33486f3c82bfae74da33a5a"><div class="ttname"><a href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">branch-range-01.next</a></div><div class="ttdeci">string next</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d37/branch-range-01_8py_source.html#l00079">branch-range-01.py:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79c0c5340d25122d14d264f3281bdfe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::OptimizeFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>MF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../de/d06/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *&#160;</td>
          <td class="paramname"><em>tii</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *&#160;</td>
          <td class="paramname"><em>tri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d0c/classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *&#160;</td>
          <td class="paramname"><em>mmi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OptimizeFunction - Perhaps branch folding, tail merging and other CFG optimizations on the given function. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00182">182</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                                            {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (!tii) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.clear();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a> = tii;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a> = tri;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a43a012792fcd5de1e99103b6d92a3263">MMI</a> = mmi;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Use a RegScavenger to help update liveness when required.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;MRI = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">if</span> (MRI.<a class="code" href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html#aab02e22a5eb05431890303cdeb8d0479">tracksLiveness</a>() &amp;&amp; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>-&gt;<a class="code" href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html#ac6dee4ffc5865c1a7c0e64d1347f190a">trackLivenessAfterRegAlloc</a>(MF))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a> = <span class="keyword">new</span> <a class="code" href="../../d9/d9a/classllvm_1_1RegScavenger.html">RegScavenger</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    MRI.<a class="code" href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html#a721b3ae1a20e295cc4f1143958ad3884">invalidateLiveness</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// Fix CFG.  The later algorithms expect it to be right.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *TBB = <span class="keyword">nullptr</span>, *FBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*MBB, TBB, FBB, Cond, <span class="keyword">true</span>))</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      MadeChange |= MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">CorrectExtraCFGEdges</a>(TBB, FBB, !Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    MadeChange |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af6a74b223c150acd0d91c953ba880867">OptimizeImpDefsBlock</a>(MBB);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">bool</span> MadeChangeThisIteration = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">while</span> (MadeChangeThisIteration) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    MadeChangeThisIteration    = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a95bc0bb858b1c2a366d7f274b6144af2">TailMergeBlocks</a>(MF);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    MadeChangeThisIteration   |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a049e89ea0f4677d14ac181d3f6b2785c">OptimizeBranches</a>(MF);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ae08d297cc6c155672a598262a82ba4c1">EnableHoistCommonCode</a>)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      MadeChangeThisIteration |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a1c32a92b590c0414b041cabe00a4cbb0">HoistCommonCode</a>(MF);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    MadeChange |= MadeChangeThisIteration;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// See if any jump tables have become dead as the code generator</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// did its thing.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html">MachineJumpTableInfo</a> *JTI = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a99e93c9b5c2f41b3d601d129a6f60a6e">getJumpTableInfo</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (!JTI) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">delete</span> <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// Walk the function to find jump tables that are live.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="../../d4/d1f/classllvm_1_1BitVector.html">BitVector</a> JTIsLive(JTI-&gt;<a class="code" href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html#adebd965803507068e86d6d3d454338e9">getJumpTables</a>().size());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> BB = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;       BB != E; ++BB) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;begin(), E = BB-&gt;end();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> op = 0, e = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumOperands(); op != e; ++op) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(op);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span> (!Op.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#af19a512f40c1e9247796ad8cee70884b">isJTI</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// Remember that this JT is live.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        JTIsLive.set(Op.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// Finally, remove dead jump tables.  This happens when the</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// indirect jump was unreachable (and thus deleted).</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = JTIsLive.size(); i != e; ++i)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (!JTIsLive.test(i)) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      JTI-&gt;<a class="code" href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html#a4884f00bcde9528a64e1c18adc789641">RemoveJumpTable</a>(i);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keyword">delete</span> <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">RS</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ae08d297cc6c155672a598262a82ba4c1"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ae08d297cc6c155672a598262a82ba4c1">llvm::BranchFolder::EnableHoistCommonCode</a></div><div class="ttdeci">bool EnableHoistCommonCode</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00089">BranchFolding.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a43a012792fcd5de1e99103b6d92a3263"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a43a012792fcd5de1e99103b6d92a3263">llvm::BranchFolder::MMI</a></div><div class="ttdeci">MachineModuleInfo * MMI</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00092">BranchFolding.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00314">MachineFunction.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00312">MachineFunction.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1RegScavenger_html"><div class="ttname"><a href="../../d9/d9a/classllvm_1_1RegScavenger.html">llvm::RegScavenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/RegisterScavenging_8h_source.html#l00031">RegisterScavenging.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00289">TargetInstrInfo.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1MachineJumpTableInfo_html_a4884f00bcde9528a64e1c18adc789641"><div class="ttname"><a href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html#a4884f00bcde9528a64e1c18adc789641">llvm::MachineJumpTableInfo::RemoveJumpTable</a></div><div class="ttdeci">void RemoveJumpTable(unsigned Idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/MachineJumpTableInfo_8h_source.html#l00105">MachineJumpTableInfo.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1MachineJumpTableInfo_html_adebd965803507068e86d6d3d454338e9"><div class="ttname"><a href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html#adebd965803507068e86d6d3d454338e9">llvm::MachineJumpTableInfo::getJumpTables</a></div><div class="ttdeci">const std::vector&lt; MachineJumpTableEntry &gt; &amp; getJumpTables() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/MachineJumpTableInfo_8h_source.html#l00099">MachineJumpTableInfo.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_af19a512f40c1e9247796ad8cee70884b"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#af19a512f40c1e9247796ad8cee70884b">llvm::MachineOperand::isJTI</a></div><div class="ttdeci">bool isJTI() const </div><div class="ttdoc">isJTI - Tests if this is a MO_JumpTableIndex operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00243">MachineOperand.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a049e89ea0f4677d14ac181d3f6b2785c"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a049e89ea0f4677d14ac181d3f6b2785c">llvm::BranchFolder::OptimizeBranches</a></div><div class="ttdeci">bool OptimizeBranches(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00975">BranchFolding.cpp:975</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a99e93c9b5c2f41b3d601d129a6f60a6e"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a99e93c9b5c2f41b3d601d129a6f60a6e">llvm::MachineFunction::getJumpTableInfo</a></div><div class="ttdeci">const MachineJumpTableInfo * getJumpTableInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00181">MachineFunction.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="../../d4/d1f/classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a95bc0bb858b1c2a366d7f274b6144af2"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a95bc0bb858b1c2a366d7f274b6144af2">llvm::BranchFolder::TailMergeBlocks</a></div><div class="ttdeci">bool TailMergeBlocks(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00831">BranchFolding.cpp:831</a></div></div>
<div class="ttc" id="classllvm_1_1MachineJumpTableInfo_html"><div class="ttname"><a href="../../d2/d3d/classllvm_1_1MachineJumpTableInfo.html">llvm::MachineJumpTableInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/MachineJumpTableInfo_8h_source.html#l00042">MachineJumpTableInfo.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aab02e22a5eb05431890303cdeb8d0479"><div class="ttname"><a href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html#aab02e22a5eb05431890303cdeb8d0479">llvm::MachineRegisterInfo::tracksLiveness</a></div><div class="ttdeci">bool tracksLiveness() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/MachineRegisterInfo_8h_source.html#l00173">MachineRegisterInfo.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_af6a74b223c150acd0d91c953ba880867"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#af6a74b223c150acd0d91c953ba880867">llvm::BranchFolder::OptimizeImpDefsBlock</a></div><div class="ttdeci">bool OptimizeImpDefsBlock(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00139">BranchFolding.cpp:139</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ac6dee4ffc5865c1a7c0e64d1347f190a"><div class="ttname"><a href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html#ac6dee4ffc5865c1a7c0e64d1347f190a">llvm::TargetRegisterInfo::trackLivenessAfterRegAlloc</a></div><div class="ttdeci">virtual bool trackLivenessAfterRegAlloc(const MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d26/TargetRegisterInfo_8h_source.html#l00736">TargetRegisterInfo.h:736</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a721b3ae1a20e295cc4f1143958ad3884"><div class="ttname"><a href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html#a721b3ae1a20e295cc4f1143958ad3884">llvm::MachineRegisterInfo::invalidateLiveness</a></div><div class="ttdeci">void invalidateLiveness()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/MachineRegisterInfo_8h_source.html#l00180">MachineRegisterInfo.h:180</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a1c32a92b590c0414b041cabe00a4cbb0"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a1c32a92b590c0414b041cabe00a4cbb0">llvm::BranchFolder::HoistCommonCode</a></div><div class="ttdeci">bool HoistCommonCode(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l01458">BranchFolding.cpp:1458</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_af32313ebde0d0b7162a90b12628b06f4"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">llvm::BranchFolder::TriedMerging</a></div><div class="ttdeci">SmallPtrSet&lt; const MachineBasicBlock *, 2 &gt; TriedMerging</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00051">BranchFolding.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ad9f2dba0009b1d6a2db7683b26aa098d"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ad9f2dba0009b1d6a2db7683b26aa098d">llvm::BranchFolder::RS</a></div><div class="ttdeci">RegScavenger * RS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00093">BranchFolding.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="../../d8/db4/classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/MachineRegisterInfo_8h_source.html#l00031">MachineRegisterInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ac9485ae7d6fedd71ad4460f72c799c98"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">llvm::MachineOperand::getIndex</a></div><div class="ttdeci">int getIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00427">MachineOperand.h:427</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a374176ed65c181b7123ff067bbf804ab"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">llvm::BranchFolder::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00091">BranchFolding.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa20773d21c44eb6e0e330d96636cc4b0"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aa20773d21c44eb6e0e330d96636cc4b0">llvm::MachineBasicBlock::CorrectExtraCFGEdges</a></div><div class="ttdeci">bool CorrectExtraCFGEdges(MachineBasicBlock *DestA, MachineBasicBlock *DestB, bool isCond)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l01048">MachineBasicBlock.cpp:1048</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6a74b223c150acd0d91c953ba880867"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::OptimizeImpDefsBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>MBB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeImpDefsBlock - If a basic block is just a bunch of implicit_def followed by terminators, and if the implicitly defined registers are not used by the terminators, remove those implicit_def's. e.g. BB1: r0 = implicit_def r1 = implicit_def br This block can be optimized away later if the implicit instructions are removed. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00139">139</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                              {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> ImpDefRegs;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">while</span> (I != MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;isImplicitDef())</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../df/db6/namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = I-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dbe/classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">TRI</a>, <span class="comment">/*IncludeSelf=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         SubRegs.<a class="code" href="../../dd/da4/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      ImpDefRegs.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(*SubRegs);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (ImpDefRegs.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#ad1fc9d053ca7e09f7ac983572a57e5af">empty</a>())</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a> FirstTerm = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">while</span> (I != MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#aad7e5ed58daa51de3466752823b2f76e">isUnpredicatedTerminator</a>(I))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// See if it uses any of the implicitly defined registers.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = I-&gt;getNumOperands(); i != e; ++i) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = I-&gt;getOperand(i);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>())</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">if</span> (ImpDefRegs.<a class="code" href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">count</a>(Reg))</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  I = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">while</span> (I != FirstTerm) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> *ImpDefMI = &amp;*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(ImpDefMI);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a537a9265c55392ab47d44954f27db538"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="../../dd/da4/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00243">MachineBasicBlock.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_ad1fc9d053ca7e09f7ac983572a57e5af"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#ad1fc9d053ca7e09f7ac983572a57e5af">llvm::SmallSet::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00043">SmallSet.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00227">MachineOperand.h:227</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="../../df/db6/namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc3/X86DisassemblerDecoder_8h_source.html#l00429">X86DisassemblerDecoder.h:429</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00063">SmallSet.h:63</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_1_1bundle__iterator_html"><div class="ttname"><a href="../../de/db4/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">llvm::MachineBasicBlock::bundle_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00144">MachineBasicBlock.h:144</a></div></div>
<div class="ttc" id="classllvm_1_1MCSubRegIterator_html"><div class="ttname"><a href="../../d0/dbe/classllvm_1_1MCSubRegIterator.html">llvm::MCSubRegIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/MCRegisterInfo_8h_source.html#l00441">MCRegisterInfo.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a75238c8d967e3014bc35c24c843c230f"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1SmallSet.html#a75238c8d967e3014bc35c24c843c230f">llvm::SmallSet::count</a></div><div class="ttdeci">size_type count(const T &amp;V) const </div><div class="ttdoc">count - Return 1 if the element is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/SmallSet_8h_source.html#l00052">SmallSet.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aad7e5ed58daa51de3466752823b2f76e"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#aad7e5ed58daa51de3466752823b2f76e">llvm::TargetInstrInfo::isUnpredicatedTerminator</a></div><div class="ttdeci">virtual bool isUnpredicatedTerminator(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d14/TargetInstrInfo_8cpp_source.html#l00202">TargetInstrInfo.cpp:202</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00051">MachineInstr.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a374176ed65c181b7123ff067bbf804ab"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a374176ed65c181b7123ff067bbf804ab">llvm::BranchFolder::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00091">BranchFolding.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00241">MachineBasicBlock.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0aea67e2238c93f33e6a4b4acc483dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BranchFolder::RemoveBlocksWithHash </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>CurHash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>SuccBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>PredBB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>RemoveBlocksWithHash - Remove all blocks with hash CurHash from MergePotentials, restoring branches at ends of blocks as appropriate. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00636">636</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                                                   {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">MPIterator</a> CurMPIter, B;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">for</span> (CurMPIter = std::prev(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.end()),</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      B = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;       CurMPIter-&gt;getHash() == CurHash; --CurMPIter) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">// Put the unconditional branch back, if we need one.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CurMBB = CurMPIter-&gt;getBlock();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (SuccBB &amp;&amp; CurMBB != PredBB)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a653145c23a36602493bb8dae8ef3d73b">FixTail</a>(CurMBB, SuccBB, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (CurMPIter == B)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (CurMPIter-&gt;getHash() != CurHash)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    CurMPIter++;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.erase(CurMPIter, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.end());</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a5e878e98e6d772cf2ef21e14fab45971"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">llvm::BranchFolder::MergePotentials</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt; MergePotentials</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00050">BranchFolding.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a830bc8d0a52811afb66498efca9b3d27"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a830bc8d0a52811afb66498efca9b3d27">llvm::BranchFolder::MPIterator</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt;::iterator MPIterator</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00049">BranchFolding.h:49</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a653145c23a36602493bb8dae8ef3d73b"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a653145c23a36602493bb8dae8ef3d73b">FixTail</a></div><div class="ttdeci">static void FixTail(MachineBasicBlock *CurMBB, MachineBasicBlock *SuccBB, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00466">BranchFolding.cpp:466</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9014a13a9c23df95aa56bc094f80a8c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BranchFolder::RemoveDeadBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>MBB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>RemoveDeadBlock - Remove the specified dead machine basic block from the function, updating the CFG. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00114">114</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                         {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>() &amp;&amp; <span class="stringliteral">&quot;MBB must be dead!&quot;</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nRemoving MBB: &quot;</span> &lt;&lt; *MBB);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// drop all successors.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">while</span> (!MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">succ_empty</a>())</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>()-1);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Avoid matching if this pointer gets reused.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.erase(MBB);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// Remove the block.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  MF-&gt;<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ae986afe2285d3980b27aa9763f3203e9">erase</a>(MBB);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae1612b06274368fe13b574cbd9c4f768"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00285">MachineBasicBlock.h:285</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a1570dd3a2568ba5e52073cdf6d904ee9"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">llvm::MachineBasicBlock::succ_empty</a></div><div class="ttdeci">bool succ_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00301">MachineBasicBlock.h:301</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aabc149950316b323f9cdac2122ff0131"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">llvm::MachineBasicBlock::removeSuccessor</a></div><div class="ttdeci">void removeSuccessor(MachineBasicBlock *succ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00502">MachineBasicBlock.cpp:502</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_af32313ebde0d0b7162a90b12628b06f4"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">llvm::BranchFolder::TriedMerging</a></div><div class="ttdeci">SmallPtrSet&lt; const MachineBasicBlock *, 2 &gt; TriedMerging</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00051">BranchFolding.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ae986afe2285d3980b27aa9763f3203e9"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ae986afe2285d3980b27aa9763f3203e9">llvm::MachineFunction::erase</a></div><div class="ttdeci">void erase(iterator MBBI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00344">MachineFunction.h:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad2b0a3a3253f9d9f9f8ee3d256f05103"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BranchFolder::ReplaceTailWithBranchTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>&#160;</td>
          <td class="paramname"><em>OldInst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>NewDest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ReplaceTailWithBranchTo - Delete the instruction OldInst and everything after it, replacing it with an unconditional branch to NewDest. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00401">401</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                                                       {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CurMBB = OldInst-&gt;getParent();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a4ce2ca712a90bff9992be2257735ae60">ReplaceTailWithBranchTo</a>(OldInst, NewDest);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// For targets that use the register scavenger, we must maintain LiveIns.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a01a0b65c92fc7e2a1d6b0dc784c0d42c">MaintainLiveIns</a>(CurMBB, NewDest);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  ++NumTailMerge;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a01a0b65c92fc7e2a1d6b0dc784c0d42c"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a01a0b65c92fc7e2a1d6b0dc784c0d42c">llvm::BranchFolder::MaintainLiveIns</a></div><div class="ttdeci">void MaintainLiveIns(MachineBasicBlock *CurMBB, MachineBasicBlock *NewMBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00385">BranchFolding.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a4ce2ca712a90bff9992be2257735ae60"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a4ce2ca712a90bff9992be2257735ae60">llvm::TargetInstrInfo::ReplaceTailWithBranchTo</a></div><div class="ttdeci">virtual void ReplaceTailWithBranchTo(MachineBasicBlock::iterator Tail, MachineBasicBlock *NewDest) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d14/TargetInstrInfo_8cpp_source.html#l00101">TargetInstrInfo.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a099fe69a19df662adcc320a2f261cda5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> * BranchFolder::SplitMBBAt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>CurMBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>&#160;</td>
          <td class="paramname"><em>BBI1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SplitMBBAt - Given a machine basic block and an iterator into it, split the MBB so that the part before the iterator falls into the part starting at the iterator. This returns the new MBB. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00416">416</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                                                  {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a7fb23b6fb5a15b972eb3eaea96582d22">isLegalToSplitMBBAt</a>(CurMBB, BBI1))</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *CurMBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// Create the fall-through block.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> MBBI = &amp;CurMBB;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewMBB =MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(BB);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  CurMBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>()-&gt;<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(++MBBI, NewMBB);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Move all the successors of this block to the specified block.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  NewMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3c5c3bd0c015f3134dc19fe194f635dd">transferSuccessors</a>(&amp;CurMBB);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// Add an edge from CurMBB to NewMBB for the fall-through.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  CurMBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">addSuccessor</a>(NewMBB);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Splice the code over.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  NewMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(NewMBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), &amp;CurMBB, BBI1, CurMBB.<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// For targets that use the register scavenger, we must maintain LiveIns.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a01a0b65c92fc7e2a1d6b0dc784c0d42c">MaintainLiveIns</a>(&amp;CurMBB, NewMBB);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> NewMBB;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00243">MachineBasicBlock.h:243</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a01a0b65c92fc7e2a1d6b0dc784c0d42c"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a01a0b65c92fc7e2a1d6b0dc784c0d42c">llvm::BranchFolder::MaintainLiveIns</a></div><div class="ttdeci">void MaintainLiveIns(MachineBasicBlock *CurMBB, MachineBasicBlock *NewMBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00385">BranchFolding.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3c5c3bd0c015f3134dc19fe194f635dd"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3c5c3bd0c015f3134dc19fe194f635dd">llvm::MachineBasicBlock::transferSuccessors</a></div><div class="ttdeci">void transferSuccessors(MachineBasicBlock *fromMBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00580">MachineBasicBlock.cpp:580</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a1d483b4ac24a96c2250becb232ed4cb4"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">llvm::MachineFunction::CreateMachineBasicBlock</a></div><div class="ttdeci">MachineBasicBlock * CreateMachineBasicBlock(const BasicBlock *bb=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d76/MachineFunction_8cpp_source.html#l00215">MachineFunction.cpp:215</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a7fb23b6fb5a15b972eb3eaea96582d22"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a7fb23b6fb5a15b972eb3eaea96582d22">llvm::TargetInstrInfo::isLegalToSplitMBBAt</a></div><div class="ttdeci">virtual bool isLegalToSplitMBBAt(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00343">TargetInstrInfo.h:343</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00565">MachineBasicBlock.h:565</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_af4c0db6d503e0ba3b8e44067023ffbba"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">llvm::MachineFunction::insert</a></div><div class="ttdeci">void insert(iterator MBBI, MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00331">MachineFunction.h:331</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3fcc360e6de146a370e8b0deecfa877f"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">llvm::MachineBasicBlock::addSuccessor</a></div><div class="ttdeci">void addSuccessor(MachineBasicBlock *succ, uint32_t weight=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00488">MachineBasicBlock.cpp:488</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a95bc0bb858b1c2a366d7f274b6144af2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::TailMergeBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d77/classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>MF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00831">831</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                                                      {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">EnableTailMerge</a>) <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// First find blocks with no successors.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.clear();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() &lt; <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a02dc8f03ab0fbd643e0015ca91923d33">TailMergeThreshold</a>; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.count(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;succ_empty())</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.push_back(MergePotentialsElt(<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a23f0fe5fd9bac0df47092cb480fbe136">HashEndOfMBB</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// If this is a large problem, avoid visiting the same basic blocks</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// multiple times.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() == <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a02dc8f03ab0fbd643e0015ca91923d33">TailMergeThreshold</a>)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size(); i != e; ++i)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.insert(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>[i].getBlock());</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// See if we can do any tail merging on those.</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() &gt;= 2)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    MadeChange |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a9d167f61121aaa0057efb35f48b2c5fd">TryTailMergeBlocks</a>(<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// Look at blocks (IBB) with multiple predecessors (PBB).</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// We change each predecessor to a canonical form, by</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// (1) temporarily removing any unconditional branch from the predecessor</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// to IBB, and</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// (2) alter conditional branches so they branch to the other block</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// not IBB; this may require adding back an unconditional branch to IBB</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">// later, where there wasn&#39;t one coming in.  E.g.</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">//   Bcc IBB</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">//   fallthrough to QBB</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// here becomes</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">//   Bncc QBB</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// with a conceptual B to IBB after that, which never actually exists.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// With those changes, we see whether the predecessors&#39; tails match,</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// and merge them if so.  We change things out of canonical form and</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// back to the way they were later in the process.  (OptimizeBranches</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// would undo some of this, but we can&#39;t use it, because we&#39;d get into</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// a compile-time infinite loop repeatedly doing and undoing the same</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// transformations.)</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">std::next</a>(MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>()), E = MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;pred_size() &lt; 2) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock *, 8&gt;</a> UniquePreds;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *IBB = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB = std::prev(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.clear();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;pred_begin(),</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;           E2 = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;pred_end();</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> != E2 &amp;&amp; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() &lt; <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a02dc8f03ab0fbd643e0015ca91923d33">TailMergeThreshold</a>; ++<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PBB = *<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.count(PBB))</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="comment">// Skip blocks that loop to themselves, can&#39;t tail merge these.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordflow">if</span> (PBB == IBB)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="comment">// Visit each predecessor only once.</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="keywordflow">if</span> (!UniquePreds.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(PBB))</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// Skip blocks which may jump to a landing pad. Can&#39;t tail merge these.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (PBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae89347d3f5dfc901e42b9ec61c46766a">getLandingPadSuccessor</a>())</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB = <span class="keyword">nullptr</span>, *FBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*PBB, TBB, FBB, Cond, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// Failing case: IBB is the target of a cbr, and we cannot reverse the</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="comment">// branch.</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> NewCond(Cond);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="keywordflow">if</span> (!Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; TBB == IBB) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(NewCond))</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          <span class="comment">// This is the QBB case described above</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          <span class="keywordflow">if</span> (!FBB)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            FBB = <a class="code" href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">std::next</a>(<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a>(PBB));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// Failing case: the only way IBB can be reached from PBB is via</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="comment">// exception handling.  Happens for landing pads.  Would be nice to have</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="comment">// a bit in the edge so we didn&#39;t have to do all this.</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">if</span> (IBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>()) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          <a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> IP = PBB;  IP++;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredNextBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;          <span class="keywordflow">if</span> (IP != MF.<a class="code" href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>())</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            PredNextBB = IP;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;          <span class="keywordflow">if</span> (!TBB) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="keywordflow">if</span> (IBB != PredNextBB)      <span class="comment">// fallthrough</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FBB) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            <span class="keywordflow">if</span> (TBB != IBB &amp;&amp; FBB != IBB)   <span class="comment">// cbr then ubr</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">if</span> (TBB != IBB)               <span class="comment">// ubr</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">if</span> (TBB != IBB &amp;&amp; IBB != PredNextBB)  <span class="comment">// cbr</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;          }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="comment">// Remove the unconditional branch at the end, if any.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span> (TBB &amp;&amp; (Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() || FBB)) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          <a class="code" href="../../dc/d65/classllvm_1_1DebugLoc.html">DebugLoc</a> dl;  <span class="comment">// FIXME: this is nowhere</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;          <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*PBB);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          <span class="keywordflow">if</span> (!Cond.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="comment">// reinsert conditional branch only, for now</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>-&gt;<a class="code" href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*PBB, (TBB == IBB) ? FBB : TBB, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                              NewCond, dl);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.push_back(MergePotentialsElt(<a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a23f0fe5fd9bac0df47092cb480fbe136">HashEndOfMBB</a>(PBB), *<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// If this is a large problem, avoid visiting the same basic blocks multiple</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// times.</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() == <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a02dc8f03ab0fbd643e0015ca91923d33">TailMergeThreshold</a>)</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size(); i != e; ++i)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">TriedMerging</a>.insert(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>[i].getBlock());</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() &gt;= 2)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      MadeChange |= <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a9d167f61121aaa0057efb35f48b2c5fd">TryTailMergeBlocks</a>(IBB, PredBB);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// Reinsert an unconditional branch if needed. The 1 below can occur as a</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// result of removing blocks in TryTailMergeBlocks.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    PredBB = std::prev(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);     <span class="comment">// this may have been changed in TryTailMergeBlocks</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin()-&gt;getBlock() != PredBB)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a653145c23a36602493bb8dae8ef3d73b">FixTail</a>(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin()-&gt;getBlock(), IBB, <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">TII</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a9d167f61121aaa0057efb35f48b2c5fd"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a9d167f61121aaa0057efb35f48b2c5fd">llvm::BranchFolder::TryTailMergeBlocks</a></div><div class="ttdeci">bool TryTailMergeBlocks(MachineBasicBlock *SuccBB, MachineBasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00717">BranchFolding.cpp:717</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a02dc8f03ab0fbd643e0015ca91923d33"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a02dc8f03ab0fbd643e0015ca91923d33">TailMergeThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TailMergeThreshold(&quot;tail-merge-threshold&quot;, cl::desc(&quot;Max number of predecessors to consider tail merging&quot;), cl::init(150), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00314">MachineFunction.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00312">MachineFunction.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00289">TargetInstrInfo.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a5e878e98e6d772cf2ef21e14fab45971"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">llvm::BranchFolder::MergePotentials</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt; MergePotentials</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00050">BranchFolding.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="../../dc/d65/classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d2d/DebugLoc_8h_source.html#l00029">DebugLoc.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_abce62a681f245fc78059890e4ca83210"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">llvm::TargetInstrInfo::RemoveBranch</a></div><div class="ttdeci">virtual unsigned RemoveBranch(MachineBasicBlock &amp;MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00299">TargetInstrInfo.h:299</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a653145c23a36602493bb8dae8ef3d73b"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a653145c23a36602493bb8dae8ef3d73b">FixTail</a></div><div class="ttdeci">static void FixTail(MachineBasicBlock *CurMBB, MachineBasicBlock *SuccBB, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00466">BranchFolding.cpp:466</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a051d866f5c8c28d14ebe529a33f5f7b1"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">llvm::TargetInstrInfo::ReverseBranchCondition</a></div><div class="ttdeci">virtual bool ReverseBranchCondition(SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00670">TargetInstrInfo.h:670</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00258">MachineBasicBlock.h:258</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae89347d3f5dfc901e42b9ec61c46766a"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ae89347d3f5dfc901e42b9ec61c46766a">llvm::MachineBasicBlock::getLandingPadSuccessor</a></div><div class="ttdeci">const MachineBasicBlock * getLandingPadSuccessor() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/MachineBasicBlock_8cpp_source.html#l00231">MachineBasicBlock.cpp:231</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a8afe41bda071ea77c815f7bd436fdd82"><div class="ttname"><a href="../../de/d06/classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">llvm::TargetInstrInfo::InsertBranch</a></div><div class="ttdeci">virtual unsigned InsertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, DebugLoc DL) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/TargetInstrInfo_8h_source.html#l00313">TargetInstrInfo.h:313</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_af32313ebde0d0b7162a90b12628b06f4"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#af32313ebde0d0b7162a90b12628b06f4">llvm::BranchFolder::TriedMerging</a></div><div class="ttdeci">SmallPtrSet&lt; const MachineBasicBlock *, 2 &gt; TriedMerging</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00051">BranchFolding.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3f522ae33859d693fb5781efe690e9e6"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">llvm::MachineBasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00354">MachineBasicBlock.h:354</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_aa3567149b3e5bac53145d96a4f4dff59"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#aa3567149b3e5bac53145d96a4f4dff59">llvm::BranchFolder::EnableTailMerge</a></div><div class="ttdeci">bool EnableTailMerge</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00088">BranchFolding.h:88</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="../../d5/d77/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1c/MachineFunction_8h_source.html#l00300">MachineFunction.h:300</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a23f0fe5fd9bac0df47092cb480fbe136"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a23f0fe5fd9bac0df47092cb480fbe136">HashEndOfMBB</a></div><div class="ttdeci">static unsigned HashEndOfMBB(const MachineBasicBlock *MBB)</div><div class="ttdoc">HashEndOfMBB - Hash the last instruction in the MBB. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00294">BranchFolding.cpp:294</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_acaa353388470cfc66ce071957127dbea"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#acaa353388470cfc66ce071957127dbea">llvm::BranchFolder::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00090">BranchFolding.h:90</a></div></div>
<div class="ttc" id="namespacebranch-range-01_html_a02ead9d2b33486f3c82bfae74da33a5a"><div class="ttname"><a href="../../d9/d2c/namespacebranch-range-01.html#a02ead9d2b33486f3c82bfae74da33a5a">branch-range-01.next</a></div><div class="ttdeci">string next</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d37/branch-range-01_8py_source.html#l00079">branch-range-01.py:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9d167f61121aaa0057efb35f48b2c5fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BranchFolder::TryTailMergeBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>SuccBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&#160;</td>
          <td class="paramname"><em>PredBB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html#l00717">717</a> of file <a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                                                 {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// Except for the special cases below, tail-merge if there are at least</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// this many instructions in common.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordtype">unsigned</span> minCommonTailLength = <a class="code" href="../../dc/d7b/BranchFolding_8cpp.html#a287825ab3d1df2312dfb4c694a70cf43">TailMergeSize</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nTryTailMergeBlocks: &quot;</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size(); i != e; ++i)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;          <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>[i].getBlock()-&gt;getNumber()</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                 &lt;&lt; (i == e-1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span> (SuccBB) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;          <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  with successor BB#&quot;</span> &lt;&lt; SuccBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          <span class="keywordflow">if</span> (PredBB)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  which has fall-through from BB#&quot;</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                   &lt;&lt; PredBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Looking for common tails of at least &quot;</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;               &lt;&lt; minCommonTailLength &lt;&lt; <span class="stringliteral">&quot; instruction&quot;</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;               &lt;&lt; (minCommonTailLength == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;s&quot;</span>) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;       );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// Sort by hash value so that blocks with identical end sequences sort</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// together.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  std::stable_sort(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin(), <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.end());</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Walk through equivalence sets looking for actual exact matches.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.size() &gt; 1) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">unsigned</span> CurHash = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.back().getHash();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// Build SameTails, identifying the set of blocks with this hash code</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// and with the maximum number of instructions in common.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">unsigned</span> maxCommonTailLength = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad186c4ee71ad0df3a205364aa9165cb6">ComputeSameTails</a>(CurHash,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                                                    minCommonTailLength,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                                                    SuccBB, PredBB);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// If we didn&#39;t find any pair that has at least minCommonTailLength</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// instructions in common, remove all blocks with this hash code and retry.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.empty()) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ab0aea67e2238c93f33e6a4b4acc483dc">RemoveBlocksWithHash</a>(CurHash, SuccBB, PredBB);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// If one of the blocks is the entire common tail (and not the entry</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// block, which we can&#39;t jump to), we can treat all blocks with this same</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// tail at once.  Use PredBB if that is one of the possibilities, as that</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// will not introduce any extra branches.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *EntryBB = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.begin()-&gt;getBlock()-&gt;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                 <a class="code" href="../../d7/d7f/BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>()-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>();</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordtype">unsigned</span> commonTailIndex = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// If there are two blocks, check to see if one can be made to fall through</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// into the other.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size() == 2 &amp;&amp;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[0].getBlock()-&gt;isLayoutSuccessor(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[1].getBlock()) &amp;&amp;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[1].tailIsWholeBlock())</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      commonTailIndex = 1;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size() == 2 &amp;&amp;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;             <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[1].getBlock()-&gt;isLayoutSuccessor(</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                                     <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[0].getBlock()) &amp;&amp;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;             <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[0].tailIsWholeBlock())</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      commonTailIndex = 0;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="comment">// Otherwise just pick one, favoring the fall-through predecessor if</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">// there is one.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size(); i != e; ++i) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getBlock();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">if</span> (MBB == EntryBB &amp;&amp; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].tailIsWholeBlock())</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> (MBB == PredBB) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          commonTailIndex = i;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].tailIsWholeBlock())</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          commonTailIndex = i;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (commonTailIndex == <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size() ||</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        (<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].getBlock() == PredBB &amp;&amp;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;         !<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].tailIsWholeBlock())) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">// None of the blocks consist entirely of the common tail.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="comment">// Split a block so that one does.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ae1e7b78443bf2ff7fcc0063e11db34a1">CreateCommonTailOnlyBlock</a>(PredBB, SuccBB,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                                     maxCommonTailLength, commonTailIndex)) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ab0aea67e2238c93f33e6a4b4acc483dc">RemoveBlocksWithHash</a>(CurHash, SuccBB, PredBB);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[commonTailIndex].getBlock();</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// MBB is common tail.  Adjust all other BB&#39;s to jump to this one.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">// Traversal must be forwards so erases work.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nUsing common tail in BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; for &quot;</span>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0, e = <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>.size(); i != e; ++i) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">if</span> (commonTailIndex == i)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getBlock()-&gt;getNumber()</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                   &lt;&lt; (i == e-1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>));</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="comment">// Hack the end off BB i, making it jump to BB commonTailIndex instead.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#ad2b0a3a3253f9d9f9f8ee3d256f05103">ReplaceTailWithBranchTo</a>(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getTailStartPos(), MBB);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// BB i is no longer a predecessor of SuccBB; remove it from the worklist.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">MergePotentials</a>.erase(<a class="code" href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">SameTails</a>[i].getMPIter());</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// We leave commonTailIndex in the worklist in case there are other blocks</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">// that match it with a smaller number of instructions.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ad186c4ee71ad0df3a205364aa9165cb6"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ad186c4ee71ad0df3a205364aa9165cb6">llvm::BranchFolder::ComputeSameTails</a></div><div class="ttdeci">unsigned ComputeSameTails(unsigned CurHash, unsigned minCommonTailLength, MachineBasicBlock *SuccBB, MachineBasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00600">BranchFolding.cpp:600</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00644">MachineBasicBlock.h:644</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a5e878e98e6d772cf2ef21e14fab45971"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a5e878e98e6d772cf2ef21e14fab45971">llvm::BranchFolder::MergePotentials</a></div><div class="ttdeci">std::vector&lt; MergePotentialsElt &gt; MergePotentials</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00050">BranchFolding.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ae1e7b78443bf2ff7fcc0063e11db34a1"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ae1e7b78443bf2ff7fcc0063e11db34a1">llvm::BranchFolder::CreateCommonTailOnlyBlock</a></div><div class="ttdeci">bool CreateCommonTailOnlyBlock(MachineBasicBlock *&amp;PredBB, MachineBasicBlock *SuccBB, unsigned maxCommonTailLength, unsigned &amp;commonTailIndex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00657">BranchFolding.cpp:657</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00402">Function.h:402</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ad2b0a3a3253f9d9f9f8ee3d256f05103"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ad2b0a3a3253f9d9f9f8ee3d256f05103">llvm::BranchFolder::ReplaceTailWithBranchTo</a></div><div class="ttdeci">void ReplaceTailWithBranchTo(MachineBasicBlock::iterator OldInst, MachineBasicBlock *NewDest)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00401">BranchFolding.cpp:401</a></div></div>
<div class="ttc" id="BranchFolding_8cpp_html_a287825ab3d1df2312dfb4c694a70cf43"><div class="ttname"><a href="../../dc/d7b/BranchFolding_8cpp.html#a287825ab3d1df2312dfb4c694a70cf43">TailMergeSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TailMergeSize(&quot;tail-merge-size&quot;, cl::desc(&quot;Min number of instructions to consider tail merging&quot;), cl::init(3), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_ab0aea67e2238c93f33e6a4b4acc483dc"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#ab0aea67e2238c93f33e6a4b4acc483dc">llvm::BranchFolder::RemoveBlocksWithHash</a></div><div class="ttdeci">void RemoveBlocksWithHash(unsigned CurHash, MachineBasicBlock *SuccBB, MachineBasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7b/BranchFolding_8cpp_source.html#l00636">BranchFolding.cpp:636</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a52a7b562e71ba28a15b2f1f2251f97fb"><div class="ttname"><a href="../../d0/deb/classllvm_1_1BranchFolder.html#a52a7b562e71ba28a15b2f1f2251f97fb">llvm::BranchFolder::SameTails</a></div><div class="ttdeci">std::vector&lt; SameTailElt &gt; SameTails</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd2/BranchFolding_8h_source.html#l00086">BranchFolding.h:86</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="BasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="../../d7/d7f/BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7f/BasicAliasAnalysis_8cpp_source.html#l00419">BasicAliasAnalysis.cpp:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="ae08d297cc6c155672a598262a82ba4c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool llvm::BranchFolder::EnableHoistCommonCode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00089">89</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3567149b3e5bac53145d96a4f4dff59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool llvm::BranchFolder::EnableTailMerge</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00088">88</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e878e98e6d772cf2ef21e14fab45971"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d9/da2/classllvm_1_1BranchFolder_1_1MergePotentialsElt.html">MergePotentialsElt</a>&gt; llvm::BranchFolder::MergePotentials</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00050">50</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43a012792fcd5de1e99103b6d92a3263"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d0c/classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a>* llvm::BranchFolder::MMI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00092">92</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad9f2dba0009b1d6a2db7683b26aa098d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9a/classllvm_1_1RegScavenger.html">RegScavenger</a>* llvm::BranchFolder::RS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00093">93</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="a52a7b562e71ba28a15b2f1f2251f97fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../de/db3/classllvm_1_1BranchFolder_1_1SameTailElt.html">SameTailElt</a>&gt; llvm::BranchFolder::SameTails</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00086">86</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="acaa353388470cfc66ce071957127dbea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../de/d06/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a>* llvm::BranchFolder::TII</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00090">90</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="a374176ed65c181b7123ff067bbf804ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../d7/d2e/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a>* llvm::BranchFolder::TRI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00091">91</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<a class="anchor" id="af32313ebde0d0b7162a90b12628b06f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt;<a class="el" href="../../d9/d4a/namespacellvm.html#a7670a6132acf8919f05f827683311af5">const</a> <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*, 2&gt; llvm::BranchFolder::TriedMerging</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html#l00051">51</a> of file <a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../dd/dd2/BranchFolding_8h_source.html">BranchFolding.h</a></li>
<li><a class="el" href="../../dc/d7b/BranchFolding_8cpp_source.html">BranchFolding.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d4a/namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="../../d0/deb/classllvm_1_1BranchFolder.html">BranchFolder</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:55:06 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
