<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: AArch64ExpandPseudoInsts.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/d3d/AArch64ExpandPseudoInsts_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AArch64ExpandPseudoInsts.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../de/d68/AArch64AddressingModes_8h_source.html">MCTargetDesc/AArch64AddressingModes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/ddf/AArch64InstrInfo_8h_source.html">AArch64InstrInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d41/MachineFunctionPass_8h_source.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d0/d1f/MachineInstrBuilder_8h_source.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dab/MathExtras_8h_source.html">llvm/Support/MathExtras.h</a>&quot;</code><br/>
</div>
<p><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad71b56bfb0fdcb17ecf6412f8769ec9f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a> (<a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;OldMI, <a class="el" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> &amp;UseMI, <a class="el" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> &amp;DefMI)</td></tr>
<tr class="memdesc:ad71b56bfb0fdcb17ecf6412f8769ec9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer implicit operands on the pseudo instruction to the instructions created from the expansion.  <a href="#ad71b56bfb0fdcb17ecf6412f8769ec9f">More...</a><br/></td></tr>
<tr class="separator:ad71b56bfb0fdcb17ecf6412f8769ec9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5bbae3632b4bfe0de4faea7a4da829f"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a> (uint64_t Imm, unsigned ChunkIdx)</td></tr>
<tr class="memdesc:aa5bbae3632b4bfe0de4faea7a4da829f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which extracts the specified 16-bit chunk from a 64-bit value.  <a href="#aa5bbae3632b4bfe0de4faea7a4da829f">More...</a><br/></td></tr>
<tr class="separator:aa5bbae3632b4bfe0de4faea7a4da829f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc85226218b4bb0c59fbcc087117af9f"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#adc85226218b4bb0c59fbcc087117af9f">replicateChunk</a> (uint64_t Imm, unsigned FromIdx, unsigned ToIdx)</td></tr>
<tr class="memdesc:adc85226218b4bb0c59fbcc087117af9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which replicates a 16-bit chunk within a 64-bit value. Indices correspond to element numbers in a v4i16.  <a href="#adc85226218b4bb0c59fbcc087117af9f">More...</a><br/></td></tr>
<tr class="separator:adc85226218b4bb0c59fbcc087117af9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2db7f893372fbc2a58c2ce35235269"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a4d2db7f893372fbc2a58c2ce35235269">tryOrrMovk</a> (uint64_t UImm, uint64_t OrrImm, <a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;MBBI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, unsigned ChunkIdx)</td></tr>
<tr class="memdesc:a4d2db7f893372fbc2a58c2ce35235269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which tries to materialize a 64-bit value with an ORR + MOVK instruction sequence.  <a href="#a4d2db7f893372fbc2a58c2ce35235269">More...</a><br/></td></tr>
<tr class="separator:a4d2db7f893372fbc2a58c2ce35235269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436cd44154cf245c297b6b5a5fac9a84"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a436cd44154cf245c297b6b5a5fac9a84">canUseOrr</a> (uint64_t Chunk, uint64_t &amp;Encoding)</td></tr>
<tr class="memdesc:a436cd44154cf245c297b6b5a5fac9a84"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether the given 16-bit chunk replicated to full 64-bit width can be materialized with an ORR instruction.  <a href="#a436cd44154cf245c297b6b5a5fac9a84">More...</a><br/></td></tr>
<tr class="separator:a436cd44154cf245c297b6b5a5fac9a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d71f8979cc3c25ed73ad0d2cfd0746"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a81d71f8979cc3c25ed73ad0d2cfd0746">tryToreplicateChunks</a> (uint64_t UImm, <a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;MBBI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>)</td></tr>
<tr class="memdesc:a81d71f8979cc3c25ed73ad0d2cfd0746"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> for identical 16-bit chunks within the constant and if so materialize them with a single ORR instruction. The remaining one or two 16-bit chunks will be materialized with MOVK instructions.  <a href="#a81d71f8979cc3c25ed73ad0d2cfd0746">More...</a><br/></td></tr>
<tr class="separator:a81d71f8979cc3c25ed73ad0d2cfd0746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84ff3d34cc228b799e8bc2f070fc4ab"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad84ff3d34cc228b799e8bc2f070fc4ab">isStartChunk</a> (uint64_t Chunk)</td></tr>
<tr class="memdesc:ad84ff3d34cc228b799e8bc2f070fc4ab"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether this chunk matches the pattern '1...0...'. This pattern starts a contiguous sequence of ones if we look at the bits from the LSB towards the MSB.  <a href="#ad84ff3d34cc228b799e8bc2f070fc4ab">More...</a><br/></td></tr>
<tr class="separator:ad84ff3d34cc228b799e8bc2f070fc4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add895e8580b9acacceb10b92edcd4d37"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#add895e8580b9acacceb10b92edcd4d37">isEndChunk</a> (uint64_t Chunk)</td></tr>
<tr class="memdesc:add895e8580b9acacceb10b92edcd4d37"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether this chunk matches the pattern '0...1...' This pattern ends a contiguous sequence of ones if we look at the bits from the LSB towards the MSB.  <a href="#add895e8580b9acacceb10b92edcd4d37">More...</a><br/></td></tr>
<tr class="separator:add895e8580b9acacceb10b92edcd4d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4323e3fa0f558ea22393bc68e9520b27"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a4323e3fa0f558ea22393bc68e9520b27">updateImm</a> (uint64_t Imm, unsigned Idx, bool Clear)</td></tr>
<tr class="memdesc:a4323e3fa0f558ea22393bc68e9520b27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear or set all bits in the chunk at the given index.  <a href="#a4323e3fa0f558ea22393bc68e9520b27">More...</a><br/></td></tr>
<tr class="separator:a4323e3fa0f558ea22393bc68e9520b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569db7856b53b5dac131e33402b9e28d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a569db7856b53b5dac131e33402b9e28d">trySequenceOfOnes</a> (uint64_t UImm, <a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB, <a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;MBBI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>)</td></tr>
<tr class="memdesc:a569db7856b53b5dac131e33402b9e28d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether the constant contains a sequence of contiguous ones, which might be interrupted by one or two chunks. If so, materialize the sequence of contiguous ones with an ORR instruction. Materialize the chunks which are either interrupting the sequence or outside of the sequence with a MOVK instruction.  <a href="#a569db7856b53b5dac131e33402b9e28d">More...</a><br/></td></tr>
<tr class="separator:a569db7856b53b5dac131e33402b9e28d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a436cd44154cf245c297b6b5a5fac9a84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool canUseOrr </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>Encoding</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether the given 16-bit chunk replicated to full 64-bit width can be materialized with an ORR instruction. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00124">124</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                          {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  Chunk = (Chunk &lt;&lt; 48) | (Chunk &lt;&lt; 32) | (Chunk &lt;&lt; 16) | Chunk;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">AArch64_AM::processLogicalImmediate</a>(Chunk, 64, Encoding);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a904547bf61cdf16bcf7c19ab5b1f55e6"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">llvm::AArch64_AM::processLogicalImmediate</a></div><div class="ttdeci">static bool processLogicalImmediate(uint64_t imm, unsigned regSize, uint64_t &amp;encoding)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00213">AArch64AddressingModes.h:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5bbae3632b4bfe0de4faea7a4da829f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t getChunk </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Imm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ChunkIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which extracts the specified 16-bit chunk from a 64-bit value. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00065">65</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                          {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ChunkIdx &lt; 4 &amp;&amp; <span class="stringliteral">&quot;Out of range chunk index specified!&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">return</span> (Imm &gt;&gt; (ChunkIdx * 16)) &amp; 0xFFFF;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add895e8580b9acacceb10b92edcd4d37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isEndChunk </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Chunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether this chunk matches the pattern '0...1...' This pattern ends a contiguous sequence of ones if we look at the bits from the LSB towards the MSB. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00237">237</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                       {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">if</span> (Chunk == 0 || Chunk == UINT64_MAX)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a57ab1fac7b65cde5654e4e1ca9bf9f90">countLeadingZeros</a>(Chunk) + <a class="code" href="../../d9/d4a/namespacellvm.html#a8da28d982a3c20fa6e57d94df3059f03">CountTrailingOnes_64</a>(Chunk)) == 64;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a57ab1fac7b65cde5654e4e1ca9bf9f90"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a57ab1fac7b65cde5654e4e1ca9bf9f90">llvm::countLeadingZeros</a></div><div class="ttdeci">std::enable_if&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countLeadingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&#39;s from the most significant bit to the least stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00120">MathExtras.h:120</a></div></div>
<div class="ttc" id="namespacellvm_html_a8da28d982a3c20fa6e57d94df3059f03"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a8da28d982a3c20fa6e57d94df3059f03">llvm::CountTrailingOnes_64</a></div><div class="ttdeci">unsigned CountTrailingOnes_64(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00419">MathExtras.h:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad84ff3d34cc228b799e8bc2f070fc4ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isStartChunk </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Chunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether this chunk matches the pattern '1...0...'. This pattern starts a contiguous sequence of ones if we look at the bits from the LSB towards the MSB. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00227">227</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                         {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (Chunk == 0 || Chunk == UINT64_MAX)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#ad1f8400659cb35674b6ff88606420c58">CountLeadingOnes_64</a>(Chunk) + <a class="code" href="../../d9/d4a/namespacellvm.html#a7a7bd9bd4e9b993241e4bf85f2fb7971">countTrailingZeros</a>(Chunk)) == 64;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_ad1f8400659cb35674b6ff88606420c58"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ad1f8400659cb35674b6ff88606420c58">llvm::CountLeadingOnes_64</a></div><div class="ttdeci">unsigned CountLeadingOnes_64(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00403">MathExtras.h:403</a></div></div>
<div class="ttc" id="namespacellvm_html_a7a7bd9bd4e9b993241e4bf85f2fb7971"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7a7bd9bd4e9b993241e4bf85f2fb7971">llvm::countTrailingZeros</a></div><div class="ttdeci">std::enable_if&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&#39;s from the least significant bit to the most stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc85226218b4bb0c59fbcc087117af9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t replicateChunk </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Imm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>FromIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ToIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which replicates a 16-bit chunk within a 64-bit value. Indices correspond to element numbers in a v4i16. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00073">73</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                                                               {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((FromIdx &lt; 4) &amp;&amp; (ToIdx &lt; 4) &amp;&amp; <span class="stringliteral">&quot;Out of range chunk index specified!&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ShiftAmt = ToIdx * 16;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Replicate the source chunk to the destination position.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">const</span> uint64_t Chunk = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(Imm, FromIdx) &lt;&lt; ShiftAmt;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// Clear the destination chunk.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  Imm &amp;= ~(0xFFFFLL &lt;&lt; ShiftAmt);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// Insert the replicated chunk.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">return</span> Imm | Chunk;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_aa5bbae3632b4bfe0de4faea7a4da829f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a></div><div class="ttdeci">static uint64_t getChunk(uint64_t Imm, unsigned ChunkIdx)</div><div class="ttdoc">Helper function which extracts the specified 16-bit chunk from a 64-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00065">AArch64ExpandPseudoInsts.cpp:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad71b56bfb0fdcb17ecf6412f8769ec9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void transferImpOps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;&#160;</td>
          <td class="paramname"><em>OldMI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>UseMI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>DefMI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transfer implicit operands on the pseudo instruction to the instructions created from the expansion. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00049">49</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                                       {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/dd5/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;Desc = OldMI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = Desc.<a class="code" href="../../d9/dd5/classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a>(), e = OldMI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); i != e;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;       ++i) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = OldMI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(i);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>())</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      UseMI.<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a34ab07c56acf0fe7f68a6da0d514bec7">addOperand</a>(MO);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      DefMI.<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a34ab07c56acf0fe7f68a6da0d514bec7">addOperand</a>(MO);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="../../d9/dd5/classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00137">MCInstrDesc.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a803a7424877fd049679b9aa2f07597b5"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">llvm::MachineInstr::getDesc</a></div><div class="ttdeci">const MCInstrDesc &amp; getDesc() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00266">MachineInstr.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00227">MachineOperand.h:227</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00274">MachineInstr.h:274</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00276">MachineInstr.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html_a55194ec3a1e49d04eab64e993e614246"><div class="ttname"><a href="../../d9/dd5/classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">llvm::MCInstrDesc::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">Return the number of declared MachineOperands for this MachineInstruction. Note that variadic (isVari...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00190">MCInstrDesc.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a34ab07c56acf0fe7f68a6da0d514bec7"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a34ab07c56acf0fe7f68a6da0d514bec7">llvm::MachineInstrBuilder::addOperand</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addOperand(const MachineOperand &amp;MO) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00166">MachineInstrBuilder.h:166</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d2db7f893372fbc2a58c2ce35235269"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool tryOrrMovk </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>UImm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>OrrImm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;&#160;</td>
          <td class="paramname"><em>MI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>MBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>MBBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *&#160;</td>
          <td class="paramname"><em>TII</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ChunkIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which tries to materialize a 64-bit value with an ORR + MOVK instruction sequence. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00087">87</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                                                       {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ChunkIdx &lt; 4 &amp;&amp; <span class="stringliteral">&quot;Out of range chunk index specified!&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ShiftAmt = ChunkIdx * 16;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  uint64_t Encoding;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">AArch64_AM::processLogicalImmediate</a>(OrrImm, 64, Encoding)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Create the ORR-immediate instruction.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::ORRXri))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            .addOperand(MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            .addReg(AArch64::XZR)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Encoding);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Create the MOVK instruction.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="../../d4/db5/namespacellvm_1_1X86II.html#abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9">Imm16</a> = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, ChunkIdx);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstReg = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> DstIsDead = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB1 =</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::MOVKXi))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            .addReg(DstReg, <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">getDeadRegState</a>(DstIsDead))</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            .addReg(DstReg)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Imm16)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, ShiftAmt));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a>(MI, MIB, MIB1);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_ad71b56bfb0fdcb17ecf6412f8769ec9f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a></div><div class="ttdeci">static void transferImpOps(MachineInstr &amp;OldMI, MachineInstrBuilder &amp;UseMI, MachineInstrBuilder &amp;DefMI)</div><div class="ttdoc">Transfer implicit operands on the pseudo instruction to the instructions created from the expansion...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00049">AArch64ExpandPseudoInsts.cpp:49</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00031">MachineInstrBuilder.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d36/MachineInstr_8cpp_source.html#l00863">MachineInstr.cpp:863</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9"><div class="ttname"><a href="../../d4/db5/namespacellvm_1_1X86II.html#abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9">llvm::X86II::Imm16</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9e/X86BaseInfo_8h_source.html#l00397">X86BaseInfo.h:397</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_aeae88f12b667477f90db9b726556b337"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">llvm::AArch64_AM::getShifterImm</a></div><div class="ttdeci">static unsigned getShifterImm(AArch64_AM::ShiftExtendType ST, unsigned Imm)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00098">AArch64AddressingModes.h:98</a></div></div>
<div class="ttc" id="namespacellvm_html_a3dd7c56278c84a39f699241bdaade2ee"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">llvm::getDeadRegState</a></div><div class="ttdeci">unsigned getDeadRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00397">MachineInstrBuilder.h:397</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a904547bf61cdf16bcf7c19ab5b1f55e6"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">llvm::AArch64_AM::processLogicalImmediate</a></div><div class="ttdeci">static bool processLogicalImmediate(uint64_t imm, unsigned regSize, uint64_t &amp;encoding)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00213">AArch64AddressingModes.h:213</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00276">MachineInstr.h:276</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00228">MachineInstrBuilder.h:228</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_aa5bbae3632b4bfe0de4faea7a4da829f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a></div><div class="ttdeci">static uint64_t getChunk(uint64_t Imm, unsigned ChunkIdx)</div><div class="ttdoc">Helper function which extracts the specified 16-bit chunk from a 64-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00065">AArch64ExpandPseudoInsts.cpp:65</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">llvm::AArch64_AM::LSL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00034">AArch64AddressingModes.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00045">MachineInstrBuilder.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a5ca4af2a257043145ad650eafb4402f9"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">DebugLoc getDebugLoc() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00245">MachineInstr.h:245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a569db7856b53b5dac131e33402b9e28d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool trySequenceOfOnes </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>UImm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;&#160;</td>
          <td class="paramname"><em>MI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>MBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>MBBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *&#160;</td>
          <td class="paramname"><em>TII</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> whether the constant contains a sequence of contiguous ones, which might be interrupted by one or two chunks. If so, materialize the sequence of contiguous ones with an ORR instruction. Materialize the chunks which are either interrupting the sequence or outside of the sequence with a MOVK instruction. </p>
<p>Assuming <a class="el" href="../../d1/d6a/structS.html">S</a> is a chunk which starts the sequence (1...0...), E is a chunk which ends the sequence (0...1...). Then we are looking for constants which contain at least one <a class="el" href="../../d1/d6a/structS.html">S</a> and E chunk. E.g. |E|A|B|S|, |A|E|B|S| or |A|B|E|S|.</p>
<p>We are also looking for constants like |S|A|B|E| where the contiguous sequence of ones wraps around the MSB into the LSB. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00272">272</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                                           {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NotSet = -1;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keyword">const</span> uint64_t Mask = 0xFFFF;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">int</span> StartIdx = NotSet;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">int</span> EndIdx = NotSet;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// Try to find the chunks which start/end a contiguous sequence of ones.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Idx = 0; Idx &lt; 4; ++Idx) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    int64_t Chunk = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, Idx);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Sign extend the 16-bit chunk to 64-bit.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    Chunk = (Chunk &lt;&lt; 48) &gt;&gt; 48;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad84ff3d34cc228b799e8bc2f070fc4ab">isStartChunk</a>(Chunk))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      StartIdx = Idx;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#add895e8580b9acacceb10b92edcd4d37">isEndChunk</a>(Chunk))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      EndIdx = Idx;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Early exit in case we can&#39;t find a start/end chunk.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (StartIdx == NotSet || EndIdx == NotSet)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// Outside of the contiguous sequence of ones everything needs to be zero.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  uint64_t Outside = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Chunks between the start and end chunk need to have all their bits set.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  uint64_t Inside = Mask;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// If our contiguous sequence of ones wraps around from the MSB into the LSB,</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// just swap indices and pretend we are materializing a contiguous sequence</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// of zeros surrounded by a contiguous sequence of ones.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (StartIdx &gt; EndIdx) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(StartIdx, EndIdx);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Outside, Inside);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  uint64_t OrrImm = UImm;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordtype">int</span> FirstMovkIdx = NotSet;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordtype">int</span> SecondMovkIdx = NotSet;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// Find out which chunks we need to patch up to obtain a contiguous sequence</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// of ones.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Idx = 0; Idx &lt; 4; ++Idx) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> uint64_t Chunk = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, Idx);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// Check whether we are looking at a chunk which is not part of the</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// contiguous sequence of ones.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> ((Idx &lt; StartIdx || EndIdx &lt; Idx) &amp;&amp; Chunk != Outside) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      OrrImm = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a4323e3fa0f558ea22393bc68e9520b27">updateImm</a>(OrrImm, Idx, Outside == 0);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">// Remember the index we need to patch.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">if</span> (FirstMovkIdx == NotSet)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        FirstMovkIdx = Idx;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        SecondMovkIdx = Idx;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// Check whether we are looking a chunk which is part of the contiguous</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="comment">// sequence of ones.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Idx &gt; StartIdx &amp;&amp; Idx &lt; EndIdx &amp;&amp; Chunk != Inside) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      OrrImm = <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a4323e3fa0f558ea22393bc68e9520b27">updateImm</a>(OrrImm, Idx, Inside != Mask);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="comment">// Remember the index we need to patch.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (FirstMovkIdx == NotSet)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        FirstMovkIdx = Idx;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        SecondMovkIdx = Idx;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(FirstMovkIdx != NotSet &amp;&amp; <span class="stringliteral">&quot;Constant materializable with single ORR!&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Create the ORR-immediate instruction.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  uint64_t Encoding = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">AArch64_AM::processLogicalImmediate</a>(OrrImm, 64, Encoding);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::ORRXri))</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          .addOperand(MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0))</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          .addReg(AArch64::XZR)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Encoding);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstReg = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> DstIsDead = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> SingleMovk = SecondMovkIdx == NotSet;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Create the first MOVK instruction.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB1 =</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::MOVKXi))</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          .addReg(DstReg,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                  <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">getDeadRegState</a>(DstIsDead &amp;&amp; SingleMovk))</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          .addReg(DstReg)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, FirstMovkIdx))</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;              <a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, FirstMovkIdx * 16));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Early exit in case we only need to emit a single MOVK instruction.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">if</span> (SingleMovk) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a>(MI, MIB, MIB1);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// Create the second MOVK instruction.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB2 =</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::MOVKXi))</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          .addReg(DstReg, <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">getDeadRegState</a>(DstIsDead))</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          .addReg(DstReg)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, SecondMovkIdx))</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;              <a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, SecondMovkIdx * 16));</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a>(MI, MIB, MIB2);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_ad71b56bfb0fdcb17ecf6412f8769ec9f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a></div><div class="ttdeci">static void transferImpOps(MachineInstr &amp;OldMI, MachineInstrBuilder &amp;UseMI, MachineInstrBuilder &amp;DefMI)</div><div class="ttdoc">Transfer implicit operands on the pseudo instruction to the instructions created from the expansion...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00049">AArch64ExpandPseudoInsts.cpp:49</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00031">MachineInstrBuilder.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d36/MachineInstr_8cpp_source.html#l00863">MachineInstr.cpp:863</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_a4323e3fa0f558ea22393bc68e9520b27"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a4323e3fa0f558ea22393bc68e9520b27">updateImm</a></div><div class="ttdeci">static uint64_t updateImm(uint64_t Imm, unsigned Idx, bool Clear)</div><div class="ttdoc">Clear or set all bits in the chunk at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00245">AArch64ExpandPseudoInsts.cpp:245</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_aeae88f12b667477f90db9b726556b337"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">llvm::AArch64_AM::getShifterImm</a></div><div class="ttdeci">static unsigned getShifterImm(AArch64_AM::ShiftExtendType ST, unsigned Imm)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00098">AArch64AddressingModes.h:98</a></div></div>
<div class="ttc" id="namespacellvm_html_a3dd7c56278c84a39f699241bdaade2ee"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">llvm::getDeadRegState</a></div><div class="ttdeci">unsigned getDeadRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00397">MachineInstrBuilder.h:397</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a904547bf61cdf16bcf7c19ab5b1f55e6"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a904547bf61cdf16bcf7c19ab5b1f55e6">llvm::AArch64_AM::processLogicalImmediate</a></div><div class="ttdeci">static bool processLogicalImmediate(uint64_t imm, unsigned regSize, uint64_t &amp;encoding)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00213">AArch64AddressingModes.h:213</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_ad84ff3d34cc228b799e8bc2f070fc4ab"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad84ff3d34cc228b799e8bc2f070fc4ab">isStartChunk</a></div><div class="ttdeci">static bool isStartChunk(uint64_t Chunk)</div><div class="ttdoc">Check whether this chunk matches the pattern &#39;1...0...&#39;. This pattern starts a contiguous sequence of...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00227">AArch64ExpandPseudoInsts.cpp:227</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00276">MachineInstr.h:276</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00228">MachineInstrBuilder.h:228</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_aa5bbae3632b4bfe0de4faea7a4da829f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a></div><div class="ttdeci">static uint64_t getChunk(uint64_t Imm, unsigned ChunkIdx)</div><div class="ttdoc">Helper function which extracts the specified 16-bit chunk from a 64-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00065">AArch64ExpandPseudoInsts.cpp:65</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_add895e8580b9acacceb10b92edcd4d37"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#add895e8580b9acacceb10b92edcd4d37">isEndChunk</a></div><div class="ttdeci">static bool isEndChunk(uint64_t Chunk)</div><div class="ttdoc">Check whether this chunk matches the pattern &#39;0...1...&#39; This pattern ends a contiguous sequence of on...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00237">AArch64ExpandPseudoInsts.cpp:237</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">llvm::AArch64_AM::LSL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00034">AArch64AddressingModes.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00045">MachineInstrBuilder.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a5ca4af2a257043145ad650eafb4402f9"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">DebugLoc getDebugLoc() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00245">MachineInstr.h:245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81d71f8979cc3c25ed73ad0d2cfd0746"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool tryToreplicateChunks </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>UImm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;&#160;</td>
          <td class="paramname"><em>MI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>MBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dfe/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>MBBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d7/d5f/classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *&#160;</td>
          <td class="paramname"><em>TII</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> for identical 16-bit chunks within the constant and if so materialize them with a single ORR instruction. The remaining one or two 16-bit chunks will be materialized with MOVK instructions. </p>
<p>This allows us to materialize constants like |A|B|A|A| or |A|B|C|A| (order of the chunks doesn't matter), assuming |A|A|A|A| can be materialized with an ORR instruction. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00138">138</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                                              {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;uint64_t, unsigned&gt;</a> CountMap;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  CountMap Counts;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// Scan the constant and count how often every chunk occurs.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; 4; ++Idx)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    ++Counts[<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a>(UImm, Idx)];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Traverse the chunks to find one which occurs more than once.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">for</span> (CountMap::const_iterator Chunk = Counts.begin(), End = Counts.end();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;       Chunk != End; ++Chunk) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">const</span> uint64_t ChunkVal = Chunk-&gt;first;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Count = Chunk-&gt;second;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    uint64_t Encoding = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// We are looking for chunks which have two or three instances and can be</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// materialized with an ORR instruction.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> ((Count != 2 &amp;&amp; Count != 3) || !<a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a436cd44154cf245c297b6b5a5fac9a84">canUseOrr</a>(ChunkVal, Encoding))</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> CountThree = Count == 3;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Create the ORR-immediate instruction.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::ORRXri))</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            .addOperand(MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0))</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            .addReg(AArch64::XZR)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Encoding);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstReg = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> DstIsDead = MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">unsigned</span> ShiftAmt = 0;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    uint64_t <a class="code" href="../../d4/db5/namespacellvm_1_1X86II.html#abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9">Imm16</a> = 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Find the first chunk not materialized with the ORR instruction.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (; ShiftAmt &lt; 64; ShiftAmt += 16) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      Imm16 = (UImm &gt;&gt; ShiftAmt) &amp; 0xFFFF;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (Imm16 != ChunkVal)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// Create the first MOVK instruction.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB1 =</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::MOVKXi))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            .addReg(DstReg,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">getDeadRegState</a>(DstIsDead &amp;&amp; CountThree))</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            .addReg(DstReg)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Imm16)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, ShiftAmt));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// In case we have three instances the whole constant is now materialized</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// and we can exit.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (CountThree) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a>(MI, MIB, MIB1);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// Find the remaining chunk which needs to be materialized.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">for</span> (ShiftAmt += 16; ShiftAmt &lt; 64; ShiftAmt += 16) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      Imm16 = (UImm &gt;&gt; ShiftAmt) &amp; 0xFFFF;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">if</span> (Imm16 != ChunkVal)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// Create the second MOVK instruction.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB2 =</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, MBBI, MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>(), TII-&gt;get(AArch64::MOVKXi))</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            .addReg(DstReg, <a class="code" href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">getDeadRegState</a>(DstIsDead))</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            .addReg(DstReg)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Imm16)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            .<a class="code" href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, ShiftAmt));</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a>(MI, MIB, MIB2);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    MI.<a class="code" href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_ad71b56bfb0fdcb17ecf6412f8769ec9f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#ad71b56bfb0fdcb17ecf6412f8769ec9f">transferImpOps</a></div><div class="ttdeci">static void transferImpOps(MachineInstr &amp;OldMI, MachineInstrBuilder &amp;UseMI, MachineInstrBuilder &amp;DefMI)</div><div class="ttdoc">Transfer implicit operands on the pseudo instruction to the instructions created from the expansion...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00049">AArch64ExpandPseudoInsts.cpp:49</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_a436cd44154cf245c297b6b5a5fac9a84"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#a436cd44154cf245c297b6b5a5fac9a84">canUseOrr</a></div><div class="ttdeci">static bool canUseOrr(uint64_t Chunk, uint64_t &amp;Encoding)</div><div class="ttdoc">Check whether the given 16-bit chunk replicated to full 64-bit width can be materialized with an ORR ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00124">AArch64ExpandPseudoInsts.cpp:124</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="../../de/d8c/namespacellvm_1_1RegState.html#a1fb8480941b7c54f5dcd665aa6f964cca72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00031">MachineInstrBuilder.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d36/MachineInstr_8cpp_source.html#l00863">MachineInstr.cpp:863</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9"><div class="ttname"><a href="../../d4/db5/namespacellvm_1_1X86II.html#abda44abc46b926897a5fd76f3f144408ac21c0e218a109e1353d239807dd4f3c9">llvm::X86II::Imm16</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9e/X86BaseInfo_8h_source.html#l00397">X86BaseInfo.h:397</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_aeae88f12b667477f90db9b726556b337"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">llvm::AArch64_AM::getShifterImm</a></div><div class="ttdeci">static unsigned getShifterImm(AArch64_AM::ShiftExtendType ST, unsigned Imm)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00098">AArch64AddressingModes.h:98</a></div></div>
<div class="ttc" id="namespacellvm_html_a3dd7c56278c84a39f699241bdaade2ee"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3dd7c56278c84a39f699241bdaade2ee">llvm::getDeadRegState</a></div><div class="ttdeci">unsigned getDeadRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00397">MachineInstrBuilder.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00276">MachineInstr.h:276</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00228">MachineInstrBuilder.h:228</a></div></div>
<div class="ttc" id="AArch64ExpandPseudoInsts_8cpp_html_aa5bbae3632b4bfe0de4faea7a4da829f"><div class="ttname"><a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html#aa5bbae3632b4bfe0de4faea7a4da829f">getChunk</a></div><div class="ttdeci">static uint64_t getChunk(uint64_t Imm, unsigned ChunkIdx)</div><div class="ttdoc">Helper function which extracts the specified 16-bit chunk from a 64-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00065">AArch64ExpandPseudoInsts.cpp:65</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64__AM_html_a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938"><div class="ttname"><a href="../../dc/d6b/namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">llvm::AArch64_AM::LSL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d68/AArch64AddressingModes_8h_source.html#l00034">AArch64AddressingModes.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="../../de/d66/classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/MachineInstrBuilder_8h_source.html#l00045">MachineInstrBuilder.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="../../d2/d04/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da0/MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a5ca4af2a257043145ad650eafb4402f9"><div class="ttname"><a href="../../dc/d53/classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">DebugLoc getDebugLoc() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MachineInstr_8h_source.html#l00245">MachineInstr.h:245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4323e3fa0f558ea22393bc68e9520b27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t updateImm </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Imm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Clear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear or set all bits in the chunk at the given index. </p>

<p>Definition at line <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html#l00245">245</a> of file <a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp_source.html">AArch64ExpandPseudoInsts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                                                  {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keyword">const</span> uint64_t Mask = 0xFFFF;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (Clear)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Clear chunk in the immediate.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    Imm &amp;= ~(Mask &lt;&lt; (Idx * 16));</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// Set all bits in the immediate for the particular chunk.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    Imm |= Mask &lt;&lt; (Idx * 16);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">return</span> Imm;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_ba4b566d55a812089e9c749a99726952.html">Target</a></li><li class="navelem"><a class="el" href="../../dir_e4b13da4fca7bdc91dfc17486fecbd04.html">AArch64</a></li><li class="navelem"><a class="el" href="../../d0/d3d/AArch64ExpandPseudoInsts_8cpp.html">AArch64ExpandPseudoInsts.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:08 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
