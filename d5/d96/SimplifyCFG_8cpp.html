<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: SimplifyCFG.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d96/SimplifyCFG_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SimplifyCFG.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d5/d6f/Local_8h_source.html">llvm/Transforms/Utils/Local.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d73/DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d98/STLExtras_8h_source.html">llvm/ADT/STLExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/dd6/SetVector_8h_source.html">llvm/ADT/SetVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d89/SmallPtrSet_8h_source.html">llvm/ADT/SmallPtrSet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d33/SmallVector_8h_source.html">llvm/ADT/SmallVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d0a/ConstantFolding_8h_source.html">llvm/Analysis/ConstantFolding.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d48/InstructionSimplify_8h_source.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/d53/TargetTransformInfo_8h_source.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/dcc/ValueTracking_8h_source.html">llvm/Analysis/ValueTracking.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d4b/IR_2CFG_8h_source.html">llvm/IR/CFG.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d0/da2/ConstantRange_8h_source.html">llvm/IR/ConstantRange.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d45/Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/df5/DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/dcc/GlobalVariable_8h_source.html">llvm/IR/GlobalVariable.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d60/IRBuilder_8h_source.html">llvm/IR/IRBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dd5/Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d6b/LLVMContext_8h_source.html">llvm/IR/LLVMContext.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/d39/MDBuilder_8h_source.html">llvm/IR/MDBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/da9/Metadata_8h_source.html">llvm/IR/Metadata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/dc7/Module_8h_source.html">llvm/IR/Module.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/dd7/NoFolder_8h_source.html">llvm/IR/NoFolder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/ddf/Operator_8h_source.html">llvm/IR/Operator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d65/PatternMatch_8h_source.html">llvm/IR/PatternMatch.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/db7/Type_8h_source.html">llvm/IR/Type.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/d41/CommandLine_8h_source.html">llvm/Support/CommandLine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d82/raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d18/BasicBlockUtils_8h_source.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</code><br/>
<code>#include &lt;algorithm&gt;</code><br/>
<code>#include &lt;map&gt;</code><br/>
<code>#include &lt;set&gt;</code><br/>
</div>
<p><a href="../../d5/d96/SimplifyCFG_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;simplifycfg&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a094edb4846824b6513167facc6a7afe1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a094edb4846824b6513167facc6a7afe1">STATISTIC</a> (NumBitMaps,&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into bitmaps&quot;)</td></tr>
<tr class="separator:a094edb4846824b6513167facc6a7afe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b805cb990220111f878d52811233df0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a3b805cb990220111f878d52811233df0">STATISTIC</a> (NumLookupTables,&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into <a class="el" href="../../d8/d72/X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a> tables&quot;)</td></tr>
<tr class="separator:a3b805cb990220111f878d52811233df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3403ceedf16038250ea5be7b24d0e12f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a3403ceedf16038250ea5be7b24d0e12f">STATISTIC</a> (NumLookupTablesHoles,&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into <a class="el" href="../../d8/d72/X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a> tables (holes checked)&quot;)</td></tr>
<tr class="separator:a3403ceedf16038250ea5be7b24d0e12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef79ee5b4feaa59ddd09123c1ae3f6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#afef79ee5b4feaa59ddd09123c1ae3f6a">STATISTIC</a> (NumSinkCommons,&quot;Number of common <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> sunk down to the end block&quot;)</td></tr>
<tr class="separator:afef79ee5b4feaa59ddd09123c1ae3f6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d51f817ed15e19df3ba4e102c25207"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ab4d51f817ed15e19df3ba4e102c25207">STATISTIC</a> (NumSpeculations,&quot;Number of speculative executed <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a>&quot;)</td></tr>
<tr class="separator:ab4d51f817ed15e19df3ba4e102c25207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02215e210f29948498aeb844022afe53"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a02215e210f29948498aeb844022afe53">SafeToMergeTerminators</a> (<a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *SI1, <a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *SI2)</td></tr>
<tr class="separator:a02215e210f29948498aeb844022afe53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69987e50a47c1566fa22b3cfd696e7ea"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a69987e50a47c1566fa22b3cfd696e7ea">isProfitableToFoldUnconditional</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *SI1, <a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *SI2, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Cond, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> * &gt; &amp;PhiNodes)</td></tr>
<tr class="separator:a69987e50a47c1566fa22b3cfd696e7ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfeed3997bba12e75a8e51d740f1969d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPred, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *ExistPred)</td></tr>
<tr class="separator:adfeed3997bba12e75a8e51d740f1969d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409148827b522f5a4942128b467f8ef6"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d6/d1b/classllvm_1_1User.html">User</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a409148827b522f5a4942128b467f8ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f80dfee6da3528be6f978c892acb33"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *, 4 &gt; *AggressiveInsts, unsigned &amp;CostRemaining, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:ad3f80dfee6da3528be6f978c892acb33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3e10bb6dc8ddc3429611f054743c24"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a7b3e10bb6dc8ddc3429611f054743c24">GetConstantInt</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a7b3e10bb6dc8ddc3429611f054743c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e67015c6e209209474a445fe9c16c2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, std::vector&lt; <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> * &gt; &amp;Vals, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&amp;Extra, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, bool isEQ, unsigned &amp;UsedICmps)</td></tr>
<tr class="separator:a80e67015c6e209209474a445fe9c16c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04d12b08532d23bbd327a7024caad89"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a> (<a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI)</td></tr>
<tr class="separator:ad04d12b08532d23bbd327a7024caad89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38517d96538b847c6c3dbe58965c8053"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a38517d96538b847c6c3dbe58965c8053">EliminateBlockCases</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, std::vector&lt; ValueEqualityComparisonCase &gt; &amp;Cases)</td></tr>
<tr class="separator:a38517d96538b847c6c3dbe58965c8053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba6ba9e89bea12994fa7a7a6ade4d38"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#aaba6ba9e89bea12994fa7a7a6ade4d38">ValuesOverlap</a> (std::vector&lt; ValueEqualityComparisonCase &gt; &amp;C1, std::vector&lt; ValueEqualityComparisonCase &gt; &amp;C2)</td></tr>
<tr class="separator:aaba6ba9e89bea12994fa7a7a6ade4d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a7f7d7aa56a6449ae814f48b6a8ce6f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a8a7f7d7aa56a6449ae814f48b6a8ce6f">ConstantIntSortPredicate</a> (<a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *<a class="el" href="../../d0/d55/AnalysisWrappers_8cpp.html#a03453f8bc3f3a048bd95d46b6258864a">P1</a>, <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *<a class="el" href="../../d0/d55/AnalysisWrappers_8cpp.html#a86a37817a8bfbb299fafeb2115dc1632">P2</a>)</td></tr>
<tr class="separator:a8a7f7d7aa56a6449ae814f48b6a8ce6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada99fd4fd27356d1518273d8248940a5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</td></tr>
<tr class="separator:ada99fd4fd27356d1518273d8248940a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165512f38f31f01e7f18bf3838f3a12e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a> (<a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; uint64_t &gt; &amp;Weights)</td></tr>
<tr class="separator:a165512f38f31f01e7f18bf3838f3a12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95ec32778f2bb913dc4cc45ac7a66e42"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a95ec32778f2bb913dc4cc45ac7a66e42">FitWeights</a> (<a class="el" href="../../df/d68/classllvm_1_1MutableArrayRef.html">MutableArrayRef</a>&lt; uint64_t &gt; Weights)</td></tr>
<tr class="memdesc:a95ec32778f2bb913dc4cc45ac7a66e42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keep halving the weights until all can fit in uint32_t.  <a href="#a95ec32778f2bb913dc4cc45ac7a66e42">More...</a><br/></td></tr>
<tr class="separator:a95ec32778f2bb913dc4cc45ac7a66e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aaba0277f5dd5636e099fa81c20c533"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a3aaba0277f5dd5636e099fa81c20c533">isSafeToHoistInvoke</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB1, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB2, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *I1, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *I2)</td></tr>
<tr class="separator:a3aaba0277f5dd5636e099fa81c20c533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4deeac4d96f59b190d23a3a5cd3b1a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a9e4deeac4d96f59b190d23a3a5cd3b1a">HoistThenElseCodeToIf</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a9e4deeac4d96f59b190d23a3a5cd3b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a136cc7ed9c1041928df9f03631026a0d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a136cc7ed9c1041928df9f03631026a0d">SinkThenElseCodeToEnd</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI1)</td></tr>
<tr class="separator:a136cc7ed9c1041928df9f03631026a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ced9ed2427730cd9b6903f00cd22e4d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a2ced9ed2427730cd9b6903f00cd22e4d">isSafeToSpeculateStore</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BrBB, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *StoreBB, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB)</td></tr>
<tr class="memdesc:a2ced9ed2427730cd9b6903f00cd22e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if we can hoist sink a sole store instruction out of a conditional block.  <a href="#a2ced9ed2427730cd9b6903f00cd22e4d">More...</a><br/></td></tr>
<tr class="separator:a2ced9ed2427730cd9b6903f00cd22e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b48c21155371f51528c1ca204c1a0d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ae6b48c21155371f51528c1ca204c1a0d">SpeculativelyExecuteBB</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *ThenBB, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="memdesc:ae6b48c21155371f51528c1ca204c1a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Speculate a conditional basic block flattening the CFG.  <a href="#ae6b48c21155371f51528c1ca204c1a0d">More...</a><br/></td></tr>
<tr class="separator:ae6b48c21155371f51528c1ca204c1a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb11ec5ef64171078a81b9e8d6d56585"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#acb11ec5ef64171078a81b9e8d6d56585">HasNoDuplicateCall</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB)</td></tr>
<tr class="separator:acb11ec5ef64171078a81b9e8d6d56585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a2d451a241c934af3405a7cfc8adb4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a03a2d451a241c934af3405a7cfc8adb4">BlockIsSimpleEnoughToThreadThrough</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB)</td></tr>
<tr class="separator:a03a2d451a241c934af3405a7cfc8adb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a582a047783030becfa4221d3f456faf5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a582a047783030becfa4221d3f456faf5">FoldCondBranchOnPHI</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a582a047783030becfa4221d3f456faf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10e9fac5e8223bbc34a242c4f7442c8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ac10e9fac5e8223bbc34a242c4f7442c8">FoldTwoEntryPHINode</a> (<a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:ac10e9fac5e8223bbc34a242c4f7442c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1b28b7b4b85744d3a02881d4601122"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a2e1b28b7b4b85744d3a02881d4601122">SimplifyCondBranchToTwoReturns</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>)</td></tr>
<tr class="separator:a2e1b28b7b4b85744d3a02881d4601122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c9506d55e08fb67115a29dde75388a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a50c9506d55e08fb67115a29dde75388a">ExtractBranchMetadata</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, uint64_t &amp;ProbTrue, uint64_t &amp;ProbFalse)</td></tr>
<tr class="separator:a50c9506d55e08fb67115a29dde75388a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a747b33c392f2a4faef1bf40a4d169c7d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a747b33c392f2a4faef1bf40a4d169c7d">checkCSEInPredecessor</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *PB)</td></tr>
<tr class="separator:a747b33c392f2a4faef1bf40a4d169c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285d756a993fe2460d35129ba58f92a2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a285d756a993fe2460d35129ba58f92a2">SimplifyCondBranchToCondBranch</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *PBI, <a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI)</td></tr>
<tr class="separator:a285d756a993fe2460d35129ba58f92a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae15857ee04fb44315481a693e4562c4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#aae15857ee04fb44315481a693e4562c4">SimplifyTerminatorOnSelect</a> (<a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *OldTerm, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cond, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseBB, uint32_t TrueWeight, uint32_t FalseWeight)</td></tr>
<tr class="separator:aae15857ee04fb44315481a693e4562c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d7fe1e3aa12d83e0af774a398d34ab"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#af0d7fe1e3aa12d83e0af774a398d34ab">SimplifySwitchOnSelect</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *Select)</td></tr>
<tr class="separator:af0d7fe1e3aa12d83e0af774a398d34ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab1a6ec499c9bfd45258e149aa555c5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a3ab1a6ec499c9bfd45258e149aa555c5">SimplifyIndirectBrOnSelect</a> (<a class="el" href="../../d6/d82/classllvm_1_1IndirectBrInst.html">IndirectBrInst</a> *IBI, <a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *SI)</td></tr>
<tr class="separator:a3ab1a6ec499c9bfd45258e149aa555c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894c062ee9abd76e8d7d3c93963b4556"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a894c062ee9abd76e8d7d3c93963b4556">TryToSimplifyUncondBranchWithICmpInIt</a> (<a class="el" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI, <a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a894c062ee9abd76e8d7d3c93963b4556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8967437e3a5c324908374b710061282"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ac8967437e3a5c324908374b710061282">SimplifyBranchOnICmpChain</a> (<a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>)</td></tr>
<tr class="separator:ac8967437e3a5c324908374b710061282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5ef34c952cc6bc5dce92d91598bdd2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#abf5ef34c952cc6bc5dce92d91598bdd2">TurnSwitchRangeIntoICmp</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>)</td></tr>
<tr class="separator:abf5ef34c952cc6bc5dce92d91598bdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48977a4b045a92bc5cf1c0ad4d95129e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a48977a4b045a92bc5cf1c0ad4d95129e">EliminateDeadSwitchCases</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI)</td></tr>
<tr class="separator:a48977a4b045a92bc5cf1c0ad4d95129e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a785324436b8d2862b09f5fd8d1c061"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a3a785324436b8d2862b09f5fd8d1c061">FindPHIForConditionForwarding</a> (<a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseValue, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, int *PhiIndex)</td></tr>
<tr class="separator:a3a785324436b8d2862b09f5fd8d1c061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819fe08329be34252ffde1e710574a34"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a819fe08329be34252ffde1e710574a34">ForwardSwitchConditionToPHI</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI)</td></tr>
<tr class="separator:a819fe08329be34252ffde1e710574a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73476159b3f570043406e83b49ea036c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a73476159b3f570043406e83b49ea036c">ValidLookupTableConstant</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>)</td></tr>
<tr class="separator:a73476159b3f570043406e83b49ea036c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe11668c8bd8d29c005ca8e66ba9ef6b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &amp;<a class="el" href="../../de/d05/classllvm_1_1ConstantPool.html">ConstantPool</a>)</td></tr>
<tr class="separator:afe11668c8bd8d29c005ca8e66ba9ef6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe3a801f7be20378621c4cbca8717aad"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#abe3a801f7be20378621c4cbca8717aad">ConstantFold</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &amp;<a class="el" href="../../de/d05/classllvm_1_1ConstantPool.html">ConstantPool</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:abe3a801f7be20378621c4cbca8717aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe18d4b03b813d04ffd79e706cc62aa"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#abfe18d4b03b813d04ffd79e706cc62aa">GetCaseResults</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseVal, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *CaseDest, <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> **CommonDest, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &gt; &amp;Res, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:abfe18d4b03b813d04ffd79e706cc62aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefef0635df4a6b68cd500f02557aba8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#afefef0635df4a6b68cd500f02557aba8">ShouldBuildLookupTable</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, uint64_t TableSize, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> * &gt; &amp;ResultTypes)</td></tr>
<tr class="separator:afefef0635df4a6b68cd500f02557aba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04831b35447d0506191aad47dd9b46d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ac04831b35447d0506191aad47dd9b46d">SwitchToLookupTable</a> (<a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;<a class="el" href="../../d5/dfd/MCJIT_2lazy_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:ac04831b35447d0506191aad47dd9b46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d718b79cd2832d71600169ac3e132b0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</td></tr>
<tr class="memdesc:a8d718b79cd2832d71600169ac3e132b0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> if passing a value to an instruction will cause undefined behavior.  <a href="#a8d718b79cd2832d71600169ac3e132b0">More...</a><br/></td></tr>
<tr class="separator:a8d718b79cd2832d71600169ac3e132b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2026c2afa149ebc0c1ac8fd091fdc22c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a2026c2afa149ebc0c1ac8fd091fdc22c">removeUndefIntroducingPredecessor</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB)</td></tr>
<tr class="separator:a2026c2afa149ebc0c1ac8fd091fdc22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a830a17648b2e5112beef220cc707c977"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a> (&quot;phi-node-folding-threshold&quot;, cl::Hidden, cl::init(1), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Control the amount of phi node folding to perform (default = 1)&quot;))</td></tr>
<tr class="separator:a830a17648b2e5112beef220cc707c977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b13773c26dad640e24611c48c657463"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#a0b13773c26dad640e24611c48c657463">DupRet</a> (&quot;simplifycfg-dup-ret&quot;, cl::Hidden, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Duplicate return <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> into unconditional branches&quot;))</td></tr>
<tr class="separator:a0b13773c26dad640e24611c48c657463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7707bcaec113d0d136467c7b97a62f1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#ac7707bcaec113d0d136467c7b97a62f1">SinkCommon</a> (&quot;simplifycfg-<a class="el" href="../../d1/d81/dwarfdump-type-units_8cc.html#a6ac495c0425f7d6f873d10ee57f4bf28">sink</a>-common&quot;, cl::Hidden, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Sink common <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> down to the end block&quot;))</td></tr>
<tr class="separator:ac7707bcaec113d0d136467c7b97a62f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5d6c1653f6d85c8ee596904289fd94"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html#aef5d6c1653f6d85c8ee596904289fd94">HoistCondStores</a> (&quot;simplifycfg-hoist-cond-stores&quot;, cl::Hidden, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Hoist conditional stores <a class="el" href="../../d1/d2d/DeadMachineInstructionElim_8cpp.html#aaa3848371787403e4ecfa0f2bff47697">if</a> an unconditional store precedes&quot;))</td></tr>
<tr class="separator:aef5d6c1653f6d85c8ee596904289fd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;simplifycfg&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00052">52</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adfeed3997bba12e75a8e51d740f1969d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void AddPredecessorToBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>Succ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>NewPred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>ExistPred</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AddPredecessorToBlock - Update PHI nodes in Succ to indicate that there will now be entries in it from the 'NewPred' block. The values that will be flowing into the PHI nodes will be the same as those coming in from ExistPred, an existing predecessor of Succ. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">191</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                                         {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(Succ-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())) <span class="keywordflow">return</span>; <span class="comment">// Quick exit if nothing to do</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Succ-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;       (PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)); ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(ExistPred), NewPred);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a03a2d451a241c934af3405a7cfc8adb4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool BlockIsSimpleEnoughToThreadThrough </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>BlockIsSimpleEnoughToThreadThrough - Return true if we can thread a branch across this block. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01580">1580</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                                                               {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keywordtype">unsigned</span> Size = 0;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*BBI != BI; ++BBI) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI))</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">if</span> (Size &gt; 10) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Don&#39;t clone large BB&#39;s.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    ++Size;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="comment">// We can only support instructions that do not define values that are</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// live outside of the current basic block.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : BBI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <span class="keywordflow">if</span> (UI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != BB || isa&lt;PHINode&gt;(UI)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// Looks ok, continue checking.</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a747b33c392f2a4faef1bf40a4d169c7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool checkCSEInPredecessor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>PB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>checkCSEInPredecessor - Return true if the given instruction is available in its predecessor block. If yes, the instruction will be removed. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01948">1948</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                                                     {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;BinaryOperator&gt;(Inst) &amp;&amp; !isa&lt;CmpInst&gt;(Inst))</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = PB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *PBI = &amp;*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="comment">// Check whether Inst and PBI generate the same value.</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">if</span> (Inst-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#ac72e0be80ec7138a1ec42c798b249981">isIdenticalTo</a>(PBI)) {</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      Inst-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PBI);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      Inst-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac72e0be80ec7138a1ec42c798b249981"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#ac72e0be80ec7138a1ec42c798b249981">llvm::Instruction::isIdenticalTo</a></div><div class="ttdeci">bool isIdenticalTo(const Instruction *I) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00321">Instruction.cpp:321</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a409148827b522f5a4942128b467f8ef6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned ComputeSpeculationCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d6/d1b/classllvm_1_1User.html">User</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ComputeSpeculationCost - Compute an abstract "cost" of speculating the given instruction, which is assumed to be safe to speculate. 1 means cheap, 2 means less cheap, and UINT_MAX means prohibitively expensive. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00204">204</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                                            {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(I, DL) &amp;&amp;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         <span class="stringliteral">&quot;Instruction is not safe to speculatively execute!&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">switch</span> (Operator::getOpcode(I)) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// In doubt, be conservative.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> UINT_MAX;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// GEPs are cheap if all indices are constant.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (!cast&lt;GEPOperator&gt;(I)-&gt;hasAllConstantIndices())</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> UINT_MAX;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">case</span> Instruction::ExtractValue:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">case</span> Instruction::ICmp:</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/d2f/InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">Instruction::ExtractElement</a>:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">case</span> Instruction::InsertElement:</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> 1; <span class="comment">// These are all cheap.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">Instruction::Call</a>:</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aa5ab8c7b55d8bc7cab66be444daa70a1"><div class="ttname"><a href="../../db/d2f/InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a></div><div class="ttdeci">static ConstantInt * ExtractElement(Constant *V, Constant *Idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2f/InstCombineCompares_8cpp_source.html#l00033">InstCombineCompares.cpp:33</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01875">APInt.h:1875</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="namespacellvm_html_ac2c00585b6b1dd6611da1b7f4bd47d09"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01975">ValueTracking.cpp:1975</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/CallingConvLower_8h_source.html#l00167">CallingConvLower.h:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8e/SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe3a801f7be20378621c4cbca8717aad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* ConstantFold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ConstantPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ConstantFold - Try to fold instruction I into a constant. This works for simple instructions such as binary operations where both operands are constant or can be replaced by constants from the ConstantPool. Returns the resulting constant on success, 0 otherwise. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03362">3362</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                                   {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a> = dyn_cast&lt;SelectInst&gt;(I)) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../d4/dc4/structA.html">A</a> = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a>(<a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getCondition(), <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="keywordflow">if</span> (!A)</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keywordflow">if</span> (A-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>())</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a>(<a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getTrueValue(), <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>);</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="keywordflow">if</span> (A-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>())</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a>(<a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getFalseValue(), <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>);</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;  }</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 4&gt;</a> COps;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = 0, E = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != E; ++<a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *A = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>), <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>))</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      COps.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(A);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  }</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/de6/classllvm_1_1CmpInst.html">CmpInst</a> *Cmp = dyn_cast&lt;CmpInst&gt;(I))</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#ab1f7b887ee349a567b327e5f9ba3d632">ConstantFoldCompareInstOperands</a>(Cmp-&gt;getPredicate(), COps[0],</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;                                           COps[1], <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#aabfa89143e00bf09751e4a941dca654c">ConstantFoldInstOperands</a>(I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), COps, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1"><div class="ttname"><a href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">llvm::ISD::ConstantPool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/da2/ISDOpcodes_8h_source.html#l00063">ISDOpcodes.h:63</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="../../df/de6/classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00654">InstrTypes.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="namespacellvm_html_aabfa89143e00bf09751e4a941dca654c"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#aabfa89143e00bf09751e4a941dca654c">llvm::ConstantFoldInstOperands</a></div><div class="ttdeci">Constant * ConstantFoldInstOperands(unsigned Opcode, Type *DestTy, ArrayRef&lt; Constant * &gt; Ops, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l01010">ConstantFolding.cpp:1010</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="structA_html"><div class="ttname"><a href="../../d4/dc4/structA.html">A</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00001">test.h:1</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ac8ddb745480a7e75a3862ddf0be3a298"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00088">Constants.cpp:88</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_afe11668c8bd8d29c005ca8e66ba9ef6b"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a></div><div class="ttdeci">static Constant * LookupConstant(Value *V, const SmallDenseMap&lt; Value *, Constant * &gt; &amp;ConstantPool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03350">SimplifyCFG.cpp:3350</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="namespacellvm_html_ab1f7b887ee349a567b327e5f9ba3d632"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ab1f7b887ee349a567b327e5f9ba3d632">llvm::ConstantFoldCompareInstOperands</a></div><div class="ttdeci">Constant * ConstantFoldCompareInstOperands(unsigned Predicate, Constant *LHS, Constant *RHS, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l01109">ConstantFolding.cpp:1109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a7f7d7aa56a6449ae814f48b6a8ce6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ConstantIntSortPredicate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *&#160;</td>
          <td class="paramname"><em>P1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> *&#160;</td>
          <td class="paramname"><em>P2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00714">714</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                                            {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *LHS = *<a class="code" href="../../d0/d55/AnalysisWrappers_8cpp.html#a03453f8bc3f3a048bd95d46b6258864a">P1</a>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = *<a class="code" href="../../d0/d55/AnalysisWrappers_8cpp.html#a86a37817a8bfbb299fafeb2115dc1632">P2</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(RHS-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == RHS-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a1dc5339334162e650ff87e89629bf66c"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l00516">APInt.cpp:516</a></div></div>
<div class="ttc" id="AnalysisWrappers_8cpp_html_a86a37817a8bfbb299fafeb2115dc1632"><div class="ttname"><a href="../../d0/d55/AnalysisWrappers_8cpp.html#a86a37817a8bfbb299fafeb2115dc1632">P2</a></div><div class="ttdeci">static RegisterPass&lt; CallGraphPrinter &gt; P2(&quot;print-callgraph&quot;,&quot;Print a call graph&quot;)</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="AnalysisWrappers_8cpp_html_a03453f8bc3f3a048bd95d46b6258864a"><div class="ttname"><a href="../../d0/d55/AnalysisWrappers_8cpp.html#a03453f8bc3f3a048bd95d46b6258864a">P1</a></div><div class="ttdeci">static RegisterPass&lt; ExternalFunctionsPassedConstants &gt; P1(&quot;print-externalfnconstants&quot;,&quot;Print external fn callsites passed constants&quot;)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad3f80dfee6da3528be6f978c892acb33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool DominatesMergePoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *, 4 &gt; *&#160;</td>
          <td class="paramname"><em>AggressiveInsts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>CostRemaining</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>DominatesMergePoint - If we have a merge point of an "if condition" as accepted above, return true if the specified value dominates the block. We don't handle the true generality of domination here, just a special case which works well enough for us.</p>
<p>If AggressiveInsts is non-null, and if V does not dominate BB, we check to see if V (which must be an instruction) and its recursive operands that do not dominate BB have a combined cost lower than CostRemaining and are non-trapping. If both are true, the instruction is inserted into the set and true is returned.</p>
<p>The cost for most non-trapping instructions is defined as 1 except for Select whose cost is 2.</p>
<p>After this function returns, CostRemaining is decreased by the cost of V plus its non-dominating operands. If that cost is greater than CostRemaining, false is returned and CostRemaining is undefined. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00258">258</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                                      {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (!I) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Non-instructions all dominate instructions, but not all constantexprs</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// can be executed unconditionally.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;ConstantExpr&gt;(V))</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/structC.html">C</a>-&gt;canTrap())</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *PBB = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// We don&#39;t want to allow weird loops that might have the &quot;if condition&quot; in</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// the bottom of this block.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">if</span> (PBB == BB) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// If this instruction is defined in a block that contains an unconditional</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// branch to BB, then it must be in the &#39;conditional&#39; part of the &quot;if</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// statement&quot;.  If not, it definitely dominates the region.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a>&gt;(PBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (!BI || BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() || BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) != BB)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// If we aren&#39;t allowing aggressive promotion anymore, then don&#39;t consider</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// instructions in the &#39;if region&#39;.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">if</span> (!AggressiveInsts) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// If we have seen this instruction before, don&#39;t count it again.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (AggressiveInsts-&gt;<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">count</a>(I)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// Okay, it looks like the instruction IS in the &quot;condition&quot;.  Check to</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// see if it&#39;s a cheap instruction to unconditionally compute, and if it</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// only uses stuff defined outside of the condition.  If so, hoist it out.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(I, DL))</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordtype">unsigned</span> Cost = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a>(I, DL);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (Cost &gt; CostRemaining)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  CostRemaining -= Cost;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// Okay, we can only really hoist these out if their operands do</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// not take us over the cost threshold.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/d66/classllvm_1_1Use.html">User::op_iterator</a> i = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), e = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(); i != e; ++i)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a>(*i, BB, AggressiveInsts, CostRemaining, DL))</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// Okay, it&#39;s safe to do this!  Remember this instruction.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  AggressiveInsts-&gt;<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(I);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a99bfcab10bf4bc0a3a712eb7bd215965"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#a99bfcab10bf4bc0a3a712eb7bd215965">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(PtrType Ptr) const </div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00267">SmallPtrSet.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00120">User.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad3f80dfee6da3528be6f978c892acb33"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a></div><div class="ttdeci">static bool DominatesMergePoint(Value *V, BasicBlock *BB, SmallPtrSet&lt; Instruction *, 4 &gt; *AggressiveInsts, unsigned &amp;CostRemaining, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00258">SimplifyCFG.cpp:258</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a409148827b522f5a4942128b467f8ef6"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a></div><div class="ttdeci">static unsigned ComputeSpeculationCost(const User *I, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00204">SimplifyCFG.cpp:204</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00122">User.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02493">Instructions.h:2493</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_html_ac2c00585b6b1dd6611da1b7f4bd47d09"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01975">ValueTracking.cpp:1975</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38517d96538b847c6c3dbe58965c8053"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void EliminateBlockCases </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; ValueEqualityComparisonCase &gt; &amp;&#160;</td>
          <td class="paramname"><em>Cases</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EliminateBlockCases - Given a vector of bb/value pairs, remove any entries in the list that match the specified block. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00522">522</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                                                             {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  Cases.erase(<a class="code" href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73">std::remove</a>(Cases.begin(), Cases.end(), BB), Cases.end());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73"><div class="ttname"><a href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73">llvm::LibFunc::remove</a></div><div class="ttdoc">int remove(const char *path); </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/TargetLibraryInfo_8h_source.html#l00484">TargetLibraryInfo.h:484</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48977a4b045a92bc5cf1c0ad4d95129e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool EliminateDeadSwitchCases </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EliminateDeadSwitchCases - Compute masked bits for the condition of a switch and use it to remove dead cases. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03211">3211</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                                                     {</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cond = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>();</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a> = Cond-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> KnownZero(Bits, 0), KnownOne(Bits, 0);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a3091c875cc9edff86d610e7e16d63d87">computeKnownBits</a>(Cond, KnownZero, KnownOne);</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <span class="comment">// Gather dead cases.</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;ConstantInt*, 8&gt;</a> DeadCases;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>(), E = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseValue()-&gt;getValue() &amp; KnownZero) != 0 ||</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseValue()-&gt;getValue() &amp; KnownOne) != KnownOne) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      DeadCases.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseValue());</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SimplifyCFG: switch case &#39;&quot;</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                   &lt;&lt; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseValue() &lt;&lt; <span class="stringliteral">&quot;&#39; is dead.\n&quot;</span>);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    }</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  }</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 8&gt;</a> Weights;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <span class="keywordtype">bool</span> HasWeight = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a>(SI);</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <span class="keywordflow">if</span> (HasWeight) {</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a>(SI, Weights);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    HasWeight = (Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 + SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>());</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <span class="comment">// Remove dead cases from the switch.</span></div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = DeadCases.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> Case = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(DeadCases[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Case != SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">case_default</a>() &amp;&amp;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;           <span class="stringliteral">&quot;Case was not found. Probably mistake in DeadCases forming.&quot;</span>);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">if</span> (HasWeight) {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Weights[Case.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a10aaece902a17099847aeb04681d236d">getCaseIndex</a>()+1], Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>());</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      Weights.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    }</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <span class="comment">// Prune unused values from PHI nodes.</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    Case.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a428c1dd0acc084fb894ceb71ca5b707a">removeCase</a>(Case);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="keywordflow">if</span> (HasWeight &amp;&amp; Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &gt;= 2) {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 8&gt;</a> MDWeights(Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                    <a class="code" href="../../d7/d3f/classllvm_1_1MDBuilder.html">MDBuilder</a>(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>()).</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                    createBranchWeights(MDWeights));</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  <span class="keywordflow">return</span> !DeadCases.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>();</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00115">SmallVector.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02745">Instructions.h:2745</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02734">Instructions.h:2734</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a165512f38f31f01e7f18bf3838f3a12e"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a></div><div class="ttdeci">static void GetBranchWeights(TerminatorInst *TI, SmallVectorImpl&lt; uint64_t &gt; &amp;Weights)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00737">SimplifyCFG.cpp:737</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a10aaece902a17099847aeb04681d236d"><div class="ttname"><a href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a10aaece902a17099847aeb04681d236d">llvm::SwitchInst::CaseIteratorT::getCaseIndex</a></div><div class="ttdeci">unsigned getCaseIndex() const </div><div class="ttdoc">Returns number of current case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02627">Instructions.h:2627</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ada99fd4fd27356d1518273d8248940a5"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a></div><div class="ttdeci">static bool HasBranchWeights(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00725">SimplifyCFG.cpp:725</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00158">SmallVector.h:158</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95"><div class="ttname"><a href="../../db/d20/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">llvm::tgtok::Bits</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a0519dc6e2f153aaed61eed17d965a9f0"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00172">Type.cpp:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a143819a808ec85e9997566fdf42e9372"><div class="ttname"><a href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">llvm::SwitchInst::CaseIteratorT::getCaseSuccessor</a></div><div class="ttdeci">BasicBlockTy * getCaseSuccessor()</div><div class="ttdoc">Resolves successor for current case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02619">Instructions.h:2619</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ad3a1537c850f63ce48bcf45694cde73f"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">llvm::SwitchInst::findCaseValue</a></div><div class="ttdeci">CaseIt findCaseValue(const ConstantInt *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02780">Instructions.h:2780</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00113">SmallVector.h:113</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00239">SmallVector.h:239</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a428c1dd0acc084fb894ceb71ca5b707a"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a428c1dd0acc084fb894ceb71ca5b707a">llvm::SwitchInst::removeCase</a></div><div class="ttdeci">void removeCase(CaseIt i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l03427">Instructions.cpp:3427</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a96a201f56500af4dd70b4169f140cb4c"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">llvm::SwitchInst::case_default</a></div><div class="ttdeci">CaseIt case_default()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02769">Instructions.h:2769</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00037">BasicBlock.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="namespacellvm_html_a3091c875cc9edff86d610e7e16d63d87"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3091c875cc9edff86d610e7e16d63d87">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(Value *V, APInt &amp;KnownZero, APInt &amp;KnownOne, const DataLayout *TD=nullptr, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l00228">ValueTracking.cpp:228</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="../../d7/d3f/classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/MDBuilder_8h_source.html#l00030">MDBuilder.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02678">Instructions.h:2678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad04d12b08532d23bbd327a7024caad89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void EraseTerminatorInstAndDCECond </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *&#160;</td>
          <td class="paramname"><em>TI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00454">454</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                              {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Cond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(TI)) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    Cond = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(SI-&gt;getCondition());</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (BI-&gt;isConditional())</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      Cond = dyn_cast&lt;Instruction&gt;(BI-&gt;getCondition());</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d82/classllvm_1_1IndirectBrInst.html">IndirectBrInst</a> *IBI = dyn_cast&lt;IndirectBrInst&gt;(TI)) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    Cond = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(IBI-&gt;getAddress());</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  TI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">if</span> (Cond) <a class="code" href="../../d9/d4a/namespacellvm.html#a6c73ab07237664251d5742567a4706f1">RecursivelyDeleteTriviallyDeadInstructions</a>(Cond);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1IndirectBrInst_html"><div class="ttname"><a href="../../d6/d82/classllvm_1_1IndirectBrInst.html">llvm::IndirectBrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02859">Instructions.h:2859</a></div></div>
<div class="ttc" id="namespacellvm_html_a6c73ab07237664251d5742567a4706f1"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a6c73ab07237664251d5742567a4706f1">llvm::RecursivelyDeleteTriviallyDeadInstructions</a></div><div class="ttdeci">bool RecursivelyDeleteTriviallyDeadInstructions(Value *V, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d62/lib_2Transforms_2Utils_2Local_8cpp_source.html#l00320">lib/Transforms/Utils/Local.cpp:320</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02550">Instructions.h:2550</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a50c9506d55e08fb67115a29dde75388a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ExtractBranchMetadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>ProbTrue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>ProbFalse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ExtractBranchMetadata - Given a conditional BranchInstruction, retrieve the probabilities of the branch taking each edge. Fills in the two APInt parameters and return true, or returns false if no or invalid metadata was found. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01931">1931</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                                                                           {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() &amp;&amp;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;         <span class="stringliteral">&quot;Looking for probabilities on unconditional branch?&quot;</span>);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a> *ProfileData = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(LLVMContext::MD_prof);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keywordflow">if</span> (!ProfileData || ProfileData-&gt;getNumOperands() != 3) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CITrue = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ProfileData-&gt;getOperand(1));</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CIFalse = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ProfileData-&gt;getOperand(2));</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keywordflow">if</span> (!CITrue || !CIFalse) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  ProbTrue = CITrue-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  ProbFalse = CIFalse-&gt;getValue().getZExtValue();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1APInt_html_a7dc983ebf0eb2d255fa90a67063c72e2"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Get zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01302">APInt.h:1302</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02493">Instructions.h:2493</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3a785324436b8d2862b09f5fd8d1c061"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>* FindPHIForConditionForwarding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *&#160;</td>
          <td class="paramname"><em>CaseValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>PhiIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FindPHIForConditionForwarding - If BB would be eligible for simplification by TryToSimplifyUncondBranchFromEmptyBlock (i.e. it is empty and terminated by an unconditional branch), look at the phi node for BB in the successor block and see if the incoming value is equal to CaseValue. If so, return the phi node, and set PhiIndex to BB's index in the phi node. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03264">3264</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                                                             {</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  <span class="keywordflow">if</span> (BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">getFirstNonPHIOrDbg</a>() != BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// BB must be empty to be a candidate for simplification.</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  <span class="keywordflow">if</span> (!BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>())</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// BB must be dominated by the switch.</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;  <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a359237c780f7c8e40645575826da8a3c">Branch</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  <span class="keywordflow">if</span> (!Branch || !Branch-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>())</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Terminator must be unconditional branch.</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = Branch-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Succ-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = dyn_cast&lt;PHINode&gt;(I++)) {</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <span class="keywordtype">int</span> Idx = <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>-&gt;getBasicBlockIndex(BB);</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Idx &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;PHI has no entry for predecessor?&quot;</span>);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InValue = <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>-&gt;getIncomingValue(Idx);</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="keywordflow">if</span> (InValue != CaseValue) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    *PhiIndex = Idx;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;  }</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a225cbda41f4c27fbb522833e31cb18f9"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">Instruction * getFirstNonPHIOrDbg()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00144">BasicBlock.cpp:144</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02492">Instructions.h:2492</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a359237c780f7c8e40645575826da8a3c"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a359237c780f7c8e40645575826da8a3c">llvm::MCID::Branch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00108">MCInstrDesc.h:108</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block. Otherwise return a null po...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00187">BasicBlock.cpp:187</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a95ec32778f2bb913dc4cc45ac7a66e42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FitWeights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d68/classllvm_1_1MutableArrayRef.html">MutableArrayRef</a>&lt; uint64_t &gt;&#160;</td>
          <td class="paramname"><em>Weights</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Keep halving the weights until all can fit in uint32_t. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00758">758</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                                          {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  uint64_t Max = *std::max_element(Weights.<a class="code" href="../../df/d68/classllvm_1_1MutableArrayRef.html#a1330f53a12096ffaa627a6a0a80e6b2a">begin</a>(), Weights.<a class="code" href="../../df/d68/classllvm_1_1MutableArrayRef.html#a0a38069cb2494a0e53b79436f7b04cbf">end</a>());</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (Max &gt; UINT_MAX) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordtype">unsigned</span> Offset = 32 - <a class="code" href="../../d9/d4a/namespacellvm.html#a57ab1fac7b65cde5654e4e1ca9bf9f90">countLeadingZeros</a>(Max);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">for</span> (uint64_t &amp;<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Weights)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;&gt;= Offset;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a57ab1fac7b65cde5654e4e1ca9bf9f90"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a57ab1fac7b65cde5654e4e1ca9bf9f90">llvm::countLeadingZeros</a></div><div class="ttdeci">std::enable_if&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countLeadingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&#39;s from the most significant bit to the least stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00120">MathExtras.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1MutableArrayRef_html_a1330f53a12096ffaa627a6a0a80e6b2a"><div class="ttname"><a href="../../df/d68/classllvm_1_1MutableArrayRef.html#a1330f53a12096ffaa627a6a0a80e6b2a">llvm::MutableArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00231">ArrayRef.h:231</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MutableArrayRef_html_a0a38069cb2494a0e53b79436f7b04cbf"><div class="ttname"><a href="../../df/d68/classllvm_1_1MutableArrayRef.html#a0a38069cb2494a0e53b79436f7b04cbf">llvm::MutableArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00232">ArrayRef.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a582a047783030becfa4221d3f456faf5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool FoldCondBranchOnPHI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FoldCondBranchOnPHI - If we have a conditional branch on a PHI node value that is defined in the same block as the branch and if any PHI entries are constants, thread edges corresponding to that entry to be branches to their ultimate destination. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01607">1607</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                                                                      {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// NOTE: we currently cannot transform this case if the PHI node is used</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="comment">// outside of the block.</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">if</span> (!PN || PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != BB || !PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// Degenerate case of a single entry PHI.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>() == 1) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a15c08107bea52769ad0ec5d2547baa3b">FoldSingleEntryPHINodes</a>(PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// Now we know that this block has multiple preds and two succs.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a03a2d451a241c934af3405a7cfc8adb4">BlockIsSimpleEnoughToThreadThrough</a>(BB)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#acb11ec5ef64171078a81b9e8d6d56585">HasNoDuplicateCall</a>(BB)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">// Okay, this is a simple enough basic block.  See if any phi values are</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="comment">// constants.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CB = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i));</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> (!CB || !CB-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="comment">// Okay, we now know that all edges from PredBB should be revectored to</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="comment">// branch to RealDest.</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *RealDest = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(!CB-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>());</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">if</span> (RealDest == BB) <span class="keywordflow">continue</span>;  <span class="comment">// Skip self loops.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// Skip if the predecessor&#39;s terminator is an indirect branch.</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(PredBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="comment">// The dest block might have PHI nodes, other predecessors and other</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">// difficult cases.  Instead of being smart about this, just insert a new</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="comment">// block that jumps to the destination block, effectively splitting</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="comment">// the edge we are about to create.</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *EdgeBB = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(),</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                                            RealDest-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.critedge&quot;</span>,</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                                            RealDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), RealDest);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(RealDest, EdgeBB);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// Update PHI nodes.</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a>(RealDest, EdgeBB, BB);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">// BB may have instructions that are being threaded over.  Clone these</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// instructions into EdgeBB.  We know that there will be no uses of the</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// cloned instructions outside of EdgeBB.</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPt = EdgeBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;Value*, Value*&gt;</a> TranslateMap;  <span class="comment">// Track translated values.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*BBI != BI; ++BBI) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BBI)) {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        TranslateMap[PN] = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(PredBB);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="comment">// Clone the instruction.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = BBI-&gt;clone();</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">if</span> (BBI-&gt;hasName()) N-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(BBI-&gt;getName()+<span class="stringliteral">&quot;.c&quot;</span>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <span class="comment">// Update operands due to translation.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/d66/classllvm_1_1Use.html">User::op_iterator</a> i = N-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), e = N-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;           i != e; ++i) {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;Value*, Value*&gt;::iterator</a> PI = TranslateMap.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*i);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keywordflow">if</span> (PI != TranslateMap.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;          *i = PI-&gt;second;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="comment">// Check for trivial simplification.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">SimplifyInstruction</a>(N, DL)) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        TranslateMap[BBI] = V;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;   <span class="comment">// Instruction folded away, don&#39;t need actual inst</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <span class="comment">// Insert the new instruction into its new home.</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        EdgeBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(InsertPt, N);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <span class="keywordflow">if</span> (!BBI-&gt;use_empty())</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;          TranslateMap[BBI] = N;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="comment">// Loop over all of the edges from PredBB to BB, changing them to branch</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="comment">// to EdgeBB instead.</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *PredBBTI = PredBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PredBBTI-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); i != e; ++i)</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">if</span> (PredBBTI-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(i) == BB) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(PredBB);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        PredBBTI-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">setSuccessor</a>(i, EdgeBB);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="comment">// Recurse, simplifying any other constants.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a582a047783030becfa4221d3f456faf5">FoldCondBranchOnPHI</a>(BI, DL) | <span class="keyword">true</span>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a240475f85dea79ec272c578fdf89acf1"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00139">Constants.h:139</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_acb11ec5ef64171078a81b9e8d6d56585"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#acb11ec5ef64171078a81b9e8d6d56585">HasNoDuplicateCall</a></div><div class="ttdeci">static bool HasNoDuplicateCall(const BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01567">SimplifyCFG.cpp:1567</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a582a047783030becfa4221d3f456faf5"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a582a047783030becfa4221d3f456faf5">FoldCondBranchOnPHI</a></div><div class="ttdeci">static bool FoldCondBranchOnPHI(BranchInst *BI, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01607">SimplifyCFG.cpp:1607</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00120">User.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00176">Value.cpp:176</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a03a2d451a241c934af3405a7cfc8adb4"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a03a2d451a241c934af3405a7cfc8adb4">BlockIsSimpleEnoughToThreadThrough</a></div><div class="ttdeci">static bool BlockIsSimpleEnoughToThreadThrough(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01580">SimplifyCFG.cpp:1580</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a79fb3df941bcb2ba32ba6438409d0c0b"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">llvm::TerminatorInst::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned idx, BasicBlock *B)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00071">InstrTypes.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00122">User.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00219">BasicBlock.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00058">DenseMap.h:58</a></div></div>
<div class="ttc" id="namespacellvm_html_ae64c78918a7103416535ec01038181d8"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l03073">InstructionSimplify.cpp:3073</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00037">BasicBlock.cpp:37</a></div></div>
<div class="ttc" id="namespacellvm_html_a15c08107bea52769ad0ec5d2547baa3b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a15c08107bea52769ad0ec5d2547baa3b">llvm::FoldSingleEntryPHINodes</a></div><div class="ttdeci">void FoldSingleEntryPHINodes(BasicBlock *BB, Pass *P=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/BasicBlockUtils_8cpp_source.html#l00068">BasicBlockUtils.cpp:68</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00109">DenseMap.h:109</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_adfeed3997bba12e75a8e51d740f1969d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a></div><div class="ttdeci">static void AddPredecessorToBlock(BasicBlock *Succ, BasicBlock *NewPred, BasicBlock *ExistPred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">SimplifyCFG.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac10e9fac5e8223bbc34a242c4f7442c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool FoldTwoEntryPHINode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *&#160;</td>
          <td class="paramname"><em>PN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FoldTwoEntryPHINode - Given a BB that starts with the specified two-entry PHI node, see if we can eliminate it. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01705">1705</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                                                                   {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="comment">// Ok, this is a two entry PHI node.  Check to see if this is a simple &quot;if</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="comment">// statement&quot;, which has a very simple dominance structure.  Basically, we</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="comment">// are trying to find the condition that is being branched on, which</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">// subsequently causes this merge to happen.  We really want control</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="comment">// dependence information for this check, but simplifycfg can&#39;t keep it up</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="comment">// to date, and this catches most of the cases we care about anyway.</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *IfTrue, *IfFalse;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *IfCond = <a class="code" href="../../d9/d4a/namespacellvm.html#abcc98cb5da68b3d112f6a16137d1cec1">GetIfCondition</a>(BB, IfTrue, IfFalse);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordflow">if</span> (!IfCond ||</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="comment">// Don&#39;t bother if the branch will be constant folded trivially.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      isa&lt;ConstantInt&gt;(IfCond))</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// Okay, we found that we can merge this two-entry phi node into a select.</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// Doing so would require us to fold *all* two entry phi nodes in this block.</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// At some point this becomes non-profitable (particularly if the target</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// doesn&#39;t support cmov&#39;s).  Only do this transformation if there are two or</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// fewer PHI nodes in this block.</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keywordtype">unsigned</span> NumPhis = 0;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); isa&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++NumPhis, ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="keywordflow">if</span> (NumPhis &gt; 2)</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="comment">// Loop over the PHI&#39;s seeing if we can promote them all to select</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="comment">// instructions.  While we are at it, keep track of the instructions</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="comment">// that need to be moved to the dominating block.</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction*, 4&gt;</a> AggressiveInsts;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordtype">unsigned</span> MaxCostVal0 = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a>,</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;           MaxCostVal1 = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); isa&lt;PHINode&gt;(II);) {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(II++);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">SimplifyInstruction</a>(PN, DL)) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(0), BB, &amp;AggressiveInsts,</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                             MaxCostVal0, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>) ||</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        !<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(1), BB, &amp;AggressiveInsts,</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                             MaxCostVal1, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>))</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// If we folded the first phi, PN dangles at this point.  Refresh it.  If</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="comment">// we ran out of PHIs then we simplified them all.</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">if</span> (!PN) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// Don&#39;t fold i1 branches on PHIs which contain binary operators.  These can</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// often be turned into switches and other things.</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1) &amp;&amp;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      (isa&lt;BinaryOperator&gt;(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(0)) ||</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;       isa&lt;BinaryOperator&gt;(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(1)) ||</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;       isa&lt;BinaryOperator&gt;(IfCond)))</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// If we all PHI nodes are promotable, check to make sure that all</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// instructions in the predecessor blocks can be promoted as well.  If</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// not, we won&#39;t be able to get rid of the control flow, so it&#39;s not</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="comment">// worth promoting to select instructions.</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *DomBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *IfBlock1 = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(0);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *IfBlock2 = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(1);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">if</span> (cast&lt;BranchInst&gt;(IfBlock1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())-&gt;isConditional()) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    IfBlock1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    DomBlock = *<a class="code" href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(IfBlock1);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IfBlock1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();!isa&lt;TerminatorInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">if</span> (!AggressiveInsts.count(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="comment">// This is not an aggressive instruction that we can promote.</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        <span class="comment">// Because of this, we won&#39;t be able to get rid of the control</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="comment">// flow, so the xform is not worth it.</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">if</span> (cast&lt;BranchInst&gt;(IfBlock2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())-&gt;isConditional()) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    IfBlock2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    DomBlock = *<a class="code" href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(IfBlock2);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IfBlock2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();!isa&lt;TerminatorInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">if</span> (!AggressiveInsts.count(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="comment">// This is not an aggressive instruction that we can promote.</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="comment">// Because of this, we won&#39;t be able to get rid of the control</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="comment">// flow, so the xform is not worth it.</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FOUND IF CONDITION!  &quot;</span> &lt;&lt; *IfCond &lt;&lt; <span class="stringliteral">&quot;  T: &quot;</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;               &lt;&lt; IfTrue-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;  F: &quot;</span> &lt;&lt; IfFalse-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="comment">// If we can still promote the PHI nodes after this gauntlet of tests,</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="comment">// do all of the PHI&#39;s now.</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt = DomBlock-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;true, NoFolder&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(InsertPt);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// Move all &#39;aggressive&#39; instructions, which are defined in the</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// conditional parts of the if&#39;s up to the dominating block.</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">if</span> (IfBlock1)</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    DomBlock-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(InsertPt,</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                                   IfBlock1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>(), IfBlock1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                                   IfBlock1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="keywordflow">if</span> (IfBlock2)</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    DomBlock-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(InsertPt,</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                                   IfBlock2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>(), IfBlock2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                                   IfBlock2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">// Change the PHI node into a select instruction.</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TrueVal  = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(0) == IfFalse);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FalseVal = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(0) == IfTrue);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">NV</a> =</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      cast&lt;SelectInst&gt;(<a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(IfCond, TrueVal, FalseVal, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    PN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NV);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    NV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(PN);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    PN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="comment">// At this point, IfBlock1 and IfBlock2 are both empty, so our if statement</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// has been flattened.  Change DomBlock to jump directly to our new block to</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// avoid other simplifycfg&#39;s kicking in on the diamond.</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *OldTI = DomBlock-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(OldTI);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(BB);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  OldTI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a830a17648b2e5112beef220cc707c977"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PHINodeFoldingThreshold(&quot;phi-node-folding-threshold&quot;, cl::Hidden, cl::init(1), cl::desc(&quot;Control the amount of phi node folding to perform (default = 1)&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">llvm::AArch64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00208">AArch64BaseInfo.h:208</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad3f80dfee6da3528be6f978c892acb33"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad3f80dfee6da3528be6f978c892acb33">DominatesMergePoint</a></div><div class="ttdeci">static bool DominatesMergePoint(Value *V, BasicBlock *BB, SmallPtrSet&lt; Instruction *, 4 &gt; *AggressiveInsts, unsigned &amp;CostRemaining, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00258">SimplifyCFG.cpp:258</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00114">Interval.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00219">BasicBlock.h:219</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="namespacellvm_html_ae64c78918a7103416535ec01038181d8"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l03073">InstructionSimplify.cpp:3073</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; Instruction *, 4 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_abcc98cb5da68b3d112f6a16137d1cec1"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#abcc98cb5da68b3d112f6a16137d1cec1">llvm::GetIfCondition</a></div><div class="ttdeci">Value * GetIfCondition(BasicBlock *BB, BasicBlock *&amp;IfTrue, BasicBlock *&amp;IfFalse)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/BasicBlockUtils_8cpp_source.html#l00756">BasicBlockUtils.cpp:756</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01377">IRBuilder.h:1377</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0c00110a06b1eb96c92f87e4ca28129a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">llvm::IRBuilder::CreateBr</a></div><div class="ttdeci">BranchInst * CreateBr(BasicBlock *Dest)</div><div class="ttdoc">Create an unconditional &#39;br label X&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00543">IRBuilder.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a819fe08329be34252ffde1e710574a34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ForwardSwitchConditionToPHI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ForwardSwitchConditionToPHI - Try to forward the condition of a switch instruction to a phi node dominated by the switch, if that would mean that some of the destination blocks of the switch can be folded away. Returns true if a change is made. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03297">3297</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                                                        {</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap&lt;PHINode*, SmallVector&lt;int,4&gt;</a> &gt; ForwardingNodesMap;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  ForwardingNodesMap ForwardingNodes;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>(), E = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseValue = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseValue();</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *CaseDest = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCaseSuccessor();</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    <span class="keywordtype">int</span> PhiIndex;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a3a785324436b8d2862b09f5fd8d1c061">FindPHIForConditionForwarding</a>(CaseValue, CaseDest,</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;                                                 &amp;PhiIndex);</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keywordflow">if</span> (!PHI) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    ForwardingNodes[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>].push_back(PhiIndex);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  }</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;  <span class="keywordflow">for</span> (ForwardingNodesMap::iterator <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ForwardingNodes.begin(),</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;       E = ForwardingNodes.end(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;Indexes = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <span class="keywordflow">if</span> (Indexes.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt; 2) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = Indexes.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;      Phi-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(Indexes[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>());</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  }</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02745">Instructions.h:2745</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="../../d5/d64/classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00529">DenseMap.h:529</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02734">Instructions.h:2734</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; int &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a3a785324436b8d2862b09f5fd8d1c061"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a3a785324436b8d2862b09f5fd8d1c061">FindPHIForConditionForwarding</a></div><div class="ttdeci">static PHINode * FindPHIForConditionForwarding(ConstantInt *CaseValue, BasicBlock *BB, int *PhiIndex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03264">SimplifyCFG.cpp:3264</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02161">Instructions.h:2161</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02678">Instructions.h:2678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80e67015c6e209209474a445fe9c16c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* GatherConstantCompares </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&amp;&#160;</td>
          <td class="paramname"><em>Extra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isEQ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>UsedICmps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GatherConstantCompares - Given a potentially 'or'd or 'and'd together collection of icmp eq/ne instructions that compare a value against a constant, return the value being compared, and stick the constant into the Values vector. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00349">349</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                                                             {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// If this is an icmp against a constant, handle this as one of the cases.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = dyn_cast&lt;ICmpInst&gt;(I)) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="../../db/db2/structC.html">C</a> = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a7b3e10bb6dc8ddc3429611f054743c24">GetConstantInt</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RHSVal;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSC;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">if</span> (ICI-&gt;getPredicate() == (isEQ ? ICmpInst::ICMP_EQ:ICmpInst::ICMP_NE)) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// (x &amp; ~2^x) == y --&gt; x == y || x == y|2^x</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// This undoes a transformation done by instcombine to fuse 2 compares.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICI-&gt;getOperand(0),</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                  <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RHSVal), <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(RHSC)))) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = ~RHSC-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          <span class="keywordflow">if</span> (Not.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            Vals.push_back(<a class="code" href="../../db/db2/structC.html">C</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            Vals.push_back(</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                ConstantInt::get(<a class="code" href="../../db/db2/structC.html">C</a>-&gt;getContext(), <a class="code" href="../../db/db2/structC.html">C</a>-&gt;getValue() | <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a>));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            UsedICmps++;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">return</span> RHSVal;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        UsedICmps++;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        Vals.push_back(<a class="code" href="../../db/db2/structC.html">C</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// If we have &quot;x ult 3&quot; comparison, for example, then we can add 0,1,2 to</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">// the set.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html">ConstantRange</a> Span =</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        ConstantRange::makeICmpRegion(ICI-&gt;getPredicate(), <a class="code" href="../../db/db2/structC.html">C</a>-&gt;getValue());</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="comment">// Shift the range if the compare is fed by an add. This is the range</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="comment">// compare idiom as emitted by instcombine.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordtype">bool</span> hasAdd =</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RHSVal), <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(RHSC)));</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">if</span> (hasAdd)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        Span = Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#acb48ab169ff254ba03e74f72f6f8e678">subtract</a>(RHSC-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="comment">// If this is an and/!= check then we want to optimize &quot;x ugt 2&quot; into</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">// x != 0 &amp;&amp; x != 1.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (!isEQ)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        Span = Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#a3b6b85760d6f19980ca3f98b7dc6fad4">inverse</a>();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">// If there are a ton of values, we don&#39;t want to make a ginormous switch.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">if</span> (Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#a56327dc7ef2656bedacbe669d51abf61">getSetSize</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">ugt</a>(8) || Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#ae02fb0a19012613dcf2f9f24a1a3cf99">isEmptySet</a>())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Tmp = Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">getLower</a>(); Tmp != Span.<a class="code" href="../../dc/d4a/classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">getUpper</a>(); ++Tmp)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        Vals.push_back(ConstantInt::get(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), Tmp));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      UsedICmps++;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">return</span> hasAdd ? RHSVal : I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// Otherwise, we can only handle an | or &amp;, depending on isEQ.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() != (isEQ ? <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a> : <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>))</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordtype">unsigned</span> NumValsBeforeLHS = Vals.size();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">unsigned</span> UsedICmpsBeforeLHS = UsedICmps;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LHS = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Vals, Extra, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                          isEQ, UsedICmps)) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">unsigned</span> NumVals = Vals.size();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">unsigned</span> UsedICmpsBeforeRHS = UsedICmps;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Vals, Extra, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                            isEQ, UsedICmps)) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (LHS == RHS)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> LHS;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      Vals.resize(NumVals);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      UsedICmps = UsedICmpsBeforeRHS;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// The RHS of the or/and can&#39;t be folded in and we haven&#39;t used &quot;Extra&quot; yet,</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// set it and return success.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (Extra == <span class="keyword">nullptr</span> || Extra == I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      Extra = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">return</span> LHS;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    Vals.resize(NumValsBeforeLHS);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    UsedICmps = UsedICmpsBeforeLHS;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// If the LHS can&#39;t be folded in, but Extra is available and RHS can, try to</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// use LHS as Extra.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span> (Extra == <span class="keyword">nullptr</span> || Extra == I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *OldExtra = Extra;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    Extra = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Vals, Extra, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                            isEQ, UsedICmps))</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">return</span> RHS;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Vals.size() == NumValsBeforeLHS);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    Extra = OldExtra;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00467">PatternMatch.h:467</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a7b3e10bb6dc8ddc3429611f054743c24"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a7b3e10bb6dc8ddc3429611f054743c24">GetConstantInt</a></div><div class="ttdeci">static ConstantInt * GetConstantInt(Value *V, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00316">SimplifyCFG.cpp:316</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a05e6b3a73a1d4fa4979f13a69d6f931a"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">llvm::APIntOps::Not</a></div><div class="ttdeci">APInt Not(const APInt &amp;APIVal)</div><div class="ttdoc">Bitwise complement function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01880">APInt.h:1880</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00395">PatternMatch.h:395</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_acb48ab169ff254ba03e74f72f6f8e678"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#acb48ab169ff254ba03e74f72f6f8e678">llvm::ConstantRange::subtract</a></div><div class="ttdeci">ConstantRange subtract(const APInt &amp;CI) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/ConstantRange_8cpp_source.html#l00242">ConstantRange.cpp:242</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_ae02fb0a19012613dcf2f9f24a1a3cf99"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#ae02fb0a19012613dcf2f9f24a1a3cf99">llvm::ConstantRange::isEmptySet</a></div><div class="ttdeci">bool isEmptySet() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/ConstantRange_8cpp_source.html#l00125">ConstantRange.cpp:125</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af3deb6522c4fe2043fe07af2ec90190c"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const </div><div class="ttdoc">Check if this APInt&#39;s value is a power of two greater than zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00388">APInt.h:388</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad3d358e03c6228af2d19b2e67028886e"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01080">APInt.h:1080</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_a56327dc7ef2656bedacbe669d51abf61"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#a56327dc7ef2656bedacbe669d51abf61">llvm::ConstantRange::getSetSize</a></div><div class="ttdeci">APInt getSetSize() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/ConstantRange_8cpp_source.html#l00146">ConstantRange.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_a3b6b85760d6f19980ca3f98b7dc6fad4"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#a3b6b85760d6f19980ca3f98b7dc6fad4">llvm::ConstantRange::inverse</a></div><div class="ttdeci">ConstantRange inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/ConstantRange_8cpp_source.html#l00711">ConstantRange.cpp:711</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da2/ConstantRange_8h_source.html#l00042">ConstantRange.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_a35303bcc6354c08b4ed0cc75b1ec1084"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">llvm::ConstantRange::getLower</a></div><div class="ttdeci">const APInt &amp; getLower() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da2/ConstantRange_8h_source.html#l00074">ConstantRange.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_af88b7acdd025620663e38ca68ff746f5"><div class="ttname"><a href="../../dc/d4a/classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">llvm::ConstantRange::getUpper</a></div><div class="ttdeci">const APInt &amp; getUpper() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da2/ConstantRange_8h_source.html#l00078">ConstantRange.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a80e67015c6e209209474a445fe9c16c2"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a></div><div class="ttdeci">static Value * GatherConstantCompares(Value *V, std::vector&lt; ConstantInt * &gt; &amp;Vals, Value *&amp;Extra, const DataLayout *DL, bool isEQ, unsigned &amp;UsedICmps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00349">SimplifyCFG.cpp:349</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a165512f38f31f01e7f18bf3838f3a12e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GetBranchWeights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *&#160;</td>
          <td class="paramname"><em>TI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>Weights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Weights of a given TerminatorInst, the default weight is at the front of the vector. If TI is a conditional eq, we need to swap the branch-weight metadata. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00737">737</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                                                 {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a>* MD = TI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(LLVMContext::MD_prof);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(MD);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = MD-&gt;<a class="code" href="../../d0/d82/classllvm_1_1MDNode.html#ade17b50e4f0b835cd9eb58dffe12a90d">getNumOperands</a>(); i &lt; e; ++i) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = cast&lt;ConstantInt&gt;(MD-&gt;<a class="code" href="../../d0/d82/classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">getOperand</a>(i));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    Weights.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>());</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// If TI is a conditional eq, the default case is the false case,</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// and the corresponding branch-weight data is at index 2. We swap the</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// default weight to be the first entry.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a>* BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 2);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = cast&lt;ICmpInst&gt;(BI-&gt;getCondition());</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (ICI-&gt;getPredicate() == ICmpInst::ICMP_EQ)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>(), Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>());</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a7dc983ebf0eb2d255fa90a67063c72e2"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Get zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01302">APInt.h:1302</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a58dc840fc84420b7f0b773794b8101c1"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">llvm::SmallVectorTemplateCommon&lt; T &gt;::front</a></div><div class="ttdeci">reference front()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00149">SmallVector.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_ade17b50e4f0b835cd9eb58dffe12a90d"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html#ade17b50e4f0b835cd9eb58dffe12a90d">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">getNumOperands - Return number of MDNode operands. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00147">Metadata.h:147</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_adb91929f939ff02dbee552d32afaf4e6"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">llvm::MDNode::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const LLVM_READONLY</div><div class="ttdoc">getOperand - Return specified operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00308">Metadata.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00158">SmallVector.h:158</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abfe18d4b03b813d04ffd79e706cc62aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool GetCaseResults </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *&#160;</td>
          <td class="paramname"><em>CaseVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>CaseDest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> **&#160;</td>
          <td class="paramname"><em>CommonDest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; std::pair&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>Res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetCaseResults - Try to determine the resulting constant values in phi nodes at the common destination basic block, *CommonDest, for one of the case destionations CaseDest corresponding to value CaseVal (0 for the default case), of a switch instruction SI. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03396">3396</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;                                     {</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="comment">// The block from which we enter the common destination.</span></div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  <span class="comment">// If CaseDest is empty except for some side-effect free instructions through</span></div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="comment">// which we can constant-propagate the CaseVal, continue to its successor.</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;Value*, Constant*&gt;</a> <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>;</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  ConstantPool.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>(), CaseVal));</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CaseDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = CaseDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;       ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *<a class="code" href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> = dyn_cast&lt;TerminatorInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;      <span class="comment">// If the terminator is a simple branch, continue to the next block.</span></div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>-&gt;getNumSuccessors() != 1)</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      Pred = CaseDest;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      CaseDest = <a class="code" href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>-&gt;getSuccessor(0);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      <span class="comment">// Skip debug intrinsic.</span></div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#abe3a801f7be20378621c4cbca8717aad">ConstantFold</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ConstantPool, DL)) {</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      <span class="comment">// Instruction is side-effect free and constant.</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;      ConstantPool.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="../../db/db2/structC.html">C</a>));</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    }</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  }</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;  <span class="comment">// If we did not have a CommonDest before, use the current one.</span></div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;  <span class="keywordflow">if</span> (!*CommonDest)</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    *CommonDest = CaseDest;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;  <span class="comment">// If the destination isn&#39;t the common one, abort.</span></div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  <span class="keywordflow">if</span> (CaseDest != *CommonDest)</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <span class="comment">// Get the values for this case from phi nodes in the destination block.</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = (*CommonDest)-&gt;begin();</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = dyn_cast&lt;PHINode&gt;(I++)) {</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="keywordtype">int</span> Idx = <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>-&gt;getBasicBlockIndex(Pred);</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    <span class="keywordflow">if</span> (Idx == -1)</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *ConstVal = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a>(<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>-&gt;getIncomingValue(Idx),</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;                                        <a class="code" href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">ConstantPool</a>);</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <span class="keywordflow">if</span> (!ConstVal)</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <span class="comment">// Note: If the constant comes from constant-propagating the case value</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    <span class="comment">// through the CaseDest basic block, it will be safe to remove the</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="comment">// instructions in that block. They cannot be used (except in the phi nodes</span></div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="comment">// we visit) outside CaseDest, because that block does not dominate its</span></div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="comment">// successor. If it did, we would not be in this phi node.</span></div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="comment">// Be conservative about which kinds of constants we support.</span></div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a73476159b3f570043406e83b49ea036c">ValidLookupTableConstant</a>(ConstVal))</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    Res.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>, ConstVal));</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  }</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  <span class="keywordflow">return</span> Res.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &gt; 0;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1"><div class="ttname"><a href="../../de/dc4/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa8cad208c3cb96b33b5d8544590325b1">llvm::ISD::ConstantPool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/da2/ISDOpcodes_8h_source.html#l00063">ISDOpcodes.h:63</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="../../de/deb/classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00681">DenseMap.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_abe3a801f7be20378621c4cbca8717aad"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#abe3a801f7be20378621c4cbca8717aad">ConstantFold</a></div><div class="ttdeci">static Constant * ConstantFold(Instruction *I, const SmallDenseMap&lt; Value *, Constant * &gt; &amp;ConstantPool, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03362">SimplifyCFG.cpp:3362</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0e/Mips16ISelLowering_8cpp_source.html#l00349">Mips16ISelLowering.cpp:349</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00154">DenseMap.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_afe11668c8bd8d29c005ca8e66ba9ef6b"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#afe11668c8bd8d29c005ca8e66ba9ef6b">LookupConstant</a></div><div class="ttdeci">static Constant * LookupConstant(Value *V, const SmallDenseMap&lt; Value *, Constant * &gt; &amp;ConstantPool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03350">SimplifyCFG.cpp:3350</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a73476159b3f570043406e83b49ea036c"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a73476159b3f570043406e83b49ea036c">ValidLookupTableConstant</a></div><div class="ttdeci">static bool ValidLookupTableConstant(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03332">SimplifyCFG.cpp:3332</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b3e10bb6dc8ddc3429611f054743c24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>* GetConstantInt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetConstantInt - Extract ConstantInt from value, looking through IntToPtr and PointerNullValue. Return NULL if value is not a constant int. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00316">316</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                                   {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Normal constant int.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(V);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (CI || !DL || !isa&lt;Constant&gt;(V) || !V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> CI;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// This is some kind of pointer constant. Turn it into a pointer-sized</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// ConstantInt if possible.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *PtrTy = cast&lt;IntegerType&gt;(DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Null pointer means 0, see SelectionDAGBuilder::getValue(const Value*).</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V))</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> ConstantInt::get(PtrTy, 0);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// IntToPtr const int.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::IntToPtr)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(CE-&gt;getOperand(0))) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="comment">// The constant is very likely to have the right type already.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>() == PtrTy)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          <span class="keywordflow">return</span> CI;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="keywordflow">return</span> cast&lt;ConstantInt&gt;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            (ConstantExpr::getIntegerCast(CI, PtrTy, <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a240475f85dea79ec272c578fdf89acf1"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00139">Constants.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ada99fd4fd27356d1518273d8248940a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool HasBranchWeights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00725">725</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                                                          {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a>* ProfMD = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(LLVMContext::MD_prof);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">if</span> (ProfMD &amp;&amp; ProfMD-&gt;<a class="code" href="../../d0/d82/classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">getOperand</a>(0))</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/df6/classllvm_1_1MDString.html">MDString</a>* MDS = dyn_cast&lt;MDString&gt;(ProfMD-&gt;<a class="code" href="../../d0/d82/classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">getOperand</a>(0)))</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">return</span> MDS-&gt;getString().equals(<span class="stringliteral">&quot;branch_weights&quot;</span>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_adb91929f939ff02dbee552d32afaf4e6"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">llvm::MDNode::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const LLVM_READONLY</div><div class="ttdoc">getOperand - Return specified operand. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00308">Metadata.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1MDString_html"><div class="ttname"><a href="../../de/df6/classllvm_1_1MDString.html">llvm::MDString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00040">Metadata.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb11ec5ef64171078a81b9e8d6d56585"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool HasNoDuplicateCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>True if this block contains a CallInst with the NoDuplicate attribute. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01567">1567</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                                                     {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a1cb46775fb4cd36bb709216d0d45bf36">cannotDuplicate</a>())</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01227">Instructions.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a1cb46775fb4cd36bb709216d0d45bf36"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html#a1cb46775fb4cd36bb709216d0d45bf36">llvm::CallInst::cannotDuplicate</a></div><div class="ttdeci">bool cannotDuplicate() const </div><div class="ttdoc">Determine if the call cannot be duplicated. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01435">Instructions.h:1435</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e4deeac4d96f59b190d23a3a5cd3b1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool HoistThenElseCodeToIf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>HoistThenElseCodeToIf - Given a conditional branch that goes to BB1 and BB2, hoist any common code in the two blocks up into the branch block. The caller of this function guarantees that BI's block dominates BB1 and BB2. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01001">1001</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                                                        {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// This does very trivial matching, with limited scanning, to find identical</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// instructions in the two blocks.  In particular, we don&#39;t want to get into</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// O(M*N) situations here where M and N are the sizes of BB1 and BB2.  As</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// such, we currently just scan for obviously identical instructions in an</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// identical order.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB1 = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);  <span class="comment">// The true destination.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB2 = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1);  <span class="comment">// The false destination</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BB1_Itr = BB1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BB2_Itr = BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *I1 = BB1_Itr++, *I2 = BB2_Itr++;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// Skip debug info if it is not identical.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a> *DBI1 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a>&gt;(I1);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a> *DBI2 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a>&gt;(I2);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">if</span> (!DBI1 || !DBI2 || !DBI1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a0998fa064652459be9475ad460ee381f">isIdenticalToWhenDefined</a>(DBI2)) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(I1))</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      I1 = BB1_Itr++;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(I2))</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      I2 = BB2_Itr++;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(I1) || !I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a0998fa064652459be9475ad460ee381f">isIdenticalToWhenDefined</a>(I2) ||</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      (isa&lt;InvokeInst&gt;(I1) &amp;&amp; !<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a3aaba0277f5dd5636e099fa81c20c533">isSafeToHoistInvoke</a>(BB1, BB2, I1, I2)))</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BIParent = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="comment">// If we are hoisting the terminator instruction, don&#39;t move one (making a</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="comment">// broken BB), instead clone it, and remove BI.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (isa&lt;TerminatorInst&gt;(I1))</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">goto</span> HoistTerminator;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// For a normal instruction, we just move one to right before the branch,</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// then replace all uses of the other with the first.  Finally, we remove</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// the now redundant second instruction.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    BIParent-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(BI, BB1-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>(), I1);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (!I2-&gt;use_empty())</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      I2-&gt;replaceAllUsesWith(I1);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    I1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">intersectOptionalDataWith</a>(I2);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    I2-&gt;eraseFromParent();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    I1 = BB1_Itr++;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    I2 = BB2_Itr++;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="comment">// Skip debug info if it is not identical.</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a> *DBI1 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a>&gt;(I1);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a> *DBI2 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">DbgInfoIntrinsic</a>&gt;(I2);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">if</span> (!DBI1 || !DBI2 || !DBI1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a0998fa064652459be9475ad460ee381f">isIdenticalToWhenDefined</a>(DBI2)) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(I1))</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        I1 = BB1_Itr++;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(I2))</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        I2 = BB2_Itr++;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  } <span class="keywordflow">while</span> (I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a0998fa064652459be9475ad460ee381f">isIdenticalToWhenDefined</a>(I2));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;HoistTerminator:</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// It may not be possible to hoist an invoke.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(I1) &amp;&amp; !<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a3aaba0277f5dd5636e099fa81c20c533">isSafeToHoistInvoke</a>(BB1, BB2, I1, I2))</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB1), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB1); SI != E; ++SI) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = SI-&gt;begin();</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         (PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(BBI)); ++BBI) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB1V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB1);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB2V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB2);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">if</span> (BB1V == BB2V)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(BB1V) &amp;&amp; !<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(BB1V, DL))</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(BB2V) &amp;&amp; !<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(BB2V, DL))</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// Okay, it is safe to hoist the terminator.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *NT = I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">clone</a>();</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  BIParent-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(BI, NT);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keywordflow">if</span> (!NT-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>()) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    I1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NT);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    I2-&gt;replaceAllUsesWith(NT);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    NT-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(I1);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;true, NoFolder&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(NT);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Hoisting one of the terminators from our successor is a great thing.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// Unfortunately, the successors of the if/else blocks may have PHI nodes in</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// them.  If they do, all PHI entries for BB1/BB2 must agree for all PHI</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// nodes, so we insert select instruction to compute the final result.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  std::map&lt;std::pair&lt;Value*,Value*&gt;, <a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a>*&gt; InsertedSelects;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB1), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB1); SI != E; ++SI) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = SI-&gt;begin();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         (PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(BBI)); ++BBI) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB1V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB1);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB2V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB2);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordflow">if</span> (BB1V == BB2V) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="comment">// These values do not agree.  Insert a select instruction before NT</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="comment">// that determines the right value.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *&amp;SI = InsertedSelects[std::make_pair(BB1V, BB2V)];</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <span class="keywordflow">if</span> (!SI)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        SI = cast&lt;SelectInst&gt;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;          (<a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>(), BB1V, BB2V,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                BB1V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.&quot;</span>+BB2V-&gt;getName()));</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="comment">// Make the PHI node use the select for all incoming values for BB1/BB2</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i) == BB1 || PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i) == BB2)</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;          PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(i, SI);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// Update any PHI nodes in our new successors.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB1), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB1); SI != E; ++SI)</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a>(*SI, BIParent, BB1);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a>(BI);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a3aaba0277f5dd5636e099fa81c20c533"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a3aaba0277f5dd5636e099fa81c20c533">isSafeToHoistInvoke</a></div><div class="ttdeci">static bool isSafeToHoistInvoke(BasicBlock *BB1, BasicBlock *BB2, Instruction *I1, Instruction *I2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00982">SimplifyCFG.cpp:982</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af6aad0c9ba7b8720130235c9621b55b5"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00523">Instruction.cpp:523</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00104">Interval.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a12b091e586dea5849c4d85723d2cba1b"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">llvm::Value::intersectOptionalDataWith</a></div><div class="ttdeci">void intersectOptionalDataWith(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00378">Value.h:378</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="../../d5/d85/classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00104">IR/CFG.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0998fa064652459be9475ad460ee381f"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a0998fa064652459be9475ad460ee381f">llvm::Instruction::isIdenticalToWhenDefined</a></div><div class="ttdeci">bool isIdenticalToWhenDefined(const Instruction *I) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00329">Instruction.cpp:329</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00219">BasicBlock.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1DbgInfoIntrinsic_html"><div class="ttname"><a href="../../dc/df6/classllvm_1_1DbgInfoIntrinsic.html">llvm::DbgInfoIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00060">IntrinsicInst.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad04d12b08532d23bbd327a7024caad89"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a></div><div class="ttdeci">static void EraseTerminatorInstAndDCECond(TerminatorInst *TI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00454">SimplifyCFG.cpp:454</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01377">IRBuilder.h:1377</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_html_ac2c00585b6b1dd6611da1b7f4bd47d09"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01975">ValueTracking.cpp:1975</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02161">Instructions.h:2161</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_adfeed3997bba12e75a8e51d740f1969d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a></div><div class="ttdeci">static void AddPredecessorToBlock(BasicBlock *Succ, BasicBlock *NewPred, BasicBlock *ExistPred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">SimplifyCFG.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af5c7041df3ad5edffe5da17b5264c1fc"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const </div><div class="ttdoc">isVoidTy - Return true if this is &#39;void&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00137">Type.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a69987e50a47c1566fa22b3cfd696e7ea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isProfitableToFoldUnconditional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>SI1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>SI2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>PhiNodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isProfitableToFoldUnconditional - Return true if it is safe and profitable to merge these two terminator instructions together, where SI1 is an unconditional branch. PhiNodes will store all PHI nodes in common successors. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00151">151</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                                               {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (SI1 == SI2) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Can&#39;t merge with self!</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SI1-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>() &amp;&amp; SI2-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// We fold the unconditional branch if we can easily update all PHI nodes in</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// common successors:</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// 1&gt; We have a constant incoming value for the conditional branch;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// 2&gt; We have &quot;Cond&quot; as the incoming value for the unconditional branch;</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// 3&gt; SI2-&gt;getCondition() and Cond have same operands.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="../../df/de6/classllvm_1_1CmpInst.html">CmpInst</a> *Ci2 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../df/de6/classllvm_1_1CmpInst.html">CmpInst</a>&gt;(SI2-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (!Ci2) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (!(Cond-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == Ci2-&gt;getOperand(0) &amp;&amp;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        Cond-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == Ci2-&gt;getOperand(1)) &amp;&amp;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      !(Cond-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == Ci2-&gt;getOperand(1) &amp;&amp;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        Cond-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == Ci2-&gt;getOperand(0)))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *SI1BB = SI1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *SI2BB = SI2-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> SI1Succs(<a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(SI1BB), <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(SI1BB));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(SI2BB), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(SI2BB); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (SI1Succs.count(*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = (*I)-&gt;begin();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;           isa&lt;PHINode&gt;(BBI); ++BBI) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(BBI);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(SI1BB) != Cond ||</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            !isa&lt;ConstantInt&gt;(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(SI2BB)))</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        PhiNodes.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(PN);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="../../df/de6/classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00654">InstrTypes.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02492">Instructions.h:2492</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00104">Interval.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="../../d5/d85/classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00104">IR/CFG.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02493">Instructions.h:2493</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3aaba0277f5dd5636e099fa81c20c533"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSafeToHoistInvoke </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00982">982</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                                                  {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB1), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB1); SI != E; ++SI) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = SI-&gt;begin();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;         (PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(BBI)); ++BBI) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB1V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB1);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB2V = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB2);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">if</span> (BB1V != BB2V &amp;&amp; (BB1V==I1 || BB2V==I2)) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00104">Interval.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="../../d5/d85/classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00104">IR/CFG.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ced9ed2427730cd9b6903f00cd22e4d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* isSafeToSpeculateStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BrBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>StoreBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>EndBB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if we can hoist sink a sole store instruction out of a conditional block. </p>
<p>We are looking for code like the following: BrBB: store i32 add, i32* arrayidx2 ... // No other stores or function calls (we could be calling a memory ... // function). cmp = icmp ult x, y br i1 cmp, label EndBB, label ThenBB ThenBB: store i32 add5, i32* arrayidx2 br label EndBB EndBB: ... We are going to transform this into: BrBB: store i32 add, i32* arrayidx2 ... // cmp = icmp ult x, y add.add5 = select i1 cmp, i32 add, add5 store i32 add.add5, i32* arrayidx2 ...</p>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the value of the previous store if the store can be hoisted into the predecessor block. 0 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01323">1323</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                                                                             {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *StoreToHoist = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">if</span> (!StoreToHoist)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// Volatile or atomic.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (!StoreToHoist-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a1149c7eeefca671ac2685bca13843568">isSimple</a>())</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StorePtr = StoreToHoist-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>();</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// Look for a store to the same pointer in BrBB.</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="keywordtype">unsigned</span> MaxNumInstToLookAt = 10;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad403e5f1b62843ac7584a2c51c63bfa3">BasicBlock::reverse_iterator</a> RI = BrBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">rbegin</a>(),</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;       RE = BrBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">rend</a>(); RI != RE &amp;&amp; (--MaxNumInstToLookAt); ++RI) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *CurI = &amp;*RI;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// Could be calling an instruction that effects memory like free().</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">if</span> (CurI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>() &amp;&amp; !isa&lt;StoreInst&gt;(CurI))</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>&gt;(CurI);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// Found the previous store make sure it stores to the same location.</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">if</span> (SI &amp;&amp; SI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>() == StorePtr)</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="comment">// Found the previous store, return its value operand.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="keywordflow">return</span> SI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>();</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SI)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Unknown store.</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00360">Instructions.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a1149c7eeefca671ac2685bca13843568"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#a1149c7eeefca671ac2685bca13843568">llvm::StoreInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00355">Instructions.h:355</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00342">Instruction.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a9237251072bf6816163abc2d053212ee"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">llvm::BasicBlock::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00205">BasicBlock.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1c2af7a9e501d399f06ca7e10eef46e4"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">llvm::BasicBlock::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00203">BasicBlock.h:203</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad403e5f1b62843ac7584a2c51c63bfa3"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ad403e5f1b62843ac7584a2c51c63bfa3">llvm::BasicBlock::reverse_iterator</a></div><div class="ttdeci">InstListType::reverse_iterator reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00102">BasicBlock.h:102</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00363">Instructions.h:363</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe11668c8bd8d29c005ca8e66ba9ef6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* LookupConstant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ConstantPool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LookupConstant - If V is a Constant, return it. Otherwise, try to look up its constant value in ConstantPool, returning 0 if it's not there. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03350">3350</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                                                                               {</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keywordflow">return</span> ConstantPool.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(V);</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00144">DenseMap.h:144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d718b79cd2832d71600169ac3e132b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool passingValueIsAlwaysUndefined </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> if passing a value to an instruction will cause undefined behavior. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l04123">4123</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                                                                    {</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>&gt;(V);</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="keywordflow">if</span> (!C)</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  <span class="keywordflow">if</span> (C-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) {</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    <span class="comment">// Only look at the first use, avoid hurting compile time with long uselists</span></div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *<a class="code" href="../../d0/d66/classllvm_1_1Use.html">Use</a> = *I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>();</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    <span class="comment">// Now make sure that there are no instructions in between that can alter</span></div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    <span class="comment">// control flow (eg. calls)</span></div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> i = ++<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(I); &amp;*i != Use; ++i)</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;      <span class="keywordflow">if</span> (i == I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>() || i-&gt;mayHaveSideEffects())</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="comment">// Look through GEPs. A load from a GEP derived from NULL is still undefined</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(Use))</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      <span class="keywordflow">if</span> (GEP-&gt;getPointerOperand() == <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a>(V, GEP);</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;    <span class="comment">// Look through bitcasts.</span></div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> *BC = dyn_cast&lt;BitCastInst&gt;(Use))</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a>(V, BC);</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;    <span class="comment">// Load from null is undefined.</span></div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(Use))</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getPointerAddressSpace() == 0;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="comment">// Store to null is undefined.</span></div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(Use))</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      <span class="keywordflow">if</span> (!SI-&gt;isVolatile())</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <span class="keywordflow">return</span> SI-&gt;getPointerAddressSpace() == 0 &amp;&amp; SI-&gt;getPointerOperand() == <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  }</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a8d718b79cd2832d71600169ac3e132b0"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a></div><div class="ttdeci">static bool passingValueIsAlwaysUndefined(Value *V, Instruction *I)</div><div class="ttdoc">Check if passing a value to an instruction will cause undefined behavior. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l04123">SimplifyCFG.cpp:4123</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2026c2afa149ebc0c1ac8fd091fdc22c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool removeUndefIntroducingPredecessor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If BB has an incoming value that will always trigger undefined behavior (eg. null pointer dereference), remove the branch leading here. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l04165">4165</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;                                                              {</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> i = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;       <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(i); ++i)</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PHI-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i)</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a>(PHI-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i), <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>)) {</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *<a class="code" href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> = PHI-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i)-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(T);</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(T)) {</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;          BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(PHI-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(i));</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;          <span class="comment">// Turn uncoditional branches into unreachables and remove the dead</span></div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;          <span class="comment">// destination from conditional branches.</span></div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;          <span class="keywordflow">if</span> (BI-&gt;isUnconditional())</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0d03639f5d4cef9541e5e8dbe46830cb">CreateUnreachable</a>();</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;            <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(BI-&gt;getSuccessor(0) == BB ? BI-&gt;getSuccessor(1) :</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;                                                         BI-&gt;getSuccessor(0));</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;          BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        }</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="comment">// TODO: SwitchInst.</span></div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;      }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a8d718b79cd2832d71600169ac3e132b0"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a8d718b79cd2832d71600169ac3e132b0">passingValueIsAlwaysUndefined</a></div><div class="ttdeci">static bool passingValueIsAlwaysUndefined(Value *V, Instruction *I)</div><div class="ttdoc">Check if passing a value to an instruction will cause undefined behavior. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l04123">SimplifyCFG.cpp:4123</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="../../df/d0e/Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0e/Mips16ISelLowering_8cpp_source.html#l00349">Mips16ISelLowering.cpp:349</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0d03639f5d4cef9541e5e8dbe46830cb"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0d03639f5d4cef9541e5e8dbe46830cb">llvm::IRBuilder::CreateUnreachable</a></div><div class="ttdeci">UnreachableInst * CreateUnreachable()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00603">IRBuilder.h:603</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0c00110a06b1eb96c92f87e4ca28129a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">llvm::IRBuilder::CreateBr</a></div><div class="ttdeci">BranchInst * CreateBr(BasicBlock *Dest)</div><div class="ttdoc">Create an unconditional &#39;br label X&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00543">IRBuilder.h:543</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02215e210f29948498aeb844022afe53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SafeToMergeTerminators </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *&#160;</td>
          <td class="paramname"><em>SI1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *&#160;</td>
          <td class="paramname"><em>SI2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SafeToMergeTerminators - Return true if it is safe to merge these two terminator instructions together. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00123">123</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                                             {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (SI1 == SI2) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Can&#39;t merge with self!</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// It is not safe to merge these two switch instructions if they have a common</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// successor, and if that successor has a PHI node, and if *that* PHI node has</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// conflicting incoming values from the two switch blocks.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *SI1BB = SI1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *SI2BB = SI2-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> SI1Succs(<a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(SI1BB), <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(SI1BB));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d5/d85/classllvm_1_1SuccIterator.html">succ_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(SI2BB), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(SI2BB); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (SI1Succs.count(*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = (*I)-&gt;begin();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;           isa&lt;PHINode&gt;(BBI); ++BBI) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(BBI);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(SI1BB) !=</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(SI2BB))</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00104">Interval.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="../../d5/d85/classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00104">IR/CFG.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afefef0635df4a6b68cd500f02557aba8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ShouldBuildLookupTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>TableSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>TTI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap</a>&lt; <a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ResultTypes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ShouldBuildLookupTable - Determine whether a lookup table should be built for this switch, based on the number of cases, size of the table and the types of the results. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03666">3666</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;                                                                               {</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &gt; TableSize || TableSize &gt;= UINT64_MAX / 10)</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// TableSize overflowed, or mul below might overflow.</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  <span class="keywordtype">bool</span> AllTablesFitInRegister = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  <span class="keywordtype">bool</span> HasIllegalType = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;PHINode*, Type*&gt;::const_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ResultTypes.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;       E = ResultTypes.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    <span class="comment">// Saturate this flag to true.</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    HasIllegalType = HasIllegalType || !TTI.<a class="code" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html#a83f052a0d908e956128c8951451bde39">isTypeLegal</a>(Ty);</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="comment">// Saturate this flag to false.</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    AllTablesFitInRegister = AllTablesFitInRegister &amp;&amp;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;      SwitchLookupTable::WouldFitInRegister(DL, TableSize, Ty);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    <span class="comment">// If both flags saturate, we&#39;re done. NOTE: This *only* works with</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    <span class="comment">// saturating flags, and all flags have to saturate first due to the</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    <span class="comment">// non-deterministic behavior of iterating over a dense map.</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;    <span class="keywordflow">if</span> (HasIllegalType &amp;&amp; !AllTablesFitInRegister)</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  }</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  <span class="comment">// If each table would fit in a register, we should build it anyway.</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  <span class="keywordflow">if</span> (AllTablesFitInRegister)</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  <span class="comment">// Don&#39;t build a table that doesn&#39;t fit in-register if it has illegal types.</span></div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  <span class="keywordflow">if</span> (HasIllegalType)</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  <span class="comment">// The table density should be at least 40%. This is the same criterion as for</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  <span class="comment">// jump tables, see SelectionDAGBuilder::handleJTSwitchCase.</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="comment">// FIXME: Find the best cut-off.</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="keywordflow">return</span> SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() * 10 &gt;= TableSize * 4;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="../../de/deb/classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00681">DenseMap.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a83f052a0d908e956128c8951451bde39"><div class="ttname"><a href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html#a83f052a0d908e956128c8951451bde39">llvm::TargetTransformInfo::isTypeLegal</a></div><div class="ttdeci">virtual bool isTypeLegal(Type *Ty) const </div><div class="ttdoc">Return true if this type is legal. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/TargetTransformInfo_8cpp_source.html#l00123">TargetTransformInfo.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00058">DenseMap.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00054">DenseMap.h:54</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8967437e3a5c324908374b710061282"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifyBranchOnICmpChain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SimplifyBranchOnICmpChain - The specified branch is a conditional branch. <a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> to see if it is branching on an or/and chain of icmp instructions, and fold it into a switch instruction if so. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02757">2757</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                                                            {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Cond = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="keywordflow">if</span> (!Cond) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <span class="comment">// Change br (X == 0 | X == 1), T, F into a switch instruction.</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="comment">// If this is a bunch of seteq&#39;s or&#39;d together, or if it&#39;s a bunch of</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="comment">// &#39;setne&#39;s and&#39;ed together, collect them.</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *CompVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  std::vector&lt;ConstantInt*&gt; Values;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="keywordtype">bool</span> TrueWhenEqual = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *ExtraCase = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="keywordtype">unsigned</span> UsedICmps = 0;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="keywordflow">if</span> (Cond-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    CompVal = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a>(Cond, Values, ExtraCase, DL, <span class="keyword">true</span>,</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                                     UsedICmps);</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cond-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>) {</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    CompVal = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a>(Cond, Values, ExtraCase, DL, <span class="keyword">false</span>,</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                                     UsedICmps);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    TrueWhenEqual = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  }</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="comment">// If we didn&#39;t have a multiply compared value, fail.</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="keywordflow">if</span> (!CompVal) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="comment">// Avoid turning single icmps into a switch.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="keywordflow">if</span> (UsedICmps &lt;= 1)</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="comment">// There might be duplicate constants in the list, which the switch</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="comment">// instruction can&#39;t handle, remove them now.</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(Values.begin(), Values.end(), <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a8a7f7d7aa56a6449ae814f48b6a8ce6f">ConstantIntSortPredicate</a>);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  Values.erase(std::unique(Values.begin(), Values.end()), Values.end());</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="comment">// If Extra was used, we require at least two switch values to do the</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="comment">// transformation.  A switch with one value is just an cond branch.</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="keywordflow">if</span> (ExtraCase &amp;&amp; Values.size() &lt; 2) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  <span class="comment">// TODO: Preserve branch weight metadata, similarly to how</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  <span class="comment">// FoldValueComparisonIntoPredecessors preserves it.</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <span class="comment">// Figure out which block is which destination.</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *DefaultBB = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1);</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *EdgeBB    = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="keywordflow">if</span> (!TrueWhenEqual) <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(DefaultBB, EdgeBB);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Converting &#39;icmp&#39; chain with &quot;</span> &lt;&lt; Values.size()</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; cases into SWITCH.  BB is:\n&quot;</span> &lt;&lt; *BB);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="comment">// If there are any extra values that couldn&#39;t be folded into the switch</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">// then we evaluate them with an explicit branch first.  Split the block</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="comment">// right before the condbr to handle it.</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="keywordflow">if</span> (ExtraCase) {</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">splitBasicBlock</a>(BI, <span class="stringliteral">&quot;switch.early.test&quot;</span>);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="comment">// Remove the uncond branch added to the old block.</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *OldTI = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(OldTI);</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="keywordflow">if</span> (TrueWhenEqual)</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;      Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(ExtraCase, EdgeBB, NewBB);</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(ExtraCase, NewBB, EdgeBB);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    OldTI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="comment">// If there are PHI nodes in EdgeBB, then we need to add a new entry to them</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="comment">// for the edge we just added.</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a>(EdgeBB, BB, NewBB);</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  ** &#39;icmp&#39; chain unhandled condition: &quot;</span> &lt;&lt; *ExtraCase</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;\nEXTRABB = &quot;</span> &lt;&lt; *BB);</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    BB = NewBB;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  }</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(BI);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">// Convert pointer to int before we switch.</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="keywordflow">if</span> (CompVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(DL &amp;&amp; <span class="stringliteral">&quot;Cannot switch on pointer without DataLayout&quot;</span>);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    CompVal = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(CompVal,</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                                     DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(CompVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                                     <span class="stringliteral">&quot;magicptr&quot;</span>);</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="comment">// Create the new switch instruction now.</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *New = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a6c1e31454b61d119391550487455dcea">CreateSwitch</a>(CompVal, DefaultBB, Values.<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aed28607f3ab19dda7ec1cf1a0319276f">size</a>());</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// Add all of the &#39;cases&#39; to the switch instruction.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Values.size(); i != e; ++i)</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    New-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">addCase</a>(Values[i], EdgeBB);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="comment">// We added edges from PI to the EdgeBB.  As such, if there were any</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="comment">// PHI nodes in EdgeBB, they need entries to be added corresponding to</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="comment">// the number of edges added.</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = EdgeBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;       isa&lt;PHINode&gt;(BBI); ++BBI) {</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(BBI);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Values.size()-1; i != e; ++i)</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InVal, BB);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <span class="comment">// Erase the old branch instruction.</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a>(BI);</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  ** &#39;icmp&#39; chain result is:\n&quot;</span> &lt;&lt; *BB &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a62abc2475d09c01d583ba24a487898fd"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">llvm::SwitchInst::addCase</a></div><div class="ttdeci">void addCase(ConstantInt *OnVal, BasicBlock *Dest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l03412">Instructions.cpp:3412</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a6c1e31454b61d119391550487455dcea"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a6c1e31454b61d119391550487455dcea">llvm::IRBuilder::CreateSwitch</a></div><div class="ttdeci">SwitchInst * CreateSwitch(Value *V, BasicBlock *Dest, unsigned NumCases=10, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">Create a switch instruction with the specified value, default dest, and with a hint for the number of...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00558">IRBuilder.h:558</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aebf44e187e9dfd25f09b1de6cb1767e1"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">llvm::IRBuilder::CreateCondBr</a></div><div class="ttdeci">BranchInst * CreateCondBr(Value *Cond, BasicBlock *True, BasicBlock *False, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">Create a conditional &#39;br Cond, TrueDest, FalseDest&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00549">IRBuilder.h:549</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a8a7f7d7aa56a6449ae814f48b6a8ce6f"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a8a7f7d7aa56a6449ae814f48b6a8ce6f">ConstantIntSortPredicate</a></div><div class="ttdeci">static int ConstantIntSortPredicate(ConstantInt *const *P1, ConstantInt *const *P2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00714">SimplifyCFG.cpp:714</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="namespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/STLExtras_8h_source.html#l00335">STLExtras.h:335</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9299aed1efa0ef459a0f1c7fa11fbe61"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">llvm::IRBuilder::CreatePtrToInt</a></div><div class="ttdeci">Value * CreatePtrToInt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01150">IRBuilder.h:1150</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad04d12b08532d23bbd327a7024caad89"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a></div><div class="ttdeci">static void EraseTerminatorInstAndDCECond(TerminatorInst *TI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00454">SimplifyCFG.cpp:454</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a19445f836d9e1ecb32cba27ec4338fff"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00302">BasicBlock.cpp:302</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aed28607f3ab19dda7ec1cf1a0319276f"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aed28607f3ab19dda7ec1cf1a0319276f">llvm::BasicBlock::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00208">BasicBlock.h:208</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02550">Instructions.h:2550</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a80e67015c6e209209474a445fe9c16c2"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a80e67015c6e209209474a445fe9c16c2">GatherConstantCompares</a></div><div class="ttdeci">static Value * GatherConstantCompares(Value *V, std::vector&lt; ConstantInt * &gt; &amp;Vals, Value *&amp;Extra, const DataLayout *DL, bool isEQ, unsigned &amp;UsedICmps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00349">SimplifyCFG.cpp:349</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_adfeed3997bba12e75a8e51d740f1969d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a></div><div class="ttdeci">static void AddPredecessorToBlock(BasicBlock *Succ, BasicBlock *NewPred, BasicBlock *ExistPred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">SimplifyCFG.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a285d756a993fe2460d35129ba58f92a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifyCondBranchToCondBranch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>PBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SimplifyCondBranchToCondBranch - If we have a conditional branch as a predecessor of another block, this function tries to simplify it. We know that PBI and BI are both conditional branches, and BI is in one of the successor blocks of PBI - PBI branches to BI. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02297">2297</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                                                                            {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() &amp;&amp; BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>());</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="comment">// If this block ends with a branch instruction, and if there is a</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="comment">// predecessor that ends on a branch of the same condition, make</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="comment">// this conditional branch redundant.</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>() == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>() &amp;&amp;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) != PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1)) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="comment">// Okay, the outcome of this conditional branch is statically</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="comment">// knowable.  If this block had a single pred, handle specially.</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">if</span> (BB-&gt;getSinglePredecessor()) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="comment">// Turn this into a branch on constant.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <span class="keywordtype">bool</span> CondIsTrue = PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) == BB;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(ConstantInt::get(Type::getInt1Ty(BB-&gt;getContext()),</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                                        CondIsTrue));</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Nuke the branch on constant.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="comment">// Otherwise, if there are multiple predecessors, insert a PHI that merges</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="comment">// in the constant and simplify the block result.  Subsequent passes of</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="comment">// simplifycfg will thread the block.</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a03a2d451a241c934af3405a7cfc8adb4">BlockIsSimpleEnoughToThreadThrough</a>(BB)) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <a class="code" href="../../d2/df6/classllvm_1_1PredIterator.html">pred_iterator</a> PB = <a class="code" href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">PHINode::Create</a>(Type::getInt1Ty(BB-&gt;getContext()),</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                                       std::distance(PB, PE),</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                       BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.pr&quot;</span>,</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                                       BB-&gt;<a class="code" href="../../d2/d5b/classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>());</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="comment">// Okay, we&#39;re going to insert the PHI node.  Since PBI is not the only</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="comment">// predecessor, compute the PHI&#39;d conditional value for all of the preds.</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      <span class="comment">// Any predecessor where the condition is not computable we keep symbolic.</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d2/df6/classllvm_1_1PredIterator.html">pred_iterator</a> PI = PB; PI != PE; ++PI) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = *PI;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span> ((PBI = dyn_cast&lt;BranchInst&gt;(P-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) &amp;&amp;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            PBI != BI &amp;&amp; PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() &amp;&amp;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>() == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>() &amp;&amp;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) != PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1)) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;          <span class="keywordtype">bool</span> CondIsTrue = PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) == BB;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;          NewPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ConstantInt::get(Type::getInt1Ty(BB-&gt;getContext()),</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                                              CondIsTrue), <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;          NewPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>(), <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(NewPN);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="comment">// If this is a conditional branch in an empty block, and if any</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// predecessors are a conditional branch to one of our destinations,</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="comment">// fold the conditions into logical ops and one cond br.</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB-&gt;begin();</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="comment">// Ignore dbg intrinsics.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI))</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    ++BBI;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="keywordflow">if</span> (&amp;*BBI != BI)</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>()))</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;canTrap())</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="keywordtype">int</span> PBIOp, BIOp;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0))</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    PBIOp = BIOp = 0;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1))</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    PBIOp = 0, BIOp = 1;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1) == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0))</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    PBIOp = 1, BIOp = 0;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1) == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1))</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    PBIOp = BIOp = 1;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="comment">// Check to make sure that the other destination of this branch</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// isn&#39;t BB itself.  If so, this is an infinite loop that will</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="comment">// keep getting unwound.</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">if</span> (PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(PBIOp) == BB)</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="comment">// Do not perform this transformation if it would require</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="comment">// insertion of a large number of select instructions. For targets</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="comment">// without predication/cmovs, this is a big pessimization.</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="comment">// Also do not perform this transformation if any phi node in the common</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="comment">// destination block can trap when reached by BB or PBB (PR17073). In that</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="comment">// case, it would be unsafe to hoist the operation into a select instruction.</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonDest = PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(PBIOp);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordtype">unsigned</span> NumPhis = 0;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;       isa&lt;PHINode&gt;(II); ++II, ++NumPhis) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">if</span> (NumPhis &gt; 2) <span class="comment">// Disable this xform.</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(II);</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BIV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(BIV))</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;canTrap())</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="keywordtype">unsigned</span> PBBIdx = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *PBIV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(PBBIdx);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(PBIV))</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;canTrap())</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  }</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="comment">// Finally, if everything is ok, fold the branches to logical ops.</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *OtherDest = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(BIOp ^ 1);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FOLDING BRs:&quot;</span> &lt;&lt; *PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;AND: &quot;</span> &lt;&lt; *BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="comment">// If OtherDest *is* BB, then BB is a basic block with a single conditional</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="comment">// branch in it, where one edge (OtherDest) goes back to itself but the other</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="comment">// exits.  We don&#39;t *know* that the program avoids the infinite loop</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// (even though that seems likely).  If we do this xform naively, we&#39;ll end up</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="comment">// recursively unpeeling the loop.  Since we know that (after the xform is</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="comment">// done) that the block *is* infinite if reached, we just make it an obviously</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="comment">// infinite loop with no cond branch.</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="keywordflow">if</span> (OtherDest == BB) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="comment">// Insert it at the end of the function, because it&#39;s either code,</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">// or it won&#39;t matter if it&#39;s hot. :)</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *InfLoopBlock = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(BB-&gt;getContext(),</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                                                  <span class="stringliteral">&quot;infloop&quot;</span>, BB-&gt;getParent());</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BranchInst::Create</a>(InfLoopBlock, InfLoopBlock);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    OtherDest = InfLoopBlock;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>());</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="comment">// BI may have other predecessors.  Because of this, we leave</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="comment">// it alone, but modify PBI.</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="comment">// Make sure we get to CommonDest on True&amp;True directions.</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *PBICond = PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>();</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;true, NoFolder&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(PBI);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keywordflow">if</span> (PBIOp)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    PBICond = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(PBICond, PBICond-&gt;getName()+<span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BICond = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>();</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <span class="keywordflow">if</span> (BIOp)</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    BICond = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(BICond, BICond-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="comment">// Merge the conditions.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cond = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(PBICond, BICond, <span class="stringliteral">&quot;brmerge&quot;</span>);</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <span class="comment">// Modify PBI to branch on the new condition to the new dests.</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(Cond);</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#adc5e7f9c460c68455e826783d77f9a99">setSuccessor</a>(0, CommonDest);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  PBI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#adc5e7f9c460c68455e826783d77f9a99">setSuccessor</a>(1, OtherDest);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="comment">// Update branch weight for PBI.</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  uint64_t PredTrueWeight, PredFalseWeight, SuccTrueWeight, SuccFalseWeight;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  <span class="keywordtype">bool</span> PredHasWeights = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a50c9506d55e08fb67115a29dde75388a">ExtractBranchMetadata</a>(PBI, PredTrueWeight,</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                                              PredFalseWeight);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="keywordtype">bool</span> SuccHasWeights = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a50c9506d55e08fb67115a29dde75388a">ExtractBranchMetadata</a>(BI, SuccTrueWeight,</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                              SuccFalseWeight);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <span class="keywordflow">if</span> (PredHasWeights &amp;&amp; SuccHasWeights) {</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    uint64_t PredCommon = PBIOp ? PredFalseWeight : PredTrueWeight;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    uint64_t PredOther = PBIOp ?PredTrueWeight : PredFalseWeight;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    uint64_t SuccCommon = BIOp ? SuccFalseWeight : SuccTrueWeight;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    uint64_t SuccOther = BIOp ? SuccTrueWeight : SuccFalseWeight;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="comment">// The weight to CommonDest should be PredCommon * SuccTotal +</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="comment">//                                    PredOther * SuccCommon.</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="comment">// The weight to OtherDest should be PredOther * SuccOther.</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 2&gt;</a> NewWeights;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    NewWeights.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(PredCommon * (SuccCommon + SuccOther) +</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                         PredOther * SuccCommon);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    NewWeights.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(PredOther * SuccOther);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="comment">// Halve the weights if any of them cannot fit in an uint32_t</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a95ec32778f2bb913dc4cc45ac7a66e42">FitWeights</a>(NewWeights);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 2&gt;</a> MDWeights(NewWeights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),NewWeights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                     <a class="code" href="../../d7/d3f/classllvm_1_1MDBuilder.html">MDBuilder</a>(BI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()).</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                     createBranchWeights(MDWeights));</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  }</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="comment">// OtherDest may have phi nodes.  If so, add an entry from PBI&#39;s</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="comment">// block that are identical to the entries for BI&#39;s block.</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a>(OtherDest, PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), BB);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="comment">// We know that the CommonDest already had an edge from PBI to</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">// it.  If it has PHIs though, the PHIs may have different</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="comment">// entries for BB and PBI&#39;s BB.  If so, insert a select to make</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="comment">// them agree.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;       (PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(II)); ++II) {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BIV = PN-&gt;getIncomingValueForBlock(BB);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="keywordtype">unsigned</span> PBBIdx = PN-&gt;getBasicBlockIndex(PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *PBIV = PN-&gt;getIncomingValue(PBBIdx);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="keywordflow">if</span> (BIV != PBIV) {</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="comment">// Insert a select in PBI to pick the right value.</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">NV</a> = cast&lt;SelectInst&gt;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        (<a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(PBICond, PBIV, BIV, PBIV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.mux&quot;</span>));</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      PN-&gt;setIncomingValue(PBBIdx, NV);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    }</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;INTO: &quot;</span> &lt;&lt; *PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *PBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>());</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="comment">// This basic block is probably dead.  We know it has at least</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">// one fewer predecessor.</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00115">SmallVector.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="../../d2/df6/classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00029">IR/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28af30bd33ca066862c72c3dd3bd128443d">llvm::AArch64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00208">AArch64BaseInfo.h:208</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a03a2d451a241c934af3405a7cfc8adb4"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a03a2d451a241c934af3405a7cfc8adb4">BlockIsSimpleEnoughToThreadThrough</a></div><div class="ttdeci">static bool BlockIsSimpleEnoughToThreadThrough(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01580">SimplifyCFG.cpp:1580</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8f55dd4237be6778517ddd752ca8b76a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">llvm::IRBuilder::CreateOr</a></div><div class="ttdeci">Value * CreateOr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00822">IRBuilder.h:822</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a4a0abf8eb4fa5989df63172649cba99f"><div class="ttname"><a href="../../d2/d5b/classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">llvm::StringRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd0/StringRef_8h_source.html#l00096">StringRef.h:96</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9f4834f0678648c5ac86c9ab37210be3"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">llvm::IRBuilder::CreateNot</a></div><div class="ttdeci">Value * CreateNot(Value *V, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00885">IRBuilder.h:885</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00114">Interval.h:114</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_adc5e7f9c460c68455e826783d77f9a99"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#adc5e7f9c460c68455e826783d77f9a99">llvm::BranchInst::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned idx, BasicBlock *NewSucc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02512">Instructions.h:2512</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02493">Instructions.h:2493</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a50c9506d55e08fb67115a29dde75388a"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a50c9506d55e08fb67115a29dde75388a">ExtractBranchMetadata</a></div><div class="ttdeci">static bool ExtractBranchMetadata(BranchInst *BI, uint64_t &amp;ProbTrue, uint64_t &amp;ProbFalse)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01931">SimplifyCFG.cpp:1931</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01377">IRBuilder.h:1377</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00113">SmallVector.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a3505dab06f59c36142a234321cdc3411"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">llvm::BranchInst::setCondition</a></div><div class="ttdeci">void setCondition(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02500">Instructions.h:2500</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a95ec32778f2bb913dc4cc45ac7a66e42"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a95ec32778f2bb913dc4cc45ac7a66e42">FitWeights</a></div><div class="ttdeci">static void FitWeights(MutableArrayRef&lt; uint64_t &gt; Weights)</div><div class="ttdoc">Keep halving the weights until all can fit in uint32_t. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00758">SimplifyCFG.cpp:758</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_adfeed3997bba12e75a8e51d740f1969d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a></div><div class="ttdeci">static void AddPredecessorToBlock(BasicBlock *Succ, BasicBlock *NewPred, BasicBlock *ExistPred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">SimplifyCFG.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5c2b7d7f19aac93b27b845858a7eb73e"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02230">Instructions.h:2230</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="../../d7/d3f/classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/MDBuilder_8h_source.html#l00030">MDBuilder.h:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e1b28b7b4b85744d3a02881d4601122"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifyCondBranchToTwoReturns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SimplifyCondBranchToTwoReturns - If we found a conditional branch that goes to two returning blocks, try to merge them together into one return, introducing a select if the return values disagree. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01842">1842</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                                                 {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;Must be a conditional branch&quot;</span>);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueSucc = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseSucc = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html">ReturnInst</a> *TrueRet = cast&lt;ReturnInst&gt;(TrueSucc-&gt;getTerminator());</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html">ReturnInst</a> *FalseRet = cast&lt;ReturnInst&gt;(FalseSucc-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// Check to ensure both blocks are empty (just a return) or optionally empty</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="comment">// with PHI nodes.  If there are other instructions, merging would cause extra</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="comment">// computation on one path or the other.</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="keywordflow">if</span> (!TrueSucc-&gt;getFirstNonPHIOrDbg()-&gt;isTerminator())</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordflow">if</span> (!FalseSucc-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">getFirstNonPHIOrDbg</a>()-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">isTerminator</a>())</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(BI);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// Okay, we found a branch that is going to two return nodes.  If</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// there is no return value for this function, just change the</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="comment">// branch into a return.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordflow">if</span> (FalseRet-&gt;getNumOperands() == 0) {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    TrueSucc-&gt;removePredecessor(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    FalseSucc-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a5d84e72ef1f1b122131557e4b44f2f0d">CreateRetVoid</a>();</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a>(BI);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="comment">// Otherwise, figure out what the true and false return values are</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="comment">// so we can insert a new select instruction.</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TrueValue = TrueRet-&gt;<a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">getReturnValue</a>();</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FalseValue = FalseRet-&gt;getReturnValue();</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="comment">// Unwrap any PHI nodes in the return blocks.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *TVPN = dyn_cast_or_null&lt;PHINode&gt;(TrueValue))</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="keywordflow">if</span> (TVPN-&gt;getParent() == TrueSucc)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      TrueValue = TVPN-&gt;getIncomingValueForBlock(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *FVPN = dyn_cast_or_null&lt;PHINode&gt;(FalseValue))</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">if</span> (FVPN-&gt;getParent() == FalseSucc)</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      FalseValue = FVPN-&gt;getIncomingValueForBlock(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="comment">// In order for this transformation to be safe, we must be able to</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">// unconditionally execute both operands to the return.  This is</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="comment">// normally the case, but we could have a potentially-trapping</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="comment">// constant expression that prevents this transformation from being</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="comment">// safe.</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *TCV = dyn_cast_or_null&lt;ConstantExpr&gt;(TrueValue))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> (TCV-&gt;canTrap())</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *FCV = dyn_cast_or_null&lt;ConstantExpr&gt;(FalseValue))</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordflow">if</span> (FCV-&gt;canTrap())</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="comment">// Okay, we collected all the mapped values and checked them for sanity, and</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">// defined to really do this transformation.  First, update the CFG.</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  TrueSucc-&gt;removePredecessor(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  FalseSucc-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="comment">// Insert select instructions where needed.</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BrCond = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>();</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordflow">if</span> (TrueValue) {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="comment">// Insert a select if the results differ.</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (TrueValue == FalseValue || isa&lt;UndefValue&gt;(FalseValue)) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(TrueValue)) {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      TrueValue = FalseValue;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      TrueValue = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(BrCond, TrueValue,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                       FalseValue, <span class="stringliteral">&quot;retval&quot;</span>);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    }</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RI = !TrueValue ?</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a5d84e72ef1f1b122131557e4b44f2f0d">CreateRetVoid</a>() : Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a08a2941811ad93b69f0174b5e8104cc6">CreateRet</a>(TrueValue);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  (void) RI;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nCHANGING BRANCH TO TWO RETURNS INTO SELECT:&quot;</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;\n  &quot;</span> &lt;&lt; *BI &lt;&lt; <span class="stringliteral">&quot;NewRet = &quot;</span> &lt;&lt; *RI</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;TRUEBLOCK: &quot;</span> &lt;&lt; *TrueSucc &lt;&lt; <span class="stringliteral">&quot;FALSEBLOCK: &quot;</span>&lt;&lt; *FalseSucc);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a>(BI);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ReturnInst_html"><div class="ttname"><a href="../../d9/d12/classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02379">Instructions.h:2379</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a225cbda41f4c27fbb522833e31cb18f9"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">Instruction * getFirstNonPHIOrDbg()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00144">BasicBlock.cpp:144</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_a7f6ab6ba1947d832a651e3589614a10d"><div class="ttname"><a href="../../d9/d12/classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">llvm::ReturnInst::getReturnValue</a></div><div class="ttdeci">Value * getReturnValue() const </div><div class="ttdoc">Convenience accessor. Returns null if there is no return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02418">Instructions.h:2418</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a08a2941811ad93b69f0174b5e8104cc6"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a08a2941811ad93b69f0174b5e8104cc6">llvm::IRBuilder::CreateRet</a></div><div class="ttdeci">ReturnInst * CreateRet(Value *V)</div><div class="ttdoc">Create a &#39;ret &lt;val&gt;&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00524">IRBuilder.h:524</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a237e6bf58bc993ea494bdde7480ca428"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00089">Instruction.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02493">Instructions.h:2493</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad04d12b08532d23bbd327a7024caad89"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a></div><div class="ttdeci">static void EraseTerminatorInstAndDCECond(TerminatorInst *TI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00454">SimplifyCFG.cpp:454</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01377">IRBuilder.h:1377</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a5d84e72ef1f1b122131557e4b44f2f0d"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a5d84e72ef1f1b122131557e4b44f2f0d">llvm::IRBuilder::CreateRetVoid</a></div><div class="ttdeci">ReturnInst * CreateRetVoid()</div><div class="ttdoc">Create a &#39;ret void&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00519">IRBuilder.h:519</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ab1a6ec499c9bfd45258e149aa555c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifyIndirectBrOnSelect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d82/classllvm_1_1IndirectBrInst.html">IndirectBrInst</a> *&#160;</td>
          <td class="paramname"><em>IBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02617">2617</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                                                            {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="comment">// Check that both operands of the select are block addresses.</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a> *TBA = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a>&gt;(SI-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>());</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a> *FBA = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a>&gt;(SI-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>());</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="keywordflow">if</span> (!TBA || !FBA)</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="comment">// Extract the actual blocks.</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB = TBA-&gt;<a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html#a976bfd676bf773eadde49138cfc7dcb5">getBasicBlock</a>();</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseBB = FBA-&gt;getBasicBlock();</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="comment">// Perform the actual simplification.</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#aae15857ee04fb44315481a693e4562c4">SimplifyTerminatorOnSelect</a>(IBI, SI-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(), TrueBB, FalseBB,</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                                    0, 0);</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BlockAddress_html"><div class="ttname"><a href="../../d2/d23/classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00748">Constants.h:748</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_aae15857ee04fb44315481a693e4562c4"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#aae15857ee04fb44315481a693e4562c4">SimplifyTerminatorOnSelect</a></div><div class="ttdeci">static bool SimplifyTerminatorOnSelect(TerminatorInst *OldTerm, Value *Cond, BasicBlock *TrueBB, BasicBlock *FalseBB, uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02516">SimplifyCFG.cpp:2516</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01564">Instructions.h:1564</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01565">Instructions.h:1565</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html_a976bfd676bf773eadde49138cfc7dcb5"><div class="ttname"><a href="../../d2/d23/classllvm_1_1BlockAddress.html#a976bfd676bf773eadde49138cfc7dcb5">llvm::BlockAddress::getBasicBlock</a></div><div class="ttdeci">BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00770">Constants.h:770</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01566">Instructions.h:1566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0d7fe1e3aa12d83e0af774a398d34ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifySwitchOnSelect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *&#160;</td>
          <td class="paramname"><em>Select</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02581">2581</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                                                                       {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <span class="comment">// Check for constant integer values in the select.</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *TrueVal = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(Select-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>());</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *FalseVal = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(Select-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>());</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  <span class="keywordflow">if</span> (!TrueVal || !FalseVal)</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="comment">// Find the relevant condition and destinations.</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Condition = Select-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(TrueVal).<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>();</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseBB = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(FalseVal).<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>();</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="comment">// Get weight for TrueBB and FalseBB.</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  uint32_t TrueWeight = 0, FalseWeight = 0;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 8&gt;</a> Weights;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <span class="keywordtype">bool</span> HasWeights = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a>(SI);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <span class="keywordflow">if</span> (HasWeights) {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a>(SI, Weights);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="keywordflow">if</span> (Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 + SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>()) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      TrueWeight = (uint32_t)Weights[SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(TrueVal).</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                                     getSuccessorIndex()];</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      FalseWeight = (uint32_t)Weights[SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(FalseVal).</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                                      getSuccessorIndex()];</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    }</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  }</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <span class="comment">// Perform the actual simplification.</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#aae15857ee04fb44315481a693e4562c4">SimplifyTerminatorOnSelect</a>(SI, Condition, TrueBB, FalseBB,</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                                    TrueWeight, FalseWeight);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a165512f38f31f01e7f18bf3838f3a12e"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a></div><div class="ttdeci">static void GetBranchWeights(TerminatorInst *TI, SmallVectorImpl&lt; uint64_t &gt; &amp;Weights)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00737">SimplifyCFG.cpp:737</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_aae15857ee04fb44315481a693e4562c4"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#aae15857ee04fb44315481a693e4562c4">SimplifyTerminatorOnSelect</a></div><div class="ttdeci">static bool SimplifyTerminatorOnSelect(TerminatorInst *OldTerm, Value *Cond, BasicBlock *TrueBB, BasicBlock *FalseBB, uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02516">SimplifyCFG.cpp:2516</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ada99fd4fd27356d1518273d8248940a5"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a></div><div class="ttdeci">static bool HasBranchWeights(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00725">SimplifyCFG.cpp:725</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01564">Instructions.h:1564</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01565">Instructions.h:1565</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a143819a808ec85e9997566fdf42e9372"><div class="ttname"><a href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">llvm::SwitchInst::CaseIteratorT::getCaseSuccessor</a></div><div class="ttdeci">BasicBlockTy * getCaseSuccessor()</div><div class="ttdoc">Resolves successor for current case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02619">Instructions.h:2619</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ad3a1537c850f63ce48bcf45694cde73f"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">llvm::SwitchInst::findCaseValue</a></div><div class="ttdeci">CaseIt findCaseValue(const ConstantInt *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02780">Instructions.h:2780</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01566">Instructions.h:1566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae15857ee04fb44315481a693e4562c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SimplifyTerminatorOnSelect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *&#160;</td>
          <td class="paramname"><em>OldTerm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>TrueBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>FalseBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>TrueWeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>FalseWeight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02516">2516</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                                                            {</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// Remove any superfluous successor edges from the CFG.</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// First, figure out which successors to preserve.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="comment">// If TrueBB and FalseBB are equal, only try to preserve one copy of that</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// successor.</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *KeepEdge1 = TrueBB;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *KeepEdge2 = TrueBB != FalseBB ? FalseBB : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="comment">// Then remove the rest.</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = OldTerm-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = OldTerm-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="comment">// Make sure only to keep exactly one copy of each edge.</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keywordflow">if</span> (Succ == KeepEdge1)</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      KeepEdge1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Succ == KeepEdge2)</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      KeepEdge2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      Succ-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(OldTerm-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  }</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(OldTerm);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">SetCurrentDebugLocation</a>(OldTerm-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="comment">// Insert an appropriate new terminator.</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordflow">if</span> (!KeepEdge1 &amp;&amp; !KeepEdge2) {</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> (TrueBB == FalseBB)</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="comment">// We were only looking for one successor, and it was present.</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="comment">// Create an unconditional branch to it.</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(TrueBB);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="comment">// We found both of the successors we were looking for.</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="comment">// Create a conditional branch sharing the condition of the select.</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *NewBI = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(Cond, TrueBB, FalseBB);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <span class="keywordflow">if</span> (TrueWeight != FalseWeight)</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        NewBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                           <a class="code" href="../../d7/d3f/classllvm_1_1MDBuilder.html">MDBuilder</a>(OldTerm-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()).</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                           createBranchWeights(TrueWeight, FalseWeight));</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (KeepEdge1 &amp;&amp; (KeepEdge2 || TrueBB == FalseBB)) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="comment">// Neither of the selected blocks were successors, so this</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="comment">// terminator must be unreachable.</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keyword">new</span> <a class="code" href="../../d0/d0d/classllvm_1_1UnreachableInst.html">UnreachableInst</a>(OldTerm-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), OldTerm);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="comment">// One of the selected values was a successor, but the other wasn&#39;t.</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="comment">// Insert an unconditional branch to the one that was found;</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    <span class="comment">// the edge to the one that wasn&#39;t must be unreachable.</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">if</span> (!KeepEdge1)</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <span class="comment">// Only TrueBB was found.</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(TrueBB);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      <span class="comment">// Only FalseBB was found.</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(FalseBB);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  }</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a>(OldTerm);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a571ae7ebae7038da7f6073efc65aaa50"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">llvm::IRBuilderBase::SetCurrentDebugLocation</a></div><div class="ttdeci">void SetCurrentDebugLocation(const DebugLoc &amp;L)</div><div class="ttdoc">Set location information used by debugging information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00118">IRBuilder.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aebf44e187e9dfd25f09b1de6cb1767e1"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">llvm::IRBuilder::CreateCondBr</a></div><div class="ttdeci">BranchInst * CreateCondBr(Value *Cond, BasicBlock *True, BasicBlock *False, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">Create a conditional &#39;br Cond, TrueDest, FalseDest&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00549">IRBuilder.h:549</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1UnreachableInst_html"><div class="ttname"><a href="../../d0/d0d/classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03284">Instructions.h:3284</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ad04d12b08532d23bbd327a7024caad89"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ad04d12b08532d23bbd327a7024caad89">EraseTerminatorInstAndDCECond</a></div><div class="ttdeci">static void EraseTerminatorInstAndDCECond(TerminatorInst *TI)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00454">SimplifyCFG.cpp:454</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0c00110a06b1eb96c92f87e4ca28129a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">llvm::IRBuilder::CreateBr</a></div><div class="ttdeci">BranchInst * CreateBr(BasicBlock *Dest)</div><div class="ttdoc">Create an unconditional &#39;br label X&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00543">IRBuilder.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="../../d7/d3f/classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/MDBuilder_8h_source.html#l00030">MDBuilder.h:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a136cc7ed9c1041928df9f03631026a0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SinkThenElseCodeToEnd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI1</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SinkThenElseCodeToEnd - Given an unconditional branch that goes to BBEnd, check whether BBEnd has only two predecessors and the other predecessor ends with an unconditional branch. If it is true, sink any common code in the two predecessors to BBEnd. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01132">1132</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                                   {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(BI1-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>());</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB1 = BI1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BBEnd = BI1-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// Check that BBEnd has two predecessors and the other predecessor ends with</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// an unconditional branch.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="../../d2/df6/classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BBEnd), PE = <a class="code" href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BBEnd);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred0 = *PI++;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">if</span> (PI == PE) <span class="comment">// Only one predecessor.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred1 = *PI++;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">if</span> (PI != PE) <span class="comment">// More than two predecessors.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB2 = (Pred0 == BB1) ? Pred1 : Pred0;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *BI2 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (!BI2 || !BI2-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>())</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// Gather the PHI nodes in BBEnd.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  std::map&lt;Value*, std::pair&lt;Value*, PHINode*&gt; &gt; MapValueFromBB1ToBB2;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *FirstNonPhiInBBEnd = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBEnd-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = BBEnd-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB1V = PN-&gt;getIncomingValueForBlock(BB1);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BB2V = PN-&gt;getIncomingValueForBlock(BB2);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      MapValueFromBB1ToBB2[BB1V] = std::make_pair(BB2V, PN);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      FirstNonPhiInBBEnd = &amp;*<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">if</span> (!FirstNonPhiInBBEnd)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// This does very trivial matching, with limited scanning, to find identical</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// instructions in the two blocks.  We scan backward for obviously identical</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// instructions in an identical order.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#ab1b660345b57db3d80ad42123d6163ce">BasicBlock::InstListType::reverse_iterator</a> RI1 = BB1-&gt;getInstList().rbegin(),</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      RE1 = BB1-&gt;getInstList().rend(), RI2 = BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#ad5f5ac50ca28fc89c173eb3d64344afc">rbegin</a>(),</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      RE2 = BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a99d24ef8a3c3b81d43fa244e43f976fc">rend</a>();</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// Skip debug info.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">while</span> (RI1 != RE1 &amp;&amp; isa&lt;DbgInfoIntrinsic&gt;(&amp;*RI1)) ++RI1;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">if</span> (RI1 == RE1)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">while</span> (RI2 != RE2 &amp;&amp; isa&lt;DbgInfoIntrinsic&gt;(&amp;*RI2)) ++RI2;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (RI2 == RE2)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// Skip the unconditional branches.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  ++RI1;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  ++RI2;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">while</span> (RI1 != RE1 &amp;&amp; RI2 != RE2) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// Skip debug info.</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">while</span> (RI1 != RE1 &amp;&amp; isa&lt;DbgInfoIntrinsic&gt;(&amp;*RI1)) ++RI1;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">if</span> (RI1 == RE1)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">while</span> (RI2 != RE2 &amp;&amp; isa&lt;DbgInfoIntrinsic&gt;(&amp;*RI2)) ++RI2;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> (RI2 == RE2)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *I1 = &amp;*RI1, *I2 = &amp;*RI2;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// I1 and I2 should have a single use in the same PHI node, and they</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// perform the same operation.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// Cannot move control-flow-involving, volatile loads, vaarg, etc.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(I1) || isa&lt;PHINode&gt;(I2) ||</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        isa&lt;TerminatorInst&gt;(I1) || isa&lt;TerminatorInst&gt;(I2) ||</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        isa&lt;LandingPadInst&gt;(I1) || isa&lt;LandingPadInst&gt;(I2) ||</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        isa&lt;AllocaInst&gt;(I1) || isa&lt;AllocaInst&gt;(I2) ||</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>() || I2-&gt;mayHaveSideEffects() ||</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9186dc5303ac8e5f788862f0ec11cb66">mayReadOrWriteMemory</a>() || I2-&gt;mayReadOrWriteMemory() ||</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        !I1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() || !I2-&gt;hasOneUse() ||</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        MapValueFromBB1ToBB2.find(I1) == MapValueFromBB1ToBB2.end() ||</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        MapValueFromBB1ToBB2[I1].first != I2)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// Check whether we should swap the operands of ICmpInst.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp1 = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>&gt;(I1), *ICmp2 = dyn_cast&lt;ICmpInst&gt;(I2);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordtype">bool</span> SwapOpnds = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span> (ICmp1 &amp;&amp; ICmp2 &amp;&amp;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        ICmp1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) != ICmp2-&gt;getOperand(0) &amp;&amp;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        ICmp1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) != ICmp2-&gt;getOperand(1) &amp;&amp;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        (ICmp1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == ICmp2-&gt;getOperand(1) ||</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         ICmp1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == ICmp2-&gt;getOperand(0))) {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      ICmp2-&gt;swapOperands();</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      SwapOpnds = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (!I1-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(I2)) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (SwapOpnds)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        ICmp2-&gt;swapOperands();</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// The operands should be either the same or they need to be generated</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// with a PHI node after sinking. We only handle the case where there is</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// a single pair of different operands.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *DifferentOp1 = <span class="keyword">nullptr</span>, *DifferentOp2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordtype">unsigned</span> Op1Idx = 0;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <span class="keywordflow">if</span> (I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == I2-&gt;getOperand(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="comment">// Early exit if we have more-than one pair of different operands or</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="comment">// the different operand is already in MapValueFromBB1ToBB2.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="comment">// Early exit if we need a PHI node to replace a constant.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordflow">if</span> (DifferentOp1 ||</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;          MapValueFromBB1ToBB2.find(I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) !=</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;          MapValueFromBB1ToBB2.end() ||</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;          isa&lt;Constant&gt;(I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) ||</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          isa&lt;Constant&gt;(I2-&gt;getOperand(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="comment">// If we can&#39;t sink the instructions, undo the swapping.</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keywordflow">if</span> (SwapOpnds)</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;          ICmp2-&gt;swapOperands();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      DifferentOp1 = I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      Op1Idx = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      DifferentOp2 = I2-&gt;getOperand(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// We insert the pair of different operands to MapValueFromBB1ToBB2 and</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="comment">// remove (I1, I2) from MapValueFromBB1ToBB2.</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">if</span> (DifferentOp1) {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">PHINode::Create</a>(DifferentOp1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 2,</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                                       DifferentOp1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sink&quot;</span>,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                       BBEnd-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      MapValueFromBB1ToBB2[DifferentOp1] = std::make_pair(DifferentOp2, NewPN);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="comment">// I1 should use NewPN instead of DifferentOp1.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      I1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(Op1Idx, NewPN);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      NewPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(DifferentOp1, BB1);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      NewPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(DifferentOp2, BB2);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create PHI node &quot;</span> &lt;&lt; *NewPN &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *OldPN = MapValueFromBB1ToBB2[I1].second;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    MapValueFromBB1ToBB2.erase(I1);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SINK common instructions &quot;</span> &lt;&lt; *I1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;                         &quot;</span> &lt;&lt; *I2 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// We need to update RE1 and RE2 if we are going to sink the first</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// instruction in the basic block down.</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordtype">bool</span> UpdateRE1 = (I1 == BB1-&gt;begin()), UpdateRE2 = (I2 == BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="comment">// Sink the instruction.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    BBEnd-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(FirstNonPhiInBBEnd, BB1-&gt;getInstList(), I1);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">if</span> (!OldPN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      OldPN-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(I1);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    OldPN-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">if</span> (!I2-&gt;use_empty())</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      I2-&gt;replaceAllUsesWith(I1);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    I1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">intersectOptionalDataWith</a>(I2);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    I2-&gt;eraseFromParent();</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (UpdateRE1)</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      RE1 = BB1-&gt;getInstList().rend();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">if</span> (UpdateRE2)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      RE2 = BB2-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#a99d24ef8a3c3b81d43fa244e43f976fc">rend</a>();</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    FirstNonPhiInBBEnd = I1;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    NumSinkCommons++;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a99d24ef8a3c3b81d43fa244e43f976fc"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#a99d24ef8a3c3b81d43fa244e43f976fc">llvm::iplist::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00379">ilist.h:379</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00342">Instruction.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="../../d2/df6/classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00029">IR/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_ad5f5ac50ca28fc89c173eb3d64344afc"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#ad5f5ac50ca28fc89c173eb3d64344afc">llvm::iplist::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00377">ilist.h:377</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02492">Instructions.h:2492</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9186dc5303ac8e5f788862f0ec11cb66"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9186dc5303ac8e5f788862f0ec11cb66">llvm::Instruction::mayReadOrWriteMemory</a></div><div class="ttdeci">bool mayReadOrWriteMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00322">Instruction.h:322</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a12b091e586dea5849c4d85723d2cba1b"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">llvm::Value::intersectOptionalDataWith</a></div><div class="ttdeci">void intersectOptionalDataWith(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00378">Value.h:378</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00114">Interval.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00219">BasicBlock.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_ab1b660345b57db3d80ad42123d6163ce"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#ab1b660345b57db3d80ad42123d6163ce">llvm::iplist&lt; Instruction &gt;::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00349">ilist.h:349</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9f729c6c3e0de4a55dc5a3693fd4a9eb"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">llvm::Instruction::isSameOperationAs</a></div><div class="ttdeci">bool isSameOperationAs(const Instruction *I, unsigned flags=0) const </div><div class="ttdoc">Determine if one instruction is the same operation as another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00356">Instruction.cpp:356</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6b48c21155371f51528c1ca204c1a0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SpeculativelyExecuteBB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *&#160;</td>
          <td class="paramname"><em>BI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>ThenBB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Speculate a conditional basic block flattening the CFG. </p>
<p>Note that this is a very risky transform currently. Speculating instructions like this is most often not desirable. Instead, there is an MI pass which can do it with full awareness of the resource constraints. However, some cases are "obvious" and we should do directly. An example of this is speculating a single, reasonably cheap instruction.</p>
<p>There is only one distinct advantage to flattening the CFG at the IR level: it makes very common but simplistic optimizations such as are common in instcombine and the DAG combiner more powerful by removing CFG edges and modeling their effects with easier to reason about SSA value graphs.</p>
<p>An illustration of this transform is turning this IR: </p>
<div class="fragment"><div class="line">BB:</div>
<div class="line">  %cmp = icmp ult %x, %y</div>
<div class="line">  br <a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a22f7bc6ca5c607bad683f34b8cfd1f1c">i1</a> %cmp, label %EndBB, label %ThenBB</div>
<div class="line">ThenBB:</div>
<div class="line">  %<a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a> = <a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a> %x, %y</div>
<div class="line">  br label BB2</div>
<div class="line">EndBB:</div>
<div class="line">  %phi = phi [ %<a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a>, %ThenBB ], [ 0, %EndBB ]</div>
<div class="line">  ...</div>
</div><!-- fragment --><p>Into this IR: </p>
<div class="fragment"><div class="line">BB:</div>
<div class="line">  %cmp = icmp ult %x, %y</div>
<div class="line">  %<a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a> = <a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a> %x, %y</div>
<div class="line">  %cond = select <a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a22f7bc6ca5c607bad683f34b8cfd1f1c">i1</a> %cmp, 0, %<a class="code" href="../../de/de4/APInt_8cpp.html#ab05972b4953d3d2c9332002f96c0f9f2">sub</a></div>
<div class="line">  ...</div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>true if the conditional block is removed. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01394">1394</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                                                         {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// Be conservative for now. FP select instruction can often be expensive.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BrCond = BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FCmpInst&gt;(BrCond))</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = BI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB = ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(0);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="comment">// If ThenBB is actually on the false edge of the conditional branch, remember</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="comment">// to swap the select operands later.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordtype">bool</span> Invert = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">if</span> (ThenBB != BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0)) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ThenBB == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1) &amp;&amp; <span class="stringliteral">&quot;No edge from &#39;if&#39; block?&quot;</span>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    Invert = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(EndBB == BI-&gt;<a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(!Invert) &amp;&amp; <span class="stringliteral">&quot;No edge from to end block&quot;</span>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// Keep a count of how many times instructions are used within CondBB when</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// they are candidates for sinking into CondBB. Specifically:</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// - They are defined in BB, and</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// - They have no side effects, and</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// - All of their uses are in CondBB.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;Instruction *, unsigned, 4&gt;</a> SinkCandidateUseCounts;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordtype">unsigned</span> SpeculationCost = 0;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *SpeculatedStoreValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SpeculatedStore = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                            BBE = std::prev(ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;       BBI != BBE; ++BBI) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBI;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// Skip debug info.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(I))</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// Only speculatively execution a single instruction (not counting the</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">// terminator) for now.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    ++SpeculationCost;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">if</span> (SpeculationCost &gt; 1)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// Don&#39;t hoist the instruction if it&#39;s unsafe or expensive.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(I, DL) &amp;&amp;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        !(<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#aef5d6c1653f6d85c8ee596904289fd94">HoistCondStores</a> &amp;&amp;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;          (SpeculatedStoreValue = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a2ced9ed2427730cd9b6903f00cd22e4d">isSafeToSpeculateStore</a>(I, BB, ThenBB,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                                                         EndBB))))</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span> (!SpeculatedStoreValue &amp;&amp;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a>(I, DL) &gt; <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a>)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="comment">// Store the store speculation candidate.</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">if</span> (SpeculatedStoreValue)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      SpeculatedStore = cast&lt;StoreInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// Do not hoist the instruction if any of its operands are defined but not</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// used in BB. The transformation will prevent the operand from</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// being sunk into the use block.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/d66/classllvm_1_1Use.html">User::op_iterator</a> i = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), e = I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         i != e; ++i) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *OpI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(*i);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keywordflow">if</span> (!OpI || OpI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != BB ||</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;          OpI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>())</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Not a candidate for sinking.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      ++SinkCandidateUseCounts[OpI];</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// Consider any sink candidates which are only used in CondBB as costs for</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">// speculation. Note, while we iterate over a DenseMap here, we are summing</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// and so iteration order isn&#39;t significant.</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;Instruction *, unsigned, 4&gt;::iterator</a> I =</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;           SinkCandidateUseCounts.begin(), E = SinkCandidateUseCounts.end();</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;       I != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">if</span> (I-&gt;first-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">getNumUses</a>() == I-&gt;second) {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      ++SpeculationCost;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <span class="keywordflow">if</span> (SpeculationCost &gt; 1)</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// Check that the PHI nodes can be converted to selects.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordtype">bool</span> HaveRewritablePHIs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = EndBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;       <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *OrigV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(BB);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *ThenV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(ThenBB);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">// FIXME: Try to remove some of the duplication with HoistThenElseCodeToIf.</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// Skip PHIs which are trivial.</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (ThenV == OrigV)</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    HaveRewritablePHIs = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *OrigCE = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>&gt;(OrigV);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *ThenCE = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>&gt;(ThenV);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (!OrigCE &amp;&amp; !ThenCE)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Known safe and cheap.</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keywordflow">if</span> ((ThenCE &amp;&amp; !<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(ThenCE, DL)) ||</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        (OrigCE &amp;&amp; !<a class="code" href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">isSafeToSpeculativelyExecute</a>(OrigCE, DL)))</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordtype">unsigned</span> OrigCost = OrigCE ? <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a>(OrigCE, DL) : 0;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordtype">unsigned</span> ThenCost = ThenCE ? <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a>(ThenCE, DL) : 0;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (OrigCost + ThenCost &gt; 2 * <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a>)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="comment">// Account for the cost of an unfolded ConstantExpr which could end up</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="comment">// getting expanded into Instructions.</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="comment">// FIXME: This doesn&#39;t account for how many operations are combined in the</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// constant expression.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    ++SpeculationCost;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (SpeculationCost &gt; 1)</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// If there are no PHIs to process, bail early. This helps ensure idempotence</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// as well.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">if</span> (!HaveRewritablePHIs &amp;&amp; !(<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#aef5d6c1653f6d85c8ee596904289fd94">HoistCondStores</a> &amp;&amp; SpeculatedStoreValue))</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// If we get here, we can hoist the instruction and if-convert.</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SPECULATIVELY EXECUTING BB&quot;</span> &lt;&lt; *ThenBB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// Insert a select of the value of the speculated store.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordflow">if</span> (SpeculatedStoreValue) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;true, NoFolder&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(BI);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TrueV = SpeculatedStore-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FalseV = SpeculatedStoreValue;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (Invert)</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TrueV, FalseV);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *S = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(BrCond, TrueV, FalseV, TrueV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() +</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                                    <span class="stringliteral">&quot;.&quot;</span> + FalseV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    SpeculatedStore-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, S);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// Hoist the instructions.</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(BI, ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>(), ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                           std::prev(ThenBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>()));</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// Insert selects and rewrite the PHI operands.</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;true, NoFolder&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(BI);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = EndBB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;       <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordtype">unsigned</span> OrigI = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(BB);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordtype">unsigned</span> ThenI = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(ThenBB);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *OrigV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(OrigI);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *ThenV = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(ThenI);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// Skip PHIs which are trivial.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (OrigV == ThenV)</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="comment">// Create a select whose true value is the speculatively executed value and</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="comment">// false value is the preexisting value. Swap them if the branch</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="comment">// destinations were inverted.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TrueV = ThenV, *FalseV = OrigV;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">if</span> (Invert)</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TrueV, FalseV);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(BrCond, TrueV, FalseV,</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                                    TrueV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + FalseV-&gt;getName());</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(OrigI, V);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(ThenI, V);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  ++NumSpeculations;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00360">Instructions.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="../../de/deb/classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00681">DenseMap.h:681</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a830a17648b2e5112beef220cc707c977"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a830a17648b2e5112beef220cc707c977">PHINodeFoldingThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PHINodeFoldingThreshold(&quot;phi-node-folding-threshold&quot;, cl::Hidden, cl::init(1), cl::desc(&quot;Control the amount of phi node folding to perform (default = 1)&quot;))</div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00342">Instruction.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00120">User.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a2ced9ed2427730cd9b6903f00cd22e4d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a2ced9ed2427730cd9b6903f00cd22e4d">isSafeToSpeculateStore</a></div><div class="ttdeci">static Value * isSafeToSpeculateStore(Instruction *I, BasicBlock *BrBB, BasicBlock *StoreBB, BasicBlock *EndBB)</div><div class="ttdoc">Determine if we can hoist sink a sole store instruction out of a conditional block. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l01323">SimplifyCFG.cpp:1323</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02507">Instructions.h:2507</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_aef5d6c1653f6d85c8ee596904289fd94"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#aef5d6c1653f6d85c8ee596904289fd94">HoistCondStores</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; HoistCondStores(&quot;simplifycfg-hoist-cond-stores&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Hoist conditional stores if an unconditional store precedes&quot;))</div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a409148827b522f5a4942128b467f8ef6"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a409148827b522f5a4942128b467f8ef6">ComputeSpeculationCost</a></div><div class="ttdeci">static unsigned ComputeSpeculationCost(const User *I, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00204">SimplifyCFG.cpp:204</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00122">User.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00219">BasicBlock.h:219</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="../../d0/dc9/classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01377">IRBuilder.h:1377</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_html_ac2c00585b6b1dd6611da1b7f4bd47d09"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac2c00585b6b1dd6611da1b7f4bd47d09">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01975">ValueTracking.cpp:1975</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02495">Instructions.h:2495</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a380559e99b47632a34f74de7c1d03cc0"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">llvm::Value::getNumUses</a></div><div class="ttdeci">unsigned getNumUses() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00140">Value.cpp:140</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02161">Instructions.h:2161</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5c2b7d7f19aac93b27b845858a7eb73e"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02230">Instructions.h:2230</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a094edb4846824b6513167facc6a7afe1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumBitMaps&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into bitmaps&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3b805cb990220111f878d52811233df0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLookupTables&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into <a class="el" href="../../d8/d72/X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a> tables&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3403ceedf16038250ea5be7b24d0e12f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLookupTablesHoles&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d5/d6a/HexagonCopyToCombine_8cpp.html#aee86c817d13d7b4d0906952c04349e58">switch</a> <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> turned into <a class="el" href="../../d8/d72/X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a> tables (holes checked)&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afef79ee5b4feaa59ddd09123c1ae3f6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumSinkCommons&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of common <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> sunk down to the end block&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab4d51f817ed15e19df3ba4e102c25207"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumSpeculations&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of speculative executed <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac04831b35447d0506191aad47dd9b46d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool SwitchToLookupTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>TTI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SwitchToLookupTable - If the switch is only used to initialize one or more phi nodes in a common successor block with different constant values, replace the switch with lookup tables. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03711">3711</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;                                                      {</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &gt; 1 &amp;&amp; <span class="stringliteral">&quot;Degenerate switch?&quot;</span>);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  <span class="comment">// Only build lookup table when we have a target that supports it.</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  <span class="keywordflow">if</span> (!TTI.<a class="code" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html#a74d97d9e66d1007252d8609b7b8ccf21">shouldBuildLookupTables</a>())</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <span class="comment">// FIXME: If the switch is too sparse for a lookup table, perhaps we could</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <span class="comment">// split off a dense part and build a lookup table for that.</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <span class="comment">// FIXME: This creates arrays of GEPs to constant strings, which means each</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <span class="comment">// GEP needs a runtime relocation in PIC code. We should just build one big</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  <span class="comment">// string and lookup indices into that.</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  <span class="comment">// Ignore switches with less than three cases. Lookup tables will not make them</span></div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;  <span class="comment">// faster, so we don&#39;t analyze them.</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &lt; 3)</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <span class="comment">// Figure out the corresponding result for each case value and phi node in the</span></div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <span class="comment">// common destination, as well as the the min and max case values.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>() != SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>());</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  <a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> CI = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>();</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *MinCaseVal = CI.getCaseValue();</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *MaxCaseVal = CI.getCaseValue();</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonDest = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;ConstantInt*, Constant*&gt;</a>, 4&gt; ResultListTy;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;PHINode*, ResultListTy&gt;</a> ResultLists;</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;PHINode*, Constant*&gt;</a> DefaultResults;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <a class="code" href="../../de/deb/classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;PHINode*, Type*&gt;</a> ResultTypes;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 4&gt;</a> PHIs;</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> E = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>(); CI != E; ++CI) {</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseVal = CI.getCaseValue();</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <span class="keywordflow">if</span> (CaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(MinCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;      MinCaseVal = CaseVal;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="keywordflow">if</span> (CaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(MaxCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      MaxCaseVal = CaseVal;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <span class="comment">// Resulting value at phi nodes for this case value.</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;PHINode*, Constant*&gt;</a>, 4&gt; ResultsTy;</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    ResultsTy Results;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#abfe18d4b03b813d04ffd79e706cc62aa">GetCaseResults</a>(SI, CaseVal, CI.getCaseSuccessor(), &amp;CommonDest,</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;                        Results, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>))</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="comment">// Append the result from this case to the list for each phi.</span></div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="keywordflow">for</span> (ResultsTy::iterator <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Results.begin(), E = Results.end(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>!=E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <span class="keywordflow">if</span> (!ResultLists.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a2454abd5c2557a989c2168734a120c4a">count</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        PHIs.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first);</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      ResultLists[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first].push_back(std::make_pair(CaseVal, <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second));</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    }</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  }</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <span class="comment">// Keep track of the result types.</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PHIs.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = PHIs[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    ResultTypes[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>] = ResultLists[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>][0].second-&gt;getType();</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  }</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  uint64_t NumResults = ResultLists[PHIs[0]].<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">size</a>();</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> RangeSpread = MaxCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() - MinCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  uint64_t TableSize = RangeSpread.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ae0c5e70885cf005feb6707932774f99c">getLimitedValue</a>() + 1;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="keywordtype">bool</span> TableHasHoles = (NumResults &lt; TableSize);</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;  <span class="comment">// If the table has holes, we need a constant result for the default case</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <span class="comment">// or a bitmask that fits in a register.</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;  SmallVector&lt;std::pair&lt;PHINode*, Constant*&gt;, 4&gt; DefaultResultsList;</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  <span class="keywordtype">bool</span> HasDefaultResults = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  <span class="keywordflow">if</span> (TableHasHoles) {</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    HasDefaultResults = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#abfe18d4b03b813d04ffd79e706cc62aa">GetCaseResults</a>(SI, <span class="keyword">nullptr</span>, SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>(),</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                                       &amp;CommonDest, DefaultResultsList, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  }</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="keywordtype">bool</span> NeedMask = (TableHasHoles &amp;&amp; !HasDefaultResults);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="keywordflow">if</span> (NeedMask) {</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    <span class="comment">// As an extra penalty for the validity test we require more cases.</span></div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &lt; 4)  <span class="comment">// FIXME: Find best threshold value (benchmark).</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordflow">if</span> (!(DL &amp;&amp; DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a87901387c729722d5d63edd1d35119d7">fitsInLegalInteger</a>(TableSize)))</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  }</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = DefaultResultsList.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PHI = DefaultResultsList[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Result = DefaultResultsList[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].second;</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    DefaultResults[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>] = Result;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  }</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#afefef0635df4a6b68cd500f02557aba8">ShouldBuildLookupTable</a>(SI, TableSize, TTI, DL, ResultTypes))</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="comment">// Create the BB that does the lookups.</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> &amp;Mod = *CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *LookupBB = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(Mod.<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(),</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;                                            <span class="stringliteral">&quot;switch.lookup&quot;</span>,</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                                            CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(),</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                                            CommonDest);</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">// Compute the table index value.</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(SI);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TableIndex = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">CreateSub</a>(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>(), MinCaseVal,</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;                                        <span class="stringliteral">&quot;switch.tableidx&quot;</span>);</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;  <span class="comment">// Compute the maximum table size representable by the integer type we are</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <span class="comment">// switching upon.</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <span class="keywordtype">unsigned</span> CaseSize = MinCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  uint64_t MaxTableSize = CaseSize &gt; 63 ? UINT64_MAX : 1ULL &lt;&lt; CaseSize;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(MaxTableSize &gt;= TableSize &amp;&amp;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;         <span class="stringliteral">&quot;It is impossible for a switch to have more entries than the max &quot;</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;         <span class="stringliteral">&quot;representable value of its input integer type&#39;s size.&quot;</span>);</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="comment">// If we have a fully covered lookup table, unconditionally branch to the</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">// lookup table BB. Otherwise, check if the condition value is within the case</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="comment">// range. If it is so, branch to the new BB. Otherwise branch to SI&#39;s default</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <span class="comment">// destination.</span></div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> GeneratingCoveredLookupTable = MaxTableSize == TableSize;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="keywordflow">if</span> (GeneratingCoveredLookupTable) {</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(LookupBB);</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cmp = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">CreateICmpULT</a>(TableIndex, ConstantInt::get(</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                                       MinCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), TableSize));</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(Cmp, LookupBB, SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>());</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  }</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="comment">// Populate the BB that does the lookups.</span></div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(LookupBB);</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="keywordflow">if</span> (NeedMask) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <span class="comment">// Before doing the lookup we do the hole check.</span></div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="comment">// The LookupBB is therefore re-purposed to do the hole check</span></div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <span class="comment">// and we create a new LookupBB.</span></div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *MaskBB = LookupBB;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    MaskBB-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;switch.hole_check&quot;</span>);</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    LookupBB = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(Mod.<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(),</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;                                  <span class="stringliteral">&quot;switch.lookup&quot;</span>,</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                                  CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(),</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;                                  CommonDest);</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <span class="comment">// Build bitmask; fill in a 1 bit for every case.</span></div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> MaskInt(TableSize, 0);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> One(TableSize, 1);</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    <span class="keyword">const</span> ResultListTy &amp;ResultList = ResultLists[PHIs[0]];</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = ResultList.size(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      uint64_t Idx = (ResultList[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first-&gt;getValue() -</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                      MinCaseVal-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()).getLimitedValue();</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      MaskInt |= One &lt;&lt; Idx;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;    }</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *TableMask = ConstantInt::get(Mod.<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), MaskInt);</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;    <span class="comment">// Get the TableIndex&#39;th bit of the bitmask.</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    <span class="comment">// If this bit is 0 (meaning hole) jump to the default destination,</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    <span class="comment">// else continue with table lookup.</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *MapTy = TableMask-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>();</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *MaskIndex = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a7cca116ba5ef3fe3dfc9872b1600d11d">CreateZExtOrTrunc</a>(TableIndex, MapTy,</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;                                                 <span class="stringliteral">&quot;switch.maskindex&quot;</span>);</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Shifted = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(TableMask, MaskIndex,</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;                                        <span class="stringliteral">&quot;switch.shifted&quot;</span>);</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoBit = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(Shifted,</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;                                       Type::getInt1Ty(Mod.<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>()),</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;                                       <span class="stringliteral">&quot;switch.lobit&quot;</span>);</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(LoBit, LookupBB, SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>());</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(LookupBB);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a>(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>(), MaskBB, SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  }</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  <span class="keywordtype">bool</span> ReturnedEarly = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PHIs.size(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PHI = PHIs[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    <span class="comment">// If using a bitmask, use any value to fill the lookup table holes.</span></div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *DV = NeedMask ? ResultLists[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>][0].second : DefaultResults[<a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>];</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    SwitchLookupTable Table(Mod, TableSize, MinCaseVal, ResultLists[PHI],</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;                            DV, DL);</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Result = Table.BuildLookup(TableIndex, Builder);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="comment">// If the result is used to return immediately from the function, we want to</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    <span class="comment">// do that right here.</span></div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="keywordflow">if</span> (PHI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; isa&lt;ReturnInst&gt;(*PHI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>()) &amp;&amp;</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        PHI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>() == CommonDest-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">getFirstNonPHIOrDbg</a>()) {</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a08a2941811ad93b69f0174b5e8104cc6">CreateRet</a>(Result);</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;      ReturnedEarly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    }</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;    PHI-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Result, LookupBB);</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  }</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  <span class="keywordflow">if</span> (!ReturnedEarly)</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(CommonDest);</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <span class="comment">// Remove the switch.</span></div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a1911781fed54dee847a46bf4fa4c5c34">getNumSuccessors</a>(); i &lt; e; ++i) {</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#aef88cf6f3b68009b7901343e934368a8">getSuccessor</a>(i);</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="keywordflow">if</span> (Succ == SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>())</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    Succ-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  }</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;  SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  ++NumLookupTables;</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  <span class="keywordflow">if</span> (NeedMask)</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;    ++NumLookupTablesHoles;</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a3f8c45ea10c393433221a508b750dcd5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">llvm::IRBuilder::CreateLShr</a></div><div class="ttdeci">Value * CreateLShr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00770">IRBuilder.h:770</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a240475f85dea79ec272c578fdf89acf1"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00139">Constants.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="../../de/deb/classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00681">DenseMap.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02745">Instructions.h:2745</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00220">BasicBlock.cpp:220</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00115">Module.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02734">Instructions.h:2734</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9c30c87af01068ceae02cd371748d175"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">llvm::IRBuilder::CreateICmpULT</a></div><div class="ttdeci">Value * CreateICmpULT(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01259">IRBuilder.h:1259</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ae0c5e70885cf005feb6707932774f99c"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ae0c5e70885cf005feb6707932774f99c">llvm::APInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00406">APInt.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aebf44e187e9dfd25f09b1de6cb1767e1"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">llvm::IRBuilder::CreateCondBr</a></div><div class="ttdeci">BranchInst * CreateCondBr(Value *Cond, BasicBlock *True, BasicBlock *False, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">Create a conditional &#39;br Cond, TrueDest, FalseDest&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00549">IRBuilder.h:549</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a2454abd5c2557a989c2168734a120c4a"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a2454abd5c2557a989c2168734a120c4a">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::count</a></div><div class="ttdeci">size_type count(const KeyT &amp;Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00104">DenseMap.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afa1cb82e021c7f516f65d40162fe6c53"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">llvm::IRBuilder::CreateSub</a></div><div class="ttdeci">Value * CreateSub(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00654">IRBuilder.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a225cbda41f4c27fbb522833e31cb18f9"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">Instruction * getFirstNonPHIOrDbg()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00144">BasicBlock.cpp:144</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00176">Value.cpp:176</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0671bc479b3d788cc233dc1ce20ebcb5"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01096">APInt.h:1096</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a08a2941811ad93b69f0174b5e8104cc6"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a08a2941811ad93b69f0174b5e8104cc6">llvm::IRBuilder::CreateRet</a></div><div class="ttdeci">ReturnInst * CreateRet(Value *V)</div><div class="ttdoc">Create a &#39;ret &lt;val&gt;&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00524">IRBuilder.h:524</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a87901387c729722d5d63edd1d35119d7"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a87901387c729722d5d63edd1d35119d7">llvm::DataLayout::fitsInLegalInteger</a></div><div class="ttdeci">bool fitsInLegalInteger(unsigned Width) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00288">DataLayout.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0cf8014ad2d33b40a6bef55018547f57"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">llvm::APInt::slt</a></div><div class="ttdeci">bool slt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l00548">APInt.cpp:548</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a1911781fed54dee847a46bf4fa4c5c34"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a1911781fed54dee847a46bf4fa4c5c34">llvm::SwitchInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02822">Instructions.h:2822</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a957e195a6793721ddc164589934b8f89"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00071">DenseMap.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_aef88cf6f3b68009b7901343e934368a8"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#aef88cf6f3b68009b7901343e934368a8">llvm::SwitchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02823">Instructions.h:2823</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a7cca116ba5ef3fe3dfc9872b1600d11d"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a7cca116ba5ef3fe3dfc9872b1600d11d">llvm::IRBuilder::CreateZExtOrTrunc</a></div><div class="ttdeci">Value * CreateZExtOrTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a ZExt or Trunc from the integer value V to DestTy. Return the value untouched if the type of ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01105">IRBuilder.h:1105</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a74d97d9e66d1007252d8609b7b8ccf21"><div class="ttname"><a href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html#a74d97d9e66d1007252d8609b7b8ccf21">llvm::TargetTransformInfo::shouldBuildLookupTables</a></div><div class="ttdeci">virtual bool shouldBuildLookupTables() const </div><div class="ttdoc">Return true if switches should be turned into lookup tables for the target. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/TargetTransformInfo_8cpp_source.html#l00135">TargetTransformInfo.cpp:135</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a3feb6090a53e81f06d82da0a97be6e19"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">llvm::SwitchInst::getDefaultDest</a></div><div class="ttdeci">BasicBlock * getDefaultDest() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02718">Instructions.h:2718</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00267">Value.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01094">IRBuilder.h:1094</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0c00110a06b1eb96c92f87e4ca28129a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">llvm::IRBuilder::CreateBr</a></div><div class="ttdeci">BranchInst * CreateBr(BasicBlock *Dest)</div><div class="ttdoc">Create an unconditional &#39;br label X&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00543">IRBuilder.h:543</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_abfe18d4b03b813d04ffd79e706cc62aa"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#abfe18d4b03b813d04ffd79e706cc62aa">GetCaseResults</a></div><div class="ttdeci">static bool GetCaseResults(SwitchInst *SI, ConstantInt *CaseVal, BasicBlock *CaseDest, BasicBlock **CommonDest, SmallVectorImpl&lt; std::pair&lt; PHINode *, Constant * &gt; &gt; &amp;Res, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03396">SimplifyCFG.cpp:3396</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_afefef0635df4a6b68cd500f02557aba8"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#afefef0635df4a6b68cd500f02557aba8">ShouldBuildLookupTable</a></div><div class="ttdeci">static bool ShouldBuildLookupTable(SwitchInst *SI, uint64_t TableSize, const TargetTransformInfo &amp;TTI, const DataLayout *DL, const SmallDenseMap&lt; PHINode *, Type * &gt; &amp;ResultTypes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03666">SimplifyCFG.cpp:3666</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_adfeed3997bba12e75a8e51d740f1969d"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#adfeed3997bba12e75a8e51d740f1969d">AddPredecessorToBlock</a></div><div class="ttdeci">static void AddPredecessorToBlock(BasicBlock *Succ, BasicBlock *NewPred, BasicBlock *ExistPred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00191">SimplifyCFG.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0e74af4b7c739f3a14e737c3042b6617"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00253">Module.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02678">Instructions.h:2678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a894c062ee9abd76e8d7d3c93963b4556"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TryToSimplifyUncondBranchWithICmpInIt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a> *&#160;</td>
          <td class="paramname"><em>ICI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d3/d8a/classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>TTI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TryToSimplifyUncondBranchWithICmpInIt - This is called when we find an icmp instruction (a seteq/setne with a constant) as the only instruction in a block that ends with an uncond branch. We are looking for a very specific pattern that occurs when "A == 1 || A == 2 || A == 3" gets simplified. In this case, we merge the first two "or's of icmp" into a switch, but then the default value goes to an uncond block with a seteq in it, we get something like:</p>
<p>switch i8 A, label DEFAULT [ i8 1, label end i8 2, label end ] DEFAULT: tmp = icmp eq i8 A, 92 br label end end: ... = phi i1 [ true, entry ], [ tmp, DEFAULT ], [ true, entry ]</p>
<p>We prefer to split the edge to 'end' so that there is a true/false entry to the PHI, merging the third icmp into the switch. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l02650">2650</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                          {</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="comment">// If the block has any PHIs in it or the icmp has multiple uses, it is too</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <span class="comment">// complex.</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()) || !ICI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = ICI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Cst = cast&lt;ConstantInt&gt;(ICI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">// The pattern we&#39;re looking for is where our only predecessor is a switch on</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="comment">// &#39;V&#39; and this block is the default case for the switch.  In this case we can</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// fold the compared value into the switch to simplify things.</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <span class="keywordflow">if</span> (!Pred || !isa&lt;SwitchInst&gt;(Pred-&gt;getTerminator())) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  <a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = cast&lt;SwitchInst&gt;(Pred-&gt;getTerminator());</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>() != V)</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <span class="comment">// If BB is reachable on a non-default case, then we simply know the value of</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="comment">// V in this block.  Substitute it and constant fold the icmp instruction</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <span class="comment">// away.</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>() != BB) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *VVal = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a2d6855f76c156c05cc76ec4dfb94cf57">findCaseDest</a>(BB);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(VVal &amp;&amp; <span class="stringliteral">&quot;Should have a unique destination value&quot;</span>);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    ICI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, VVal);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">SimplifyInstruction</a>(ICI, DL)) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      ICI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    }</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="comment">// BB is now empty, so it is likely to simplify away.</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#ad515402897d07389b8a2e915abfe8dd7">SimplifyCFG</a>(BB, TTI, DL) | <span class="keyword">true</span>;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  }</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  <span class="comment">// Ok, the block is reachable from the default dest.  If the constant we&#39;re</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <span class="comment">// comparing exists in one of the other edges, then we can constant fold ICI</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <span class="comment">// and zap it.</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(Cst) != SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">case_default</a>()) {</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (ICI-&gt;<a class="code" href="../../df/de6/classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == ICmpInst::ICMP_EQ)</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      V = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">ConstantInt::getFalse</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      V = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">ConstantInt::getTrue</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    ICI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="comment">// BB is now empty, so it is likely to simplify away.</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d4a/namespacellvm.html#ad515402897d07389b8a2e915abfe8dd7">SimplifyCFG</a>(BB, TTI, DL) | <span class="keyword">true</span>;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="comment">// The use of the icmp has to be in the &#39;end&#39; block, by the only PHI node in</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <span class="comment">// the block.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBlock = BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(0);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PHIUse = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a>&gt;(ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="keywordflow">if</span> (PHIUse == <span class="keyword">nullptr</span> || PHIUse != &amp;SuccBlock-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>() ||</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;      isa&lt;PHINode&gt;(++<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(PHIUse)))</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <span class="comment">// If the icmp is a SETEQ, then the default dest gets false, the new edge gets</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="comment">// true in the PHI.</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *DefaultCst = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">ConstantInt::getTrue</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NewCst     = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">ConstantInt::getFalse</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="keywordflow">if</span> (ICI-&gt;<a class="code" href="../../df/de6/classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == ICmpInst::ICMP_EQ)</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(DefaultCst, NewCst);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="comment">// Replace ICI (which is used by the PHI for the default value) with true or</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="comment">// false depending on if it is EQ or NE.</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  ICI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(DefaultCst);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  ICI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="comment">// Okay, the switch goes to this block on a default value.  Add an edge from</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="comment">// the switch to the merge point on the compared value.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">BasicBlock::Create</a>(BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(), <span class="stringliteral">&quot;switch.edge&quot;</span>,</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                                         BB-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), BB);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 8&gt;</a> Weights;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <span class="keywordtype">bool</span> HasWeights = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a>(SI);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="keywordflow">if</span> (HasWeights) {</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a>(SI, Weights);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">if</span> (Weights.size() == 1 + SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>()) {</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;      <span class="comment">// Split weight for default case to case for &quot;Cst&quot;.</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      Weights[0] = (Weights[0]+1) &gt;&gt; 1;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      Weights.push_back(Weights[0]);</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 8&gt;</a> MDWeights(Weights.begin(), Weights.end());</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                      <a class="code" href="../../d7/d3f/classllvm_1_1MDBuilder.html">MDBuilder</a>(SI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()).</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                      createBranchWeights(MDWeights));</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    }</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">addCase</a>(Cst, NewBB);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <span class="comment">// NewBB branches to the phi block, add the uncond branch and the phi entry.</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(NewBB);</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  Builder.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">SetCurrentDebugLocation</a>(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">CreateBr</a>(SuccBlock);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  PHIUse-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewCst, NewBB);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a571ae7ebae7038da7f6073efc65aaa50"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">llvm::IRBuilderBase::SetCurrentDebugLocation</a></div><div class="ttdeci">void SetCurrentDebugLocation(const DebugLoc &amp;L)</div><div class="ttdoc">Set location information used by debugging information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00118">IRBuilder.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a62abc2475d09c01d583ba24a487898fd"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">llvm::SwitchInst::addCase</a></div><div class="ttdeci">void addCase(ConstantInt *OnVal, BasicBlock *Dest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l03412">Instructions.cpp:3412</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a165512f38f31f01e7f18bf3838f3a12e"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a></div><div class="ttdeci">static void GetBranchWeights(TerminatorInst *TI, SmallVectorImpl&lt; uint64_t &gt; &amp;Weights)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00737">SimplifyCFG.cpp:737</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00118">BasicBlock.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a33603355becfb1a050b62aa015c1cc57"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00210">BasicBlock.h:210</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_a565dd825f238fa0a8c4bbfe562635f7c"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">getTrue</a></div><div class="ttdeci">static Constant * getTrue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00072">InstructionSimplify.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a2d6855f76c156c05cc76ec4dfb94cf57"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a2d6855f76c156c05cc76ec4dfb94cf57">llvm::SwitchInst::findCaseDest</a></div><div class="ttdeci">ConstantInt * findCaseDest(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02795">Instructions.h:2795</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ada99fd4fd27356d1518273d8248940a5"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a></div><div class="ttdeci">static bool HasBranchWeights(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00725">SimplifyCFG.cpp:725</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="../../df/de6/classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00735">InstrTypes.h:735</a></div></div>
<div class="ttc" id="namespacellvm_html_ad515402897d07389b8a2e915abfe8dd7"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ad515402897d07389b8a2e915abfe8dd7">llvm::SimplifyCFG</a></div><div class="ttdeci">bool SimplifyCFG(BasicBlock *BB, const TargetTransformInfo &amp;TTI, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l04260">SimplifyCFG.cpp:4260</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="namespacellvm_html_ae64c78918a7103416535ec01038181d8"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ae64c78918a7103416535ec01038181d8">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=nullptr, const TargetLibraryInfo *TLI=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l03073">InstructionSimplify.cpp:3073</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ad3a1537c850f63ce48bcf45694cde73f"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">llvm::SwitchInst::findCaseValue</a></div><div class="ttdeci">CaseIt findCaseValue(const ConstantInt *C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02780">Instructions.h:2780</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_adb39181b87dffcd61082d08e02bf314e"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#adb39181b87dffcd61082d08e02bf314e">getFalse</a></div><div class="ttdeci">static Constant * getFalse(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00064">InstructionSimplify.cpp:64</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block. Otherwise return a null po...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00187">BasicBlock.cpp:187</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a3feb6090a53e81f06d82da0a97be6e19"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">llvm::SwitchInst::getDefaultDest</a></div><div class="ttdeci">BasicBlock * getDefaultDest() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02718">Instructions.h:2718</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a96a201f56500af4dd70b4169f140cb4c"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">llvm::SwitchInst::case_default</a></div><div class="ttdeci">CaseIt case_default()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02769">Instructions.h:2769</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02550">Instructions.h:2550</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00037">BasicBlock.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a0c00110a06b1eb96c92f87e4ca28129a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a0c00110a06b1eb96c92f87e4ca28129a">llvm::IRBuilder::CreateBr</a></div><div class="ttdeci">BranchInst * CreateBr(BasicBlock *Dest)</div><div class="ttdoc">Create an unconditional &#39;br label X&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00543">IRBuilder.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="../../d7/d3f/classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/MDBuilder_8h_source.html#l00030">MDBuilder.h:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf5ef34c952cc6bc5dce92d91598bdd2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TurnSwitchRangeIntoICmp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8e/classllvm_1_1SwitchInst.html">SwitchInst</a> *&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder</a>&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Builder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TurnSwitchRangeIntoICmp - Turns a switch with that contains only a integer range comparison into a sub, an icmp and a branch. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03142">3142</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                                                                          {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &gt; 1 &amp;&amp; <span class="stringliteral">&quot;Degenerate switch?&quot;</span>);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  <span class="comment">// Make sure all cases point to the same destination and gather the values.</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;ConstantInt *, 16&gt;</a> Cases;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  <a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>();</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  Cases.push_back(I.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a60499571002635a94d89b8a9341b5e12">getCaseValue</a>());</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> PrevI = I++;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> E = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>(); I != E; PrevI = I++) {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <span class="keywordflow">if</span> (PrevI.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>() != I.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>())</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    Cases.push_back(I.<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a60499571002635a94d89b8a9341b5e12">getCaseValue</a>());</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  }</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Cases.size() == SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() &amp;&amp; <span class="stringliteral">&quot;Not all cases gathered&quot;</span>);</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <span class="comment">// Sort the case values, then check if they form a range we can transform.</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(Cases.begin(), Cases.end(), <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a8a7f7d7aa56a6449ae814f48b6a8ce6f">ConstantIntSortPredicate</a>);</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 1, E = Cases.size(); I != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <span class="keywordflow">if</span> (Cases[I-1]-&gt;getValue() != Cases[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getValue()+1)</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  }</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Offset = ConstantExpr::getNeg(Cases.back());</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NumCases = ConstantInt::get(Offset-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>());</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Sub = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>();</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  <span class="keywordflow">if</span> (!Offset-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>())</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    Sub = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Sub, Offset, Sub-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.off&quot;</span>);</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Cmp;</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  <span class="comment">// If NumCases overflowed, then all possible values jump to the successor.</span></div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <span class="keywordflow">if</span> (NumCases-&gt;isNullValue() &amp;&amp; SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>() != 0)</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    Cmp = <a class="code" href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">ConstantInt::getTrue</a>(SI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    Cmp = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">CreateICmpULT</a>(Sub, NumCases, <span class="stringliteral">&quot;switch&quot;</span>);</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html">BranchInst</a> *NewBI = Builder.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">CreateCondBr</a>(</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      Cmp, SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>().<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>(), SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">getDefaultDest</a>());</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <span class="comment">// Update weight for the newly-created conditional branch.</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 8&gt;</a> Weights;</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  <span class="keywordtype">bool</span> HasWeights = <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a>(SI);</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;  <span class="keywordflow">if</span> (HasWeights) {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <a class="code" href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a>(SI, Weights);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="keywordflow">if</span> (Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 + SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>()) {</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <span class="comment">// Combine all weights for the cases to be the true weight of NewBI.</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      <span class="comment">// We assume that the sum of all weights for a Terminator can fit into 32</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      <span class="comment">// bits.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      uint32_t NewTrueWeight = 0;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 1, E = Weights.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); I != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        NewTrueWeight += (uint32_t)Weights[<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      NewBI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                         <a class="code" href="../../d7/d3f/classllvm_1_1MDBuilder.html">MDBuilder</a>(SI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()).</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                         createBranchWeights(NewTrueWeight,</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                                             (uint32_t)Weights[0]));</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="comment">// Prune obsolete incoming values off the successor&#39;s PHI nodes.</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>().<a class="code" href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;       isa&lt;PHINode&gt;(BBI); ++BBI) {</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = SI-&gt;<a class="code" href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>()-1; I != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;      cast&lt;PHINode&gt;(BBI)-&gt;removeIncomingValue(SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  }</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  SI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02745">Instructions.h:2745</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a60499571002635a94d89b8a9341b5e12"><div class="ttname"><a href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a60499571002635a94d89b8a9341b5e12">llvm::SwitchInst::CaseIteratorT::getCaseValue</a></div><div class="ttdeci">ConstantIntTy * getCaseValue()</div><div class="ttdoc">Resolves case value for current case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02613">Instructions.h:2613</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02734">Instructions.h:2734</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a165512f38f31f01e7f18bf3838f3a12e"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a165512f38f31f01e7f18bf3838f3a12e">GetBranchWeights</a></div><div class="ttdeci">static void GetBranchWeights(TerminatorInst *TI, SmallVectorImpl&lt; uint64_t &gt; &amp;Weights)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00737">SimplifyCFG.cpp:737</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9c30c87af01068ceae02cd371748d175"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">llvm::IRBuilder::CreateICmpULT</a></div><div class="ttdeci">Value * CreateICmpULT(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01259">IRBuilder.h:1259</a></div></div>
<div class="ttc" id="InstructionSimplify_8cpp_html_a565dd825f238fa0a8c4bbfe562635f7c"><div class="ttname"><a href="../../d9/d1a/InstructionSimplify_8cpp.html#a565dd825f238fa0a8c4bbfe562635f7c">getTrue</a></div><div class="ttdeci">static Constant * getTrue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/InstructionSimplify_8cpp_source.html#l00072">InstructionSimplify.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aebf44e187e9dfd25f09b1de6cb1767e1"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aebf44e187e9dfd25f09b1de6cb1767e1">llvm::IRBuilder::CreateCondBr</a></div><div class="ttdeci">BranchInst * CreateCondBr(Value *Cond, BasicBlock *True, BasicBlock *False, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">Create a conditional &#39;br Cond, TrueDest, FalseDest&#39; instruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00549">IRBuilder.h:549</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_a8a7f7d7aa56a6449ae814f48b6a8ce6f"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#a8a7f7d7aa56a6449ae814f48b6a8ce6f">ConstantIntSortPredicate</a></div><div class="ttdeci">static int ConstantIntSortPredicate(ConstantInt *const *P1, ConstantInt *const *P2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00714">SimplifyCFG.cpp:714</a></div></div>
<div class="ttc" id="namespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/STLExtras_8h_source.html#l00335">STLExtras.h:335</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="SimplifyCFG_8cpp_html_ada99fd4fd27356d1518273d8248940a5"><div class="ttname"><a href="../../d5/d96/SimplifyCFG_8cpp.html#ada99fd4fd27356d1518273d8248940a5">HasBranchWeights</a></div><div class="ttdeci">static bool HasBranchWeights(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00725">SimplifyCFG.cpp:725</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02450">Instructions.h:2450</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00632">IRBuilder.h:632</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a143819a808ec85e9997566fdf42e9372"><div class="ttname"><a href="../../d7/dcd/classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">llvm::SwitchInst::CaseIteratorT::getCaseSuccessor</a></div><div class="ttdeci">BasicBlockTy * getCaseSuccessor()</div><div class="ttdoc">Resolves successor for current case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02619">Instructions.h:2619</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02715">Instructions.h:2715</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a3feb6090a53e81f06d82da0a97be6e19"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a3feb6090a53e81f06d82da0a97be6e19">llvm::SwitchInst::getDefaultDest</a></div><div class="ttdeci">BasicBlock * getDefaultDest() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02718">Instructions.h:2718</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="../../d5/d8e/classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02728">Instructions.h:2728</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="../../d7/d3f/classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/MDBuilder_8h_source.html#l00030">MDBuilder.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="../../d6/de6/classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02678">Instructions.h:2678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a73476159b3f570043406e83b49ea036c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ValidLookupTableConstant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ValidLookupTableConstant - Return true if the backend will be able to handle initializing an array of constants like <a class="el" href="../../db/db2/structC.html">C</a>. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l03332">3332</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                                                  {</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  <span class="keywordflow">if</span> (C-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad6eda6146a0eefff9896e55489257bf0">isThreadDependent</a>())</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;  <span class="keywordflow">if</span> (C-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#a31a18634bf5ab012e092b07627c96e49">isDLLImportDependent</a>())</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(C))</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="keywordflow">return</span> CE-&gt;isGEPWithNoNotionalOverIndexing();</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="keywordflow">return</span> isa&lt;ConstantFP&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>) ||</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      isa&lt;ConstantInt&gt;(C) ||</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      isa&lt;ConstantPointerNull&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>) ||</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      isa&lt;GlobalValue&gt;(C) ||</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;      isa&lt;UndefValue&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a31a18634bf5ab012e092b07627c96e49"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#a31a18634bf5ab012e092b07627c96e49">llvm::Constant::isDLLImportDependent</a></div><div class="ttdeci">bool isDLLImportDependent() const </div><div class="ttdoc">Return true if the value is dependent on a dllimport variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00336">Constants.cpp:336</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad6eda6146a0eefff9896e55489257bf0"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad6eda6146a0eefff9896e55489257bf0">llvm::Constant::isThreadDependent</a></div><div class="ttdeci">bool isThreadDependent() const </div><div class="ttdoc">isThreadDependent - Return true if the value can vary between threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00329">Constants.cpp:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaba6ba9e89bea12994fa7a7a6ade4d38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ValuesOverlap </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; ValueEqualityComparisonCase &gt; &amp;&#160;</td>
          <td class="paramname"><em>C1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; ValueEqualityComparisonCase &gt; &amp;&#160;</td>
          <td class="paramname"><em>C2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ValuesOverlap - Return true if there are any keys in C1 that exist in C2 as well. </p>

<p>Definition at line <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html#l00530">530</a> of file <a class="el" href="../../d5/d96/SimplifyCFG_8cpp_source.html">SimplifyCFG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                                           {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  std::vector&lt;ValueEqualityComparisonCase&gt; *V1 = &amp;C1, *<a class="code" href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = &amp;C2;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Make V1 be smaller than V2.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (V1-&gt;size() &gt; V2-&gt;size())</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(V1, V2);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordflow">if</span> (V1-&gt;size() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (V1-&gt;size() == 1) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// Just scan V2.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *TheVal = (*V1)[0].<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a18dbfcb332af7515599ee795cf462843">Value</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = V2-&gt;size(); i != e; ++i)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">if</span> (TheVal == (*V2)[i].<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a18dbfcb332af7515599ee795cf462843">Value</a>)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Otherwise, just sort both lists and compare element by element.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(V1-&gt;begin(), V1-&gt;end());</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(V2-&gt;begin(), V2-&gt;end());</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a22f7bc6ca5c607bad683f34b8cfd1f1c">i1</a> = 0, <a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a> = 0, e1 = V1-&gt;size(), e2 = V2-&gt;size();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">while</span> (i1 != e1 &amp;&amp; <a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a> != e2) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> ((*V1)[i1].<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> == (*V2)[<a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a>].<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> ((*V1)[i1].Value &lt; (*V2)[<a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a>].Value)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      ++<a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a22f7bc6ca5c607bad683f34b8cfd1f1c">i1</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      ++<a class="code" href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;}</div>
<div class="ttc" id="X86DisassemblerTables_8h_html_a3de536c5d252022532c8f0b06e87f157"><div class="ttname"><a href="../../d3/d1d/X86DisassemblerTables_8h.html#a3de536c5d252022532c8f0b06e87f157">i2</a></div><div class="ttdeci">***NAME is the name of the raw_ostream unsigned unsigned &amp; i2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/X86DisassemblerTables_8h_source.html#l00149">X86DisassemblerTables.h:149</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0f/NVPTX_8h_source.html#l00131">NVPTX.h:131</a></div></div>
<div class="ttc" id="namespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/STLExtras_8h_source.html#l00335">STLExtras.h:335</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a18dbfcb332af7515599ee795cf462843"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a18dbfcb332af7515599ee795cf462843">llvm::Value::Value</a></div><div class="ttdeci">Value(Type *Ty, unsigned scid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00046">Value.cpp:46</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="X86DisassemblerTables_8h_html_a22f7bc6ca5c607bad683f34b8cfd1f1c"><div class="ttname"><a href="../../d3/d1d/X86DisassemblerTables_8h.html#a22f7bc6ca5c607bad683f34b8cfd1f1c">i1</a></div><div class="ttdeci">***NAME is the name of the raw_ostream unsigned &amp; i1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/X86DisassemblerTables_8h_source.html#l00149">X86DisassemblerTables.h:149</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="../../d8/dcc/namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/BitVector_8h_source.html#l00590">BitVector.h:590</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0b13773c26dad640e24611c48c657463"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; DupRet(&quot;simplifycfg-dup-ret&quot;, cl::Hidden, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Duplicate return <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> into unconditional branches&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aef5d6c1653f6d85c8ee596904289fd94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; HoistCondStores(&quot;simplifycfg-hoist-cond-stores&quot;, cl::Hidden, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Hoist conditional stores <a class="el" href="../../d1/d2d/DeadMachineInstructionElim_8cpp.html#aaa3848371787403e4ecfa0f2bff47697">if</a> an unconditional store precedes&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a830a17648b2e5112beef220cc707c977"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;unsigned&gt; PHINodeFoldingThreshold(&quot;phi-node-folding-threshold&quot;, cl::Hidden, cl::init(1), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Control the amount of phi node folding to perform (default = 1)&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac7707bcaec113d0d136467c7b97a62f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; SinkCommon(&quot;simplifycfg-<a class="el" href="../../d1/d81/dwarfdump-type-units_8cc.html#a6ac495c0425f7d6f873d10ee57f4bf28">sink</a>-common&quot;, cl::Hidden, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Sink common <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> down to the end block&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_4ecca51048f12bfa4eac71b429b6822b.html">Utils</a></li><li class="navelem"><a class="el" href="../../d5/d96/SimplifyCFG_8cpp.html">SimplifyCFG.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:46:01 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
