<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: Miscompilation.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d7b/Miscompilation_8cpp_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Miscompilation.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d7b/Miscompilation_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- Miscompilation.cpp - Debug program miscompilations -----------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements optimizer and code generation miscompilation debugging</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// support.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d7f/BugDriver_8h.html">BugDriver.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d17/ListReducer_8h.html">ListReducer.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d67/ToolRunner_8h.html">ToolRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/config.h&quot;</span>   <span class="comment">// for HAVE_LINK_R</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d45/Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/df5/DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd5/Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc7/Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d82/Verifier_8h.html">llvm/IR/Verifier.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d13/Linker_2Linker_8h.html">llvm/Linker/Linker.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d29/Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d41/CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d06/FileUtilities_8h.html">llvm/Support/FileUtilities.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d44/Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d3/d9e/IndVarSimplify2_8cpp.html#ac4f815981d19a995ed4c02690e805630">llvm</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d3/d9e/IndVarSimplify2_8cpp.html#ac4f815981d19a995ed4c02690e805630">llvm</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">extern</span> <a class="code" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">OutputPrefix</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../d9/d4a/namespacellvm.html#a0b4d80ec1b0e5e9777a6e2edadea7d98">   33</a></span>&#160;  <span class="keyword">extern</span> <a class="code" href="../../dd/d87/classllvm_1_1cl_1_1list.html">cl::list&lt;std::string&gt;</a> <a class="code" href="../../d9/d4a/namespacellvm.html#a0b4d80ec1b0e5e9777a6e2edadea7d98">InputArgv</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    DisableLoopExtraction(<span class="stringliteral">&quot;disable-loop-extraction&quot;</span>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t extract loops when searching for miscompilations&quot;</span>),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    DisableBlockExtraction(<span class="stringliteral">&quot;disable-block-extraction&quot;</span>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t extract blocks when searching for miscompilations&quot;</span>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">class </span>ReduceMiscompilingPasses : <span class="keyword">public</span> <a class="code" href="../../d6/dc6/structllvm_1_1ListReducer.html">ListReducer</a>&lt;std::string&gt; {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    ReduceMiscompilingPasses(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;bd) : BD(bd) {}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    TestResult doTest(std::vector&lt;std::string&gt; &amp;<a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                      std::vector&lt;std::string&gt; &amp;Suffix,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                      <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  };</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/// TestResult - After passes have been split into a test group and a control</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/// group, see if they still break the program.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span>ReduceMiscompilingPasses::TestResult</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;ReduceMiscompilingPasses::doTest(std::vector&lt;std::string&gt; &amp;<a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                 std::vector&lt;std::string&gt; &amp;Suffix,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                 <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// First, run the program with just the Suffix passes.  If it is still broken</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// with JUST the kept passes, discard the prefix passes.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking to see if &#39;&quot;</span> &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">getPassesString</a>(Suffix)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;&#39; compiles correctly: &quot;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> BitcodeResult;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span> (BD.runPasses(BD.getProgram(), Suffix, BitcodeResult, <span class="keyword">false</span><span class="comment">/*delete*/</span>,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                   <span class="keyword">true</span><span class="comment">/*quiet*/</span>)) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot; Error running this sequence of passes&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; on the input program!\n&quot;</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    BD.setPassesToRun(Suffix);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    BD.EmitProgressBitcode(BD.getProgram(), <span class="stringliteral">&quot;pass-error&quot;</span>,  <span class="keyword">false</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    exit(BD.debugOptimizerCrash());</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// Check to see if the finished program matches the reference output...</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">bool</span> Diff = BD.diffProgram(BD.getProgram(), BitcodeResult, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                             <span class="keyword">true</span> <span class="comment">/*delete bitcode*/</span>, &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">if</span> (Diff) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; nope.\n&quot;</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (Suffix.empty()) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.getToolName() &lt;&lt; <span class="stringliteral">&quot;: I&#39;m confused: the test fails when &quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;no passes are run, nondeterministic program?\n&quot;</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      exit(1);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> KeepSuffix;         <span class="comment">// Miscompilation detected!</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; yup.\n&quot;</span>;      <span class="comment">// No miscompilation!</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (Prefix.empty()) <span class="keywordflow">return</span> NoFailure;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// Next, see if the program is broken if we run the &quot;prefix&quot; passes first,</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// then separately run the &quot;kept&quot; passes.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking to see if &#39;&quot;</span> &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">getPassesString</a>(Prefix)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;&#39; compiles correctly: &quot;</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// If it is not broken with the kept passes, it&#39;s possible that the prefix</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// passes must be run before the kept passes to break it.  If the program</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// WORKS after the prefix passes, but then fails if running the prefix AND</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// kept passes, we can update our bitcode file to include the result of the</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// prefix passes, then discard the prefix passes.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (BD.runPasses(BD.getProgram(), <a class="code" href="../../dd/df9/namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>, BitcodeResult, <span class="keyword">false</span><span class="comment">/*delete*/</span>,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                   <span class="keyword">true</span><span class="comment">/*quiet*/</span>)) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot; Error running this sequence of passes&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; on the input program!\n&quot;</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    BD.setPassesToRun(Prefix);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    BD.EmitProgressBitcode(BD.getProgram(), <span class="stringliteral">&quot;pass-error&quot;</span>,  <span class="keyword">false</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    exit(BD.debugOptimizerCrash());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// If the prefix maintains the predicate by itself, only keep the prefix!</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  Diff = BD.diffProgram(BD.getProgram(), BitcodeResult, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (Diff) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; nope.\n&quot;</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#a921e0b01f22f9a37012450f9b5f0ccb7">sys::fs::remove</a>(BitcodeResult);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> KeepPrefix;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; yup.\n&quot;</span>;      <span class="comment">// No miscompilation!</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Ok, so now we know that the prefix passes work, try running the suffix</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// passes on the result of the prefix passes.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  std::unique_ptr&lt;Module&gt; PrefixOutput(</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a582d19067bf2efdf34f526ee0a885a88">ParseInputFile</a>(BitcodeResult, BD.getContext()));</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span> (!PrefixOutput) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.getToolName() &lt;&lt; <span class="stringliteral">&quot;: Error reading bitcode file &#39;&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;           &lt;&lt; BitcodeResult &lt;&lt; <span class="stringliteral">&quot;&#39;!\n&quot;</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    exit(1);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#a921e0b01f22f9a37012450f9b5f0ccb7">sys::fs::remove</a>(BitcodeResult);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// Don&#39;t check if there are no passes in the suffix.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (Suffix.empty())</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> NoFailure;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking to see if &#39;&quot;</span> &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">getPassesString</a>(Suffix)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;&#39; passes compile correctly after the &#39;&quot;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">getPassesString</a>(Prefix) &lt;&lt; <span class="stringliteral">&quot;&#39; passes: &quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  std::unique_ptr&lt;Module&gt; OriginalInput(</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      BD.swapProgramIn(PrefixOutput.release()));</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (BD.runPasses(BD.getProgram(), Suffix, BitcodeResult, <span class="keyword">false</span><span class="comment">/*delete*/</span>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                   <span class="keyword">true</span><span class="comment">/*quiet*/</span>)) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot; Error running this sequence of passes&quot;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; on the input program!\n&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    BD.setPassesToRun(Suffix);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    BD.EmitProgressBitcode(BD.getProgram(), <span class="stringliteral">&quot;pass-error&quot;</span>,  <span class="keyword">false</span>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    exit(BD.debugOptimizerCrash());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// Run the result...</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  Diff = BD.diffProgram(BD.getProgram(), BitcodeResult, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        <span class="keyword">true</span> <span class="comment">/*delete bitcode*/</span>, &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (Diff) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; nope.\n&quot;</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> KeepSuffix;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// Otherwise, we must not be running the bad pass anymore.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; yup.\n&quot;</span>;      <span class="comment">// No miscompilation!</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Restore orig program &amp; free test.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">delete</span> BD.swapProgramIn(OriginalInput.release());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">return</span> NoFailure;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">class </span>ReduceMiscompilingFunctions : <span class="keyword">public</span> <a class="code" href="../../d6/dc6/structllvm_1_1ListReducer.html">ListReducer</a>&lt;Function*&gt; {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    bool (*TestFn)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    ReduceMiscompilingFunctions(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;bd,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                <span class="keywordtype">bool</span> (*<a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                          <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      : BD(bd), TestFn(<a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    TestResult doTest(std::vector&lt;Function*&gt; &amp;Prefix,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                      std::vector&lt;Function*&gt; &amp;Suffix,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                      <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">if</span> (!Suffix.empty()) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = TestFuncs(Suffix, Error);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (Ret)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <span class="keywordflow">return</span> KeepSuffix;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">if</span> (!Prefix.empty()) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordtype">bool</span> Ret = TestFuncs(Prefix, Error);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> (Ret)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          <span class="keywordflow">return</span> KeepPrefix;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">return</span> NoFailure;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">bool</span> TestFuncs(<span class="keyword">const</span> std::vector&lt;Function*&gt; &amp;Prefix, <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  };</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// TestMergedProgram - Given two modules, link them together and run the</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// program, checking to see if the program matches the diff. If there is</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// an error, return NULL. If not, return the merged module. The Broken argument</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// will be set to true if the output is different. If the DeleteInputs</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/// argument is set to true then this function deletes both input</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/// modules before it returns.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#ac2a0f78968038ef4daa3ed11f802fa46">  217</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *<a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac2a0f78968038ef4daa3ed11f802fa46">TestMergedProgram</a>(<span class="keyword">const</span> <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *M1, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *M2,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                 <span class="keywordtype">bool</span> DeleteInputs, <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                 <span class="keywordtype">bool</span> &amp;Broken) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// Link the two portions of the program back to together.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> ErrorMsg;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (!DeleteInputs) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    M1 = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(M1);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    M2 = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(M2);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a244da8c7e9789b1b675b9741bd692c63">Linker::LinkModules</a>(M1, M2, <a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22">Linker::DestroySource</a>, &amp;ErrorMsg)) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;: Error linking modules together:&quot;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;           &lt;&lt; ErrorMsg &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    exit(1);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keyword">delete</span> M2;   <span class="comment">// We are done with this module.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Execute the program.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  Broken = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ac1fdc653b00994d49faab8fa43695161">diffProgram</a>(M1, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, &amp;Error);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (!Error.empty()) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// Delete the linked module</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">delete</span> M1;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">return</span> M1;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// TestFuncs - split functions in a Module into two groups: those that are</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/// under consideration for miscompilation vs. those that are not, and test</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">/// accordingly. Each group of functions becomes a separate Module.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ReduceMiscompilingFunctions::TestFuncs(<span class="keyword">const</span> std::vector&lt;Function*&gt; &amp;Funcs,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                            <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Test to see if the function is misoptimized if we ONLY run it on the</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// functions listed in Funcs.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking to see if the program is misoptimized when &quot;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         &lt;&lt; (Funcs.size()==1 ? <span class="stringliteral">&quot;this function is&quot;</span> : <span class="stringliteral">&quot;these functions are&quot;</span>)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; run through the pass&quot;</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         &lt;&lt; (BD.getPassesToRun().size() == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;es&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a5d4ee10dda7272a4205dbf5e2477cf1a">PrintFunctionList</a>(Funcs);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// Create a clone for two reasons:</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// * If the optimization passes delete any function, the deleted function</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">//   will be in the clone and Funcs will still point to valid memory</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// * If the optimization passes use interprocedural information to break</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">//   a function, we want to continue with the original function. Otherwise</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">//   we can conclude that a function triggers the bug when in fact one</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">//   needs a larger set of original functions to do so.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Clone = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.getProgram(), VMap);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Orig = BD.swapProgramIn(Clone);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  std::vector&lt;Function*&gt; FuncsOnClone;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Funcs.size(); i != e; ++i) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *<a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = cast&lt;Function&gt;(VMap[Funcs[i]]);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    FuncsOnClone.push_back(F);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Split the module into the two halves of the program we want.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  VMap.<a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html#a49dc44e6a66de10991ee34e1df0d8065">clear</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToNotOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.getProgram(), VMap);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ToNotOptimize, FuncsOnClone,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                                 VMap);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// Run the predicate, note that the predicate will delete both input modules.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">bool</span> Broken = TestFn(BD, ToOptimize, ToNotOptimize, Error);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keyword">delete</span> BD.swapProgramIn(Orig);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">return</span> Broken;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// DisambiguateGlobalSymbols - Give anonymous global values names.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">  291</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">DisambiguateGlobalSymbols</a>(<a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::global_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0567b31cf5caa26522fcc2e7cadc1dde">global_begin</a>(), E = M-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a19b72cdd81bd792545e25466b43ac7c2">global_end</a>();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasName())</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setName(<span class="stringliteral">&quot;anon_global&quot;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = M-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasName())</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setName(<span class="stringliteral">&quot;anon_fn&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// ExtractLoops - Given a reduced list of functions that still exposed the bug,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// check to see if we can extract the loops in the region without obscuring the</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/// bug.  If so, it reduces the amount of code identified.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a9baacb80854e43437d7cd3941ab7241c">  305</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a9baacb80854e43437d7cd3941ab7241c">ExtractLoops</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                         <span class="keywordtype">bool</span> (*TestFn)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                        <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;),</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                         std::vector&lt;Function*&gt; &amp;MiscompiledFunctions,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                         <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a>) <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToNotOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ToNotOptimize,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                   MiscompiledFunctions,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                   VMap);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToOptimizeLoopExtracted = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a6a59186682b7cd83f2b6625e1e8fd78a">ExtractLoop</a>(ToOptimize);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (!ToOptimizeLoopExtracted) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="comment">// If the loop extractor crashed or if there were no extractible loops,</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">// then this chapter of our odyssey is over with.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keyword">delete</span> ToNotOptimize;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keyword">delete</span> ToOptimize;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Extracted a loop from the breaking portion of the program.\n&quot;</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// Bugpoint is intentionally not very trusting of LLVM transformations.  In</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// particular, we&#39;re not going to assume that the loop extractor works, so</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// we&#39;re going to test the newly loop extracted program to make sure nothing</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// has broken.  If something broke, then we&#39;ll inform the user and stop</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// extraction.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../d3/def/classllvm_1_1AbstractInterpreter.html">AbstractInterpreter</a> *AI = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a3e075e83a3d7dfb1e1fa1e6474cd78b2">switchToSafeInterpreter</a>();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">bool</span> Failure;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *New = <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac2a0f78968038ef4daa3ed11f802fa46">TestMergedProgram</a>(BD, ToOptimizeLoopExtracted, ToNotOptimize,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                    <span class="keyword">false</span>, Error, Failure);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (!New)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// Delete the original and set the new program.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Old = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">swapProgramIn</a>(New);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MiscompiledFunctions.size(); i != e; ++i)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      MiscompiledFunctions[i] = cast&lt;Function&gt;(VMap[MiscompiledFunctions[i]]);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keyword">delete</span> Old;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (Failure) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a793e43000aa51b55688e4a09688ba6ca">switchToInterpreter</a>(AI);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// Merged program doesn&#39;t work anymore!</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** ERROR: Loop extraction broke the program. :(&quot;</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; Please report a bug!\n&quot;</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;      Continuing on with un-loop-extracted version.\n&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">OutputPrefix</a> + <span class="stringliteral">&quot;-loop-extract-fail-tno.bc&quot;</span>,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                            ToNotOptimize);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">OutputPrefix</a> + <span class="stringliteral">&quot;-loop-extract-fail-to.bc&quot;</span>,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                            ToOptimize);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">OutputPrefix</a> + <span class="stringliteral">&quot;-loop-extract-fail-to-le.bc&quot;</span>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                            ToOptimizeLoopExtracted);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Please submit the &quot;</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;             &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">OutputPrefix</a> &lt;&lt; <span class="stringliteral">&quot;-loop-extract-fail-*.bc files.\n&quot;</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keyword">delete</span> ToOptimize;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keyword">delete</span> ToNotOptimize;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keyword">delete</span> ToOptimizeLoopExtracted;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">delete</span> ToOptimize;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a793e43000aa51b55688e4a09688ba6ca">switchToInterpreter</a>(AI);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  Testing after loop extraction:\n&quot;</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// Clone modules, the tester function will free them.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *TOLEBackup = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(ToOptimizeLoopExtracted, VMap);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *TNOBackup  = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(ToNotOptimize, VMap);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MiscompiledFunctions.size(); i != e; ++i)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      MiscompiledFunctions[i] = cast&lt;Function&gt;(VMap[MiscompiledFunctions[i]]);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    Failure = TestFn(BD, ToOptimizeLoopExtracted, ToNotOptimize, Error);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    ToOptimizeLoopExtracted = TOLEBackup;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    ToNotOptimize = TNOBackup;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (!Failure) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Loop extraction masked the problem.  Undoing.\n&quot;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="comment">// If the program is not still broken, then loop extraction did something</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="comment">// that masked the error.  Stop loop extraction now.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      std::vector&lt;std::pair&lt;std::string, FunctionType*&gt; &gt; MisCompFunctions;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MiscompiledFunctions.size(); i != e; ++i) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *F = MiscompiledFunctions[i];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        MisCompFunctions.push_back(std::make_pair(F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>(),</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                                  F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> ErrorMsg;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a244da8c7e9789b1b675b9741bd692c63">Linker::LinkModules</a>(ToNotOptimize, ToOptimizeLoopExtracted, </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                              <a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22">Linker::DestroySource</a>, &amp;ErrorMsg)){</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;: Error linking modules together:&quot;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;               &lt;&lt; ErrorMsg &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        exit(1);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      MiscompiledFunctions.clear();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MisCompFunctions.size(); i != e; ++i) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *NewF = ToNotOptimize-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(MisCompFunctions[i].first);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(NewF &amp;&amp; <span class="stringliteral">&quot;Function not found??&quot;</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        MiscompiledFunctions.push_back(NewF);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keyword">delete</span> ToOptimizeLoopExtracted;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a0459324d2540da4f748b8d2bc9ced96a">setNewProgram</a>(ToNotOptimize);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Loop extraction successful!\n&quot;</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    std::vector&lt;std::pair&lt;std::string, FunctionType*&gt; &gt; MisCompFunctions;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ToOptimizeLoopExtracted-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(),</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;           E = ToOptimizeLoopExtracted-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        MisCompFunctions.push_back(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName(),</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                                  <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunctionType()));</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Okay, great!  Now we know that we extracted a loop and that loop</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// extraction both didn&#39;t break the program, and didn&#39;t mask the problem.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Replace the current program with the loop extracted version, and try to</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// extract another loop.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> ErrorMsg;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a244da8c7e9789b1b675b9741bd692c63">Linker::LinkModules</a>(ToNotOptimize, ToOptimizeLoopExtracted, </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                            <a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22">Linker::DestroySource</a>, &amp;ErrorMsg)){</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;: Error linking modules together:&quot;</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;             &lt;&lt; ErrorMsg &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      exit(1);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keyword">delete</span> ToOptimizeLoopExtracted;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// All of the Function*&#39;s in the MiscompiledFunctions list are in the old</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// module.  Update this list to include all of the functions in the</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// optimized and loop extracted module.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    MiscompiledFunctions.clear();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MisCompFunctions.size(); i != e; ++i) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *NewF = ToNotOptimize-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(MisCompFunctions[i].first);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(NewF &amp;&amp; <span class="stringliteral">&quot;Function not found??&quot;</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      MiscompiledFunctions.push_back(NewF);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a0459324d2540da4f748b8d2bc9ced96a">setNewProgram</a>(ToNotOptimize);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keyword">class </span>ReduceMiscompiledBlocks : <span class="keyword">public</span> <a class="code" href="../../d6/dc6/structllvm_1_1ListReducer.html">ListReducer</a>&lt;BasicBlock*&gt; {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    bool (*TestFn)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    std::vector&lt;Function*&gt; FunctionsBeingTested;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    ReduceMiscompiledBlocks(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;bd,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                            <span class="keywordtype">bool</span> (*F)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                      <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;),</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                            <span class="keyword">const</span> std::vector&lt;Function*&gt; &amp;Fns)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      : BD(bd), TestFn(F), FunctionsBeingTested(Fns) {}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    TestResult doTest(std::vector&lt;BasicBlock*&gt; &amp;Prefix,</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                      std::vector&lt;BasicBlock*&gt; &amp;Suffix,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                      <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">if</span> (!Suffix.empty()) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordtype">bool</span> Ret = TestFuncs(Suffix, Error);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (Ret)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <span class="keywordflow">return</span> KeepSuffix;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">if</span> (!Prefix.empty()) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordtype">bool</span> Ret = TestFuncs(Prefix, Error);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="keywordflow">return</span> InternalError;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">if</span> (Ret)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          <span class="keywordflow">return</span> KeepPrefix;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">return</span> NoFailure;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">bool</span> TestFuncs(<span class="keyword">const</span> std::vector&lt;BasicBlock*&gt; &amp;BBs, <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  };</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">/// TestFuncs - Extract all blocks for the miscompiled functions except for the</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/// specified blocks.  If the problem still exists, return true.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ReduceMiscompiledBlocks::TestFuncs(<span class="keyword">const</span> std::vector&lt;BasicBlock*&gt; &amp;BBs,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                        <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// Test to see if the function is misoptimized if we ONLY run it on the</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// functions listed in Funcs.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking to see if the program is misoptimized when all &quot;</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> (!BBs.empty()) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;but these &quot;</span> &lt;&lt; BBs.size() &lt;&lt; <span class="stringliteral">&quot; blocks are extracted: &quot;</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = BBs.size() &lt; 10 ? BBs.size() : 10; i != e; ++i)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; BBs[i]-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (BBs.size() &gt; 10) <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;blocks are extracted.&quot;</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Split the module into the two halves of the program we want.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Clone = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Orig = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">swapProgramIn</a>(Clone);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  std::vector&lt;Function*&gt; FuncsOnClone;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  std::vector&lt;BasicBlock*&gt; BBsOnClone;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = FunctionsBeingTested.size(); i != e; ++i) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *F = cast&lt;Function&gt;(VMap[FunctionsBeingTested[i]]);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    FuncsOnClone.push_back(F);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = BBs.size(); i != e; ++i) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = cast&lt;BasicBlock&gt;(VMap[BBs[i]]);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    BBsOnClone.push_back(BB);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  VMap.<a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html#a49dc44e6a66de10991ee34e1df0d8065">clear</a>();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToNotOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ToNotOptimize,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                                 FuncsOnClone,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                                 VMap);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Try the extraction.  If it doesn&#39;t work, then the block extractor crashed</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// or something, in which case bugpoint can&#39;t chase down this possibility.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *New = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a803f12bf45687735c82d2e7e688aa99e">ExtractMappedBlocksFromModule</a>(BBsOnClone, ToOptimize)) {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keyword">delete</span> ToOptimize;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// Run the predicate,</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">// note that the predicate will delete both input modules.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">bool</span> Ret = TestFn(BD, New, ToNotOptimize, Error);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keyword">delete</span> BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">swapProgramIn</a>(Orig);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keyword">delete</span> BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">swapProgramIn</a>(Orig);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keyword">delete</span> ToOptimize;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keyword">delete</span> ToNotOptimize;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;}</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">/// ExtractBlocks - Given a reduced list of functions that still expose the bug,</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">/// extract as many basic blocks from the region as possible without obscuring</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">/// the bug.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a845f0e80fba0e779a2dedab72abad677">  555</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a845f0e80fba0e779a2dedab72abad677">ExtractBlocks</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                          <span class="keywordtype">bool</span> (*TestFn)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                         <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;),</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                          std::vector&lt;Function*&gt; &amp;MiscompiledFunctions,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                          <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  std::vector&lt;BasicBlock*&gt; Blocks;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MiscompiledFunctions.size(); i != e; ++i)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MiscompiledFunctions[i]-&gt;<a class="code" href="../../dc/dbc/namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(),</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;           E = MiscompiledFunctions[i]-&gt;<a class="code" href="../../d2/d5b/classllvm_1_1StringRef.html#a9e277b660236bb0318b61ab9cdf60dc7">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      Blocks.push_back(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// Use the list reducer to identify blocks that can be extracted without</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// obscuring the bug.  The Blocks list will end up containing blocks that must</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// be retained from the original program.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordtype">unsigned</span> OldSize = Blocks.size();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// Check to see if all blocks are extractible first.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordtype">bool</span> Ret = ReduceMiscompiledBlocks(BD, TestFn, MiscompiledFunctions)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                  .TestFuncs(std::vector&lt;BasicBlock*&gt;(), Error);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">if</span> (Ret) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    Blocks.clear();</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    ReduceMiscompiledBlocks(BD, TestFn,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                            MiscompiledFunctions).reduceList(Blocks, Error);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (Blocks.size() == OldSize)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ProgClone = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToExtract = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ProgClone,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                                MiscompiledFunctions,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                                VMap);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Extracted = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a803f12bf45687735c82d2e7e688aa99e">ExtractMappedBlocksFromModule</a>(Blocks, ToExtract);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (!Extracted) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// Weird, extraction should have worked.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Nondeterministic problem extracting blocks??\n&quot;</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">delete</span> ProgClone;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">delete</span> ToExtract;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// Otherwise, block extraction succeeded.  Link the two program fragments back</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// together.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keyword">delete</span> ToExtract;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  std::vector&lt;std::pair&lt;std::string, FunctionType*&gt; &gt; MisCompFunctions;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Extracted-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = Extracted-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;       <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      MisCompFunctions.push_back(std::make_pair(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName(),</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                                <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunctionType()));</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> ErrorMsg;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a244da8c7e9789b1b675b9741bd692c63">Linker::LinkModules</a>(ProgClone, Extracted, <a class="code" href="../../dd/df1/classllvm_1_1Linker.html#a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22">Linker::DestroySource</a>, </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                          &amp;ErrorMsg)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;: Error linking modules together:&quot;</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;           &lt;&lt; ErrorMsg &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    exit(1);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keyword">delete</span> Extracted;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// Set the new program and delete the old one.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a0459324d2540da4f748b8d2bc9ced96a">setNewProgram</a>(ProgClone);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// Update the list of miscompiled functions.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  MiscompiledFunctions.clear();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = MisCompFunctions.size(); i != e; ++i) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *NewF = ProgClone-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(MisCompFunctions[i].first);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(NewF &amp;&amp; <span class="stringliteral">&quot;Function not found??&quot;</span>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    MiscompiledFunctions.push_back(NewF);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// DebugAMiscompilation - This is a generic driver to narrow down</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">/// miscompilations, either in an optimization or a code generator.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::vector&lt;Function*&gt;</div>
<div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#ac1004a3427f829fbf03ff4656c217b3b">  643</a></span>&#160;<a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac1004a3427f829fbf03ff4656c217b3b">DebugAMiscompilation</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD,</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                     <span class="keywordtype">bool</span> (*TestFn)(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                    <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;),</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                     <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// Okay, now that we have reduced the list of passes which are causing the</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// failure, see if we can pin down which functions are being</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// miscompiled... first build a list of all of the non-external functions in</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// the program.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  std::vector&lt;Function*&gt; MiscompiledFunctions;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Prog = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Prog-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = Prog-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      MiscompiledFunctions.push_back(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Do the reduction...</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a>)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    ReduceMiscompilingFunctions(BD, TestFn).reduceList(MiscompiledFunctions,</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                                       Error);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> (!Error.empty()) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;\n***Cannot reduce functions: &quot;</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** The following function&quot;</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;         &lt;&lt; (MiscompiledFunctions.size() == 1 ? <span class="stringliteral">&quot; is&quot;</span> : <span class="stringliteral">&quot;s are&quot;</span>)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; being miscompiled: &quot;</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a5d4ee10dda7272a4205dbf5e2477cf1a">PrintFunctionList</a>(MiscompiledFunctions);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// See if we can rip any loops out of the miscompiled functions and still</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// trigger the problem.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a> &amp;&amp; !DisableLoopExtraction) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordtype">bool</span> Ret = <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a9baacb80854e43437d7cd3941ab7241c">ExtractLoops</a>(BD, TestFn, MiscompiledFunctions, Error);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (Ret) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="comment">// Okay, we extracted some loops and the problem still appears.  See if</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="comment">// we can eliminate some of the created functions from being candidates.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">DisambiguateGlobalSymbols</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>());</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="comment">// Do the reduction...</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a>)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        ReduceMiscompilingFunctions(BD, TestFn).reduceList(MiscompiledFunctions,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                                           Error);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** The following function&quot;</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;             &lt;&lt; (MiscompiledFunctions.size() == 1 ? <span class="stringliteral">&quot; is&quot;</span> : <span class="stringliteral">&quot;s are&quot;</span>)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; being miscompiled: &quot;</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a5d4ee10dda7272a4205dbf5e2477cf1a">PrintFunctionList</a>(MiscompiledFunctions);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a> &amp;&amp; !DisableBlockExtraction) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordtype">bool</span> Ret = <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a845f0e80fba0e779a2dedab72abad677">ExtractBlocks</a>(BD, TestFn, MiscompiledFunctions, Error);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (Ret) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="comment">// Okay, we extracted some blocks and the problem still appears.  See if</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="comment">// we can eliminate some of the created functions from being candidates.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">DisambiguateGlobalSymbols</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>());</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="comment">// Do the reduction...</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      ReduceMiscompilingFunctions(BD, TestFn).reduceList(MiscompiledFunctions,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                                         Error);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** The following function&quot;</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;             &lt;&lt; (MiscompiledFunctions.size() == 1 ? <span class="stringliteral">&quot; is&quot;</span> : <span class="stringliteral">&quot;s are&quot;</span>)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; being miscompiled: &quot;</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a5d4ee10dda7272a4205dbf5e2477cf1a">PrintFunctionList</a>(MiscompiledFunctions);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">return</span> MiscompiledFunctions;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">/// TestOptimizer - This is the predicate function used to check to see if the</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/// &quot;Test&quot; portion of the program is misoptimized.  If so, return true.  In any</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/// case, both module arguments are deleted.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a73da624aa7ea047e25e45133f40f1e94">  728</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a73da624aa7ea047e25e45133f40f1e94">TestOptimizer</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Test, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Safe,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                          <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// Run the optimization passes on ToOptimize, producing a transformed version</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// of the functions being tested.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  Optimizing functions being tested: &quot;</span>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Optimized = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#aa0661d3d0a6d3f68fd2605339c85ed23">runPassesOn</a>(Test, BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#aece8fc8a0b61ebf0de693b5b8e0ed9e2">getPassesToRun</a>(),</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                     <span class="comment">/*AutoDebugCrashes*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;done.\n&quot;</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keyword">delete</span> Test;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  Checking to see if the merged program executes correctly: &quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordtype">bool</span> Broken;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *New = <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac2a0f78968038ef4daa3ed11f802fa46">TestMergedProgram</a>(BD, Optimized, Safe, <span class="keyword">true</span>, Error, Broken);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">if</span> (New) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; (Broken ? <span class="stringliteral">&quot; nope.\n&quot;</span> : <span class="stringliteral">&quot; yup.\n&quot;</span>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// Delete the original and set the new program.</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keyword">delete</span> BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">swapProgramIn</a>(New);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">return</span> Broken;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/// debugMiscompilation - This method is used when the passes selected are not</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/// crashing, but the generated output is semantically different from the</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/// input.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="../../d6/df0/classllvm_1_1BugDriver.html#a4077ffbe6ced8502b19bbbc9d95db060">  754</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a4077ffbe6ced8502b19bbbc9d95db060">BugDriver::debugMiscompilation</a>(<a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> *Error) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// Make sure something was miscompiled...</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">BugpointIsInterrupted</a>)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (!ReduceMiscompilingPasses(*this).reduceList(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a680bb2b02aec7f6ac7ed9d8a38fcb531">PassesToRun</a>, *Error)) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">if</span> (Error-&gt;empty())</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Optimized program matches reference output!  No problem&quot;</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; detected...\nbugpoint can&#39;t help you with your problem!\n&quot;</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** Found miscompiling pass&quot;</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         &lt;&lt; (<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#aece8fc8a0b61ebf0de693b5b8e0ed9e2">getPassesToRun</a>().size() == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;es&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">getPassesString</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#aece8fc8a0b61ebf0de693b5b8e0ed9e2">getPassesToRun</a>()) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a995ca25e4ce6a3ae355968fec4bdb37a">EmitProgressBitcode</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ad2ddc402d553d6bfdf8f169510f4b3b5">Program</a>, <span class="stringliteral">&quot;passinput&quot;</span>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  std::vector&lt;Function *&gt; MiscompiledFunctions =</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac1004a3427f829fbf03ff4656c217b3b">DebugAMiscompilation</a>(*<span class="keyword">this</span>, <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a73da624aa7ea047e25e45133f40f1e94">TestOptimizer</a>, *Error);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (!Error-&gt;empty())</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// Output a bunch of bitcode files for the user...</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;Outputting reduced bitcode files which expose the problem:\n&quot;</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToNotOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToOptimize = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ToNotOptimize,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                                 MiscompiledFunctions,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                                 VMap);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  Non-optimized portion: &quot;</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a995ca25e4ce6a3ae355968fec4bdb37a">EmitProgressBitcode</a>(ToNotOptimize, <span class="stringliteral">&quot;tonotoptimize&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keyword">delete</span> ToNotOptimize;  <span class="comment">// Delete hacked module.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  Portion that is input to optimizer: &quot;</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a995ca25e4ce6a3ae355968fec4bdb37a">EmitProgressBitcode</a>(ToOptimize, <span class="stringliteral">&quot;tooptimize&quot;</span>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keyword">delete</span> ToOptimize;      <span class="comment">// Delete hacked module.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/// CleanupAndPrepareModules - Get the specified modules ready for code</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">/// generator testing.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a087d72dc2aed773a0c032c17cfc44c23">  796</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a087d72dc2aed773a0c032c17cfc44c23">CleanupAndPrepareModules</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *&amp;Test,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                     <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Safe) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// Clean up the modules, removing extra cruft that we don&#39;t need anymore...</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  Test = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a7a78f65c498e2b7541c4b2adb70a3e0d">performFinalCleanups</a>(Test);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// If we are executing the JIT, we have several nasty issues to take care of.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> (!BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a94e0fe79ed358cb064b782d09240ff59">isExecutingJIT</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// First, if the main function is in the Safe module, we must add a stub to</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// the Test module to call into it.  Thus, we create a new function `main&#39;</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// which just calls the old one.</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *oldMain = Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(<span class="stringliteral">&quot;main&quot;</span>))</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span> (!oldMain-&gt;isDeclaration()) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="comment">// Rename it</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      oldMain-&gt;setName(<span class="stringliteral">&quot;llvm_bugpoint_old_main&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="comment">// Create a NEW `main&#39; function with same type in the test module.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *newMain = <a class="code" href="../../de/d7c/classllvm_1_1Function.html#a6b78e0f5ec53ac05826d6cce648bca30">Function::Create</a>(oldMain-&gt;getFunctionType(),</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                           <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                                           <span class="stringliteral">&quot;main&quot;</span>, Test);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="comment">// Create an `oldmain&#39; prototype in the test module, which will</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="comment">// corresponds to the real main function in the same module.</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *oldMainProto = <a class="code" href="../../de/d7c/classllvm_1_1Function.html#a6b78e0f5ec53ac05826d6cce648bca30">Function::Create</a>(oldMain-&gt;getFunctionType(),</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                                <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                                oldMain-&gt;getName(), Test);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// Set up and remember the argument list for the main function.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      std::vector&lt;Value*&gt; <a class="code" href="../../d8/d12/namespacespill-02.html#a6f9f136c24bf4a57501a7cbd819b5dd3">args</a>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::arg_iterator</a></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;             <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = newMain-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = newMain-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(),</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;             OI = oldMain-&gt;arg_begin(); <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++OI) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setName(OI-&gt;getName());    <span class="comment">// Copy argument names from oldMain</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        args.push_back(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="comment">// Call the old main function and return its result</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), <span class="stringliteral">&quot;entry&quot;</span>, newMain);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="../../dc/d85/arange-overlap_8cc.html#aba7af6b502e464074d3c31ff9236a22c">call</a> = <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a3ff9b8134737690083410aeeea42308e">CallInst::Create</a>(oldMainProto, args, <span class="stringliteral">&quot;&quot;</span>, BB);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="comment">// If the type of old function wasn&#39;t void, return value of call</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html#a8c4c3b7c7daea37c75c50563654bf934">ReturnInst::Create</a>(Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), <a class="code" href="../../dc/d85/arange-overlap_8cc.html#aba7af6b502e464074d3c31ff9236a22c">call</a>, BB);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// The second nasty issue we must deal with in the JIT is that the Safe</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// module cannot directly reference any functions defined in the test</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// module.  Instead, we use a JIT API call to dynamically resolve the</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// symbol.</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// Add the resolver to the Safe module.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// Prototype: void *getPointerToNamedFunction(const char* Name)</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *resolverFunc =</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(<span class="stringliteral">&quot;getPointerToNamedFunction&quot;</span>,</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    <a class="code" href="../../db/d53/classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>()),</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    <a class="code" href="../../db/d53/classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>()),</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                       (<a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *)<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">// Use the function we just added to get addresses of functions we need.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Module::iterator</a> F = Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = Safe-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); F != E; ++<a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (F-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>() &amp;&amp; !F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; &amp;*F != resolverFunc &amp;&amp;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        !F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">isIntrinsic</a>() <span class="comment">/* ignore intrinsics */</span>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *TestFn = Test-&gt;<a class="code" href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="comment">// Don&#39;t forward functions which are external in the test module too.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordflow">if</span> (TestFn &amp;&amp; !TestFn-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>()) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">// 1. Add a string constant with its name to the global file</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *InitArray =</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          <a class="code" href="../../d4/d6c/classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *funcName =</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(*Safe, InitArray-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">true</span> <span class="comment">/*isConstant*/</span>,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                             <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, InitArray,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                             F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;_name&quot;</span>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="comment">// 2. Use `GetElementPtr *funcName, 0, 0&#39; to convert the string to an</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="comment">// sbyte* so it matches the signature of the resolver function.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="comment">// GetElementPtr *funcName, ulong 0, ulong 0</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        std::vector&lt;Constant*&gt; GEPargs(2,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                     <a class="code" href="../../d1/d57/classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="../../db/d53/classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>())));</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *GEP = <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(funcName, GEPargs);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        std::vector&lt;Value*&gt; ResolverArgs;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        ResolverArgs.push_back(GEP);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="comment">// Rewrite uses of F in global initializers, etc. to uses of a wrapper</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// function that dynamically resolves the calls to F via our JIT API</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">if</span> (!F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;          <span class="comment">// Create a new global to hold the cached function pointer.</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;          <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *NullPtr = <a class="code" href="../../d6/df2/classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(F-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *Cache =</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keyword">new</span> <a class="code" href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a>(*F-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), F-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>(),</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                               <span class="keyword">false</span>, <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                               NullPtr,F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.fpcache&quot;</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;          <span class="comment">// Construct a new stub function that will re-route calls to F</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <a class="code" href="../../d3/da8/classllvm_1_1FunctionType.html">FunctionType</a> *FuncTy = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          <a class="code" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *FuncWrapper = <a class="code" href="../../de/d7c/classllvm_1_1Function.html#a6b78e0f5ec53ac05826d6cce648bca30">Function::Create</a>(FuncTy,</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                                   <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                                                   F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;_wrapper&quot;</span>,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                                                   F-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;          <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB  = <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                                                    <span class="stringliteral">&quot;entry&quot;</span>, FuncWrapper);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;          <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *DoCallBB = <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                                    <span class="stringliteral">&quot;usecache&quot;</span>, FuncWrapper);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;          <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *LookupBB = <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                                                    <span class="stringliteral">&quot;lookupfp&quot;</span>, FuncWrapper);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;          <span class="comment">// Check to see if we already looked up the value.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;          <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *CachedVal = <span class="keyword">new</span> <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>(Cache, <span class="stringliteral">&quot;fpcache&quot;</span>, EntryBB);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;          <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *IsNull = <span class="keyword">new</span> <a class="code" href="../../d5/dcb/classllvm_1_1ICmpInst.html">ICmpInst</a>(*EntryBB, <a class="code" href="../../df/de6/classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, CachedVal,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                       NullPtr, <span class="stringliteral">&quot;isNull&quot;</span>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(LookupBB, DoCallBB, IsNull, EntryBB);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;          <span class="comment">// Resolve the call to function F via the JIT API:</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;          <span class="comment">// call resolver(GetElementPtr...)</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;          <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *Resolver =</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a3ff9b8134737690083410aeeea42308e">CallInst::Create</a>(resolverFunc, ResolverArgs, <span class="stringliteral">&quot;resolver&quot;</span>, LookupBB);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;          <span class="comment">// Cast the result from the resolver to correctly-typed function.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;          <a class="code" href="../../de/dcc/classllvm_1_1CastInst.html">CastInst</a> *CastedResolver =</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(Resolver,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                            <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()),</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                            <span class="stringliteral">&quot;resolverCast&quot;</span>, LookupBB);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;          <span class="comment">// Save the value in our cache.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          <span class="keyword">new</span> <a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a>(CastedResolver, Cache, LookupBB);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <a class="code" href="../../dc/de7/classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(DoCallBB, LookupBB);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *FuncPtr = <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(NullPtr-&gt;getType(), 2,</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                             <span class="stringliteral">&quot;fp&quot;</span>, DoCallBB);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;          FuncPtr-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(CastedResolver, LookupBB);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          FuncPtr-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(CachedVal, EntryBB);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;          <span class="comment">// Save the argument list.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          std::vector&lt;Value*&gt; <a class="code" href="../../d9/dd7/OptionParsingTest_8cpp.html#a36ae00d4b55611436688342404b47a90">Args</a>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> i = FuncWrapper-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(),</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                 e = FuncWrapper-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); i != e; ++i)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            Args.push_back(i);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;          <span class="comment">// Pass on the arguments to the real function, return its result</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          <span class="keywordflow">if</span> (F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>()) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a3ff9b8134737690083410aeeea42308e">CallInst::Create</a>(FuncPtr, Args, <span class="stringliteral">&quot;&quot;</span>, DoCallBB);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html#a8c4c3b7c7daea37c75c50563654bf934">ReturnInst::Create</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), DoCallBB);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">Call</a> = <a class="code" href="../../d6/d9f/classllvm_1_1CallInst.html#a3ff9b8134737690083410aeeea42308e">CallInst::Create</a>(FuncPtr, Args,</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                                              <span class="stringliteral">&quot;retval&quot;</span>, DoCallBB);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <a class="code" href="../../d9/d12/classllvm_1_1ReturnInst.html#a8c4c3b7c7daea37c75c50563654bf934">ReturnInst::Create</a>(F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),<a class="code" href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">Call</a>, DoCallBB);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;          }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <span class="comment">// Use the wrapper function instead of the old function</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(FuncWrapper);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#af5b153076349383ec5ed2685f248c0a3">verifyModule</a>(*Test) || <a class="code" href="../../d9/d4a/namespacellvm.html#af5b153076349383ec5ed2685f248c0a3">verifyModule</a>(*Safe)) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Bugpoint has a bug, which corrupted a module!!\n&quot;</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    abort();</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">/// TestCodeGenerator - This is the predicate function used to check to see if</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// the &quot;Test&quot; portion of the program is miscompiled by the code generator under</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// test.  If so, return true.  In any case, both module arguments are deleted.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="../../d2/d7b/Miscompilation_8cpp.html#a5cf055dacc38a16b3c8252e71bf09fbe">  961</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5cf055dacc38a16b3c8252e71bf09fbe">TestCodeGenerator</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html">BugDriver</a> &amp;BD, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Test, <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *Safe,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                              <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> &amp;Error) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a087d72dc2aed773a0c032c17cfc44c23">CleanupAndPrepareModules</a>(BD, Test, Safe);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="../../db/ddb/classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> TestModuleBC;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordtype">int</span> TestModuleFD;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  std::error_code EC = <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#ae3cdedf952d5eeb089d175c61d9f6fee">sys::fs::createTemporaryFile</a>(<span class="stringliteral">&quot;bugpoint.test&quot;</span>, <span class="stringliteral">&quot;bc&quot;</span>,</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                                    TestModuleFD, TestModuleBC);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">if</span> (EC) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;Error making unique filename: &quot;</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;           &lt;&lt; EC.message() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    exit(1);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> (BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(), TestModuleFD, Test)) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Error writing bitcode to `&quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>()</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;&#39;\nExiting.&quot;</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    exit(1);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keyword">delete</span> Test;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="../../d1/d6f/classllvm_1_1FileRemover.html">FileRemover</a> TestModuleBCRemover(TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(), !<a class="code" href="../../d9/d4a/namespacellvm.html#ad85e8c8bbba8b678a2feaf15e0da46b9">SaveTemps</a>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// Make the shared library</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="../../db/ddb/classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> SafeModuleBC;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordtype">int</span> SafeModuleFD;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  EC = <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#ae3cdedf952d5eeb089d175c61d9f6fee">sys::fs::createTemporaryFile</a>(<span class="stringliteral">&quot;bugpoint.safe&quot;</span>, <span class="stringliteral">&quot;bc&quot;</span>, SafeModuleFD,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                                    SafeModuleBC);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">if</span> (EC) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;Error making unique filename: &quot;</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;           &lt;&lt; EC.message() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    exit(1);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(SafeModuleBC.str(), SafeModuleFD, Safe)) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Error writing bitcode to `&quot;</span> &lt;&lt; SafeModuleBC.str()</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;&#39;\nExiting.&quot;</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    exit(1);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="../../d1/d6f/classllvm_1_1FileRemover.html">FileRemover</a> SafeModuleBCRemover(SafeModuleBC.str(), !<a class="code" href="../../d9/d4a/namespacellvm.html#ad85e8c8bbba8b678a2feaf15e0da46b9">SaveTemps</a>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> SharedObject = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a888be46aa0792af8e970f458a0f9d3b7">compileSharedObject</a>(SafeModuleBC.str(), <a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keyword">delete</span> Safe;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <a class="code" href="../../d1/d6f/classllvm_1_1FileRemover.html">FileRemover</a> SharedObjectRemover(SharedObject, !<a class="code" href="../../d9/d4a/namespacellvm.html#ad85e8c8bbba8b678a2feaf15e0da46b9">SaveTemps</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Run the code generator on the `Test&#39; code, loading the shared library.</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// The function returns whether or not the new output differs from reference.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordtype">bool</span> Result = BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ac1fdc653b00994d49faab8fa43695161">diffProgram</a>(BD.<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(),</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                               SharedObject, <span class="keyword">false</span>, &amp;<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">if</span> (!Error.empty())</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">if</span> (Result)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;: still failing!\n&quot;</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;: didn&#39;t fail.\n&quot;</span>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;}</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/// debugCodeGenerator - debug errors in LLC, LLI, or CBE.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="../../d6/df0/classllvm_1_1BugDriver.html#a44d9fc68863722f23847e4a6d0844d5e"> 1027</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a44d9fc68863722f23847e4a6d0844d5e">BugDriver::debugCodeGenerator</a>(<a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> *Error) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> ((<span class="keywordtype">void</span>*)<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ab932b25f14d787c75ada869661c620ce">SafeInterpreter</a> == (<span class="keywordtype">void</span>*)<a class="code" href="../../d3/de3/classllvm_1_1Interpreter.html">Interpreter</a>) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> Result = <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#aa38297413e38b22d3468bedcdae968c2">executeProgramSafely</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ad2ddc402d553d6bfdf8f169510f4b3b5">Program</a>, <span class="stringliteral">&quot;bugpoint.safe.out&quot;</span>,</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                                              Error);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> (Error-&gt;empty()) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** The \&quot;safe\&quot; i.e. &#39;known good&#39; backend cannot match &quot;</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;the reference diff.  This may be due to a\n    front-end &quot;</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;bug or a bug in the original program, but this can also &quot;</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;happen if bugpoint isn&#39;t running the program with the &quot;</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;right flags or input.\n    I left the result of executing &quot;</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;the program with the \&quot;safe\&quot; backend in this file for &quot;</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;you: &#39;&quot;</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;             &lt;&lt; Result &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">DisambiguateGlobalSymbols</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ad2ddc402d553d6bfdf8f169510f4b3b5">Program</a>);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  std::vector&lt;Function*&gt; Funcs = <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#ac1004a3427f829fbf03ff4656c217b3b">DebugAMiscompilation</a>(*<span class="keyword">this</span>, <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a5cf055dacc38a16b3c8252e71bf09fbe">TestCodeGenerator</a>,</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                                                      *Error);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordflow">if</span> (!Error-&gt;empty())</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// Split the module into the two halves of the program we want.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="../../d0/d6f/classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToNotCodeGen = <a class="code" href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">CloneModule</a>(<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">getProgram</a>(), VMap);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="../../de/d27/classllvm_1_1Module.html">Module</a> *ToCodeGen = <a class="code" href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">SplitFunctionsOutOfModule</a>(ToNotCodeGen, Funcs, VMap);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// Condition the modules</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <a class="code" href="../../d2/d7b/Miscompilation_8cpp.html#a087d72dc2aed773a0c032c17cfc44c23">CleanupAndPrepareModules</a>(*<span class="keyword">this</span>, ToCodeGen, ToNotCodeGen);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="../../db/ddb/classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> TestModuleBC;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordtype">int</span> TestModuleFD;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  std::error_code EC = <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#ae3cdedf952d5eeb089d175c61d9f6fee">sys::fs::createTemporaryFile</a>(<span class="stringliteral">&quot;bugpoint.test&quot;</span>, <span class="stringliteral">&quot;bc&quot;</span>,</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                                                    TestModuleFD, TestModuleBC);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (EC) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;Error making unique filename: &quot;</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;           &lt;&lt; EC.message() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    exit(1);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(), TestModuleFD, ToCodeGen)) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Error writing bitcode to `&quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>()</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;&#39;\nExiting.&quot;</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    exit(1);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keyword">delete</span> ToCodeGen;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// Make the shared library</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="../../db/ddb/classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> SafeModuleBC;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordtype">int</span> SafeModuleFD;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  EC = <a class="code" href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#ae3cdedf952d5eeb089d175c61d9f6fee">sys::fs::createTemporaryFile</a>(<span class="stringliteral">&quot;bugpoint.safe&quot;</span>, <span class="stringliteral">&quot;bc&quot;</span>, SafeModuleFD,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                    SafeModuleBC);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordflow">if</span> (EC) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">getToolName</a>() &lt;&lt; <span class="stringliteral">&quot;Error making unique filename: &quot;</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;           &lt;&lt; EC.message() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    exit(1);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">writeProgramToFile</a>(SafeModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(), SafeModuleFD, ToNotCodeGen)) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Error writing bitcode to `&quot;</span> &lt;&lt; SafeModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>()</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;&#39;\nExiting.&quot;</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    exit(1);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> SharedObject = <a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a888be46aa0792af8e970f458a0f9d3b7">compileSharedObject</a>(SafeModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>(), *<a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a>);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">if</span> (!Error-&gt;empty())</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keyword">delete</span> ToNotCodeGen;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;You can reproduce the problem with the command line: \n&quot;</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/df0/classllvm_1_1BugDriver.html#a94e0fe79ed358cb064b782d09240ff59">isExecutingJIT</a>()) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  lli -load &quot;</span> &lt;&lt; SharedObject &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  llc &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>() &lt;&lt; <span class="stringliteral">&quot; -o &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>()</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;.s\n&quot;</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  gcc &quot;</span> &lt;&lt; SharedObject &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>()</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;.s -o &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>() &lt;&lt; <span class="stringliteral">&quot;.exe&quot;</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="preprocessor">#if defined (HAVE_LINK_R)</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="preprocessor"></span>    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; -Wl,-R.&quot;</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="preprocessor"></span>    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; TestModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>() &lt;&lt; <span class="stringliteral">&quot;.exe&quot;</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="../../d9/d4a/namespacellvm.html#a0b4d80ec1b0e5e9777a6e2edadea7d98">InputArgv</a>.size(); i != e; ++i)</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="../../d9/d4a/namespacellvm.html#a0b4d80ec1b0e5e9777a6e2edadea7d98">InputArgv</a>[i];</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot;The shared object was created with:\n  llc -march=c &quot;</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;         &lt;&lt; SafeModuleBC.<a class="code" href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>() &lt;&lt; <span class="stringliteral">&quot; -o temporary.c\n&quot;</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;  gcc -xc temporary.c -O2 -o &quot;</span> &lt;&lt; SharedObject;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#a8e6b3ed26ba0a41f9581c3de2644e252">TargetTriple</a>.<a class="code" href="../../da/d58/classllvm_1_1Triple.html#a97f56ec2cf93b5b4d1db9befd8d3d535">getArch</a>() == <a class="code" href="../../da/d58/classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a9ebafd1adc05a751215ae959f2891752">Triple::sparc</a>)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; -G&quot;</span>;              <span class="comment">// Compile a shared library, `-G&#39; for Sparc</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; -fPIC -shared&quot;</span>;   <span class="comment">// `-shared&#39; for Linux/X86, maybe others</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; <span class="stringliteral">&quot; -fno-strict-aliasing\n&quot;</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ValueMap_html_a49dc44e6a66de10991ee34e1df0d8065"><div class="ttname"><a href="../../d0/d6f/classllvm_1_1ValueMap.html#a49dc44e6a66de10991ee34e1df0d8065">llvm::ValueMap::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddc/ValueMap_8h_source.html#l00112">ValueMap.h:112</a></div></div>
<div class="ttc" id="namespacellvm_html_a5d4ee10dda7272a4205dbf5e2477cf1a"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a5d4ee10dda7272a4205dbf5e2477cf1a">llvm::PrintFunctionList</a></div><div class="ttdeci">void PrintFunctionList(const std::vector&lt; Function * &gt; &amp;Funcs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/BugDriver_8cpp_source.html#l00233">BugDriver.cpp:233</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l02430">Constants.cpp:2430</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5f/raw__ostream_8cpp_source.html#l00671">raw_ostream.cpp:671</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="namespacellvm_html_a0b4d80ec1b0e5e9777a6e2edadea7d98"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a0b4d80ec1b0e5e9777a6e2edadea7d98">llvm::InputArgv</a></div><div class="ttdeci">cl::list&lt; std::string &gt; InputArgv(&quot;args&quot;, cl::Positional, cl::desc(&quot;&lt;program arguments&gt;...&quot;), cl::ZeroOrMore, cl::PositionalEatsArgs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00033">Miscompilation.cpp:33</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00202">Function.cpp:202</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a2924bdc77c2a75e58250bae9467c83a9"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a2924bdc77c2a75e58250bae9467c83a9">llvm::BugDriver::swapProgramIn</a></div><div class="ttdeci">Module * swapProgramIn(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00142">BugDriver.h:142</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="../../d9/dd5/Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="ListReducer_8h_html"><div class="ttname"><a href="../../de/d17/ListReducer_8h.html">ListReducer.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a09bbd31289667a2839c7efed25168552"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a09bbd31289667a2839c7efed25168552">llvm::CloneModule</a></div><div class="ttdeci">Module * CloneModule(const Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/CloneModule_8cpp_source.html#l00027">CloneModule.cpp:27</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="../../db/df5/DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00115">Module.h:115</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a845f0e80fba0e779a2dedab72abad677"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a845f0e80fba0e779a2dedab72abad677">ExtractBlocks</a></div><div class="ttdeci">static bool ExtractBlocks(BugDriver &amp;BD, bool(*TestFn)(BugDriver &amp;, Module *, Module *, std::string &amp;), std::vector&lt; Function * &gt; &amp;MiscompiledFunctions, std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00555">Miscompilation.cpp:555</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a921e0b01f22f9a37012450f9b5f0ccb7"><div class="ttname"><a href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#a921e0b01f22f9a37012450f9b5f0ccb7">llvm::sys::fs::remove</a></div><div class="ttdeci">std::error_code remove(const Twine &amp;path, bool IgnoreNonExisting=true)</div><div class="ttdoc">Remove path. Equivalent to POSIX remove(). </div></div>
<div class="ttc" id="classllvm_1_1cl_1_1list_html"><div class="ttname"><a href="../../dd/d87/classllvm_1_1cl_1_1list.html">llvm::cl::list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l01328">CommandLine.h:1328</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a51940249c228e46f1f97932e5f4b8450"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01018">Constants.h:1018</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01227">Instructions.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4b37898a6d26b0d5fcee66548f2621d3"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">llvm::Function::isIntrinsic</a></div><div class="ttdeci">bool isIntrinsic() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00156">Function.h:156</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="../../dd/df9/namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00130">CommandLine.h:130</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdoc">Externally visible function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00035">GlobalValue.h:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="../../dc/dbc/namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9d/lib_2Support_2Path_8cpp_source.html#l00243">lib/Support/Path.cpp:243</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a26ccf11b81c01a45cb40137c775f7cad"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">llvm::Function::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00214">Function.cpp:214</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00425">Function.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a7a78f65c498e2b7541c4b2adb70a3e0d"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a7a78f65c498e2b7541c4b2adb70a3e0d">llvm::BugDriver::performFinalCleanups</a></div><div class="ttdeci">Module * performFinalCleanups(Module *M, bool MayModifySemantics=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1e/ExtractFunction_8cpp_source.html#l00139">ExtractFunction.cpp:139</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00071">Function.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="BugDriver_8h_html"><div class="ttname"><a href="../../dc/d7f/BugDriver_8h.html">BugDriver.h</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a087d72dc2aed773a0c032c17cfc44c23"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a087d72dc2aed773a0c032c17cfc44c23">CleanupAndPrepareModules</a></div><div class="ttdeci">static void CleanupAndPrepareModules(BugDriver &amp;BD, Module *&amp;Test, Module *Safe)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00796">Miscompilation.cpp:796</a></div></div>
<div class="ttc" id="namespacetesting_1_1internal_html_a8e8ff5b11e64078831112677156cb111"><div class="ttname"><a href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">testing::internal::string</a></div><div class="ttdeci">::std::string string</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/gtest-port_8h_source.html#l00766">gtest-port.h:766</a></div></div>
<div class="ttc" id="classllvm_1_1Linker_html_a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22"><div class="ttname"><a href="../../dd/df1/classllvm_1_1Linker.html#a6a5627804b279f35a29403fe33f0c144a968baa0652a83719a797064cf8e9be22">llvm::Linker::DestroySource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d13/Linker_2Linker_8h_source.html#l00031">Linker/Linker.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00133">Constants.cpp:133</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1FileRemover_html"><div class="ttname"><a href="../../d1/d6f/classllvm_1_1FileRemover.html">llvm::FileRemover</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d06/FileUtilities_8h_source.html#l00040">FileUtilities.h:40</a></div></div>
<div class="ttc" id="arange-overlap_8cc_html_aba7af6b502e464074d3c31ff9236a22c"><div class="ttname"><a href="../../dc/d85/arange-overlap_8cc.html#aba7af6b502e464074d3c31ff9236a22c">call</a></div><div class="ttdeci">void call()</div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_a8c4c3b7c7daea37c75c50563654bf934"><div class="ttname"><a href="../../d9/d12/classllvm_1_1ReturnInst.html#a8c4c3b7c7daea37c75c50563654bf934">llvm::ReturnInst::Create</a></div><div class="ttdeci">static ReturnInst * Create(LLVMContext &amp;C, Value *retVal=nullptr, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02401">Instructions.h:2401</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a9ebafd1adc05a751215ae959f2891752"><div class="ttname"><a href="../../da/d58/classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a9ebafd1adc05a751215ae959f2891752">llvm::Triple::sparc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/Triple_8h_source.html#l00065">Triple.h:65</a></div></div>
<div class="ttc" id="structllvm_1_1ListReducer_html"><div class="ttname"><a href="../../d6/dc6/structllvm_1_1ListReducer.html">llvm::ListReducer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d17/ListReducer_8h_source.html#l00029">ListReducer.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a63361875148938c915cc57c6f4514e72"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a63361875148938c915cc57c6f4514e72">llvm::BugDriver::getProgram</a></div><div class="ttdeci">Module * getProgram() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00138">BugDriver.h:138</a></div></div>
<div class="ttc" id="llvm__ocaml_8c_html_a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf"><div class="ttname"><a href="../../d0/de8/llvm__ocaml_8c.html#a653f2ab41a03ca53821766488505418ca35c18f151f4c84755a92ca8d6ee9decf">GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/llvm__ocaml_8c_source.html#l00492">llvm_ocaml.c:492</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a3ff9b8134737690083410aeeea42308e"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1CallInst.html#a3ff9b8134737690083410aeeea42308e">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01249">Instructions.h:1249</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="../../de/dcc/classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_ac1004a3427f829fbf03ff4656c217b3b"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#ac1004a3427f829fbf03ff4656c217b3b">DebugAMiscompilation</a></div><div class="ttdeci">static std::vector&lt; Function * &gt; DebugAMiscompilation(BugDriver &amp;BD, bool(*TestFn)(BugDriver &amp;, Module *, Module *, std::string &amp;), std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00643">Miscompilation.cpp:643</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_ab932b25f14d787c75ada869661c620ce"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#ab932b25f14d787c75ada869661c620ce">llvm::BugDriver::SafeInterpreter</a></div><div class="ttdeci">AbstractInterpreter * SafeInterpreter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00053">BugDriver.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a803f12bf45687735c82d2e7e688aa99e"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a803f12bf45687735c82d2e7e688aa99e">llvm::BugDriver::ExtractMappedBlocksFromModule</a></div><div class="ttdeci">Module * ExtractMappedBlocksFromModule(const std::vector&lt; BasicBlock * &gt; &amp;BBs, Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1e/ExtractFunction_8cpp_source.html#l00364">ExtractFunction.cpp:364</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0567b31cf5caa26522fcc2e7cadc1dde"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a0567b31cf5caa26522fcc2e7cadc1dde">llvm::Module::global_begin</a></div><div class="ttdeci">global_iterator global_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00528">Module.h:528</a></div></div>
<div class="ttc" id="namespacespill-02_html_a6f9f136c24bf4a57501a7cbd819b5dd3"><div class="ttname"><a href="../../d8/d12/namespacespill-02.html#a6f9f136c24bf4a57501a7cbd819b5dd3">spill-02.args</a></div><div class="ttdeci">tuple args</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d95/spill-02_8py_source.html#l00022">spill-02.py:22</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="../../d3/da8/classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="FileUtilities_8h_html"><div class="ttname"><a href="../../da/d06/FileUtilities_8h.html">FileUtilities.h</a></div></div>
<div class="ttc" id="classllvm_1_1Interpreter_html"><div class="ttname"><a href="../../d3/de3/classllvm_1_1Interpreter.html">llvm::Interpreter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d78/lib_2ExecutionEngine_2Interpreter_2Interpreter_8h_source.html#l00083">lib/ExecutionEngine/Interpreter/Interpreter.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="../../db/ddb/classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a995ca25e4ce6a3ae355968fec4bdb37a"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a995ca25e4ce6a3ae355968fec4bdb37a">llvm::BugDriver::EmitProgressBitcode</a></div><div class="ttdeci">void EmitProgressBitcode(const Module *M, const std::string &amp;ID, bool NoFlyer=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dca/OptimizerDriver_8cpp_source.html#l00086">OptimizerDriver.cpp:86</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a97f56ec2cf93b5b4d1db9befd8d3d535"><div class="ttname"><a href="../../da/d58/classllvm_1_1Triple.html#a97f56ec2cf93b5b4d1db9befd8d3d535">llvm::Triple::getArch</a></div><div class="ttdeci">ArchType getArch() const </div><div class="ttdoc">getArch - Get the parsed architecture type of this triple. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/Triple_8h_source.html#l00213">Triple.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_aece8fc8a0b61ebf0de693b5b8e0ed9e2"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#aece8fc8a0b61ebf0de693b5b8e0ed9e2">llvm::BugDriver::getPassesToRun</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; &amp; getPassesToRun() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00082">BugDriver.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1Linker_html_a244da8c7e9789b1b675b9741bd692c63"><div class="ttname"><a href="../../dd/df1/classllvm_1_1Linker.html#a244da8c7e9789b1b675b9741bd692c63">llvm::Linker::LinkModules</a></div><div class="ttdeci">static bool LinkModules(Module *Dest, Module *Src, unsigned Mode, std::string *ErrorMsg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3a/LinkModules_8cpp_source.html#l01604">LinkModules.cpp:1604</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a3f156c68d0efa530f05698ca15d66593"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">llvm::Module::getFunction</a></div><div class="ttdeci">Function * getFunction(StringRef Name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd4/Module_8cpp_source.html#l00170">Module.cpp:170</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a5e231c5b85340ae5ee021cacd64a39c1"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a5e231c5b85340ae5ee021cacd64a39c1">DisambiguateGlobalSymbols</a></div><div class="ttdeci">static void DisambiguateGlobalSymbols(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00291">Miscompilation.cpp:291</a></div></div>
<div class="ttc" id="IndVarSimplify2_8cpp_html_ac4f815981d19a995ed4c02690e805630"><div class="ttname"><a href="../../d3/d9e/IndVarSimplify2_8cpp.html#ac4f815981d19a995ed4c02690e805630">llvm</a></div><div class="ttdeci">Induction Variable as in old llvm</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9e/IndVarSimplify2_8cpp_source.html#l00157">IndVarSimplify2.cpp:157</a></div></div>
<div class="ttc" id="namespacellvm_html_a9d0b331739faa402bc2644494b5310c3"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">llvm::outs</a></div><div class="ttdeci">raw_ostream &amp; outs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5f/raw__ostream_8cpp_source.html#l00661">raw_ostream.cpp:661</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="../../d9/d41/CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="../../dd/df9/namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00319">CommandLine.h:319</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="Linker_2Linker_8h_html"><div class="ttname"><a href="../../da/d13/Linker_2Linker_8h.html">Linker.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantPointerNull_html_a96f5c85e4022e369266541b2db3fda69"><div class="ttname"><a href="../../d6/df2/classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">llvm::ConstantPointerNull::get</a></div><div class="ttdeci">static ConstantPointerNull * get(PointerType *T)</div><div class="ttdoc">get() - Static factory methods - Return objects of the specified value </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l01352">Constants.cpp:1352</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a96581205e1149f5d70b56f9a83bc841a"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">llvm::Module::getOrInsertFunction</a></div><div class="ttdeci">Constant * getOrInsertFunction(StringRef Name, FunctionType *T, AttributeSet AttributeList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd4/Module_8cpp_source.html#l00097">Module.cpp:97</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a5c321ffb099c7162f20f780d6eed1d3f"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a5c321ffb099c7162f20f780d6eed1d3f">llvm::BugDriver::getToolName</a></div><div class="ttdeci">const char * getToolName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00070">BugDriver.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1AbstractInterpreter_html"><div class="ttname"><a href="../../d3/def/classllvm_1_1AbstractInterpreter.html">llvm::AbstractInterpreter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d67/ToolRunner_8h_source.html#l00087">ToolRunner.h:87</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="../../d1/d45/Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="../../da/def/structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l00291">CommandLine.h:291</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a888be46aa0792af8e970f458a0f9d3b7"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a888be46aa0792af8e970f458a0f9d3b7">llvm::BugDriver::compileSharedObject</a></div><div class="ttdeci">std::string compileSharedObject(const std::string &amp;BitcodeFile, std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3d/ExecutionDriver_8cpp_source.html#l00385">ExecutionDriver.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a44d9fc68863722f23847e4a6d0844d5e"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a44d9fc68863722f23847e4a6d0844d5e">llvm::BugDriver::debugCodeGenerator</a></div><div class="ttdeci">bool debugCodeGenerator(std::string *Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l01027">Miscompilation.cpp:1027</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_ac1fdc653b00994d49faab8fa43695161"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#ac1fdc653b00994d49faab8fa43695161">llvm::BugDriver::diffProgram</a></div><div class="ttdeci">bool diffProgram(const Module *Program, const std::string &amp;BitcodeFile=&quot;&quot;, const std::string &amp;SharedObj=&quot;&quot;, bool RemoveBitcode=false, std::string *Error=nullptr) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3d/ExecutionDriver_8cpp_source.html#l00441">ExecutionDriver.cpp:441</a></div></div>
<div class="ttc" id="namespacellvm_html_adaf42a5e5975b0291fb862e9dbb31e17"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#adaf42a5e5975b0291fb862e9dbb31e17">llvm::BugpointIsInterrupted</a></div><div class="ttdeci">bool BugpointIsInterrupted</div><div class="ttdoc">BugpointIsInterrupted - Set to true when the user presses ctrl-c. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d17/ListReducer_8h_source.html#l00026">ListReducer.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="../../d5/dcb/classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00977">Instructions.h:977</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_ac2a0f78968038ef4daa3ed11f802fa46"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#ac2a0f78968038ef4daa3ed11f802fa46">TestMergedProgram</a></div><div class="ttdeci">static Module * TestMergedProgram(const BugDriver &amp;BD, Module *M1, Module *M2, bool DeleteInputs, std::string &amp;Error, bool &amp;Broken)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00217">Miscompilation.cpp:217</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_ae76ae57862d283fee5442f0ae2a25bf1"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#ae76ae57862d283fee5442f0ae2a25bf1">llvm::BugDriver::writeProgramToFile</a></div><div class="ttdeci">bool writeProgramToFile(const std::string &amp;Filename, const Module *M) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dca/OptimizerDriver_8cpp_source.html#l00073">OptimizerDriver.cpp:73</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00110">BasicBlock.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00417">Function.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00278">Type.cpp:278</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a19b72cdd81bd792545e25466b43ac7c2"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a19b72cdd81bd792545e25466b43ac7c2">llvm::Module::global_end</a></div><div class="ttdeci">global_iterator global_end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00530">Module.h:530</a></div></div>
<div class="ttc" id="namespacellvm_html_af5b153076349383ec5ed2685f248c0a3"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af5b153076349383ec5ed2685f248c0a3">llvm::verifyModule</a></div><div class="ttdeci">bool verifyModule(const Module &amp;M, raw_ostream *OS=nullptr)</div><div class="ttdoc">Check a module for errors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc3/Verifier_8cpp_source.html#l02612">Verifier.cpp:2612</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="../../d0/d6f/classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddc/ValueMap_8h_source.html#l00077">ValueMap.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a8db49fd5069f21d514e7bb0fd11f0902"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">llvm::PointerType::getUnqual</a></div><div class="ttdeci">static PointerType * getUnqual(Type *ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00456">DerivedTypes.h:456</a></div></div>
<div class="ttc" id="OptionParsingTest_8cpp_html_a36ae00d4b55611436688342404b47a90"><div class="ttname"><a href="../../d9/dd7/OptionParsingTest_8cpp.html#a36ae00d4b55611436688342404b47a90">Args</a></div><div class="ttdeci">const char * Args[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd7/OptionParsingTest_8cpp_source.html#l00055">OptionParsingTest.cpp:55</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a5cf055dacc38a16b3c8252e71bf09fbe"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a5cf055dacc38a16b3c8252e71bf09fbe">TestCodeGenerator</a></div><div class="ttdeci">static bool TestCodeGenerator(BugDriver &amp;BD, Module *Test, Module *Safe, std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00961">Miscompilation.cpp:961</a></div></div>
<div class="ttc" id="namespacellvm_html_a8e6b3ed26ba0a41f9581c3de2644e252"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a8e6b3ed26ba0a41f9581c3de2644e252">llvm::TargetTriple</a></div><div class="ttdeci">Triple TargetTriple</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/BugDriver_8cpp_source.html#l00031">BugDriver.cpp:31</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="../../d4/dc7/Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_ad85e8c8bbba8b678a2feaf15e0da46b9"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ad85e8c8bbba8b678a2feaf15e0da46b9">llvm::SaveTemps</a></div><div class="ttdeci">cl::opt&lt; bool &gt; SaveTemps(&quot;save-temps&quot;, cl::init(false), cl::desc(&quot;Save temporary files&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d67/ToolRunner_8h_source.html#l00030">ToolRunner.h:30</a></div></div>
<div class="ttc" id="Verifier_8h_html"><div class="ttname"><a href="../../d6/d82/Verifier_8h.html">Verifier.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="../../dc/de7/classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02473">Instructions.h:2473</a></div></div>
<div class="ttc" id="Cloning_8h_html"><div class="ttname"><a href="../../de/d44/Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02112">Instructions.h:2112</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a680bb2b02aec7f6ac7ed9d8a38fcb531"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a680bb2b02aec7f6ac7ed9d8a38fcb531">llvm::BugDriver::PassesToRun</a></div><div class="ttdeci">std::vector&lt; std::string &gt; PassesToRun</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00051">BugDriver.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html_a9926a62dd0ca26ed856052335091a54d"><div class="ttname"><a href="../../db/ddb/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">llvm::SmallString::str</a></div><div class="ttdeci">StringRef str() const </div><div class="ttdoc">Explicit conversion to StringRef. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d85/SmallString_8h_source.html#l00267">SmallString.h:267</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="../../df/d29/Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a94e0fe79ed358cb064b782d09240ff59"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a94e0fe79ed358cb064b782d09240ff59">llvm::BugDriver::isExecutingJIT</a></div><div class="ttdeci">bool isExecutingJIT()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3d/ExecutionDriver_8cpp_source.html#l00474">ExecutionDriver.cpp:474</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_aa0661d3d0a6d3f68fd2605339c85ed23"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#aa0661d3d0a6d3f68fd2605339c85ed23">llvm::BugDriver::runPassesOn</a></div><div class="ttdeci">Module * runPassesOn(Module *M, const std::vector&lt; std::string &gt; &amp;Passes, bool AutoDebugCrashes=false, unsigned NumExtraArgs=0, const char *const *ExtraArgs=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dca/OptimizerDriver_8cpp_source.html#l00253">OptimizerDriver.cpp:253</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_aa38297413e38b22d3468bedcdae968c2"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#aa38297413e38b22d3468bedcdae968c2">llvm::BugDriver::executeProgramSafely</a></div><div class="ttdeci">std::string executeProgramSafely(const Module *Program, std::string OutputFile, std::string *Error) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3d/ExecutionDriver_8cpp_source.html#l00379">ExecutionDriver.cpp:379</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00166">GlobalValue.h:166</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="../../d3/dba/namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/MipsISelLowering_8h_source.html#l00067">MipsISelLowering.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/CommandLine_8h_source.html#l01156">CommandLine.h:1156</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_aa608a2d900dd6c15c18f4236b6548496"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">llvm::Module::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00547">Module.h:547</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00235">Type.cpp:235</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a4640d98233102674ddb6d6efaf2b7f97"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/Globals_8cpp_source.html#l00113">Globals.cpp:113</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ae3cdedf952d5eeb089d175c61d9f6fee"><div class="ttname"><a href="../../d7/d18/namespacellvm_1_1sys_1_1fs.html#ae3cdedf952d5eeb089d175c61d9f6fee">llvm::sys::fs::createTemporaryFile</a></div><div class="ttdeci">std::error_code createTemporaryFile(const Twine &amp;Prefix, StringRef Suffix, int &amp;ResultFD, SmallVectorImpl&lt; char &gt; &amp;ResultPath)</div><div class="ttdoc">Create a file in the system temporary directory. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9d/lib_2Support_2Path_8cpp_source.html#l00751">lib/Support/Path.cpp:751</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_ad2ddc402d553d6bfdf8f169510f4b3b5"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#ad2ddc402d553d6bfdf8f169510f4b3b5">llvm::BugDriver::Program</a></div><div class="ttdeci">Module * Program</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00050">BugDriver.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_adf66d58e85fb4e46e9c1ae55186a6930"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd4/Function_8cpp_source.html#l00206">Function.cpp:206</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a0459324d2540da4f748b8d2bc9ced96a"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a0459324d2540da4f748b8d2bc9ced96a">llvm::BugDriver::setNewProgram</a></div><div class="ttdeci">void setNewProgram(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/BugDriver_8cpp_source.html#l00050">BugDriver.cpp:50</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af6d6a791770bad2303c4399986979e3eaff782a9a0e831e8da5e7b021e7853d2b">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/CallingConvLower_8h_source.html#l00167">CallingConvLower.h:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605"><div class="ttname"><a href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">llvm::lltok::Error</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcc/LLToken_8h_source.html#l00021">LLToken.h:21</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a279174d137c1ef32aa5b627f5e06620f"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">llvm::Module::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00545">Module.h:545</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdoc">Rename collisions when linking (static functions). </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00042">GlobalValue.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a3e075e83a3d7dfb1e1fa1e6474cd78b2"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a3e075e83a3d7dfb1e1fa1e6474cd78b2">llvm::BugDriver::switchToSafeInterpreter</a></div><div class="ttdeci">AbstractInterpreter * switchToSafeInterpreter()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00148">BugDriver.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="../../df/de6/classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00693">InstrTypes.h:693</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of... </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00336">GlobalValue.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a793e43000aa51b55688e4a09688ba6ca"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a793e43000aa51b55688e4a09688ba6ca">llvm::BugDriver::switchToInterpreter</a></div><div class="ttdeci">void switchToInterpreter(AbstractInterpreter *AI)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00154">BugDriver.h:154</a></div></div>
<div class="ttc" id="namespacellvm_html_a582d19067bf2efdf34f526ee0a885a88"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a582d19067bf2efdf34f526ee0a885a88">llvm::ParseInputFile</a></div><div class="ttdeci">Module * ParseInputFile(const std::string &amp;InputFilename, LLVMContext &amp;ctxt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/BugDriver_8cpp_source.html#l00089">BugDriver.cpp:89</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a6a59186682b7cd83f2b6625e1e8fd78a"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a6a59186682b7cd83f2b6625e1e8fd78a">llvm::BugDriver::ExtractLoop</a></div><div class="ttdeci">Module * ExtractLoop(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1e/ExtractFunction_8cpp_source.html#l00165">ExtractFunction.cpp:165</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a9e277b660236bb0318b61ab9cdf60dc7"><div class="ttname"><a href="../../d2/d5b/classllvm_1_1StringRef.html#a9e277b660236bb0318b61ab9cdf60dc7">llvm::StringRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd0/StringRef_8h_source.html#l00098">StringRef.h:98</a></div></div>
<div class="ttc" id="ToolRunner_8h_html"><div class="ttname"><a href="../../de/d67/ToolRunner_8h.html">ToolRunner.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a82caa2242c61c3b9bb02494299ad0b7a"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a82caa2242c61c3b9bb02494299ad0b7a">llvm::OutputPrefix</a></div><div class="ttdeci">cl::opt&lt; std::string &gt; OutputPrefix(&quot;output-prefix&quot;, cl::init(&quot;bugpoint&quot;), cl::desc(&quot;Prefix to use for outputs (default: 'bugpoint')&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1e/ExtractFunction_8cpp_source.html#l00041">ExtractFunction.cpp:41</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html">llvm::BugDriver</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/BugDriver_8h_source.html#l00046">BugDriver.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a6b78e0f5ec53ac05826d6cce648bca30"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a6b78e0f5ec53ac05826d6cce648bca30">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00128">Function.h:128</a></div></div>
<div class="ttc" id="namespacellvm_html_a66a57c0f00497d608922a5492fcb3fb8"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a66a57c0f00497d608922a5492fcb3fb8">llvm::getPassesString</a></div><div class="ttdeci">std::string getPassesString(const std::vector&lt; std::string &gt; &amp;Passes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/BugDriver_8cpp_source.html#l00059">BugDriver.cpp:59</a></div></div>
<div class="ttc" id="classllvm_1_1BugDriver_html_a4077ffbe6ced8502b19bbbc9d95db060"><div class="ttname"><a href="../../d6/df0/classllvm_1_1BugDriver.html#a4077ffbe6ced8502b19bbbc9d95db060">llvm::BugDriver::debugMiscompilation</a></div><div class="ttdeci">void debugMiscompilation(std::string *Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00754">Miscompilation.cpp:754</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a73da624aa7ea047e25e45133f40f1e94"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a73da624aa7ea047e25e45133f40f1e94">TestOptimizer</a></div><div class="ttdeci">static bool TestOptimizer(BugDriver &amp;BD, Module *Test, Module *Safe, std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00728">Miscompilation.cpp:728</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0e74af4b7c739f3a14e737c3042b6617"><div class="ttname"><a href="../../de/d27/classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/Module_8h_source.html#l00253">Module.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af5c7041df3ad5edffe5da17b5264c1fc"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const </div><div class="ttdoc">isVoidTy - Return true if this is &#39;void&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00137">Type.h:137</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c2fcf7c37fbd777d7a9b0830f29f185"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c2fcf7c37fbd777d7a9b0830f29f185">llvm::SplitFunctionsOutOfModule</a></div><div class="ttdeci">Module * SplitFunctionsOutOfModule(Module *M, const std::vector&lt; Function * &gt; &amp;F, ValueToValueMapTy &amp;VMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1e/ExtractFunction_8cpp_source.html#l00291">ExtractFunction.cpp:291</a></div></div>
<div class="ttc" id="Miscompilation_8cpp_html_a9baacb80854e43437d7cd3941ab7241c"><div class="ttname"><a href="../../d2/d7b/Miscompilation_8cpp.html#a9baacb80854e43437d7cd3941ab7241c">ExtractLoops</a></div><div class="ttdeci">static bool ExtractLoops(BugDriver &amp;BD, bool(*TestFn)(BugDriver &amp;, Module *, Module *, std::string &amp;), std::vector&lt; Function * &gt; &amp;MiscompiledFunctions, std::string &amp;Error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/Miscompilation_8cpp_source.html#l00305">Miscompilation.cpp:305</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_8d209a04d860eb507aaef6a858f15b02.html">tools</a></li><li class="navelem"><a class="el" href="../../dir_7718c402c8f7356f90821c3ed69a36a0.html">bugpoint</a></li><li class="navelem"><a class="el" href="../../d2/d7b/Miscompilation_8cpp.html">Miscompilation.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:36:31 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
