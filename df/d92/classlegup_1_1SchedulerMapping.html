<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: legup::SchedulerMapping Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('df/d92/classlegup_1_1SchedulerMapping.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">legup::SchedulerMapping Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Legup <a class="el" href="../../d2/d0e/classlegup_1_1Scheduler.html" title="Legup Scheduler Pass interface. ">Scheduler</a> data structure for Instruction to state # lookup.  
 <a href="../../df/d92/classlegup_1_1SchedulerMapping.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4f7b585a5541a5b96399ce2ce0a0d4c6"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4f7b585a5541a5b96399ce2ce0a0d4c6">getState</a> (<a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a> *i)</td></tr>
<tr class="separator:a4f7b585a5541a5b96399ce2ce0a0d4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7595f7cdf76303380b113f87468e4561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a7595f7cdf76303380b113f87468e4561">setState</a> (<a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a> *i, unsigned u)</td></tr>
<tr class="separator:a7595f7cdf76303380b113f87468e4561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0cd2fbcdec310379e435e4252e4fc0"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4a0cd2fbcdec310379e435e4252e4fc0">getNumStates</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *bb)</td></tr>
<tr class="separator:a4a0cd2fbcdec310379e435e4252e4fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd656afcc979fea701bca2d7621eb6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#aacd656afcc979fea701bca2d7621eb6c">setNumStates</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *bb, unsigned u)</td></tr>
<tr class="separator:aacd656afcc979fea701bca2d7621eb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae544a4d6139d1b9ad57a03bebf2f9c13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html">FiniteStateMachine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#ae544a4d6139d1b9ad57a03bebf2f9c13">createFSM</a> (<a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *, <a class="el" href="../../dc/d59/classlegup_1_1SchedulerDAG.html">SchedulerDAG</a> *)</td></tr>
<tr class="memdesc:ae544a4d6139d1b9ad57a03bebf2f9c13"><td class="mdescLeft">&#160;</td><td class="mdescRight">createFSM - create a Finite <a class="el" href="../../d8/d1b/classlegup_1_1State.html" title="Legup State Representation. ">State</a> Machine object from the scheduler mapping.  <a href="#ae544a4d6139d1b9ad57a03bebf2f9c13">More...</a><br/></td></tr>
<tr class="separator:ae544a4d6139d1b9ad57a03bebf2f9c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9d1315b7d8d01a45cb1c434d62ae8c21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a> <br class="typebreak"/>
*, unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a9d1315b7d8d01a45cb1c434d62ae8c21">map</a></td></tr>
<tr class="separator:a9d1315b7d8d01a45cb1c434d62ae8c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b1535e06de836677c88e2d2a7c28d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *, unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html#ad9b1535e06de836677c88e2d2a7c28d8">stateNum</a></td></tr>
<tr class="separator:ad9b1535e06de836677c88e2d2a7c28d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Legup <a class="el" href="../../d2/d0e/classlegup_1_1Scheduler.html" title="Legup Scheduler Pass interface. ">Scheduler</a> data structure for Instruction to state # lookup. </p>
<p><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html" title="Legup Scheduler data structure for Instruction to state # lookup. ">SchedulerMapping</a> - Holds <a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html" title="Legup Instruction container class. ">InstructionNode</a> to state # mapping. Usage: Pass this mapping between schedulers to effectively chain them. </p>

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00171">171</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae544a4d6139d1b9ad57a03bebf2f9c13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html">FiniteStateMachine</a> * legup::SchedulerMapping::createFSM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d7c/classllvm_1_1Function.html">Function</a> *&#160;</td>
          <td class="paramname"><em>F</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d59/classlegup_1_1SchedulerDAG.html">SchedulerDAG</a> *&#160;</td>
          <td class="paramname"><em>dag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>createFSM - create a Finite <a class="el" href="../../d8/d1b/classlegup_1_1State.html" title="Legup State Representation. ">State</a> Machine object from the scheduler mapping. </p>

<p>Definition at line <a class="el" href="../../db/d4c/SchedulerDAG_8cpp_source.html#l00382">382</a> of file <a class="el" href="../../db/d4c/SchedulerDAG_8cpp_source.html">SchedulerDAG.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                                                   {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// create FSM</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html">FiniteStateMachine</a> *fsm = <span class="keyword">new</span> <a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html">FiniteStateMachine</a>();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// very first state</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="../../d8/d1b/classlegup_1_1State.html">State</a> *waitState = fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a0672ba745b71f3810d69a10a636c23d6">newState</a>();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    waitState-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#a5ca14d710cb9a10640f89da176ee87f6">setDefaultTransition</a>(waitState);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// first state in each basic block</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    std::map&lt;BasicBlock *, State *&gt; bbFirstState;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// this map is used for labeling the states</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// each state name will have an index, from this map, as well as being</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// labeled with a function name, and a basic block name.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    std::map&lt;BasicBlock *, unsigned&gt; sCount;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// create a FSM for the function where each basic block is assigned</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// an empty state as a placeholder</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">unsigned</span> bbNum = 0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::iterator</a> b = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), be = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); b != be; ++b) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d91/namespacelegup.html#a078bd438358c79b98b75549de2c20284">isEmptyFirstBB</a>(b))</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="../../d8/d1b/classlegup_1_1State.html">State</a> *s = fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a0672ba745b71f3810d69a10a636c23d6">newState</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        s-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac2419de74d1f4cad141e9c8e171a364a">setBasicBlock</a>(b);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        bbFirstState[b] = s;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        sCount[b] = 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        bbNum++;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// setup wait state transitions</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// setTransitionSignal(rtl-&gt;find(&quot;start&quot;))</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// will be done later when we have access</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// to the RTL module</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::iterator</a> firstBB = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *succ = <a class="code" href="../../da/d91/namespacelegup.html#a078bd438358c79b98b75549de2c20284">isEmptyFirstBB</a>(firstBB)) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="comment">// first BB was empty with just an unconditional branch,</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">// so the waitstate should point to the next state, for instance:</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// BB_0:</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="comment">//   br label %BB_2</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// also need to set the basic block so phi&#39;s are still handled properly</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="comment">// for the empty BB</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        waitState-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ad2f65d6d952b858ce4c9271b8eaabf96">setTerminating</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        waitState-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac2419de74d1f4cad141e9c8e171a364a">setBasicBlock</a>(firstBB);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(bbFirstState.find(succ) != bbFirstState.end());</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        waitState-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#a449c81346920c75e524e89283aa8b410">addTransition</a>(bbFirstState[succ]);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(bbFirstState.find(firstBB) != bbFirstState.end());</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        waitState-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#a449c81346920c75e524e89283aa8b410">addTransition</a>(bbFirstState[firstBB]);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">Function::iterator</a> B = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), BE = F-&gt;<a class="code" href="../../de/d7c/classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); B != BE; ++B) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        std::map&lt;unsigned, State *&gt; orderStates;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d91/namespacelegup.html#a078bd438358c79b98b75549de2c20284">isEmptyFirstBB</a>(B))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        orderStates[0] = bbFirstState[B];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordtype">unsigned</span> lastState = <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4a0cd2fbcdec310379e435e4252e4fc0">getNumStates</a>(B);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// int pipelined = getMetadataInt(B-&gt;getTerminator(),</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// &quot;legup.pipelined&quot;);</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// errs() &lt;&lt; &quot;BB: &quot; &lt;&lt; getLabel(B) &lt;&lt; &quot; lastState: &quot; &lt;&lt; lastState &lt;&lt;</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">// &quot;\n&quot;;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="../../da/d91/namespacelegup.html#a11e09b3cb298c96481e120128f62c49f">createStates</a>(1, lastState, orderStates, fsm);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> instr = B-&gt;begin(), ie = B-&gt;end();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;             instr != ie; ++instr) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = instr;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordtype">unsigned</span> order = <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4f7b585a5541a5b96399ce2ce0a0d4c6">getState</a>(dag-&gt;<a class="code" href="../../dc/d59/classlegup_1_1SchedulerDAG.html#ad666f182788ceb058276f36bdc6e402c">getInstructionNode</a>(I));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            orderStates[order]-&gt;push_back(I);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="comment">// need to ensure multi-cycle instructions finish in the basic block</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordtype">unsigned</span> delayState = <a class="code" href="../../d2/d0e/classlegup_1_1Scheduler.html#a39b25b2e646b54dcf7124b566427785e">Scheduler::getNumInstructionCycles</a>(I);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="comment">// Normally, loads take two cycles and the loaded values are stored</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="comment">// in shared memory controller output registers (port A or port B).</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="comment">// In some flows however, we want each load to be stored in a</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">// separate</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="comment">// register (e.g. to enable multi-cycle paths). But storing each</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="comment">// load</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="comment">// in a unique register and keeping the register on the output of</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">// the</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="comment">// memory controller would make loads have a latency of 3, which is</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="comment">// not needed. Instead, when a separate register is created for each</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment">// load, make the FSM &quot;think&quot; that loads take 1 cycle (this is done</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="comment">// below). Then the second register is placed at the output of each</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="comment">// load (this is done in GenerateRTL.cpp, visitLoadInst);</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(I) &amp;&amp; <a class="code" href="../../da/d91/namespacelegup.html#a18fe9ecb945342c73f57177ffa327da2">LEGUP_CONFIG</a>-&gt;<a class="code" href="../../dd/df8/classlegup_1_1LegupConfig.html#a419097b419964e152f2ce4b12cc90075">duplicate_load_reg</a>()) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                delayState = 1; <span class="comment">// Instead of normal 2 for loads</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">if</span> (delayState == 0) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a782e8ecec0ea9d40b41d129457200e3e">setEndState</a>(I, orderStates[order]);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            delayState += order;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordflow">if</span> (delayState &gt; lastState) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">                // assume iterative module scheduler has already handled</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">                // multi-cycle instructions</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">                // can&#39;t insert a new state - assume its ready in the first</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">                // state of next basic block</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">                if (pipelined) {</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">                    // this doesn&#39;t work for the kernel</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">                    assert(isa&lt;LoadInst&gt;(I));</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">                    //++B;</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">                    //assert(B != BE);</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">                    //fsm-&gt;setEndState(I, bbFirstState[B]);</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">                    //--B;</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">                    // all loads are assumed to be wires</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">                    fsm-&gt;setEndState(I, orderStates[order]);</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">                    continue;</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">                */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <a class="code" href="../../da/d91/namespacelegup.html#a11e09b3cb298c96481e120128f62c49f">createStates</a>(lastState + 1, delayState, orderStates, fsm);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                lastState = delayState;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a782e8ecec0ea9d40b41d129457200e3e">setEndState</a>(I, orderStates[delayState]);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="../../da/d91/namespacelegup.html#a34a7f19eaae411ef0547a0590b314f59">setStateTransitions</a>(orderStates[lastState], B-&gt;getTerminator(),</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            waitState, bbFirstState);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        orderStates[lastState]-&gt;setBasicBlock(B);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; lastState; i++) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(orderStates.find(i) != orderStates.end());</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <a class="code" href="../../d8/d1b/classlegup_1_1State.html">State</a> *s = orderStates[i];</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            s-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac2419de74d1f4cad141e9c8e171a364a">setBasicBlock</a>(B);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            s-&gt;setDefaultTransition(orderStates[i + 1]);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">FiniteStateMachine::iterator</a> stateIter = fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#ab9809c72c50f0381b8d908d4cc9d2b8c">begin</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">for</span> (; stateIter != fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a13e011af584de3c38b9644787e961f1c">end</a>(); stateIter++) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="../../d8/d1b/classlegup_1_1State.html">State</a> *state = stateIter;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac6492657b369ca7c58a8709d8c2b6215">getBasicBlock</a>()) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(state == waitState);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        sCount[state-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac6492657b369ca7c58a8709d8c2b6215">getBasicBlock</a>()] += 1;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> newStateName = <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a>(<span class="stringliteral">&quot;LEGUP_F_&quot;</span>) +</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                   F-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="../../d2/d5b/classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>().data() + <span class="stringliteral">&quot;_BB_&quot;</span> +</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                   <a class="code" href="../../da/d91/namespacelegup.html#a73f4bb40d212d82ea257135200cbb727">getLabelStripped</a>(state-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#ac6492657b369ca7c58a8709d8c2b6215">getBasicBlock</a>());</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="../../da/d91/namespacelegup.html#af3db36c3fffbf308b4b8e978ccf98abe">stripInvalidCharacters</a>(newStateName);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        state-&gt;<a class="code" href="../../d8/d1b/classlegup_1_1State.html#aee5eb7a39ab9c7bbed8f580b64fd307a">setName</a>(newStateName);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#ab9809c72c50f0381b8d908d4cc9d2b8c">begin</a>() != fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a13e011af584de3c38b9644787e961f1c">end</a>())</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        fsm-&gt;<a class="code" href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#ab9809c72c50f0381b8d908d4cc9d2b8c">begin</a>()-&gt;setName(<span class="stringliteral">&quot;LEGUP&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> fsm;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="ttc" id="classlegup_1_1FiniteStateMachine_html_a13e011af584de3c38b9644787e961f1c"><div class="ttname"><a href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a13e011af584de3c38b9644787e961f1c">legup::FiniteStateMachine::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d35/FiniteStateMachine_8h_source.html#l00046">FiniteStateMachine.h:46</a></div></div>
<div class="ttc" id="classlegup_1_1State_html"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html">legup::State</a></div><div class="ttdoc">Legup State Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00037">State.h:37</a></div></div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_a4f7b585a5541a5b96399ce2ce0a0d4c6"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4f7b585a5541a5b96399ce2ce0a0d4c6">legup::SchedulerMapping::getState</a></div><div class="ttdeci">unsigned getState(InstructionNode *i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00173">SchedulerDAG.h:173</a></div></div>
<div class="ttc" id="namespacelegup_html_a73f4bb40d212d82ea257135200cbb727"><div class="ttname"><a href="../../da/d91/namespacelegup.html#a73f4bb40d212d82ea257135200cbb727">legup::getLabelStripped</a></div><div class="ttdeci">std::string getLabelStripped(const Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d34/Target_2Verilog_2utils_8cpp_source.html#l00105">Target/Verilog/utils.cpp:105</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00404">Function.h:404</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_ad2f65d6d952b858ce4c9271b8eaabf96"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#ad2f65d6d952b858ce4c9271b8eaabf96">legup::State::setTerminating</a></div><div class="ttdeci">void setTerminating(bool t)</div><div class="ttdoc">setTerminating - mark state as a basic block terminating state </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00122">State.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_ab02cb6f4884b5c788efb97b6741dccaf"><div class="ttname"><a href="../../d2/d5b/classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">llvm::StringRef::str</a></div><div class="ttdeci">std::string str() const </div><div class="ttdoc">str - Get the contents as an std::string. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd0/StringRef_8h_source.html#l00187">StringRef.h:187</a></div></div>
<div class="ttc" id="namespacetesting_1_1internal_html_a8e8ff5b11e64078831112677156cb111"><div class="ttname"><a href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">testing::internal::string</a></div><div class="ttdeci">::std::string string</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/gtest-port_8h_source.html#l00766">gtest-port.h:766</a></div></div>
<div class="ttc" id="namespacelegup_html_a078bd438358c79b98b75549de2c20284"><div class="ttname"><a href="../../da/d91/namespacelegup.html#a078bd438358c79b98b75549de2c20284">legup::isEmptyFirstBB</a></div><div class="ttdeci">BasicBlock * isEmptyFirstBB(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d34/Target_2Verilog_2utils_8cpp_source.html#l00037">Target/Verilog/utils.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classlegup_1_1FiniteStateMachine_html_a782e8ecec0ea9d40b41d129457200e3e"><div class="ttname"><a href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a782e8ecec0ea9d40b41d129457200e3e">legup::FiniteStateMachine::setEndState</a></div><div class="ttdeci">void setEndState(const Instruction *i, State *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d35/FiniteStateMachine_8h_source.html#l00068">FiniteStateMachine.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classlegup_1_1LegupConfig_html_a419097b419964e152f2ce4b12cc90075"><div class="ttname"><a href="../../dd/df8/classlegup_1_1LegupConfig.html#a419097b419964e152f2ce4b12cc90075">legup::LegupConfig::duplicate_load_reg</a></div><div class="ttdeci">bool duplicate_load_reg()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/LegupConfig_8h_source.html#l00343">LegupConfig.h:343</a></div></div>
<div class="ttc" id="namespacelegup_html_a18fe9ecb945342c73f57177ffa327da2"><div class="ttname"><a href="../../da/d91/namespacelegup.html#a18fe9ecb945342c73f57177ffa327da2">legup::LEGUP_CONFIG</a></div><div class="ttdeci">LegupConfig * LEGUP_CONFIG</div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddb/LegupConfig_8cpp_source.html#l00024">LegupConfig.cpp:24</a></div></div>
<div class="ttc" id="namespacelegup_html_af3db36c3fffbf308b4b8e978ccf98abe"><div class="ttname"><a href="../../da/d91/namespacelegup.html#af3db36c3fffbf308b4b8e978ccf98abe">legup::stripInvalidCharacters</a></div><div class="ttdeci">void stripInvalidCharacters(std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d34/Target_2Verilog_2utils_8cpp_source.html#l00305">Target/Verilog/utils.cpp:305</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="../../de/d7c/classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/Function_8h_source.html#l00402">Function.h:402</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_aee5eb7a39ab9c7bbed8f580b64fd307a"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#aee5eb7a39ab9c7bbed8f580b64fd307a">legup::State::setName</a></div><div class="ttdeci">void setName(std::string n)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00068">State.h:68</a></div></div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_a4a0cd2fbcdec310379e435e4252e4fc0"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#a4a0cd2fbcdec310379e435e4252e4fc0">legup::SchedulerMapping::getNumStates</a></div><div class="ttdeci">unsigned getNumStates(BasicBlock *bb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00175">SchedulerDAG.h:175</a></div></div>
<div class="ttc" id="classlegup_1_1FiniteStateMachine_html"><div class="ttname"><a href="../../d6/d88/classlegup_1_1FiniteStateMachine.html">legup::FiniteStateMachine</a></div><div class="ttdoc">Legup Finite State Machine Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d35/FiniteStateMachine_8h_source.html#l00029">FiniteStateMachine.h:29</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classlegup_1_1SchedulerDAG_html_ad666f182788ceb058276f36bdc6e402c"><div class="ttname"><a href="../../dc/d59/classlegup_1_1SchedulerDAG.html#ad666f182788ceb058276f36bdc6e402c">legup::SchedulerDAG::getInstructionNode</a></div><div class="ttdeci">InstructionNode * getInstructionNode(Instruction *inst)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00146">SchedulerDAG.h:146</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_a449c81346920c75e524e89283aa8b410"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#a449c81346920c75e524e89283aa8b410">legup::State::addTransition</a></div><div class="ttdeci">void addTransition(State *state, Value *value=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00084">State.h:84</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_ac2419de74d1f4cad141e9c8e171a364a"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#ac2419de74d1f4cad141e9c8e171a364a">legup::State::setBasicBlock</a></div><div class="ttdeci">void setBasicBlock(BasicBlock *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00074">State.h:74</a></div></div>
<div class="ttc" id="namespacelegup_html_a11e09b3cb298c96481e120128f62c49f"><div class="ttname"><a href="../../da/d91/namespacelegup.html#a11e09b3cb298c96481e120128f62c49f">legup::createStates</a></div><div class="ttdeci">void createStates(unsigned begin, unsigned end, std::map&lt; unsigned, State * &gt; &amp;orderStates, FiniteStateMachine *fsm)</div><div class="ttdoc">createStates - create new states for an FSM. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4c/SchedulerDAG_8cpp_source.html#l00316">SchedulerDAG.cpp:316</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_ac6492657b369ca7c58a8709d8c2b6215"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#ac6492657b369ca7c58a8709d8c2b6215">legup::State::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00072">State.h:72</a></div></div>
<div class="ttc" id="namespacelegup_html_a34a7f19eaae411ef0547a0590b314f59"><div class="ttname"><a href="../../da/d91/namespacelegup.html#a34a7f19eaae411ef0547a0590b314f59">legup::setStateTransitions</a></div><div class="ttdeci">void setStateTransitions(State *lastState, const TerminatorInst *TI, State *waitState, std::map&lt; BasicBlock *, State * &gt; bbFirstState)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4c/SchedulerDAG_8cpp_source.html#l00327">SchedulerDAG.cpp:327</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classlegup_1_1State_html_a5ca14d710cb9a10640f89da176ee87f6"><div class="ttname"><a href="../../d8/d1b/classlegup_1_1State.html#a5ca14d710cb9a10640f89da176ee87f6">legup::State::setDefaultTransition</a></div><div class="ttdeci">void setDefaultTransition(State *s)</div><div class="ttdoc">getDefaultTransition - get the state of the default transition </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/State_8h_source.html#l00098">State.h:98</a></div></div>
<div class="ttc" id="classlegup_1_1FiniteStateMachine_html_ab9809c72c50f0381b8d908d4cc9d2b8c"><div class="ttname"><a href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#ab9809c72c50f0381b8d908d4cc9d2b8c">legup::FiniteStateMachine::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d35/FiniteStateMachine_8h_source.html#l00044">FiniteStateMachine.h:44</a></div></div>
<div class="ttc" id="classlegup_1_1Scheduler_html_a39b25b2e646b54dcf7124b566427785e"><div class="ttname"><a href="../../d2/d0e/classlegup_1_1Scheduler.html#a39b25b2e646b54dcf7124b566427785e">legup::Scheduler::getNumInstructionCycles</a></div><div class="ttdeci">static unsigned getNumInstructionCycles(Instruction *instr)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/Scheduler_8cpp_source.html#l00028">Scheduler.cpp:28</a></div></div>
<div class="ttc" id="classlegup_1_1FiniteStateMachine_html_a0672ba745b71f3810d69a10a636c23d6"><div class="ttname"><a href="../../d6/d88/classlegup_1_1FiniteStateMachine.html#a0672ba745b71f3810d69a10a636c23d6">legup::FiniteStateMachine::newState</a></div><div class="ttdeci">State * newState(State *InsertAfter=0, std::string Name=&quot;LEGUP&quot;)</div><div class="ttdoc">newState() - Create a new State within the state machine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddf/FiniteStateMachine_8cpp_source.html#l00019">FiniteStateMachine.cpp:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4a0cd2fbcdec310379e435e4252e4fc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned legup::SchedulerMapping::getNumStates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>bb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00175">175</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#ad9b1535e06de836677c88e2d2a7c28d8">stateNum</a>[bb]; }</div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_ad9b1535e06de836677c88e2d2a7c28d8"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#ad9b1535e06de836677c88e2d2a7c28d8">legup::SchedulerMapping::stateNum</a></div><div class="ttdeci">DenseMap&lt; BasicBlock *, unsigned &gt; stateNum</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00181">SchedulerDAG.h:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4f7b585a5541a5b96399ce2ce0a0d4c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned legup::SchedulerMapping::getState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a> *&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00173">173</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a9d1315b7d8d01a45cb1c434d62ae8c21">map</a>[i]; }</div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_a9d1315b7d8d01a45cb1c434d62ae8c21"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#a9d1315b7d8d01a45cb1c434d62ae8c21">legup::SchedulerMapping::map</a></div><div class="ttdeci">DenseMap&lt; InstructionNode *, unsigned &gt; map</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00180">SchedulerDAG.h:180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aacd656afcc979fea701bca2d7621eb6c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void legup::SchedulerMapping::setNumStates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>bb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00176">176</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{ <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#ad9b1535e06de836677c88e2d2a7c28d8">stateNum</a>[bb] = u; }</div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_ad9b1535e06de836677c88e2d2a7c28d8"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#ad9b1535e06de836677c88e2d2a7c28d8">legup::SchedulerMapping::stateNum</a></div><div class="ttdeci">DenseMap&lt; BasicBlock *, unsigned &gt; stateNum</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00181">SchedulerDAG.h:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7595f7cdf76303380b113f87468e4561"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void legup::SchedulerMapping::setState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a> *&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00174">174</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{ <a class="code" href="../../df/d92/classlegup_1_1SchedulerMapping.html#a9d1315b7d8d01a45cb1c434d62ae8c21">map</a>[i] = u; }</div>
<div class="ttc" id="classlegup_1_1SchedulerMapping_html_a9d1315b7d8d01a45cb1c434d62ae8c21"><div class="ttname"><a href="../../df/d92/classlegup_1_1SchedulerMapping.html#a9d1315b7d8d01a45cb1c434d62ae8c21">legup::SchedulerMapping::map</a></div><div class="ttdeci">DenseMap&lt; InstructionNode *, unsigned &gt; map</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/SchedulerDAG_8h_source.html#l00180">SchedulerDAG.h:180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a9d1315b7d8d01a45cb1c434d62ae8c21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="el" href="../../d6/d2d/classlegup_1_1InstructionNode.html">InstructionNode</a>*, unsigned&gt; legup::SchedulerMapping::map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00180">180</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad9b1535e06de836677c88e2d2a7c28d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *, unsigned&gt; legup::SchedulerMapping::stateNum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html#l00181">181</a> of file <a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d0/d08/SchedulerDAG_8h_source.html">SchedulerDAG.h</a></li>
<li><a class="el" href="../../db/d4c/SchedulerDAG_8cpp_source.html">SchedulerDAG.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/d91/namespacelegup.html">legup</a></li><li class="navelem"><a class="el" href="../../df/d92/classlegup_1_1SchedulerMapping.html">SchedulerMapping</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:46:39 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
