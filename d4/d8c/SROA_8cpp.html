<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: SROA.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/d8c/SROA_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SROA.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dc/dd6/Transforms_2Scalar_8h_source.html">llvm/Transforms/Scalar.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d98/STLExtras_8h_source.html">llvm/ADT/STLExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/dd6/SetVector_8h_source.html">llvm/ADT/SetVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d33/SmallVector_8h_source.html">llvm/ADT/SmallVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d2c/Loads_8h_source.html">llvm/Analysis/Loads.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/d56/PtrUseVisitor_8h_source.html">llvm/Analysis/PtrUseVisitor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/dcc/ValueTracking_8h_source.html">llvm/Analysis/ValueTracking.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d45/Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d4a/DIBuilder_8h_source.html">llvm/IR/DIBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d0/d36/DebugInfo_8h_source.html">llvm/IR/DebugInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/df5/DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d50/Dominators_8h_source.html">llvm/IR/Dominators.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/df5/Function_8h_source.html">llvm/IR/Function.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d60/IRBuilder_8h_source.html">llvm/IR/IRBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d24/InstVisitor_8h_source.html">llvm/IR/InstVisitor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dd5/Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d6b/LLVMContext_8h_source.html">llvm/IR/LLVMContext.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/ddf/Operator_8h_source.html">llvm/IR/Operator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d29/Pass_8h_source.html">llvm/Pass.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/d41/CommandLine_8h_source.html">llvm/Support/CommandLine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/d2c/Compiler_8h_source.html">llvm/Support/Compiler.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d3f/ErrorHandling_8h_source.html">llvm/Support/ErrorHandling.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dab/MathExtras_8h_source.html">llvm/Support/MathExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d84/TimeValue_8h_source.html">llvm/Support/TimeValue.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d82/raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d6f/Local_8h_source.html">llvm/Transforms/Utils/Local.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dc3/PromoteMemToReg_8h_source.html">llvm/Transforms/Utils/PromoteMemToReg.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d8d/SSAUpdater_8h_source.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</code><br/>
</div>
<p><a href="../../d4/d8c/SROA_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db9/structllvm_1_1isPodLike.html">llvm::isPodLike&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df4/structllvm_1_1isPodLike_3_01Slice_01_4.html">llvm::isPodLike&lt; Slice &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classAllocaSlices_1_1SliceBuilder.html">AllocaSlices::SliceBuilder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builder for the alloca slices.  <a href="../../dc/d4b/classAllocaSlices_1_1SliceBuilder.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d9/d4a/namespacellvm"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d4a/namespacellvm.html">llvm</a></td></tr>
<tr class="memdesc:d9/d4a/namespacellvm"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of target independent CodeGen pass IDs. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;sroa&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae70113602d2d74907fc766c32cc4ae7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ae70113602d2d74907fc766c32cc4ae7d">STATISTIC</a> (NumAllocasAnalyzed,&quot;Number of allocas analyzed <a class="el" href="../../df/dca/GlobalMerge_8cpp.html#ac16d0ba14eb60334c1bfc84c4b00734a">for</a> replacement&quot;)</td></tr>
<tr class="separator:ae70113602d2d74907fc766c32cc4ae7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d1e66edb1bedaeb82a478ff04da432"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a07d1e66edb1bedaeb82a478ff04da432">STATISTIC</a> (NumAllocaPartitions,&quot;Number of alloca partitions formed&quot;)</td></tr>
<tr class="separator:a07d1e66edb1bedaeb82a478ff04da432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6899737cbac2fab2f5d952d3729de672"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a6899737cbac2fab2f5d952d3729de672">STATISTIC</a> (MaxPartitionsPerAlloca,&quot;Maximum number of partitions per alloca&quot;)</td></tr>
<tr class="separator:a6899737cbac2fab2f5d952d3729de672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593b8775c254e4ca9e842dec50db4421"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a593b8775c254e4ca9e842dec50db4421">STATISTIC</a> (NumAllocaPartitionUses,&quot;Number of alloca partition uses rewritten&quot;)</td></tr>
<tr class="separator:a593b8775c254e4ca9e842dec50db4421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdcc50dacf51dded7a3cd0f353cbafcd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#acdcc50dacf51dded7a3cd0f353cbafcd">STATISTIC</a> (MaxUsesPerAllocaPartition,&quot;Maximum number of uses of <a class="el" href="../../db/d2c/dwarfdump-test4-decl_8h.html#a2edadf23dba309e5902af6c6dc829482">a</a> partition&quot;)</td></tr>
<tr class="separator:acdcc50dacf51dded7a3cd0f353cbafcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab850c470c395470df549e3bd5def2ff1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ab850c470c395470df549e3bd5def2ff1">STATISTIC</a> (NumNewAllocas,&quot;Number of new, smaller allocas introduced&quot;)</td></tr>
<tr class="separator:ab850c470c395470df549e3bd5def2ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3bb90905be94b5a6679ab23ea5d0812"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#af3bb90905be94b5a6679ab23ea5d0812">STATISTIC</a> (NumPromoted,&quot;Number of allocas promoted to SSA values&quot;)</td></tr>
<tr class="separator:af3bb90905be94b5a6679ab23ea5d0812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab724c2f2ba7ef7ba51bc2b179b224f9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ab724c2f2ba7ef7ba51bc2b179b224f9b">STATISTIC</a> (NumLoadsSpeculated,&quot;Number of loads speculated to allow <a class="el" href="../../de/dcc/AArch64AddressTypePromotion_8cpp.html#aa427e4783da72a6b07c2e0038900a82b">promotion</a>&quot;)</td></tr>
<tr class="separator:ab724c2f2ba7ef7ba51bc2b179b224f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d61f99fdf84fcf7f80545520fae0ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a80d61f99fdf84fcf7f80545520fae0ba">STATISTIC</a> (NumDeleted,&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> deleted&quot;)</td></tr>
<tr class="separator:a80d61f99fdf84fcf7f80545520fae0ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb1290154412d00cea8f03a3b7a84217"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#aeb1290154412d00cea8f03a3b7a84217">STATISTIC</a> (NumVectorized,&quot;Number of vectorized aggregates&quot;)</td></tr>
<tr class="separator:aeb1290154412d00cea8f03a3b7a84217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849bc9de354f140d265e3ff56999ce19"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a849bc9de354f140d265e3ff56999ce19">foldSelectInst</a> (<a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;SI)</td></tr>
<tr class="separator:a849bc9de354f140d265e3ff56999ce19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cddfff8553e3f05397def533fb5190e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a0cddfff8553e3f05397def533fb5190e">INITIALIZE_PASS_BEGIN</a> (SROA,&quot;sroa&quot;,&quot;Scalar Replacement Of <a class="el" href="../../db/d1c/ScalarReplAggregates_8cpp.html#aa2f8d7eeec0f14faa18fd7f9e87f1f2e">Aggregates</a>&quot;, false, <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>) <a class="el" href="../../dc/d6f/JumpInstrTables_8cpp.html#afdca0f03e5390cb037c356a5e4ab4363">INITIALIZE_PASS_END</a>(SROA</td></tr>
<tr class="separator:a0cddfff8553e3f05397def533fb5190e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bd66bcc8e0dce3d4d67880b77c6b1b"><td class="memItemLeft" align="right" valign="top">Scalar Replacement Of static <br class="typebreak"/>
<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a> <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ae4bd66bcc8e0dce3d4d67880b77c6b1b">findCommonType</a> (AllocaSlices::const_iterator B, AllocaSlices::const_iterator E, uint64_t EndOffset)</td></tr>
<tr class="separator:ae4bd66bcc8e0dce3d4d67880b77c6b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966aab9bfbf6c54fb99067d552637050"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a966aab9bfbf6c54fb99067d552637050">isSafePHIToSpeculate</a> (<a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> &amp;PN, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>=nullptr)</td></tr>
<tr class="separator:a966aab9bfbf6c54fb99067d552637050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab38ec9ebc3b5d96a4b7ddcb11cfcd58"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#aab38ec9ebc3b5d96a4b7ddcb11cfcd58">speculatePHINodeLoads</a> (<a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> &amp;PN)</td></tr>
<tr class="separator:aab38ec9ebc3b5d96a4b7ddcb11cfcd58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab791f68c42876ac8a1d2c3a0f595eb5e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ab791f68c42876ac8a1d2c3a0f595eb5e">isSafeSelectToSpeculate</a> (<a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;SI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>=nullptr)</td></tr>
<tr class="separator:ab791f68c42876ac8a1d2c3a0f595eb5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7493b7d3b84612687869f2c3afed924b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a7493b7d3b84612687869f2c3afed924b">speculateSelectInstLoads</a> (<a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;SI)</td></tr>
<tr class="separator:a7493b7d3b84612687869f2c3afed924b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4241f766ad9c9ea4168acea54e9185d7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a4241f766ad9c9ea4168acea54e9185d7">buildGEP</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BasePtr, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Indices, <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> NamePrefix)</td></tr>
<tr class="memdesc:a4241f766ad9c9ea4168acea54e9185d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a GEP out of a base pointer and indices.  <a href="#a4241f766ad9c9ea4168acea54e9185d7">More...</a><br/></td></tr>
<tr class="separator:a4241f766ad9c9ea4168acea54e9185d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac88e93c266912342b60294a3fca1e097"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ac88e93c266912342b60294a3fca1e097">getNaturalGEPWithType</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *BasePtr, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *TargetTy, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Indices, <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> NamePrefix)</td></tr>
<tr class="memdesc:ac88e93c266912342b60294a3fca1e097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a natural GEP off of the BasePtr walking through Ty toward TargetTy without changing the offset of the pointer.  <a href="#ac88e93c266912342b60294a3fca1e097">More...</a><br/></td></tr>
<tr class="separator:ac88e93c266912342b60294a3fca1e097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbaaa100cded0b6496ea85726a93bce5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Ptr, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *TargetTy, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Indices, <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> NamePrefix)</td></tr>
<tr class="memdesc:afbaaa100cded0b6496ea85726a93bce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively compute indices for a natural GEP.  <a href="#afbaaa100cded0b6496ea85726a93bce5">More...</a><br/></td></tr>
<tr class="separator:afbaaa100cded0b6496ea85726a93bce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc1e7bc0de4b175d1b35153f5602233"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a1cc1e7bc0de4b175d1b35153f5602233">getNaturalGEPWithOffset</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Ptr, <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *TargetTy, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Indices, <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> NamePrefix)</td></tr>
<tr class="memdesc:a1cc1e7bc0de4b175d1b35153f5602233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a natural GEP from a base pointer to a particular offset and resulting in a particular type.  <a href="#a1cc1e7bc0de4b175d1b35153f5602233">More...</a><br/></td></tr>
<tr class="separator:a1cc1e7bc0de4b175d1b35153f5602233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf248f865af8d7de55740b7123bde294"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#adf248f865af8d7de55740b7123bde294">getAdjustedPtr</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Ptr, <a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *<a class="el" href="../../d9/d4a/namespacellvm.html#a8686bf16a4a7654e352986d2e7779fbe">PointerTy</a>, <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> NamePrefix)</td></tr>
<tr class="memdesc:adf248f865af8d7de55740b7123bde294"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute an adjusted pointer from Ptr by Offset bytes where the resulting pointer has PointerTy.  <a href="#adf248f865af8d7de55740b7123bde294">More...</a><br/></td></tr>
<tr class="separator:adf248f865af8d7de55740b7123bde294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb1c078833c17e4c9529b0cf924385c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *OldTy, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *NewTy)</td></tr>
<tr class="memdesc:a2fb1c078833c17e4c9529b0cf924385c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether we can convert a value from the old to the new type.  <a href="#a2fb1c078833c17e4c9529b0cf924385c">More...</a><br/></td></tr>
<tr class="separator:a2fb1c078833c17e4c9529b0cf924385c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6146d9a22768498097b2c53cd2234f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a7d6146d9a22768498097b2c53cd2234f">convertValue</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *NewTy)</td></tr>
<tr class="memdesc:a7d6146d9a22768498097b2c53cd2234f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic routine to convert an SSA value to a value of a different type.  <a href="#a7d6146d9a22768498097b2c53cd2234f">More...</a><br/></td></tr>
<tr class="separator:a7d6146d9a22768498097b2c53cd2234f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe50201d4e405f7bb74806c62e850140"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#afe50201d4e405f7bb74806c62e850140">isVectorPromotionViableForSlice</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, AllocaSlices &amp;<a class="el" href="../../d1/d6a/structS.html">S</a>, uint64_t SliceBeginOffset, uint64_t SliceEndOffset, <a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *Ty, uint64_t ElementSize, AllocaSlices::const_iterator <a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</td></tr>
<tr class="memdesc:afe50201d4e405f7bb74806c62e850140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether the given slice use can be promoted to a vector.  <a href="#afe50201d4e405f7bb74806c62e850140">More...</a><br/></td></tr>
<tr class="separator:afe50201d4e405f7bb74806c62e850140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581dd5bca5410ba43e8cf06d949fa7f2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a581dd5bca5410ba43e8cf06d949fa7f2">isVectorPromotionViable</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *AllocaTy, AllocaSlices &amp;<a class="el" href="../../d1/d6a/structS.html">S</a>, uint64_t SliceBeginOffset, uint64_t SliceEndOffset, AllocaSlices::const_iterator <a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AllocaSlices::const_iterator E, <a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; AllocaSlices::iterator &gt; SplitUses)</td></tr>
<tr class="memdesc:a581dd5bca5410ba43e8cf06d949fa7f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether the given alloca partitioning and range of slices can be promoted to a vector.  <a href="#a581dd5bca5410ba43e8cf06d949fa7f2">More...</a><br/></td></tr>
<tr class="separator:a581dd5bca5410ba43e8cf06d949fa7f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e014ae237cfe6ed7bc2e25f91ecbe0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a65e014ae237cfe6ed7bc2e25f91ecbe0">isIntegerWideningViableForSlice</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *AllocaTy, uint64_t AllocBeginOffset, uint64_t Size, AllocaSlices &amp;<a class="el" href="../../d1/d6a/structS.html">S</a>, AllocaSlices::const_iterator <a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, bool &amp;WholeAllocaOp)</td></tr>
<tr class="memdesc:a65e014ae237cfe6ed7bc2e25f91ecbe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether a slice of an alloca is valid for integer widening.  <a href="#a65e014ae237cfe6ed7bc2e25f91ecbe0">More...</a><br/></td></tr>
<tr class="separator:a65e014ae237cfe6ed7bc2e25f91ecbe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f170d10487be0c2a7862177b2c18e7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a75f170d10487be0c2a7862177b2c18e7">isIntegerWideningViable</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *AllocaTy, uint64_t AllocBeginOffset, AllocaSlices &amp;<a class="el" href="../../d1/d6a/structS.html">S</a>, AllocaSlices::const_iterator <a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AllocaSlices::const_iterator E, <a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; AllocaSlices::iterator &gt; SplitUses)</td></tr>
<tr class="memdesc:a75f170d10487be0c2a7862177b2c18e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether the given alloca partition's integer operations can be widened to promotable ones.  <a href="#a75f170d10487be0c2a7862177b2c18e7">More...</a><br/></td></tr>
<tr class="separator:a75f170d10487be0c2a7862177b2c18e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e7aca18fb08798727209385f164f7c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a94e7aca18fb08798727209385f164f7c">extractInteger</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *Ty, uint64_t Offset, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;Name)</td></tr>
<tr class="separator:a94e7aca18fb08798727209385f164f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7febebe786555d6e0d07ca0f86e294c1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a7febebe786555d6e0d07ca0f86e294c1">insertInteger</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Old, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, uint64_t Offset, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;Name)</td></tr>
<tr class="separator:a7febebe786555d6e0d07ca0f86e294c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a9071efa992145e210f0b41a52e501"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a06a9071efa992145e210f0b41a52e501">extractVector</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, unsigned BeginIndex, unsigned EndIndex, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;Name)</td></tr>
<tr class="separator:a06a9071efa992145e210f0b41a52e501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c6a2faff923f431932c6d33cf4092b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a42c6a2faff923f431932c6d33cf4092b">insertVector</a> (IRBuilderTy &amp;IRB, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Old, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, unsigned BeginIndex, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;Name)</td></tr>
<tr class="separator:a42c6a2faff923f431932c6d33cf4092b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac102ff32dace1cf8e8e6f9c9ec4d159c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="memdesc:ac102ff32dace1cf8e8e6f9c9ec4d159c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strip aggregate type wrapping.  <a href="#ac102ff32dace1cf8e8e6f9c9ec4d159c">More...</a><br/></td></tr>
<tr class="separator:ac102ff32dace1cf8e8e6f9c9ec4d159c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe75ff888b6a7ee2836aa6c8f33984c1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#abe75ff888b6a7ee2836aa6c8f33984c1">getTypePartition</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, uint64_t Offset, uint64_t Size)</td></tr>
<tr class="memdesc:abe75ff888b6a7ee2836aa6c8f33984c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to find a partition of the aggregate type passed in for a given offset and size.  <a href="#abe75ff888b6a7ee2836aa6c8f33984c1">More...</a><br/></td></tr>
<tr class="separator:abe75ff888b6a7ee2836aa6c8f33984c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1564307938a15a117873a7ab9a27e0a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a1564307938a15a117873a7ab9a27e0a9">removeFinishedSplitUses</a> (<a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; AllocaSlices::iterator &gt; &amp;SplitUses, uint64_t &amp;MaxSplitUseEndOffset, uint64_t Offset)</td></tr>
<tr class="separator:a1564307938a15a117873a7ab9a27e0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f3e524fc962e72389c1e1eedc03229c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a3f3e524fc962e72389c1e1eedc03229c">enqueueUsersInWorklist</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;Worklist, <a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *, 8 &gt; &amp;Visited)</td></tr>
<tr class="separator:a3f3e524fc962e72389c1e1eedc03229c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a613f24111340d4f4fc57e01da7a083b5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a613f24111340d4f4fc57e01da7a083b5">ForceSSAUpdater</a> (&quot;force-<a class="el" href="../../db/d1c/ScalarReplAggregates_8cpp.html#a3d60b300c3988b10f2e6d963d3707f58">ssa</a>-updater&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td></tr>
<tr class="separator:a613f24111340d4f4fc57e01da7a083b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577be81e94407739665be7332b4f9ac0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a577be81e94407739665be7332b4f9ac0">SROARandomShuffleSlices</a> (&quot;sroa-random-shuffle-slices&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td></tr>
<tr class="separator:a577be81e94407739665be7332b4f9ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6da6bff872f9db9f549ab7dd6086a61"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#ac6da6bff872f9db9f549ab7dd6086a61">SROAStrictInbounds</a> (&quot;sroa-strict-inbounds&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td></tr>
<tr class="separator:ac6da6bff872f9db9f549ab7dd6086a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6990f15b9f29df6e8497b3e53875ccab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a6990f15b9f29df6e8497b3e53875ccab">sroa</a></td></tr>
<tr class="separator:a6990f15b9f29df6e8497b3e53875ccab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3f8e5f6c512fe6a5059dd0c51aec95"><td class="memItemLeft" align="right" valign="top">Scalar Replacement Of&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a></td></tr>
<tr class="separator:a5b3f8e5f6c512fe6a5059dd0c51aec95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7a95cb9fb444faf77cd626f1b8128b"><td class="memItemLeft" align="right" valign="top">Scalar Replacement Of&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/SROA_8cpp.html#acc7a95cb9fb444faf77cd626f1b8128b">false</a></td></tr>
<tr class="separator:acc7a95cb9fb444faf77cd626f1b8128b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This transformation implements the well known scalar replacement of aggregates transformation. It tries to identify promotable elements of an aggregate alloca, and promote them to registers. It will also try to convert uses of an element (or set of elements) of an alloca into a vector or bitfield-style integer scalar if appropriate.</p>
<p>It works to do this with minimal slicing of the alloca so that regions which are merely transferred in and out of external memory remain unchanged and are not decomposed to scalar code.</p>
<p>Because this also performs alloca promotion, it can be thought of as also serving the purpose of SSA formation. The algorithm iterates on the function until all opportunities for promotion have been realized. </p>

<p>Definition in file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;sroa&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l00066">66</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4241f766ad9c9ea4168acea54e9185d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* buildGEP </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>BasePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>&#160;</td>
          <td class="paramname"><em>NamePrefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a GEP out of a base pointer and indices. </p>
<p>This will return the BasePtr if that is valid, or build a new GEP instruction using the IRBuilder if GEP-ing is needed. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01263">1263</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                                                                            {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">if</span> (Indices.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">return</span> BasePtr;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="comment">// A single zero index is a no-op, so check for this and avoid building a GEP</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="comment">// in that case.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (Indices.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 &amp;&amp; cast&lt;ConstantInt&gt;(Indices.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>())-&gt;<a class="code" href="../../d7/d61/Lint_8cpp.html#a9bf5e0f1fcf11c6c1d08da3fde630609">isZero</a>())</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> BasePtr;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">return</span> IRB.CreateInBoundsGEP(BasePtr, Indices, NamePrefix + <span class="stringliteral">&quot;sroa_idx&quot;</span>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="Lint_8cpp_html_a9bf5e0f1fcf11c6c1d08da3fde630609"><div class="ttname"><a href="../../d7/d61/Lint_8cpp.html#a9bf5e0f1fcf11c6c1d08da3fde630609">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d61/Lint_8cpp_source.html#l00507">Lint.cpp:507</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00158">SmallVector.h:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2fb1c078833c17e4c9529b0cf924385c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool canConvertValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>OldTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>NewTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether we can convert a value from the old to the new type. </p>
<p>This predicate should be used to guard calls to convertValue in order to ensure that we only try to convert viable values. The strategy is that we will peel off single element struct and array wrappings to get to an underlying value, and convert that value. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01537">1537</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                                                            {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordflow">if</span> (OldTy == NewTy)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *OldITy = dyn_cast&lt;IntegerType&gt;(OldTy))</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *NewITy = dyn_cast&lt;IntegerType&gt;(NewTy))</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">if</span> (NewITy-&gt;getBitWidth() &gt;= OldITy-&gt;getBitWidth())</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(NewTy) != DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(OldTy))</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (!NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">isSingleValueType</a>() || !OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">isSingleValueType</a>())</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// We can convert pointers to integers and vice-versa. Same for vectors</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// of pointers and integers.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  OldTy = OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  NewTy = NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>();</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="keywordflow">if</span> (NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() || OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">if</span> (NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp; OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">if</span> (NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() || OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Type_html_a36e21267fe14e69d3251eab1cd3a0076"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">llvm::Type::isSingleValueType</a></div><div class="ttdeci">bool isSingleValueType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00250">Type.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d6146d9a22768498097b2c53cd2234f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* convertValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>NewTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic routine to convert an SSA value to a value of a different type. </p>
<p>This will try various different casting techniques, such as bitcasts, inttoptr, and ptrtoint casts. Use the <code>canConvertValue</code> predicate to test two types for viability with this routine. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01570">1570</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                        {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *OldTy = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, OldTy, NewTy) &amp;&amp; <span class="stringliteral">&quot;Value not convertable to type&quot;</span>);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">if</span> (OldTy == NewTy)</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *OldITy = dyn_cast&lt;IntegerType&gt;(OldTy))</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *NewITy = dyn_cast&lt;IntegerType&gt;(NewTy))</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="keywordflow">if</span> (NewITy-&gt;getBitWidth() &gt; OldITy-&gt;getBitWidth())</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">return</span> IRB.CreateZExt(V, NewITy);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// See if we need inttoptr for this type pair. A cast involving both scalars</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// and vectors requires and additional bitcast.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">if</span> (OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="comment">// Expand &lt;2 x i32&gt; to i8* --&gt; &lt;2 x i32&gt; to i64 to i8*</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">if</span> (OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; !NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordflow">return</span> IRB.CreateIntToPtr(IRB.CreateBitCast(V, DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(NewTy)),</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                                NewTy);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">// Expand i128 to &lt;2 x i8*&gt; --&gt; i128 to &lt;2 x i64&gt; to &lt;2 x i8*&gt;</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">if</span> (!OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <span class="keywordflow">return</span> IRB.CreateIntToPtr(IRB.CreateBitCast(V, DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(NewTy)),</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                                NewTy);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordflow">return</span> IRB.CreateIntToPtr(V, NewTy);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// See if we need ptrtoint for this type pair. A cast involving both scalars</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// and vectors requires and additional bitcast.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keywordflow">if</span> (OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="comment">// Expand &lt;2 x i8*&gt; to i128 --&gt; &lt;2 x i8*&gt; to &lt;2 x i64&gt; to i128</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; !NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <span class="keywordflow">return</span> IRB.CreateBitCast(IRB.CreatePtrToInt(V, DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(OldTy)),</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                               NewTy);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">// Expand i8* to &lt;2 x i32&gt; --&gt; i8* to i64 to &lt;2 x i32&gt;</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (!OldTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; NewTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="keywordflow">return</span> IRB.CreateBitCast(IRB.CreatePtrToInt(V, DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(OldTy)),</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                               NewTy);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">return</span> IRB.CreatePtrToInt(V, NewTy);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="keywordflow">return</span> IRB.CreateBitCast(V, NewTy);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;}</div>
<div class="ttc" id="SROA_8cpp_html_a2fb1c078833c17e4c9529b0cf924385c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a></div><div class="ttdeci">static bool canConvertValue(const DataLayout &amp;DL, Type *OldTy, Type *NewTy)</div><div class="ttdoc">Test whether we can convert a value from the old to the new type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01537">SROA.cpp:1537</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00226">Type.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f3e524fc962e72389c1e1eedc03229c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void enqueueUsersInWorklist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> &amp;&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Worklist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *, 8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>Visited</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l03524">3524</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                                                                           {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : I.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(cast&lt;Instruction&gt;(U)))</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      Worklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a94e7aca18fb08798727209385f164f7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* extractInteger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;&#160;</td>
          <td class="paramname"><em>Name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01851">1851</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                                                {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;       start: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *IntTy = cast&lt;IntegerType&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(Ty) + Offset &lt;= DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(IntTy) &amp;&amp;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;         <span class="stringliteral">&quot;Element extends past full value&quot;</span>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  uint64_t ShAmt = 8*Offset;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    ShAmt = 8*(DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(IntTy) - DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(Ty) - Offset);</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">if</span> (ShAmt) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    V = IRB.CreateLShr(V, ShAmt, Name + <span class="stringliteral">&quot;.shift&quot;</span>);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;     shifted: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ty-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() &lt;= IntTy-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() &amp;&amp;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;         <span class="stringliteral">&quot;Cannot extract to a larger integer!&quot;</span>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="keywordflow">if</span> (Ty != IntTy) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    V = IRB.CreateTrunc(V, Ty, Name + <span class="stringliteral">&quot;.trunc&quot;</span>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;     trunced: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a6f603ab84f6f7c79985036f58cca9d48"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Get the number of bits in this IntegerType. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00061">DerivedTypes.h:61</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00353">DataLayout.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06a9071efa992145e210f0b41a52e501"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* extractVector </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>BeginIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>EndIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;&#160;</td>
          <td class="paramname"><em>Name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01905">1905</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                                               {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = cast&lt;VectorType&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordtype">unsigned</span> NumElements = EndIndex - BeginIndex;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(NumElements &lt;= VecTy-&gt;getNumElements() &amp;&amp; <span class="stringliteral">&quot;Too many elements!&quot;</span>);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">if</span> (NumElements == VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>())</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="keywordflow">if</span> (NumElements == 1) {</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    V = IRB.CreateExtractElement(V, IRB.getInt32(BeginIndex),</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                                 Name + <span class="stringliteral">&quot;.extract&quot;</span>);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;     extract: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 8&gt;</a> Mask;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  Mask.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(NumElements);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = BeginIndex; i != EndIndex; ++i)</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    Mask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt32(i));</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  V = IRB.CreateShuffleVector(V, UndefValue::get(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                              ConstantVector::get(Mask),</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                              Name + <span class="stringliteral">&quot;.extract&quot;</span>);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;     shuffle: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae4bd66bcc8e0dce3d4d67880b77c6b1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Scalar Replacement Of static <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a> <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a>* findCommonType </td>
          <td>(</td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>E</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>EndOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Walk the range of a partitioning looking for a common type to cover this sequence of slices. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01012">1012</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                                {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordtype">bool</span> TyIsCommon = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *ITy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// Note that we need to look at *every* alloca slice&#39;s Use to ensure we</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// always get consistent results regardless of the order of slices.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">for</span> (AllocaSlices::const_iterator <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = B; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="../../d0/d66/classllvm_1_1Use.html">Use</a> *U = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getUse();</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IntrinsicInst&gt;(*U-&gt;getUser()))</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;beginOffset() != B-&gt;beginOffset() || <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset() != EndOffset)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *UserTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      UserTy = <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getType();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      UserTy = SI-&gt;getValueOperand()-&gt;getType();</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *UserITy = dyn_cast_or_null&lt;IntegerType&gt;(UserTy)) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="comment">// If the type is larger than the partition, skip it. We only encounter</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="comment">// this for split integer operations where we want to use the type of the</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="comment">// entity causing the split. Also skip if the type is not a byte width</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="comment">// multiple.</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">if</span> (UserITy-&gt;getBitWidth() % 8 != 0 ||</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;          UserITy-&gt;getBitWidth() / 8 &gt; (EndOffset - B-&gt;beginOffset()))</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="comment">// Track the largest bitwidth integer type used in this way in case there</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="comment">// is no common type.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="keywordflow">if</span> (!ITy || ITy-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() &lt; UserITy-&gt;getBitWidth())</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        ITy = UserITy;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// To avoid depending on the order of slices, Ty and TyIsCommon must not</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// depend on types skipped above.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (!UserTy || (Ty &amp;&amp; Ty != UserTy))</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      TyIsCommon = <span class="keyword">false</span>; <span class="comment">// Give up on anything but an iN type.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      Ty = UserTy;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">return</span> TyIsCommon ? Ty : ITy;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a6f603ab84f6f7c79985036f58cca9d48"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Get the number of bits in this IntegerType. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00061">DerivedTypes.h:61</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a849bc9de354f140d265e3ff56999ce19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* foldSelectInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;&#160;</td>
          <td class="paramname"><em>SI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l00315">315</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                             {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// If the condition being selected on is a constant or the same value is</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// being selected between, fold the select. Yes this does (rarely) happen</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// early on.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>()))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1+CI-&gt;isZero());</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2))</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01564">Instructions.h:1564</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf248f865af8d7de55740b7123bde294"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* getAdjustedPtr </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>PointerTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>&#160;</td>
          <td class="paramname"><em>NamePrefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute an adjusted pointer from Ptr by Offset bytes where the resulting pointer has PointerTy. </p>
<p>This tries very hard to compute a "natural" GEP which arrives at the offset and produces the pointer type desired. Where it cannot, it will try to use the natural GEP to arrive at the offset and bitcast to the type. Where that fails, it will try to use an existing i8* and GEP to the byte offset and bitcast to the type.</p>
<p>The strategy for finding the more natural GEPs is to peel off layers of the pointer, walking back through bit casts and GEPs, searching for a base pointer from which we can compute a natural GEP with the desired properties. The algorithm tries to fold as many constant indices into a single GEP as possible, thus making each GEP more independent of the surrounding code. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01442">1442</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                               {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// Even though we don&#39;t look through PHI nodes, we could be called on an</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// instruction in an unreachable block, which may be on a cycle.</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(Ptr);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Indices;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// We may end up computing an offset pointer that has the wrong type. If we</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">// never are able to compute one directly that has the correct type, we&#39;ll</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// fall back to it, so keep it around here.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *OffsetPtr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// Remember any i8 pointer we come across to re-use if we need to do a raw</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// byte offset.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Int8Ptr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Int8PtrOffset(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), 0);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *TargetTy = PointerTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// First fold any existing GEPs into the offset.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html">GEPOperator</a> *GEP = dyn_cast&lt;GEPOperator&gt;(Ptr)) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> GEPOffset(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), 0);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="keywordflow">if</span> (!GEP-&gt;accumulateConstantOffset(DL, GEPOffset))</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      Offset += GEPOffset;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      Ptr = GEP-&gt;getPointerOperand();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">if</span> (!Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(Ptr))</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="comment">// See if we can perform a natural GEP here.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    Indices.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = <a class="code" href="../../d4/d8c/SROA_8cpp.html#a1cc1e7bc0de4b175d1b35153f5602233">getNaturalGEPWithOffset</a>(IRB, DL, Ptr, Offset, TargetTy,</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                                           Indices, NamePrefix)) {</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>-&gt;getType() == <a class="code" href="../../d9/d4a/namespacellvm.html#a8686bf16a4a7654e352986d2e7779fbe">PointerTy</a>) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <span class="comment">// Zap any offset pointer that we ended up computing in previous rounds.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">if</span> (OffsetPtr &amp;&amp; OffsetPtr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(OffsetPtr))</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">if</span> (!OffsetPtr) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        OffsetPtr = <a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// Stash this pointer if we&#39;ve found an i8*.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (Ptr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(8)) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      Int8Ptr = Ptr;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      Int8PtrOffset = Offset;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// Peel off a layer of the pointer and update the offset appropriately.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (Operator::getOpcode(Ptr) == Instruction::BitCast) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      Ptr = cast&lt;Operator&gt;(Ptr)-&gt;getOperand(0);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d19/classllvm_1_1GlobalAlias.html">GlobalAlias</a> *GA = dyn_cast&lt;GlobalAlias&gt;(Ptr)) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">if</span> (GA-&gt;mayBeOverridden())</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      Ptr = GA-&gt;getAliasee();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ptr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Unexpected operand type!&quot;</span>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  } <span class="keywordflow">while</span> (Visited.<a class="code" href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">insert</a>(Ptr));</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keywordflow">if</span> (!OffsetPtr) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span> (!Int8Ptr) {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      Int8Ptr = IRB.CreateBitCast(</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;          Ptr, IRB.getInt8PtrTy(PointerTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>()),</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;          NamePrefix + <span class="stringliteral">&quot;sroa_raw_cast&quot;</span>);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      Int8PtrOffset = Offset;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    OffsetPtr = Int8PtrOffset == 0 ? Int8Ptr :</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      IRB.CreateInBoundsGEP(Int8Ptr, IRB.getInt(Int8PtrOffset),</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                            NamePrefix + <span class="stringliteral">&quot;sroa_raw_idx&quot;</span>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  Ptr = OffsetPtr;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="comment">// On the off chance we were targeting i8*, guard the bitcast here.</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="keywordflow">if</span> (Ptr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != <a class="code" href="../../d9/d4a/namespacellvm.html#a8686bf16a4a7654e352986d2e7779fbe">PointerTy</a>)</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    Ptr = IRB.CreateBitCast(Ptr, PointerTy, NamePrefix + <span class="stringliteral">&quot;sroa_cast&quot;</span>);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keywordflow">return</span> Ptr;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1GlobalAlias_html"><div class="ttname"><a href="../../d0/d19/classllvm_1_1GlobalAlias.html">llvm::GlobalAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d9c/GlobalAlias_8h_source.html#l00029">GlobalAlias.h:29</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a1cc1e7bc0de4b175d1b35153f5602233"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a1cc1e7bc0de4b175d1b35153f5602233">getNaturalGEPWithOffset</a></div><div class="ttdeci">static Value * getNaturalGEPWithOffset(IRBuilderTy &amp;IRB, const DataLayout &amp;DL, Value *Ptr, APInt Offset, Type *TargetTy, SmallVectorImpl&lt; Value * &gt; &amp;Indices, Twine NamePrefix)</div><div class="ttdoc">Get a natural GEP from a base pointer to a particular offset and resulting in a particular type...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01402">SROA.cpp:1402</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_ae39454c85a776d45d248e38f98a620c6"><div class="ttname"><a href="../../d7/d55/classllvm_1_1SmallPtrSetImpl.html#ae39454c85a776d45d248e38f98a620c6">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00256">SmallPtrSet.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00212">Type.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00363">Type.h:363</a></div></div>
<div class="ttc" id="namespacellvm_html_a8686bf16a4a7654e352986d2e7779fbe"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a8686bf16a4a7654e352986d2e7779fbe">llvm::PointerTy</a></div><div class="ttdeci">void * PointerTy</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d85/GenericValue_8h_source.html#l00023">GenericValue.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00371">SmallVector.h:371</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01248">APInt.h:1248</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="../../d6/ddc/classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d89/SmallPtrSet_8h_source.html#l00292">SmallPtrSet.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html"><div class="ttname"><a href="../../da/d87/classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00361">Operator.h:361</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afbaaa100cded0b6496ea85726a93bce5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* getNaturalGEPRecursively </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> &amp;&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>TargetTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>&#160;</td>
          <td class="paramname"><em>NamePrefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively compute indices for a natural GEP. </p>
<p>This is the recursive step for getNaturalGEPWithOffset that walks down the element types adding appropriate indices for the GEP. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01329">1329</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                                                         {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">if</span> (Offset == 0)</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#ac88e93c266912342b60294a3fca1e097">getNaturalGEPWithType</a>(IRB, DL, Ptr, Ty, TargetTy, Indices, NamePrefix);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// We can&#39;t recurse through pointer types.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// We try to analyze GEPs over vectors here, but note that these GEPs are</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// extremely poorly defined currently. The long-term goal is to remove GEPing</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">// over a vector from the IR completely.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = dyn_cast&lt;VectorType&gt;(Ty)) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordtype">unsigned</span> ElementSizeInBits = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(VecTy-&gt;getScalarType());</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">if</span> (ElementSizeInBits % 8 != 0) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="comment">// GEPs over non-multiple of 8 size vector elements are invalid.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> ElementSize(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), ElementSizeInBits / 8);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> NumSkippedElements = Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a482ad0f63ec145fdba2497e2298a5aa1">sdiv</a>(ElementSize);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (NumSkippedElements.ugt(VecTy-&gt;getNumElements()))</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    Offset -= NumSkippedElements * ElementSize;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt(NumSkippedElements));</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a>(IRB, DL, Ptr, VecTy-&gt;getElementType(),</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                                    Offset, TargetTy, Indices, NamePrefix);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ArrTy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = ArrTy-&gt;getElementType();</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> ElementSize(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(ElementTy));</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> NumSkippedElements = Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a482ad0f63ec145fdba2497e2298a5aa1">sdiv</a>(ElementSize);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span> (NumSkippedElements.ugt(ArrTy-&gt;getNumElements()))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    Offset -= NumSkippedElements * ElementSize;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt(NumSkippedElements));</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a>(IRB, DL, Ptr, ElementTy, Offset, TargetTy,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                    Indices, NamePrefix);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a>&gt;(Ty);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">if</span> (!STy)</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html">StructLayout</a> *SL = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  uint64_t StructOffset = Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordflow">if</span> (StructOffset &gt;= SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>())</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keywordtype">unsigned</span> Index = SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(StructOffset);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  Offset -= <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(Index));</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(Index);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keywordflow">if</span> (Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a0229ff3a1d7432810a86c8efab115c33">uge</a>(DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(ElementTy)))</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// The offset points into alignment padding.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt32(Index));</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a>(IRB, DL, Ptr, ElementTy, Offset, TargetTy,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                  Indices, NamePrefix);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a7dc983ebf0eb2d255fa90a67063c72e2"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Get zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01302">APInt.h:1302</a></div></div>
<div class="ttc" id="SROA_8cpp_html_ac88e93c266912342b60294a3fca1e097"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#ac88e93c266912342b60294a3fca1e097">getNaturalGEPWithType</a></div><div class="ttdeci">static Value * getNaturalGEPWithType(IRBuilderTy &amp;IRB, const DataLayout &amp;DL, Value *BasePtr, Type *Ty, Type *TargetTy, SmallVectorImpl&lt; Value * &gt; &amp;Indices, Twine NamePrefix)</div><div class="ttdoc">Get a natural GEP off of the BasePtr walking through Ty toward TargetTy without changing the offset o...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01285">SROA.cpp:1285</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00481">DataLayout.h:481</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00505">DataLayout.h:505</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01248">APInt.h:1248</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0229ff3a1d7432810a86c8efab115c33"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a0229ff3a1d7432810a86c8efab115c33">llvm::APInt::uge</a></div><div class="ttdeci">bool uge(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greater or equal comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01112">APInt.h:1112</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a482ad0f63ec145fdba2497e2298a5aa1"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a482ad0f63ec145fdba2497e2298a5aa1">llvm::APInt::sdiv</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT sdiv(const APInt &amp;RHS) const </div><div class="ttdoc">Signed division function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l01880">APInt.cpp:1880</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00488">DataLayout.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a795cfd43d30c44c33b97fe850bc0451f"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">llvm::StructLayout::getElementContainingOffset</a></div><div class="ttdeci">unsigned getElementContainingOffset(uint64_t Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00079">DataLayout.cpp:79</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="SROA_8cpp_html_afbaaa100cded0b6496ea85726a93bce5"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a></div><div class="ttdeci">static Value * getNaturalGEPRecursively(IRBuilderTy &amp;IRB, const DataLayout &amp;DL, Value *Ptr, Type *Ty, APInt &amp;Offset, Type *TargetTy, SmallVectorImpl&lt; Value * &gt; &amp;Indices, Twine NamePrefix)</div><div class="ttdoc">Recursively compute indices for a natural GEP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01329">SROA.cpp:1329</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1cc1e7bc0de4b175d1b35153f5602233"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* getNaturalGEPWithOffset </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a>&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>TargetTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>&#160;</td>
          <td class="paramname"><em>NamePrefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a natural GEP from a base pointer to a particular offset and resulting in a particular type. </p>
<p>The goal is to produce a "natural" looking GEP that works with the existing composite types to arrive at the appropriate offset and element type for a pointer. TargetTy is the element type the returned GEP should point-to if possible. We recurse by decreasing Offset, adding the appropriate index to Indices, and setting Ty to the result subtype.</p>
<p>If no natural GEP can be constructed, this function returns null. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01402">1402</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                                        {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *Ty = cast&lt;PointerType&gt;(Ptr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// Don&#39;t consider any GEPs through an i8* as natural unless the TargetTy is</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// an i8.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordflow">if</span> (Ty == IRB.<a class="code" href="../../db/d53/classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">getInt8PtrTy</a>(Ty-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>()) &amp;&amp; TargetTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(8))</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = Ty-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">if</span> (!ElementTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9cc8764485bccd20414348ca962c02c4">isSized</a>())</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// We can&#39;t GEP through an unsized element.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> ElementSize(Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(), DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(ElementTy));</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">if</span> (ElementSize == 0)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Zero-length arrays can&#39;t help us build a natural GEP.</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> NumSkippedElements = Offset.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a482ad0f63ec145fdba2497e2298a5aa1">sdiv</a>(ElementSize);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  Offset -= NumSkippedElements * ElementSize;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt(NumSkippedElements));</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a>(IRB, DL, Ptr, ElementTy, Offset, TargetTy,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                  Indices, NamePrefix);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01248">APInt.h:1248</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a482ad0f63ec145fdba2497e2298a5aa1"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a482ad0f63ec145fdba2497e2298a5aa1">llvm::APInt::sdiv</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT sdiv(const APInt &amp;RHS) const </div><div class="ttdoc">Signed division function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l01880">APInt.cpp:1880</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00278">Type.cpp:278</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9cc8764485bccd20414348ca962c02c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9cc8764485bccd20414348ca962c02c4">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSet&lt; const Type *, 4 &gt; *Visited=nullptr) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00268">Type.h:268</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="SROA_8cpp_html_afbaaa100cded0b6496ea85726a93bce5"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#afbaaa100cded0b6496ea85726a93bce5">getNaturalGEPRecursively</a></div><div class="ttdeci">static Value * getNaturalGEPRecursively(IRBuilderTy &amp;IRB, const DataLayout &amp;DL, Value *Ptr, Type *Ty, APInt &amp;Offset, Type *TargetTy, SmallVectorImpl&lt; Value * &gt; &amp;Indices, Twine NamePrefix)</div><div class="ttdoc">Recursively compute indices for a natural GEP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01329">SROA.cpp:1329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac88e93c266912342b60294a3fca1e097"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* getNaturalGEPWithType </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>BasePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>TargetTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a>&#160;</td>
          <td class="paramname"><em>NamePrefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a natural GEP off of the BasePtr walking through Ty toward TargetTy without changing the offset of the pointer. </p>
<p>This routine assumes we've already established a properly offset GEP with Indices, and arrived at the Ty type. The goal is to continue to GEP with zero-indices down through type layers until we find one the same as TargetTy. If we can't find one with the same type, we at least try to use one with the same size. If none of that works, we just produce the GEP as indicated by Indices to have the correct offset. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01285">1285</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                                      {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordflow">if</span> (Ty == TargetTy)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#a4241f766ad9c9ea4168acea54e9185d7">buildGEP</a>(IRB, BasePtr, Indices, NamePrefix);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// Pointer size to use for the indices.</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordtype">unsigned</span> PtrSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ab39b93d717af84ec8c4deced264716e3">getPointerTypeSizeInBits</a>(BasePtr-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// See if we can descend into a struct and locate a field with the correct</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="comment">// type.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordtype">unsigned</span> NumLayers = 0;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = Ty;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">if</span> (ElementTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ArrayTy = dyn_cast&lt;ArrayType&gt;(ElementTy)) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      ElementTy = ArrayTy-&gt;getElementType();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getIntN(PtrSize, 0));</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VectorTy = dyn_cast&lt;VectorType&gt;(ElementTy)) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      ElementTy = VectorTy-&gt;getElementType();</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt32(0));</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(ElementTy)) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (STy-&gt;element_begin() == STy-&gt;element_end())</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">// Nothing left to descend into.</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      ElementTy = *STy-&gt;element_begin();</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      Indices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt32(0));</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    ++NumLayers;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  } <span class="keywordflow">while</span> (ElementTy != TargetTy);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">if</span> (ElementTy != TargetTy)</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    Indices.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(Indices.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>() - NumLayers, Indices.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#a4241f766ad9c9ea4168acea54e9185d7">buildGEP</a>(IRB, BasePtr, Indices, NamePrefix);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00115">SmallVector.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ab39b93d717af84ec8c4deced264716e3"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ab39b93d717af84ec8c4deced264716e3">llvm::DataLayout::getPointerTypeSizeInBits</a></div><div class="ttdeci">unsigned getPointerTypeSizeInBits(Type *) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00611">DataLayout.cpp:611</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a4241f766ad9c9ea4168acea54e9185d7"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a4241f766ad9c9ea4168acea54e9185d7">buildGEP</a></div><div class="ttdeci">static Value * buildGEP(IRBuilderTy &amp;IRB, Value *BasePtr, SmallVectorImpl&lt; Value * &gt; &amp;Indices, Twine NamePrefix)</div><div class="ttdoc">Build a GEP out of a base pointer and indices. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01263">SROA.cpp:1263</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00450">SmallVector.h:450</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe75ff888b6a7ee2836aa6c8f33984c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a>* getTypePartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to find a partition of the aggregate type passed in for a given offset and size. </p>
<p>This recurses through the aggregate type and tries to compute a subtype based on the offset and size. When the offset and size span a sub-section of an array, it will even compute a new array type for that sub-section, and the same for structs.</p>
<p>Note that this routine is very strict and tries to find a partition of the type which produces the <em>exact</em> right offset and size. It is not forgiving when the size or offset cause either end of type-based partition to be off. Also, this is a best-effort routine. It is reasonable to give up and not return a type if necessary. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l03003">3003</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;                                                              {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keywordflow">if</span> (Offset == 0 &amp;&amp; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(Ty) == Size)</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a>(DL, Ty);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  <span class="keywordflow">if</span> (Offset &gt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(Ty) ||</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;      (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(Ty) - Offset) &lt; Size)</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *SeqTy = dyn_cast&lt;SequentialType&gt;(Ty)) {</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="comment">// We can&#39;t partition pointers...</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <span class="keywordflow">if</span> (SeqTy-&gt;isPointerTy())</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = SeqTy-&gt;getElementType();</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    uint64_t ElementSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(ElementTy);</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    uint64_t NumSkippedElements = Offset / ElementSize;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ArrTy = dyn_cast&lt;ArrayType&gt;(SeqTy)) {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      <span class="keywordflow">if</span> (NumSkippedElements &gt;= ArrTy-&gt;getNumElements())</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = dyn_cast&lt;VectorType&gt;(SeqTy)) {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      <span class="keywordflow">if</span> (NumSkippedElements &gt;= VecTy-&gt;getNumElements())</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    }</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    Offset -= NumSkippedElements * ElementSize;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="comment">// First check if we need to recurse.</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="keywordflow">if</span> (Offset &gt; 0 || Size &lt; ElementSize) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <span class="comment">// Bail if the partition ends in a different array element.</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="keywordflow">if</span> ((Offset + Size) &gt; ElementSize)</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      <span class="comment">// Recurse through the element type trying to peel off offset bytes.</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#abe75ff888b6a7ee2836aa6c8f33984c1">getTypePartition</a>(DL, ElementTy, Offset, Size);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Offset == 0);</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">if</span> (Size == ElementSize)</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a>(DL, ElementTy);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Size &gt; ElementSize);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    uint64_t NumElements = Size / ElementSize;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordflow">if</span> (NumElements * ElementSize != Size)</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">return</span> ArrayType::get(ElementTy, NumElements);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  }</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a>&gt;(Ty);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="keywordflow">if</span> (!STy)</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html">StructLayout</a> *SL = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="keywordflow">if</span> (Offset &gt;= SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>())</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  uint64_t EndOffset = Offset + Size;</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="keywordflow">if</span> (EndOffset &gt; SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>())</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="keywordtype">unsigned</span> Index = SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(Offset);</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  Offset -= SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(Index);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementTy = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(Index);</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  uint64_t ElementSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(ElementTy);</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="keywordflow">if</span> (Offset &gt;= ElementSize)</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// The offset points into alignment padding.</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="comment">// See if any partition must be contained by the element.</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="keywordflow">if</span> (Offset &gt; 0 || Size &lt; ElementSize) {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <span class="keywordflow">if</span> ((Offset + Size) &gt; ElementSize)</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#abe75ff888b6a7ee2836aa6c8f33984c1">getTypePartition</a>(DL, ElementTy, Offset, Size);</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Offset == 0);</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="keywordflow">if</span> (Size == ElementSize)</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a>(DL, ElementTy);</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a93ee26a67ca79e4ba796dcccb55e8c19">StructType::element_iterator</a> EI = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a8d85840dbf6b7eff52721aafae9df0f6">element_begin</a>() + Index,</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                               <a class="code" href="../../d3/d8d/lli_8cpp.html#aa4fe756239b3a64d2e23054c567346fd">EE</a> = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a1a716e87e6d2a1de3fcfd0682ed3fd1f">element_end</a>();</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="keywordflow">if</span> (EndOffset &lt; SL-&gt;getSizeInBytes()) {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordtype">unsigned</span> EndIndex = SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(EndOffset);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="keywordflow">if</span> (Index == EndIndex)</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Within a single element and its padding.</span></div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="comment">// Don&#39;t try to form &quot;natural&quot; types if the elements don&#39;t line up with the</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <span class="comment">// expected size.</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="comment">// FIXME: We could potentially recurse down through the last element in the</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    <span class="comment">// sub-struct to find a natural end point.</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keywordflow">if</span> (SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(EndIndex) != EndOffset)</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Index &lt; EndIndex);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    EE = STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a8d85840dbf6b7eff52721aafae9df0f6">element_begin</a>() + EndIndex;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  }</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="comment">// Try to build up a sub-structure.</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *SubTy = StructType::get(STy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), <a class="code" href="../../d9/d4a/namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(EI, EE),</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                                      STy-&gt;<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html#a883dd52cca7097874337641ca44473a0">isPacked</a>());</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html">StructLayout</a> *SubSL = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(SubTy);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="keywordflow">if</span> (Size != SubSL-&gt;getSizeInBytes())</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// The sub-struct doesn&#39;t have quite the size needed.</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <span class="keywordflow">return</span> SubTy;</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1StructType_html_a1a716e87e6d2a1de3fcfd0682ed3fd1f"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a1a716e87e6d2a1de3fcfd0682ed3fd1f">llvm::StructType::element_end</a></div><div class="ttdeci">element_iterator element_end() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00279">DerivedTypes.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00481">DataLayout.h:481</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a883dd52cca7097874337641ca44473a0"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a883dd52cca7097874337641ca44473a0">llvm::StructType::isPacked</a></div><div class="ttdeci">bool isPacked() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00241">DerivedTypes.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a93ee26a67ca79e4ba796dcccb55e8c19"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a93ee26a67ca79e4ba796dcccb55e8c19">llvm::StructType::element_iterator</a></div><div class="ttdeci">Type::subtype_iterator element_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00277">DerivedTypes.h:277</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="namespacellvm_html_a0448108c43f3a226744d0a4c28c989f7"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">llvm::makeArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; makeArrayRef(const T &amp;OneElt)</div><div class="ttdoc">Construct an ArrayRef from a single element. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00276">ArrayRef.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="SROA_8cpp_html_abe75ff888b6a7ee2836aa6c8f33984c1"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#abe75ff888b6a7ee2836aa6c8f33984c1">getTypePartition</a></div><div class="ttdeci">static Type * getTypePartition(const DataLayout &amp;DL, Type *Ty, uint64_t Offset, uint64_t Size)</div><div class="ttdoc">Try to find a partition of the aggregate type passed in for a given offset and size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l03003">SROA.cpp:3003</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a8d85840dbf6b7eff52721aafae9df0f6"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a8d85840dbf6b7eff52721aafae9df0f6">llvm::StructType::element_begin</a></div><div class="ttdeci">element_iterator element_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00278">DerivedTypes.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00505">DataLayout.h:505</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="SROA_8cpp_html_ac102ff32dace1cf8e8e6f9c9ec4d159c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a></div><div class="ttdeci">static Type * stripAggregateTypeWrapping(const DataLayout &amp;DL, Type *Ty)</div><div class="ttdoc">Strip aggregate type wrapping. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l02965">SROA.cpp:2965</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00488">DataLayout.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a795cfd43d30c44c33b97fe850bc0451f"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">llvm::StructLayout::getElementContainingOffset</a></div><div class="ttdeci">unsigned getElementContainingOffset(uint64_t Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00079">DataLayout.cpp:79</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="lli_8cpp_html_aa4fe756239b3a64d2e23054c567346fd"><div class="ttname"><a href="../../d3/d8d/lli_8cpp.html#aa4fe756239b3a64d2e23054c567346fd">EE</a></div><div class="ttdeci">static ExecutionEngine * EE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8d/lli_8cpp_source.html#l00323">lli.cpp:323</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0cddfff8553e3f05397def533fb5190e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS_BEGIN </td>
          <td>(</td>
          <td class="paramtype">SROA&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;sroa&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Scalar Replacement Of <a class="el" href="../../db/d1c/ScalarReplAggregates_8cpp.html#aa2f8d7eeec0f14faa18fd7f9e87f1f2e">Aggregates</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7febebe786555d6e0d07ca0f86e294c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* insertInteger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;&#160;</td>
          <td class="paramname"><em>Name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01874">1874</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                                                                          {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *IntTy = cast&lt;IntegerType&gt;(Old-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *Ty = cast&lt;IntegerType&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ty-&gt;getBitWidth() &lt;= IntTy-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() &amp;&amp;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;         <span class="stringliteral">&quot;Cannot insert a larger integer!&quot;</span>);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;       start: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="keywordflow">if</span> (Ty != IntTy) {</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    V = IRB.CreateZExt(V, IntTy, Name + <span class="stringliteral">&quot;.ext&quot;</span>);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    extended: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  }</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(Ty) + Offset &lt;= DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(IntTy) &amp;&amp;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;         <span class="stringliteral">&quot;Element store outside of alloca store&quot;</span>);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  uint64_t ShAmt = 8*Offset;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    ShAmt = 8*(DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(IntTy) - DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(Ty) - Offset);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="keywordflow">if</span> (ShAmt) {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    V = IRB.CreateShl(V, ShAmt, Name + <span class="stringliteral">&quot;.shift&quot;</span>);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;     shifted: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="keywordflow">if</span> (ShAmt || Ty-&gt;getBitWidth() &lt; IntTy-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>()) {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Mask = ~Ty-&gt;getMask().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(IntTy-&gt;<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>()).<a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a57f47540fddb72feab9e8afd08f21611">shl</a>(ShAmt);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    Old = IRB.CreateAnd(Old, Mask, Name + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      masked: &quot;</span> &lt;&lt; *Old &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    V = IRB.CreateOr(Old, V, Name + <span class="stringliteral">&quot;.insert&quot;</span>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    inserted: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  }</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a6f603ab84f6f7c79985036f58cca9d48"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Get the number of bits in this IntegerType. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00061">DerivedTypes.h:61</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00353">DataLayout.h:353</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a57f47540fddb72feab9e8afd08f21611"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a57f47540fddb72feab9e8afd08f21611">llvm::APIntOps::shl</a></div><div class="ttdeci">APInt shl(const APInt &amp;LHS, unsigned shiftAmt)</div><div class="ttdoc">Left-shift function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01822">APInt.h:1822</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a6142fc5662411269a7ca0217f49f338c"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">llvm::APInt::zext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT zext(unsigned width) const </div><div class="ttdoc">Zero extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l00984">APInt.cpp:984</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42c6a2faff923f431932c6d33cf4092b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* insertVector </td>
          <td>(</td>
          <td class="paramtype">IRBuilderTy &amp;&#160;</td>
          <td class="paramname"><em>IRB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>BeginIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../db/d5e/classllvm_1_1Twine.html">Twine</a> &amp;&#160;</td>
          <td class="paramname"><em>Name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01933">1933</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                                                                   {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = cast&lt;VectorType&gt;(Old-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(VecTy &amp;&amp; <span class="stringliteral">&quot;Can only insert a vector into a vector&quot;</span>);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *Ty = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a>&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keywordflow">if</span> (!Ty) {</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="comment">// Single element to insert.</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    V = IRB.CreateInsertElement(Old, V, IRB.getInt32(BeginIndex),</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                Name + <span class="stringliteral">&quot;.insert&quot;</span>);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt;  <span class="stringliteral">&quot;     insert: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ty-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>() &lt;= VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>() &amp;&amp;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;         <span class="stringliteral">&quot;Too many elements!&quot;</span>);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>() == VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>()) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == VecTy &amp;&amp; <span class="stringliteral">&quot;Vector type mismatch&quot;</span>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="keywordtype">unsigned</span> EndIndex = BeginIndex + Ty-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">// When inserting a smaller vector into the larger to store, we first</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// use a shuffle vector to widen it with undef elements, and then</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// a second shuffle vector to select between the loaded vector and the</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">// incoming vector.</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 8&gt;</a> Mask;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  Mask.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>());</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>(); ++i)</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">if</span> (i &gt;= BeginIndex &amp;&amp; i &lt; EndIndex)</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      Mask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt32(i - BeginIndex));</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      Mask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UndefValue::get(IRB.getInt32Ty()));</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  V = IRB.CreateShuffleVector(V, UndefValue::get(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                              ConstantVector::get(Mask),</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                              Name + <span class="stringliteral">&quot;.expand&quot;</span>);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    shuffle: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  Mask.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != VecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>(); ++i)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    Mask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IRB.getInt1(i &gt;= BeginIndex &amp;&amp; i &lt; EndIndex));</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  V = IRB.CreateSelect(ConstantVector::get(Mask), V, Old, Name + <span class="stringliteral">&quot;blend&quot;</span>);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    blend: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00371">SmallVector.h:371</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75f170d10487be0c2a7862177b2c18e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isIntegerWideningViable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>AllocaTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>AllocBeginOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices &amp;&#160;</td>
          <td class="paramname"><em>S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>E</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; AllocaSlices::iterator &gt;&#160;</td>
          <td class="paramname"><em>SplitUses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether the given alloca partition's integer operations can be widened to promotable ones. </p>
<p>This is a quick test to check whether we can rewrite the integer loads and stores to a particular alloca into wider loads and stores and be able to promote the resulting alloca. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01805">1805</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                                                                  {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  uint64_t SizeInBits = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(AllocaTy);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">// Don&#39;t create integer types larger than the maximum bitwidth.</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="keywordflow">if</span> (SizeInBits &gt; IntegerType::MAX_INT_BITS)</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// Don&#39;t try to handle allocas with bit-padding.</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">if</span> (SizeInBits != DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a328b37dd0e404674678018ac2f2e38af">getTypeStoreSizeInBits</a>(AllocaTy))</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// We need to ensure that an integer type with the appropriate bitwidth can</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="comment">// be converted to the alloca type, whatever that is. We don&#39;t want to force</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// the alloca itself to have an integer type if there is a more suitable one.</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *IntTy = Type::getIntNTy(AllocaTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), SizeInBits);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, AllocaTy, IntTy) ||</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      !<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, IntTy, AllocaTy))</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  uint64_t Size = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(AllocaTy);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="comment">// While examining uses, we ensure that the alloca has a covering load or</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// store. We don&#39;t want to widen the integer operations only to fail to</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// promote due to some other unsplittable entry (which we may make splittable</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// later). However, if there are only splittable uses, go ahead and assume</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="comment">// that we cover the alloca.</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keywordtype">bool</span> WholeAllocaOp = (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E) ? <span class="keyword">false</span> : DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a96f1e9abd65fef355bd8f15f9360c871">isLegalInteger</a>(SizeInBits);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#a65e014ae237cfe6ed7bc2e25f91ecbe0">isIntegerWideningViableForSlice</a>(DL, AllocaTy, AllocBeginOffset, Size,</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                                         S, <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, WholeAllocaOp))</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d41/classllvm_1_1CodeGenRegisterClass.html">ArrayRef&lt;AllocaSlices::iterator&gt;::const_iterator</a> SUI = SplitUses.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(),</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                                                        SUE = SplitUses.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;       SUI != SUE; ++SUI)</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#a65e014ae237cfe6ed7bc2e25f91ecbe0">isIntegerWideningViableForSlice</a>(DL, AllocaTy, AllocBeginOffset, Size,</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                                         S, *SUI, WholeAllocaOp))</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">return</span> WholeAllocaOp;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a2fb1c078833c17e4c9529b0cf924385c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a></div><div class="ttdeci">static bool canConvertValue(const DataLayout &amp;DL, Type *OldTy, Type *NewTy)</div><div class="ttdoc">Test whether we can convert a value from the old to the new type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01537">SROA.cpp:1537</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a328b37dd0e404674678018ac2f2e38af"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a328b37dd0e404674678018ac2f2e38af">llvm::DataLayout::getTypeStoreSizeInBits</a></div><div class="ttdeci">uint64_t getTypeStoreSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00360">DataLayout.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a65e014ae237cfe6ed7bc2e25f91ecbe0"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a65e014ae237cfe6ed7bc2e25f91ecbe0">isIntegerWideningViableForSlice</a></div><div class="ttdeci">static bool isIntegerWideningViableForSlice(const DataLayout &amp;DL, Type *AllocaTy, uint64_t AllocBeginOffset, uint64_t Size, AllocaSlices &amp;S, AllocaSlices::const_iterator I, bool &amp;WholeAllocaOp)</div><div class="ttdoc">Test whether a slice of an alloca is valid for integer widening. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01737">SROA.cpp:1737</a></div></div>
<div class="ttc" id="classllvm_1_1CodeGenRegisterClass_html"><div class="ttname"><a href="../../d6/d41/classllvm_1_1CodeGenRegisterClass.html">llvm::CodeGenRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9d/CodeGenRegisters_8h_source.html#l00242">CodeGenRegisters.h:242</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a96f1e9abd65fef355bd8f15f9360c871"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a96f1e9abd65fef355bd8f15f9360c871">llvm::DataLayout::isLegalInteger</a></div><div class="ttdeci">bool isLegalInteger(unsigned Width) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00224">DataLayout.h:224</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00353">DataLayout.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65e014ae237cfe6ed7bc2e25f91ecbe0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isIntegerWideningViableForSlice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>AllocaTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>AllocBeginOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices &amp;&#160;</td>
          <td class="paramname"><em>S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>WholeAllocaOp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether a slice of an alloca is valid for integer widening. </p>
<p>This implements the necessary checking for the <code>isIntegerWideningViable</code> test below on a single slice of the alloca. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01737">1737</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                                                                 {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  uint64_t RelBegin = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;beginOffset() - AllocBeginOffset;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  uint64_t RelEnd = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset() - AllocBeginOffset;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// We can&#39;t reasonably handle cases where the load or store extends past</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// the end of the aloca&#39;s type and into its padding.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">if</span> (RelEnd &gt; Size)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <a class="code" href="../../d0/d66/classllvm_1_1Use.html">Use</a> *U = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getUse();</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="keywordflow">if</span> (RelBegin == 0 &amp;&amp; RelEnd == Size)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      WholeAllocaOp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *ITy = dyn_cast&lt;IntegerType&gt;(<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getType())) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="keywordflow">if</span> (ITy-&gt;getBitWidth() &lt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a328b37dd0e404674678018ac2f2e38af">getTypeStoreSizeInBits</a>(ITy))</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelBegin != 0 || RelEnd != Size ||</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;               !<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, AllocaTy, <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getType())) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <span class="comment">// Non-integer loads need to be convertible from the alloca type so that</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <span class="comment">// they are promotable.</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ValueTy = SI-&gt;getValueOperand()-&gt;getType();</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordflow">if</span> (SI-&gt;isVolatile())</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">if</span> (RelBegin == 0 &amp;&amp; RelEnd == Size)</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      WholeAllocaOp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *ITy = dyn_cast&lt;IntegerType&gt;(ValueTy)) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">if</span> (ITy-&gt;getBitWidth() &lt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a328b37dd0e404674678018ac2f2e38af">getTypeStoreSizeInBits</a>(ITy))</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelBegin != 0 || RelEnd != Size ||</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;               !<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, ValueTy, AllocaTy)) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <span class="comment">// Non-integer stores need to be convertible to the alloca type so that</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="comment">// they are promotable.</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>-&gt;isVolatile() || !isa&lt;Constant&gt;(<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>-&gt;getLength()))</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isSplittable())</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Skip any unsplittable intrinsics.</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/da2/classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() != Intrinsic::lifetime_start &amp;&amp;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        II-&gt;getIntrinsicID() != Intrinsic::lifetime_end)</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a2fb1c078833c17e4c9529b0cf924385c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a></div><div class="ttdeci">static bool canConvertValue(const DataLayout &amp;DL, Type *OldTy, Type *NewTy)</div><div class="ttdoc">Test whether we can convert a value from the old to the new type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01537">SROA.cpp:1537</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a328b37dd0e404674678018ac2f2e38af"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a328b37dd0e404674678018ac2f2e38af">llvm::DataLayout::getTypeStoreSizeInBits</a></div><div class="ttdeci">uint64_t getTypeStoreSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00360">DataLayout.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">llvm::AArch64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00197">AArch64BaseInfo.h:197</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="../../df/da2/classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a966aab9bfbf6c54fb99067d552637050"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSafePHIToSpeculate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> &amp;&#160;</td>
          <td class="paramname"><em>PN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PHI instructions that use an alloca and are subsequently loaded can be rewritten to load both input pointers in the pred blocks and then PHI the results, allowing the load of the alloca to be promoted. From this: P2 = phi [i32* Alloca, i32* Other] V = load i32* P2 to: V1 = load i32* Alloca -&gt; will be mem2reg'd ... V2 = load i32* Other ... V = phi [i32 V1, i32 V2]</p>
<p>We can do this to a select if its only uses are loads and if the operands to the select can be loaded unconditionally.</p>
<p>FIXME: This should be hoisted into a generic utility, likely in Transforms/Util/Local.h </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01079">1079</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                                                 {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// For now, we can only do this promotion if the load is in the same block</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// as the PHI, and if there are no stores between the phi and load.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// TODO: Allow recursive phi users.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// TODO: Allow stores.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = PN.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">unsigned</span> MaxAlign = 0;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordtype">bool</span> HaveLoad = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : PN.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>&gt;(U);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (!LI || !LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>())</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// For now we only allow loads in the same block as the PHI.  This is</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// a common case that happens when instcombine merges two loads through</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// a PHI.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != BB)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// Ensure that there are no instructions between the PHI and the load that</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="comment">// could store.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = &amp;PN; &amp;*BBI != <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>; ++BBI)</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">if</span> (BBI-&gt;mayWriteToMemory())</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    MaxAlign = std::max(MaxAlign, LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    HaveLoad = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">if</span> (!HaveLoad)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// We can only transform this if it is safe to push the loads into the</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// predecessor blocks. The only thing to watch out for is that we can&#39;t put</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// a possibly trapping load in the predecessor if it is a critical edge.</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, Num = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); Idx != Num; ++Idx) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(Idx)-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(Idx);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// If the value is produced by the terminator of the predecessor (an</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// invoke) or it has side-effects, there is no valid place to put a load</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// in the predecessor.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">if</span> (TI == InVal || TI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>())</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// If the predecessor has a single successor, then the edge isn&#39;t</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// critical.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() == 1)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// If this pointer is always safe to load, or if we can prove that there</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// is already a load in the block, then we can move the load to the pred</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">// block.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (InVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a5ebb86c4adbb0211806719ed10a7ea21">isDereferenceablePointer</a>(DL) ||</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a981638ae01fa4c83b5c202af77b587eb">isSafeToLoadUnconditionally</a>(InVal, TI, MaxAlign, DL))</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00342">Instruction.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00235">Instructions.h:235</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="namespacellvm_html_a981638ae01fa4c83b5c202af77b587eb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a981638ae01fa4c83b5c202af77b587eb">llvm::isSafeToLoadUnconditionally</a></div><div class="ttdeci">bool isSafeToLoadUnconditionally(Value *V, Instruction *ScanFrom, unsigned Align, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d88/Loads_8cpp_source.html#l00056">Loads.cpp:56</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a5ebb86c4adbb0211806719ed10a7ea21"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a5ebb86c4adbb0211806719ed10a7ea21">llvm::Value::isDereferenceablePointer</a></div><div class="ttdeci">bool isDereferenceablePointer(const DataLayout *DL=nullptr) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00577">Value.cpp:577</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab791f68c42876ac8a1d2c3a0f595eb5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isSafeSelectToSpeculate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;&#160;</td>
          <td class="paramname"><em>SI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Select instructions that use an alloca and are subsequently loaded can be rewritten to load both input pointers and then select between the result, allowing the load of the alloca to be promoted. From this: P2 = select i1 cond, i32* Alloca, i32* Other V = load i32* P2 to: V1 = load i32* Alloca -&gt; will be mem2reg'd V2 = load i32* Other V = select i1 cond, i32 V1, i32 V2</p>
<p>We can do this to a select if its only uses are loads and if the operand to the select can be loaded unconditionally. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01197">1197</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                                                    {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TValue = SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>();</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FValue = SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordtype">bool</span> TDerefable = TValue-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a5ebb86c4adbb0211806719ed10a7ea21">isDereferenceablePointer</a>(DL);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordtype">bool</span> FDerefable = FValue-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a5ebb86c4adbb0211806719ed10a7ea21">isDereferenceablePointer</a>(DL);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *U : SI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a>&gt;(U);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (!LI || !LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>())</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">// Both operands to the select need to be dereferencable, either</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// absolutely (e.g. allocas) or at this point because we can see other</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// accesses to it.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (!TDerefable &amp;&amp;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        !<a class="code" href="../../d9/d4a/namespacellvm.html#a981638ae01fa4c83b5c202af77b587eb">isSafeToLoadUnconditionally</a>(TValue, LI, LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>(), <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>))</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> (!FDerefable &amp;&amp;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        !<a class="code" href="../../d9/d4a/namespacellvm.html#a981638ae01fa4c83b5c202af77b587eb">isSafeToLoadUnconditionally</a>(FValue, LI, LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>(), <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>))</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00235">Instructions.h:235</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="namespacellvm_html_a981638ae01fa4c83b5c202af77b587eb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a981638ae01fa4c83b5c202af77b587eb">llvm::isSafeToLoadUnconditionally</a></div><div class="ttdeci">bool isSafeToLoadUnconditionally(Value *V, Instruction *ScanFrom, unsigned Align, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d88/Loads_8cpp_source.html#l00056">Loads.cpp:56</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a5ebb86c4adbb0211806719ed10a7ea21"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a5ebb86c4adbb0211806719ed10a7ea21">llvm::Value::isDereferenceablePointer</a></div><div class="ttdeci">bool isDereferenceablePointer(const DataLayout *DL=nullptr) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00577">Value.cpp:577</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01565">Instructions.h:1565</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00273">Value.h:273</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01566">Instructions.h:1566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a581dd5bca5410ba43e8cf06d949fa7f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isVectorPromotionViable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>AllocaTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices &amp;&#160;</td>
          <td class="paramname"><em>S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>SliceBeginOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>SliceEndOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>E</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; AllocaSlices::iterator &gt;&#160;</td>
          <td class="paramname"><em>SplitUses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether the given alloca partitioning and range of slices can be promoted to a vector. </p>
<p>This is a quick test to check whether we can rewrite a particular alloca partition (and its newly formed alloca) into a vector alloca with only whole-vector loads and stores such that it could be promoted to a vector SSA value. We only can ensure this for a limited set of operations, and we don't want to do the rewrites unless we are confident that the result will be promotable, so we have an early test here. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01699">1699</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                                                                  {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *Ty = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a>&gt;(AllocaTy);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">if</span> (!Ty)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  uint64_t ElementSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>());</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="comment">// While the definition of LLVM vectors is bitpacked, we don&#39;t support sizes</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="comment">// that aren&#39;t byte sized.</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">if</span> (ElementSize % 8)</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(Ty) % 8) == 0 &amp;&amp;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;         <span class="stringliteral">&quot;vector size not a multiple of element size?&quot;</span>);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  ElementSize /= 8;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#afe50201d4e405f7bb74806c62e850140">isVectorPromotionViableForSlice</a>(DL, S, SliceBeginOffset,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                                         SliceEndOffset, Ty, ElementSize, <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d6/d41/classllvm_1_1CodeGenRegisterClass.html">ArrayRef&lt;AllocaSlices::iterator&gt;::const_iterator</a> SUI = SplitUses.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(),</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                                        SUE = SplitUses.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;       SUI != SUE; ++SUI)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#afe50201d4e405f7bb74806c62e850140">isVectorPromotionViableForSlice</a>(DL, S, SliceBeginOffset,</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                                         SliceEndOffset, Ty, ElementSize, *SUI))</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="SROA_8cpp_html_afe50201d4e405f7bb74806c62e850140"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#afe50201d4e405f7bb74806c62e850140">isVectorPromotionViableForSlice</a></div><div class="ttdeci">static bool isVectorPromotionViableForSlice(const DataLayout &amp;DL, AllocaSlices &amp;S, uint64_t SliceBeginOffset, uint64_t SliceEndOffset, VectorType *Ty, uint64_t ElementSize, AllocaSlices::const_iterator I)</div><div class="ttdoc">Test whether the given slice use can be promoted to a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01624">SROA.cpp:1624</a></div></div>
<div class="ttc" id="classllvm_1_1CodeGenRegisterClass_html"><div class="ttname"><a href="../../d6/d41/classllvm_1_1CodeGenRegisterClass.html">llvm::CodeGenRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9d/CodeGenRegisters_8h_source.html#l00242">CodeGenRegisters.h:242</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe50201d4e405f7bb74806c62e850140"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isVectorPromotionViableForSlice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices &amp;&#160;</td>
          <td class="paramname"><em>S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>SliceBeginOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>SliceEndOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ElementSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaSlices::const_iterator&#160;</td>
          <td class="paramname"><em>I</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether the given slice use can be promoted to a vector. </p>
<p>This function is called to test each entry in a partioning which is slated for a single slice. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01624">1624</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                                  {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// First validate the slice offsets.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  uint64_t BeginOffset =</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      std::max(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;beginOffset(), SliceBeginOffset) - SliceBeginOffset;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  uint64_t BeginIndex = BeginOffset / ElementSize;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">if</span> (BeginIndex * ElementSize != BeginOffset ||</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      BeginIndex &gt;= Ty-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>())</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  uint64_t EndOffset =</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      std::min(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset(), SliceEndOffset) - SliceBeginOffset;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  uint64_t EndIndex = EndOffset / ElementSize;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keywordflow">if</span> (EndIndex * ElementSize != EndOffset || EndIndex &gt; Ty-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>())</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(EndIndex &gt; BeginIndex &amp;&amp; <span class="stringliteral">&quot;Empty vector!&quot;</span>);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  uint64_t NumElements = EndIndex - BeginIndex;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SliceTy =</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      (NumElements == 1) ? Ty-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                         : VectorType::get(Ty-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>(), NumElements);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SplitIntTy =</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      Type::getIntNTy(Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), NumElements * ElementSize * 8);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="../../d0/d66/classllvm_1_1Use.html">Use</a> *U = <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getUse();</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isSplittable())</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Skip any unsplittable intrinsics.</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (U-&gt;get()-&gt;getType()-&gt;getPointerElementType()-&gt;isStructTy()) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="comment">// Disable vector promotion when there are loads or stores of an FCA.</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LTy = <a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;getType();</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">if</span> (SliceBeginOffset &gt; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;beginOffset() ||</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        SliceEndOffset &lt; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset()) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>());</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      LTy = SplitIntTy;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, SliceTy, LTy))</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U-&gt;getUser())) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (SI-&gt;isVolatile())</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *STy = SI-&gt;getValueOperand()-&gt;getType();</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (SliceBeginOffset &gt; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;beginOffset() ||</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        SliceEndOffset &lt; <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset()) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(STy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>());</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      STy = SplitIntTy;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a>(DL, STy, SliceTy))</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/Use_8h_source.html#l00069">Use.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00272">Instructions.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="SROA_8cpp_html_a2fb1c078833c17e4c9529b0cf924385c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#a2fb1c078833c17e4c9529b0cf924385c">canConvertValue</a></div><div class="ttdeci">static bool canConvertValue(const DataLayout &amp;DL, Type *OldTy, Type *NewTy)</div><div class="ttdoc">Test whether we can convert a value from the old to the new type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l01537">SROA.cpp:1537</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">llvm::AArch64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00197">AArch64BaseInfo.h:197</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1564307938a15a117873a7ab9a27e0a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void removeFinishedSplitUses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; AllocaSlices::iterator &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplitUses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>MaxSplitUseEndOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>Offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l03267">3267</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                                                                         {</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  <span class="keywordflow">if</span> (Offset &gt;= MaxSplitUseEndOffset) {</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    SplitUses.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    MaxSplitUseEndOffset = 0;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  }</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <span class="keywordtype">size_t</span> SplitUsesOldSize = SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  SplitUses.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(std::remove_if(SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(),</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;                                 [Offset](<span class="keyword">const</span> AllocaSlices::iterator &amp;<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;endOffset() &lt;= Offset;</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;                  }),</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;                  SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  <span class="keywordflow">if</span> (SplitUsesOldSize == SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>())</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  <span class="comment">// Recompute the max. While this is linear, so is remove_if.</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  MaxSplitUseEndOffset = 0;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a16a72ecbc559627d140a2197d9f79445">SmallVectorImpl&lt;AllocaSlices::iterator&gt;::iterator</a></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;           SUI = SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;           SUE = SplitUses.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;       SUI != SUE; ++SUI)</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    MaxSplitUseEndOffset = std::max((*SUI)-&gt;endOffset(), MaxSplitUseEndOffset);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a16a72ecbc559627d140a2197d9f79445"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a16a72ecbc559627d140a2197d9f79445">llvm::SmallVectorImpl::iterator</a></div><div class="ttdeci">SuperClass::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00351">SmallVector.h:351</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00115">SmallVector.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00371">SmallVector.h:371</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00450">SmallVector.h:450</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00113">SmallVector.h:113</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab38ec9ebc3b5d96a4b7ddcb11cfcd58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void speculatePHINodeLoads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> &amp;&#160;</td>
          <td class="paramname"><em>PN</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01143">1143</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                                               {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    original: &quot;</span> &lt;&lt; PN &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy = cast&lt;PointerType&gt;(PN.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  IRBuilderTy PHIBuilder(&amp;PN);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *NewPN = PHIBuilder.CreatePHI(LoadTy, PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(),</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                                        PN.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sroa.speculated&quot;</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// Get the TBAA tag and alignment to use from one of the loads.  It doesn&#39;t</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// matter which one we get and if any differ.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *SomeLoad = cast&lt;LoadInst&gt;(PN.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a> *TBAATag = SomeLoad-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(LLVMContext::MD_tbaa);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d2/d2c/AArch64ISelLowering_8cpp.html#a36d3f1f9ae335b43c09bf8805c25e192">Align</a> = SomeLoad-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// Rewrite all loads of the PN to use the new PHI.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">while</span> (!PN.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = cast&lt;LoadInst&gt;(PN.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewPN);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// Inject loads into all of the pred blocks.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, Num = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); Idx != Num; ++Idx) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(Idx);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="../../d0/d66/classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = Pred-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal = PN.<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(Idx);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    IRBuilderTy PredBuilder(TI);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">Load</a> = PredBuilder.CreateLoad(</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        InVal, (PN.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sroa.speculate.load.&quot;</span> + Pred-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()));</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    ++NumLoadsSpeculated;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    Load-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(Align);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> (TBAATag)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      Load-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_tbaa, TBAATag);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    NewPN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Load, Pred);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          speculated to: &quot;</span> &lt;&lt; *NewPN &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  PN.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02198">Instructions.h:2198</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="../../d0/d66/classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02173">Instructions.h:2173</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l01066">Instructions.cpp:1066</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="AArch64ISelLowering_8cpp_html_a36d3f1f9ae335b43c09bf8805c25e192"><div class="ttname"><a href="../../d2/d2c/AArch64ISelLowering_8cpp.html#a36d3f1f9ae335b43c09bf8805c25e192">Align</a></div><div class="ttdeci">static cl::opt&lt; AlignMode &gt; Align(cl::desc(&quot;Load/store alignment support&quot;), cl::Hidden, cl::init(NoStrictAlign), cl::values(clEnumValN(StrictAlign,&quot;aarch64-strict-align&quot;,&quot;Disallow all unaligned memory accesses&quot;), clEnumValN(NoStrictAlign,&quot;aarch64-no-strict-align&quot;,&quot;Allow unaligned memory accesses&quot;), clEnumValEnd))</div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00124">BasicBlock.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="../../d4/d47/namespacellvm_1_1SPII.html#af8c455c02638333b03ef963023367941a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8e/SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7493b7d3b84612687869f2c3afed924b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void speculateSelectInstLoads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> &amp;&#160;</td>
          <td class="paramname"><em>SI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01223">1223</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                                                     {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    original: &quot;</span> &lt;&lt; SI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  IRBuilderTy IRB(&amp;SI);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *TV = SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>();</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *FV = SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// Replace the loads of the select with a select of two loads.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">while</span> (!SI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = cast&lt;LoadInst&gt;(SI.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>() &amp;&amp; <span class="stringliteral">&quot;We only speculate simple loads&quot;</span>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    IRB.SetInsertPoint(LI);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *TL =</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        IRB.CreateLoad(TV, LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sroa.speculate.load.true&quot;</span>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *FL =</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        IRB.CreateLoad(FV, LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sroa.speculate.load.false&quot;</span>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    NumLoadsSpeculated += 2;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// Transfer alignment and TBAA info if present.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    TL-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    FL-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(LI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="../../df/daa/namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> = LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(LLVMContext::MD_tbaa)) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      TL-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_tbaa, <a class="code" href="../../df/daa/namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      FL-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_tbaa, <a class="code" href="../../df/daa/namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = IRB.CreateSelect(SI.<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(), TL, FL,</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                                LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sroa.speculated&quot;</span>);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          speculated to: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  SI.<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/Instruction_8cpp_source.html#l00076">Instruction.cpp:76</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="namespacellvm_1_1dwarf_html_ac94a19fc8c57bf0350fc4e9f45897828"><div class="ttname"><a href="../../df/daa/namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">llvm::dwarf::Tag</a></div><div class="ttdeci">Tag</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d68/Dwarf_8h_source.html#l00070">Dwarf.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00235">Instructions.h:235</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01564">Instructions.h:1564</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l01066">Instructions.cpp:1066</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01565">Instructions.h:1565</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbf/Metadata_8cpp_source.html#l00634">Metadata.cpp:634</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00050">Instruction.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00250">Value.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01566">Instructions.h:1566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae70113602d2d74907fc766c32cc4ae7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAllocasAnalyzed&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of allocas analyzed <a class="el" href="../../df/dca/GlobalMerge_8cpp.html#ac16d0ba14eb60334c1bfc84c4b00734a">for</a> replacement&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a07d1e66edb1bedaeb82a478ff04da432"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAllocaPartitions&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of alloca partitions formed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6899737cbac2fab2f5d952d3729de672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">MaxPartitionsPerAlloca&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Maximum number of partitions per alloca&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a593b8775c254e4ca9e842dec50db4421"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumAllocaPartitionUses&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of alloca partition uses rewritten&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acdcc50dacf51dded7a3cd0f353cbafcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">MaxUsesPerAllocaPartition&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Maximum number of uses of <a class="el" href="../../db/d2c/dwarfdump-test4-decl_8h.html#a2edadf23dba309e5902af6c6dc829482">a</a> partition&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab850c470c395470df549e3bd5def2ff1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumNewAllocas&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smaller allocas introduced&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af3bb90905be94b5a6679ab23ea5d0812"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumPromoted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of allocas promoted to SSA values&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab724c2f2ba7ef7ba51bc2b179b224f9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLoadsSpeculated&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of loads speculated to allow <a class="el" href="../../de/dcc/AArch64AddressTypePromotion_8cpp.html#aa427e4783da72a6b07c2e0038900a82b">promotion</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a80d61f99fdf84fcf7f80545520fae0ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumDeleted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> deleted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aeb1290154412d00cea8f03a3b7a84217"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumVectorized&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of vectorized aggregates&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac102ff32dace1cf8e8e6f9c9ec4d159c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a>* stripAggregateTypeWrapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Strip aggregate type wrapping. </p>
<p>This removes no-op aggregate types wrapping an underlying type. It will strip as many layers of types as it can without changing either the type size or the allocated size. </p>

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l02965">2965</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;                                                                        {</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">isSingleValueType</a>())</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">return</span> Ty;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  uint64_t AllocSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(Ty);</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  uint64_t TypeSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(Ty);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *InnerTy;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ArrTy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    InnerTy = ArrTy-&gt;getElementType();</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html">StructLayout</a> *SL = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordtype">unsigned</span> Index = SL-&gt;<a class="code" href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(0);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    InnerTy = STy-&gt;getElementType(Index);</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="keywordflow">return</span> Ty;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  }</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="keywordflow">if</span> (AllocSize &gt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(InnerTy) ||</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      TypeSize &gt; DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(InnerTy))</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="keywordflow">return</span> Ty;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a>(DL, InnerTy);</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Type_html_a36e21267fe14e69d3251eab1cd3a0076"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">llvm::Type::isSingleValueType</a></div><div class="ttdeci">bool isSingleValueType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00250">Type.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00481">DataLayout.h:481</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00498">DataLayout.cpp:498</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="SROA_8cpp_html_ac102ff32dace1cf8e8e6f9c9ec4d159c"><div class="ttname"><a href="../../d4/d8c/SROA_8cpp.html#ac102ff32dace1cf8e8e6f9c9ec4d159c">stripAggregateTypeWrapping</a></div><div class="ttdeci">static Type * stripAggregateTypeWrapping(const DataLayout &amp;DL, Type *Ty)</div><div class="ttdoc">Strip aggregate type wrapping. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8c/SROA_8cpp_source.html#l02965">SROA.cpp:2965</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00368">DataLayout.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a795cfd43d30c44c33b97fe850bc0451f"><div class="ttname"><a href="../../d4/d6c/classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">llvm::StructLayout::getElementContainingOffset</a></div><div class="ttdeci">unsigned getElementContainingOffset(uint64_t Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00079">DataLayout.cpp:79</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a5b3f8e5f6c512fe6a5059dd0c51aec95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Scalar Replacement Of Aggregates</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01007">1007</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="acc7a95cb9fb444faf77cd626f1b8128b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Scalar Replacement Of false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01007">1007</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a613f24111340d4f4fc57e01da7a083b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; ForceSSAUpdater(&quot;force-<a class="el" href="../../db/d1c/ScalarReplAggregates_8cpp.html#a3d60b300c3988b10f2e6d963d3707f58">ssa</a>-updater&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hidden option to force the pass to not use DomTree and mem2reg, instead forming SSA values through the SSAUpdater infrastructure. </p>

</div>
</div>
<a class="anchor" id="a6990f15b9f29df6e8497b3e53875ccab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sroa</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d8c/SROA_8cpp_source.html#l01007">1007</a> of file <a class="el" href="../../d4/d8c/SROA_8cpp_source.html">SROA.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a577be81e94407739665be7332b4f9ac0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; SROARandomShuffleSlices(&quot;sroa-random-shuffle-slices&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hidden option to enable randomly shuffling the slices to help uncover instability in their order. </p>

</div>
</div>
<a class="anchor" id="ac6da6bff872f9db9f549ab7dd6086a61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; SROAStrictInbounds(&quot;sroa-strict-inbounds&quot;, cl::init(<a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>), cl::Hidden)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hidden option to experiment with completely strict handling of inbounds GEPs. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_f536250b88bf40822ad9f2d04ff3a034.html">Scalar</a></li><li class="navelem"><a class="el" href="../../d4/d8c/SROA_8cpp.html">SROA.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:46:12 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
