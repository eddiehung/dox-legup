<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: GVN.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/d00/GVN_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">GVN.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dc/dd6/Transforms_2Scalar_8h_source.html">llvm/Transforms/Scalar.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d73/DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/dec/DepthFirstIterator_8h_source.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d0/d4e/Hashing_8h_source.html">llvm/ADT/Hashing.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d21/MapVector_8h_source.html">llvm/ADT/MapVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/dd6/SetVector_8h_source.html">llvm/ADT/SetVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d89/SmallPtrSet_8h_source.html">llvm/ADT/SmallPtrSet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/d70/AliasAnalysis_8h_source.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dad/Analysis_2CFG_8h_source.html">llvm/Analysis/CFG.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d0a/ConstantFolding_8h_source.html">llvm/Analysis/ConstantFolding.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d48/InstructionSimplify_8h_source.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d2c/Loads_8h_source.html">llvm/Analysis/Loads.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/de0/MemoryBuiltins_8h_source.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../da/d93/MemoryDependenceAnalysis_8h_source.html">llvm/Analysis/MemoryDependenceAnalysis.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/db5/PHITransAddr_8h_source.html">llvm/Analysis/PHITransAddr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/dcc/ValueTracking_8h_source.html">llvm/Analysis/ValueTracking.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d2/d50/Dominators_8h_source.html">llvm/IR/Dominators.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/dcc/GlobalVariable_8h_source.html">llvm/IR/GlobalVariable.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d4/d60/IRBuilder_8h_source.html">llvm/IR/IRBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d6b/LLVMContext_8h_source.html">llvm/IR/LLVMContext.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/da9/Metadata_8h_source.html">llvm/IR/Metadata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d65/PatternMatch_8h_source.html">llvm/IR/PatternMatch.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/da9/Allocator_8h_source.html">llvm/Support/Allocator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/d41/CommandLine_8h_source.html">llvm/Support/CommandLine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d1a/TargetLibraryInfo_8h_source.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d18/BasicBlockUtils_8h_source.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d8d/SSAUpdater_8h_source.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
</div>
<p><a href="../../d8/d00/GVN_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9e/structllvm_1_1DenseMapInfo_3_01Expression_01_4.html">llvm::DenseMapInfo&lt; Expression &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d9/d4a/namespacellvm"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d4a/namespacellvm.html">llvm</a></td></tr>
<tr class="memdesc:d9/d4a/namespacellvm"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of target independent CodeGen pass IDs. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;gvn&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7bf8a029cda4c015beec62bd3c1c701"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a> (NumGVNInstr,&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> deleted&quot;)</td></tr>
<tr class="separator:ad7bf8a029cda4c015beec62bd3c1c701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271b124ecf85f5bd9948497e9b77f8a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a271b124ecf85f5bd9948497e9b77f8a8">STATISTIC</a> (NumGVNLoad,&quot;Number of loads deleted&quot;)</td></tr>
<tr class="separator:a271b124ecf85f5bd9948497e9b77f8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38c90d1777c1d165a47ab27aaeeb4750"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a38c90d1777c1d165a47ab27aaeeb4750">STATISTIC</a> (NumGVNPRE,&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> PRE'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;)</td></tr>
<tr class="separator:a38c90d1777c1d165a47ab27aaeeb4750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac8f2ab863a0a25ab53011b272e2653"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#aaac8f2ab863a0a25ab53011b272e2653">STATISTIC</a> (NumGVNBlocks,&quot;Number of blocks merged&quot;)</td></tr>
<tr class="separator:aaac8f2ab863a0a25ab53011b272e2653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fc6a8791a30c0ee6ffc6ab230a564b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#af4fc6a8791a30c0ee6ffc6ab230a564b">STATISTIC</a> (NumGVNSimpl,&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> simplified&quot;)</td></tr>
<tr class="separator:af4fc6a8791a30c0ee6ffc6ab230a564b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c3a55bd44c5b9089214d2bd6cdb794"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a47c3a55bd44c5b9089214d2bd6cdb794">STATISTIC</a> (NumGVNEqProp,&quot;Number of equalities propagated&quot;)</td></tr>
<tr class="separator:a47c3a55bd44c5b9089214d2bd6cdb794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0068d514f68a84a108ad366f8b9e84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a1a0068d514f68a84a108ad366f8b9e84">STATISTIC</a> (NumPRELoad,&quot;Number of loads PRE'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;)</td></tr>
<tr class="separator:a1a0068d514f68a84a108ad366f8b9e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8c728bc2ed20849bdc6b61d85f4bb2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a> (<a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *, char &gt; &amp;FullyAvailableBlocks, uint32_t RecurseDepth)</td></tr>
<tr class="separator:a0f8c728bc2ed20849bdc6b61d85f4bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a81a30e64a55c1513adca6954465c8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a56a81a30e64a55c1513adca6954465c8">CanCoerceMustAliasedValueToLoad</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StoredVal, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a56a81a30e64a55c1513adca6954465c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae1a956d934ab1301146c41b4edb7683"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#aae1a956d934ab1301146c41b4edb7683">CoerceAvailableValueToLoadType</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StoredVal, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadedTy, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:aae1a956d934ab1301146c41b4edb7683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e7699508ddae23e2554678f93aaf1f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadPtr, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *WritePtr, uint64_t WriteSizeInBits, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a20e7699508ddae23e2554678f93aaf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a375644040b118ae91da4ab2a3bc980ce"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a375644040b118ae91da4ab2a3bc980ce">AnalyzeLoadFromClobberingStore</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadPtr, <a class="el" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *DepSI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a375644040b118ae91da4ab2a3bc980ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22600319ec2e70eefc03fb706ae2c0a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ae22600319ec2e70eefc03fb706ae2c0a">AnalyzeLoadFromClobberingLoad</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadPtr, <a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *DepLI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:ae22600319ec2e70eefc03fb706ae2c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25bfdc9b91b6b9b2da1a998c2fae2634"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a25bfdc9b91b6b9b2da1a998c2fae2634">AnalyzeLoadFromClobberingMemInst</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadPtr, <a class="el" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *MI, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a25bfdc9b91b6b9b2da1a998c2fae2634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b7800688aeeb88e001f229d357f93a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a5b7800688aeeb88e001f229d357f93a8">GetStoreValueForLoad</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *SrcVal, unsigned Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a5b7800688aeeb88e001f229d357f93a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a14f90fae625ff076364378de0c57ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed">GetLoadValueForLoad</a> (<a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *SrcVal, unsigned Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt, GVN &amp;gvn)</td></tr>
<tr class="separator:a5a14f90fae625ff076364378de0c57ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38607014caf5759ca5b2707d3a943755"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a38607014caf5759ca5b2707d3a943755">GetMemInstValueForLoad</a> (<a class="el" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *SrcInst, unsigned Offset, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy, <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *InsertPt, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a38607014caf5759ca5b2707d3a943755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d5060162c77138d1c3244c8e001ea2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2">ConstructSSAForLoadSet</a> (<a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="el" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; AvailableValueInBlock &gt; &amp;ValuesPerBlock, GVN &amp;gvn)</td></tr>
<tr class="separator:a61d5060162c77138d1c3244c8e001ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1faa49b43014e07caaf2bf2d3db07e4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ab1faa49b43014e07caaf2bf2d3db07e4">isLifetimeStart</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *Inst)</td></tr>
<tr class="separator:ab1faa49b43014e07caaf2bf2d3db07e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2b1a93f189c825a7d2e1ae14f1dc32"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Repl)</td></tr>
<tr class="separator:aec2b1a93f189c825a7d2e1ae14f1dc32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85468c2bfc360b5d4bc512d241d1440"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440">patchAndReplaceAllUsesWith</a> (<a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="el" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Repl)</td></tr>
<tr class="separator:ab85468c2bfc360b5d4bc512d241d1440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ecb019c18583eca74daad14ff133d54"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a7ecb019c18583eca74daad14ff133d54">isOnlyReachableViaThisEdge</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d5/de3/classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;E, <a class="el" href="../../d3/d13/classllvm_1_1DominatorTree.html">DominatorTree</a> *DT)</td></tr>
<tr class="separator:a7ecb019c18583eca74daad14ff133d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9b51dd24187fb51cb70169bb921da81b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a9b51dd24187fb51cb70169bb921da81b">EnablePRE</a> (&quot;enable-pre&quot;, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), cl::Hidden)</td></tr>
<tr class="separator:a9b51dd24187fb51cb70169bb921da81b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f919fce34215a248b020304ab0f121b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#a0f919fce34215a248b020304ab0f121b">EnableLoadPRE</a> (&quot;enable-load-pre&quot;, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>))</td></tr>
<tr class="separator:a0f919fce34215a248b020304ab0f121b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d196a9b22e43ebe2fe1bc471cefa45"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d00/GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a> (&quot;max-recurse-depth&quot;, cl::Hidden, cl::init(1000), cl::ZeroOrMore, <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Max recurse depth (default = 1000)&quot;))</td></tr>
<tr class="separator:ad0d196a9b22e43ebe2fe1bc471cefa45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;gvn&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae22600319ec2e70eefc03fb706ae2c0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int AnalyzeLoadFromClobberingLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>LoadPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *&#160;</td>
          <td class="paramname"><em>DepLI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AnalyzeLoadFromClobberingLoad - This function is called when we have a memdep query of a load that ends up being clobbered by another load. See if the other load can feed into the second load. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01033">1033</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                                                                               {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// Cannot handle reading from store of first-class aggregate yet.</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> (DepLI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || DepLI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *DepPtr = DepLI-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  uint64_t DepSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DepLI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordtype">int</span> R = <a class="code" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, DepPtr, DepSize, DL);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keywordflow">if</span> (R != -1) <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// If we have a load/load clobber an DepLI can be widened to cover this load,</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// then we should widen it!</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  int64_t LoadOffs = 0;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadBase =</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(LoadPtr, LoadOffs, &amp;DL);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordtype">unsigned</span> LoadSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(LoadTy);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordtype">unsigned</span> Size = MemoryDependenceAnalysis::</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    getLoadLoadClobberFullWidthSize(LoadBase, LoadOffs, LoadSize, DepLI, DL);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (Size == 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, DepPtr, Size*8, DL);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a090878b40a781fbfccd4496adb00dd19"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">llvm::GetPointerBaseWithConstantOffset</a></div><div class="ttdeci">Value * GetPointerBaseWithConstantOffset(Value *Ptr, int64_t &amp;Offset, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01716">ValueTracking.cpp:1716</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a20e7699508ddae23e2554678f93aaf1f"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingWrite(Type *LoadTy, Value *LoadPtr, Value *WritePtr, uint64_t WriteSizeInBits, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00942">GVN.cpp:942</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00240">Instructions.h:240</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00209">Type.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00353">DataLayout.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25bfdc9b91b6b9b2da1a998c2fae2634"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int AnalyzeLoadFromClobberingMemInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>LoadPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *&#160;</td>
          <td class="paramname"><em>MI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01060">1060</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                                                                  {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// If the mem operation is a non-constant size, we can&#39;t handle it.</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *SizeCst = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(MI-&gt;<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">getLength</a>());</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">if</span> (!SizeCst) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  uint64_t MemSizeInBits = SizeCst-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>()*8;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// If this is memset, we just need to see if the offset is valid in the size</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// of the memset..</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="../../df/da2/classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>() == <a class="code" href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9f7f1b6be1144152902121f2463d0368">Intrinsic::memset</a>)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, MI-&gt;<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">getDest</a>(),</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                          MemSizeInBits, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// If we have a memcpy/memmove, the only case we can handle is if this is a</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// copy from constant memory.  In that case, we can read directly from the</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// constant memory.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = cast&lt;MemTransferInst&gt;(<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Src = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>&gt;(MTI-&gt;<a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>());</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (!Src) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a>&gt;(<a class="code" href="../../d9/d4a/namespacellvm.html#a5301cb550451ea4a2353d703fc6c10bb">GetUnderlyingObject</a>(Src, &amp;DL));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">if</span> (!GV || !GV-&gt;<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>()) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// See if the access is within the bounds of the transfer.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">int</span> Offset = <a class="code" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr,</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                              MI-&gt;<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">getDest</a>(), MemSizeInBits, <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">if</span> (Offset == -1)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">return</span> Offset;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordtype">unsigned</span> AS = Src-&gt;getType()-&gt;getPointerAddressSpace();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Otherwise, see if we can constant fold a load from the constant with the</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// offset applied as appropriate.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  Src = ConstantExpr::getBitCast(Src,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                 Type::getInt8PtrTy(Src-&gt;getContext(), AS));</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *OffsetCst =</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    ConstantInt::get(Type::getInt64Ty(Src-&gt;getContext()), (<span class="keywordtype">unsigned</span>)Offset);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  Src = <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>::getGetElementPtr(Src, OffsetCst);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  Src = <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>::getBitCast(Src, <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>::get(LoadTy, AS));</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="../../d2/d14/LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (<a class="code" href="../../d9/d4a/namespacellvm.html#af3bceeb5e36620b4e5cb84237180feaf">ConstantFoldLoadFromConstPtr</a>(Src, &amp;DL))</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    return Offset;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  return -1;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="../../df/da2/classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="namespacellvm_html_a5301cb550451ea4a2353d703fc6c10bb"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a5301cb550451ea4a2353d703fc6c10bb">llvm::GetUnderlyingObject</a></div><div class="ttdeci">Value * GetUnderlyingObject(Value *V, const DataLayout *TD=nullptr, unsigned MaxLookup=6)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01900">ValueTracking.cpp:1900</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a20e7699508ddae23e2554678f93aaf1f"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingWrite(Type *LoadTy, Value *LoadPtr, Value *WritePtr, uint64_t WriteSizeInBits, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00942">GVN.cpp:942</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="../../d2/d14/LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_ad8bf46d46e8f14bc23bd30df57cc9a77"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">llvm::MemIntrinsic::getDest</a></div><div class="ttdeci">Value * getDest() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00150">IntrinsicInst.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_abad10f74789466601c7a025540c1c072"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">llvm::MemIntrinsic::getLength</a></div><div class="ttdeci">Value * getLength() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00124">IntrinsicInst.h:124</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa9f7f1b6be1144152902121f2463d0368"><div class="ttname"><a href="../../d2/d4d/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9f7f1b6be1144152902121f2463d0368">llvm::LibFunc::memset</a></div><div class="ttdoc">void *memset(void *b, int c, size_t len); </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/TargetLibraryInfo_8h_source.html#l00414">TargetLibraryInfo.h:414</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a1500a3fe55cf38153aa1e0fbe7284e05"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00144">GlobalVariable.h:144</a></div></div>
<div class="ttc" id="namespacellvm_html_af3bceeb5e36620b4e5cb84237180feaf"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af3bceeb5e36620b4e5cb84237180feaf">llvm::ConstantFoldLoadFromConstPtr</a></div><div class="ttdeci">Constant * ConstantFoldLoadFromConstPtr(Constant *C, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l00524">ConstantFolding.cpp:524</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00231">IntrinsicInst.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:220</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">llvm::AArch64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00197">AArch64BaseInfo.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a375644040b118ae91da4ab2a3bc980ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int AnalyzeLoadFromClobberingStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>LoadPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> *&#160;</td>
          <td class="paramname"><em>DepSI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AnalyzeLoadFromClobberingStore - This function is called when we have a memdep query of a load that ends up being a clobbering store. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01016">1016</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                                                {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// Cannot handle reading from store of first-class aggregate yet.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (DepSI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() ||</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      DepSI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StorePtr = DepSI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>();</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  uint64_t StoreSize =DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DepSI-&gt;<a class="code" href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr,</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                        StorePtr, StoreSize, DL);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00360">Instructions.h:360</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a20e7699508ddae23e2554678f93aaf1f"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a20e7699508ddae23e2554678f93aaf1f">AnalyzeLoadFromClobberingWrite</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingWrite(Type *LoadTy, Value *LoadPtr, Value *WritePtr, uint64_t WriteSizeInBits, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00942">GVN.cpp:942</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00209">Type.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="../../de/d9c/classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00363">Instructions.h:363</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20e7699508ddae23e2554678f93aaf1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int AnalyzeLoadFromClobberingWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>LoadPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>WritePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>WriteSizeInBits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AnalyzeLoadFromClobberingWrite - This function is called when we have a memdep query of a load that ends up being a clobbering memory write (store, memset, memcpy, memmove). This means that the write <em>may</em> provide bits used by the load but we can't be sure because the pointers don't mustalias.</p>
<p><a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> this case to see if there is anything more we can do before we give up. This returns -1 if we have to give up, or a byte number in the stored value of the piece that feeds the load. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l00942">942</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                                                {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// If the loaded or stored value is a first class array or struct, don&#39;t try</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// to transform them.  We need to be able to bitcast to integer.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  int64_t StoreOffset = 0, LoadOffset = 0;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *StoreBase = <a class="code" href="../../d9/d4a/namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(WritePtr,StoreOffset,&amp;DL);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *LoadBase = <a class="code" href="../../d9/d4a/namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(LoadPtr, LoadOffset, &amp;DL);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span> (StoreBase != LoadBase)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// If the load and store are to the exact same address, they should have been</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// a must alias.  AA must have gotten confused.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// FIXME: Study to see if/when this happens.  One case is forwarding a memset</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// to a load from the base of the memset.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (LoadOffset == StoreOffset) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;STORE/LOAD DEP WITH COMMON POINTER MISSED:\n&quot;</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Base       = &quot;</span> &lt;&lt; *StoreBase &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Ptr  = &quot;</span> &lt;&lt; *WritePtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Offs = &quot;</span> &lt;&lt; StoreOffset &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Load Ptr   = &quot;</span> &lt;&lt; *LoadPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    abort();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// If the load and store don&#39;t overlap at all, the store doesn&#39;t provide</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// anything to the load.  In this case, they really don&#39;t alias at all, AA</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// must have gotten confused.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  uint64_t LoadSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">if</span> ((WriteSizeInBits &amp; 7) | (LoadSize &amp; 7))</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  uint64_t StoreSize = WriteSizeInBits &gt;&gt; 3;  <span class="comment">// Convert to bytes.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  LoadSize &gt;&gt;= 3;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordtype">bool</span> isAAFailure = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">if</span> (StoreOffset &lt; LoadOffset)</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    isAAFailure = StoreOffset+int64_t(StoreSize) &lt;= LoadOffset;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    isAAFailure = LoadOffset+int64_t(LoadSize) &lt;= StoreOffset;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (isAAFailure) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="preprocessor"></span>    <a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;STORE LOAD DEP WITH COMMON BASE:\n&quot;</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Base       = &quot;</span> &lt;&lt; *StoreBase &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Ptr  = &quot;</span> &lt;&lt; *WritePtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Offs = &quot;</span> &lt;&lt; StoreOffset &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Load Ptr   = &quot;</span> &lt;&lt; *LoadPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    abort();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// If the Load isn&#39;t completely contained within the stored bits, we don&#39;t</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// have all the bits to feed it.  We could do something crazy in the future</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// (issue a smaller load then merge the bits in) but this seems unlikely to be</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// valuable.</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (StoreOffset &gt; LoadOffset ||</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      StoreOffset+StoreSize &lt; LoadOffset+LoadSize)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Okay, we can do this transformation.  Return the number of bytes into the</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// store that the load is.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">return</span> LoadOffset-StoreOffset;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;}</div>
<div class="ttc" id="namespacellvm_html_a090878b40a781fbfccd4496adb00dd19"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">llvm::GetPointerBaseWithConstantOffset</a></div><div class="ttdeci">Value * GetPointerBaseWithConstantOffset(Value *Ptr, int64_t &amp;Offset, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01716">ValueTracking.cpp:1716</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00209">Type.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a56a81a30e64a55c1513adca6954465c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CanCoerceMustAliasedValueToLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>StoredVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CanCoerceMustAliasedValueToLoad - Return true if CoerceAvailableValueToLoadType will succeed. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l00831">831</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                                                  {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// If the loaded or stored value is an first class array or struct, don&#39;t try</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// to transform them.  We need to be able to bitcast to integer.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>() ||</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      StoredVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() ||</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      StoredVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// The store has to be at least as big as the load.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(StoredVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &lt;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy))</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00209">Type.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae1a956d934ab1301146c41b4edb7683"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* CoerceAvailableValueToLoadType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>StoredVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadedTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>InsertPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CoerceAvailableValueToLoadType - If we saw a store of a value to memory, and then a load from a must-aliased pointer of a different type, try to coerce the stored value. LoadedTy is the type of the load we want to replace and InsertPt is the place to insert new instructions.</p>
<p>If we can't do it, return null. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l00855">855</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                                                   {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d00/GVN_8cpp.html#a56a81a30e64a55c1513adca6954465c8">CanCoerceMustAliasedValueToLoad</a>(StoredVal, LoadedTy, DL))</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// If this is already the right type, just return it.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *StoredValTy = StoredVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  uint64_t StoreSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(StoredValTy);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  uint64_t LoadSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadedTy);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// If the store and reload are the same size, we can always reuse it.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (StoreSize == LoadSize) {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// Pointer to Pointer -&gt; use bitcast.</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        LoadedTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Convert source pointers to integers, which can be bitcast.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      StoredValTy = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(StoredValTy);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="../../d7/d35/classllvm_1_1PtrToIntInst.html">PtrToIntInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *TypeToCastTo = LoadedTy;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (TypeToCastTo-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      TypeToCastTo = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(TypeToCastTo);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (StoredValTy != TypeToCastTo)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, TypeToCastTo, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// Cast to pointer if the load needs a pointer type.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (LoadedTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="../../da/d8d/classllvm_1_1IntToPtrInst.html">IntToPtrInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> StoredVal;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// If the loaded value is smaller than the available value, then we can</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// extract out a piece from it.  If the available value is too small, then we</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// can&#39;t do anything.</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(StoreSize &gt;= LoadSize &amp;&amp; <span class="stringliteral">&quot;CanCoerceMustAliasedValueToLoad fail&quot;</span>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// Convert source pointers to integers, which can be manipulated.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    StoredValTy = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(StoredValTy);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    StoredVal = <span class="keyword">new</span> <a class="code" href="../../d7/d35/classllvm_1_1PtrToIntInst.html">PtrToIntInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Convert vectors and fp to integer, which can be manipulated.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">if</span> (!StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    StoredValTy = IntegerType::get(StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), StoreSize);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    StoredVal = <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// If this is a big-endian system, we need to shift the value down to the low</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// bits so that a truncate will work.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>()) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Val = ConstantInt::get(StoredVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), StoreSize-LoadSize);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    StoredVal = BinaryOperator::CreateLShr(StoredVal, Val, <span class="stringliteral">&quot;tmp&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// Truncate the integer to the right size now.</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *NewIntTy = IntegerType::get(StoredValTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), LoadSize);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  StoredVal = <span class="keyword">new</span> <a class="code" href="../../d4/dec/classllvm_1_1TruncInst.html">TruncInst</a>(StoredVal, NewIntTy, <span class="stringliteral">&quot;trunc&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">if</span> (LoadedTy == NewIntTy)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span> StoredVal;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// If the result is a pointer, inttoptr.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">if</span> (LoadedTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../da/d8d/classllvm_1_1IntToPtrInst.html">IntToPtrInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;inttoptr&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Otherwise, bitcast.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;bitcast&quot;</span>, InsertPt);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PtrToIntInst_html"><div class="ttname"><a href="../../d7/d35/classllvm_1_1PtrToIntInst.html">llvm::PtrToIntInst</a></div><div class="ttdoc">This class represents a cast from a pointer to an integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03681">Instructions.h:3681</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1TruncInst_html"><div class="ttname"><a href="../../d4/dec/classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03317">Instructions.h:3317</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1IntToPtrInst_html"><div class="ttname"><a href="../../da/d8d/classllvm_1_1IntToPtrInst.html">llvm::IntToPtrInst</a></div><div class="ttdoc">This class represents a cast from an integer to a pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03641">Instructions.h:3641</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a56a81a30e64a55c1513adca6954465c8"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a56a81a30e64a55c1513adca6954465c8">CanCoerceMustAliasedValueToLoad</a></div><div class="ttdeci">static bool CanCoerceMustAliasedValueToLoad(Value *StoredVal, Type *LoadTy, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00831">GVN.cpp:831</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a61d5060162c77138d1c3244c8e001ea2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* ConstructSSAForLoadSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *&#160;</td>
          <td class="paramname"><em>LI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; AvailableValueInBlock &gt; &amp;&#160;</td>
          <td class="paramname"><em>ValuesPerBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GVN &amp;&#160;</td>
          <td class="paramname"><em>gvn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ConstructSSAForLoadSet - Given a set of loads specified by ValuesPerBlock, construct SSA form, allowing us to eliminate LI. This returns the value that should be used at LI's definition site. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01268">1268</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                                               {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Check for the fully redundant, dominating load case.  In this case, we can</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="comment">// just use the dominating value directly.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">if</span> (ValuesPerBlock.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      gvn.getDominatorTree().properlyDominates(ValuesPerBlock[0].BB,</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                                               LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(!ValuesPerBlock[0].isUndefValue() &amp;&amp; <span class="stringliteral">&quot;Dead BB dominate this block&quot;</span>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">return</span> ValuesPerBlock[0].MaterializeAdjustedValue(LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), gvn);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">// Otherwise, we have to construct SSA form.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 8&gt;</a> NewPHIs;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="../../db/df3/classllvm_1_1SSAUpdater.html">SSAUpdater</a> SSAUpdate(&amp;NewPHIs);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  SSAUpdate.Initialize(LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LoadTy = LI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = ValuesPerBlock.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keyword">const</span> AvailableValueInBlock &amp;AV = ValuesPerBlock[i];</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = AV.BB;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">if</span> (SSAUpdate.HasValueForBlock(BB))</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    SSAUpdate.AddAvailableValue(BB, AV.MaterializeAdjustedValue(LoadTy, gvn));</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// Perform PHI construction.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = SSAUpdate.GetValueInMiddleOfBlock(LI-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// If new PHI nodes were created, notify alias analysis.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="../../d4/d31/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA = gvn.getAliasAnalysis();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NewPHIs.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i)</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      AA-&gt;<a class="code" href="../../d4/d31/classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">copyValue</a>(LI, NewPHIs[i]);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// Now that we&#39;ve copied information to the new PHIs, scan through</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// them again and inform alias analysis that we&#39;ve added potentially</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// escaping uses to any values that are operands to these PHIs.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NewPHIs.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++i) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = NewPHIs[i];</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ii = 0, ee = P-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); ii != ee; ++ii) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordtype">unsigned</span> jj = PHINode::getOperandNumForIncomingValue(ii);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        AA-&gt;<a class="code" href="../../d4/d31/classllvm_1_1AliasAnalysis.html#ab3cecb80aa774bc87bc9e136d245acba">addEscapingUse</a>(P-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">getOperandUse</a>(jj));</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1User_html_a363947eeecf72de326468ed5231e3a04"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">llvm::User::getOperandUse</a></div><div class="ttdeci">const Use &amp; getOperandUse(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00101">User.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html"><div class="ttname"><a href="../../db/df3/classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d8d/SSAUpdater_8h_source.html#l00037">SSAUpdater.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="../../d4/d31/classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a533cd570eeebdb48681e253dc174a777"><div class="ttname"><a href="../../d4/d31/classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">llvm::AliasAnalysis::copyValue</a></div><div class="ttdeci">virtual void copyValue(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dae/AliasAnalysis_8cpp_source.html#l00075">AliasAnalysis.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_ab3cecb80aa774bc87bc9e136d245acba"><div class="ttname"><a href="../../d4/d31/classllvm_1_1AliasAnalysis.html#ab3cecb80aa774bc87bc9e136d245acba">llvm::AliasAnalysis::addEscapingUse</a></div><div class="ttdeci">virtual void addEscapingUse(Use &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dae/AliasAnalysis_8cpp_source.html#l00080">AliasAnalysis.cpp:80</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="../../d7/d0a/Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5a14f90fae625ff076364378de0c57ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* GetLoadValueForLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *&#160;</td>
          <td class="paramname"><em>SrcVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>InsertPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GVN &amp;&#160;</td>
          <td class="paramname"><em>gvn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetLoadValueForLoad - This function is called when we have a memdep query of a load that ends up being a clobbering load. This means that the load <em>may</em> provide bits used by the load but we can't be sure because the pointers don't mustalias. <a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> this case to see if there is anything more we can do before we give up. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01150">1150</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                                            {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a> = *gvn.getDataLayout();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// If Offset+LoadTy exceeds the size of SrcVal, then we must be wanting to</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// widen SrcVal out to a larger load.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordtype">unsigned</span> SrcValSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordtype">unsigned</span> LoadSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(LoadTy);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">if</span> (Offset+LoadSize &gt; SrcValSize) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SrcVal-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>() &amp;&amp; <span class="stringliteral">&quot;Cannot widen volatile/atomic load!&quot;</span>);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t widen non-integer load&quot;</span>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// If we have a load/load clobber an DepLI can be widened to cover this</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">// load, then we should widen it to the next power of 2 size big enough!</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordtype">unsigned</span> NewLoadSize = Offset+LoadSize;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d4a/namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">isPowerOf2_32</a>(NewLoadSize))</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      NewLoadSize = <a class="code" href="../../d9/d4a/namespacellvm.html#a0490c32aa8dd63ddc56bb046fd0258c7">NextPowerOf2</a>(NewLoadSize);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *PtrVal = SrcVal-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// Insert the new load after the old load.  This ensures that subsequent</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// memdep queries will find the new load.  We can&#39;t easily remove the old</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// load completely because it is already in the value numbering table.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(SrcVal-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), ++<a class="code" href="../../d0/dc1/classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(SrcVal));</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestPTy =</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      IntegerType::get(LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), NewLoadSize*8);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    DestPTy = PointerType::get(DestPTy,</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                               PtrVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">SetCurrentDebugLocation</a>(SrcVal-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    PtrVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(PtrVal, DestPTy);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(PtrVal);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    NewLoad-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(SrcVal);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    NewLoad-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(SrcVal-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN WIDENED LOAD: &quot;</span> &lt;&lt; *SrcVal &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;TO: &quot;</span> &lt;&lt; *NewLoad &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// Replace uses of the original load with the wider load.  On a big endian</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// system, we need to shift down to get the relevant bits.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *RV = NewLoad;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      RV = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(RV,</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    NewLoadSize*8-SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>());</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    RV = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(RV, SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(RV);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// We would like to use gvn.markInstructionForDeletion here, but we can&#39;t</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">// because the load is already memoized into the leader map table that GVN</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// tracks.  It is potentially possible to remove the load from the table,</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// but then there all of the operations based on it would need to be</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// rehashed.  Just leave the dead load around.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    gvn.getMemDep().removeInstruction(SrcVal);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    SrcVal = NewLoad;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#a5b7800688aeeb88e001f229d357f93a8">GetStoreValueForLoad</a>(SrcVal, Offset, LoadTy, InsertPt, DL);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a3f8c45ea10c393433221a508b750dcd5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">llvm::IRBuilder::CreateLShr</a></div><div class="ttdeci">Value * CreateLShr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00770">IRBuilder.h:770</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_af440b535b3b4e8d0d089dd0ed2283a0f"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">llvm::IRBuilder::CreateLoad</a></div><div class="ttdeci">LoadInst * CreateLoad(Value *Ptr, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00901">IRBuilder.h:901</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a571ae7ebae7038da7f6073efc65aaa50"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">llvm::IRBuilderBase::SetCurrentDebugLocation</a></div><div class="ttdeci">void SetCurrentDebugLocation(const DebugLoc &amp;L)</div><div class="ttdoc">Set location information used by debugging information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00118">IRBuilder.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00212">Type.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00235">Instructions.h:235</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a7f7b8906dab43d37c78e10eafe4c424f"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a></div><div class="ttdeci">INITIALIZE_TM_PASS(GlobalMerge,&quot;global-merge&quot;,&quot;Merge global variables&quot;, false, false) bool GlobalMerge const DataLayout * DL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dca/GlobalMerge_8cpp_source.html#l00146">GlobalMerge.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00242">Value.cpp:242</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="GVN_8cpp_html_a5b7800688aeeb88e001f229d357f93a8"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a5b7800688aeeb88e001f229d357f93a8">GetStoreValueForLoad</a></div><div class="ttdeci">static Value * GetStoreValueForLoad(Value *SrcVal, unsigned Offset, Type *LoadTy, Instruction *InsertPt, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l01111">GVN.cpp:1111</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00196">Instruction.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00240">Instructions.h:240</a></div></div>
<div class="ttc" id="include_2llvm_2Support_2Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="../../de/dcb/include_2llvm_2Support_2Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/include_2llvm_2Support_2Debug_8h_source.html#l00093">include/llvm/Support/Debug.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l01066">Instructions.cpp:1066</a></div></div>
<div class="ttc" id="namespacellvm_html_a0490c32aa8dd63ddc56bb046fd0258c7"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a0490c32aa8dd63ddc56bb046fd0258c7">llvm::NextPowerOf2</a></div><div class="ttdeci">uint64_t NextPowerOf2(uint64_t A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00567">MathExtras.h:567</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="../../d0/dc1/classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfc/ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01158">IRBuilder.h:1158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d41/Support_2Debug_8cpp_source.html#l00101">Support/Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00353">DataLayout.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01094">IRBuilder.h:1094</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="namespacellvm_html_af4d1a918800291e75b01ce1447be0e83"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">llvm::isPowerOf2_32</a></div><div class="ttdeci">bool isPowerOf2_32(uint32_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dab/MathExtras_8h_source.html#l00363">MathExtras.h:363</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38607014caf5759ca5b2707d3a943755"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* GetMemInstValueForLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dc7/classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *&#160;</td>
          <td class="paramname"><em>SrcInst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>InsertPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetMemInstValueForLoad - This function is called when we have a memdep query of a load that ends up being a clobbering mem intrinsic. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01210">1210</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                                          {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="../../d5/d1d/classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = LoadTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>();</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  uint64_t LoadSize = DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy)/8;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(InsertPt-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), InsertPt);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// We know that this method is only called when the mem transfer fully</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// provides the bits for the load.</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d37/classllvm_1_1MemSetInst.html">MemSetInst</a> *MSI = dyn_cast&lt;MemSetInst&gt;(SrcInst)) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// memset(P, &#39;x&#39;, 1234) -&gt; splat(&#39;x&#39;), even if x is a variable, and</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// independently of what the offset is.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Val = MSI-&gt;getValue();</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (LoadSize != 1)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      Val = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">CreateZExt</a>(Val, IntegerType::get(Ctx, LoadSize*8));</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *OneElt = Val;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// Splat the value out to the right number of bits.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> NumBytesSet = 1; NumBytesSet != LoadSize; ) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="comment">// If we can double the number of bytes set, do it.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">if</span> (NumBytesSet*2 &lt;= LoadSize) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *ShVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">CreateShl</a>(Val, NumBytesSet*8);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        Val = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(Val, ShVal);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        NumBytesSet &lt;&lt;= 1;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="comment">// Otherwise insert one byte at a time.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *ShVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">CreateShl</a>(Val, 1*8);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      Val = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(OneElt, ShVal);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      ++NumBytesSet;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#aae1a956d934ab1301146c41b4edb7683">CoerceAvailableValueToLoadType</a>(Val, LoadTy, InsertPt, DL);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// Otherwise, this is a memcpy/memmove from a constant global.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = cast&lt;MemTransferInst&gt;(SrcInst);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Src = cast&lt;Constant&gt;(MTI-&gt;<a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>());</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordtype">unsigned</span> AS = Src-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Otherwise, see if we can constant fold a load from the constant with the</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// offset applied as appropriate.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  Src = ConstantExpr::getBitCast(Src,</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                                 Type::getInt8PtrTy(Src-&gt;getContext(), AS));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *OffsetCst =</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    ConstantInt::get(Type::getInt64Ty(Src-&gt;getContext()), (<span class="keywordtype">unsigned</span>)Offset);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  Src = <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>::getGetElementPtr(Src, OffsetCst);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  Src = <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>::getBitCast(Src, <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>::get(LoadTy, AS));</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  return <a class="code" href="../../d9/d4a/namespacellvm.html#af3bceeb5e36620b4e5cb84237180feaf">ConstantFoldLoadFromConstPtr</a>(Src, &amp;DL);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1MemSetInst_html"><div class="ttname"><a href="../../dd/d37/classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00195">IntrinsicInst.h:195</a></div></div>
<div class="ttc" id="GVN_8cpp_html_aae1a956d934ab1301146c41b4edb7683"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#aae1a956d934ab1301146c41b4edb7683">CoerceAvailableValueToLoadType</a></div><div class="ttdeci">static Value * CoerceAvailableValueToLoadType(Value *StoredVal, Type *LoadedTy, Instruction *InsertPt, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00855">GVN.cpp:855</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00212">Type.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8f55dd4237be6778517ddd752ca8b76a"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">llvm::IRBuilder::CreateOr</a></div><div class="ttdeci">Value * CreateOr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00822">IRBuilder.h:822</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="../../d5/d1d/classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6b/LLVMContext_8h_source.html#l00040">LLVMContext.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a277dfeaad2a2ada72a6024b0eedc5301"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">llvm::IRBuilder::CreateZExt</a></div><div class="ttdeci">Value * CreateZExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01097">IRBuilder.h:1097</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_af3bceeb5e36620b4e5cb84237180feaf"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#af3bceeb5e36620b4e5cb84237180feaf">llvm::ConstantFoldLoadFromConstPtr</a></div><div class="ttdeci">Constant * ConstantFoldLoadFromConstPtr(Constant *C, const DataLayout *TD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/ConstantFolding_8cpp_source.html#l00524">ConstantFolding.cpp:524</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a4d49fd9a4cc4f2a74d4555bd08b13910"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">llvm::IRBuilder::CreateShl</a></div><div class="ttdeci">Value * CreateShl(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00751">IRBuilder.h:751</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00231">IntrinsicInst.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:220</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b7800688aeeb88e001f229d357f93a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* GetStoreValueForLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>SrcVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>LoadTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>InsertPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetStoreValueForLoad - This function is called when we have a memdep query of a load that ends up being a clobbering store. This means that the store provides bits used by the load but we the pointers don't mustalias. <a class="el" href="../../d8/d2b/namespaceCheck.html">Check</a> this case to see if there is anything more we can do before we give up. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01111">1111</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                                                                               {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="../../d5/d1d/classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  uint64_t StoreSize = (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) + 7) / 8;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  uint64_t LoadSize = (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy) + 7) / 8;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>(InsertPt-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), InsertPt);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// Compute which bits of the stored value are being used by the load.  Convert</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// to an integer type to start with.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">if</span> (SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">getScalarType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    SrcVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(SrcVal,</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> (!SrcVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    SrcVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(SrcVal, IntegerType::get(Ctx, StoreSize*8));</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// Shift the bits to the least significant depending on endianness.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordtype">unsigned</span> ShiftAmt;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordflow">if</span> (DL.<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ab5073dd57732298abf080ef8381ad14e">isLittleEndian</a>())</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    ShiftAmt = Offset*8;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    ShiftAmt = (StoreSize-LoadSize-Offset)*8;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (ShiftAmt)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    SrcVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(SrcVal, ShiftAmt);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">if</span> (LoadSize != StoreSize)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    SrcVal = <a class="code" href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a>.<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(SrcVal, IntegerType::get(Ctx, LoadSize*8));</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d00/GVN_8cpp.html#aae1a956d934ab1301146c41b4edb7683">CoerceAvailableValueToLoadType</a>(SrcVal, LoadTy, InsertPt, DL);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a3f8c45ea10c393433221a508b750dcd5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">llvm::IRBuilder::CreateLShr</a></div><div class="ttdeci">Value * CreateLShr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00770">IRBuilder.h:770</a></div></div>
<div class="ttc" id="GVN_8cpp_html_aae1a956d934ab1301146c41b4edb7683"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#aae1a956d934ab1301146c41b4edb7683">CoerceAvailableValueToLoadType</a></div><div class="ttdeci">static Value * CoerceAvailableValueToLoadType(Value *StoredVal, Type *LoadedTy, Instruction *InsertPt, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00855">GVN.cpp:855</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00437">IRBuilder.h:437</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ab5073dd57732298abf080ef8381ad14e"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ab5073dd57732298abf080ef8381ad14e">llvm::DataLayout::isLittleEndian</a></div><div class="ttdeci">bool isLittleEndian() const </div><div class="ttdoc">Layout endianness... </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00209">DataLayout.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="../../d5/d1d/classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6b/LLVMContext_8h_source.html#l00040">LLVMContext.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9299aed1efa0ef459a0f1c7fa11fbe61"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">llvm::IRBuilder::CreatePtrToInt</a></div><div class="ttdeci">Value * CreatePtrToInt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01150">IRBuilder.h:1150</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01158">IRBuilder.h:1158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9c4d4041f07a8fd4372ed3a2502f2d55"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9c4d4041f07a8fd4372ed3a2502f2d55">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="Chapter3_2toy_8cpp_html_a273f780131bbe21658cfc4d34210ff4b"><div class="ttname"><a href="../../d8/df5/Chapter3_2toy_8cpp.html#a273f780131bbe21658cfc4d34210ff4b">Builder</a></div><div class="ttdeci">static IRBuilder Builder(getGlobalContext())</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01094">IRBuilder.h:1094</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00053">Instruction.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab1faa49b43014e07caaf2bf2d3db07e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isLifetimeStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>Inst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01364">1364</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                                                     {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../df/da2/classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>* II = dyn_cast&lt;IntrinsicInst&gt;(Inst))</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">return</span> II-&gt;getIntrinsicID() == Intrinsic::lifetime_start;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="../../df/da2/classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ecb019c18583eca74daad14ff133d54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isOnlyReachableViaThisEdge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d5/de3/classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;&#160;</td>
          <td class="paramname"><em>E</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d13/classllvm_1_1DominatorTree.html">DominatorTree</a> *&#160;</td>
          <td class="paramname"><em>DT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isOnlyReachableViaThisEdge - There is an edge from 'Src' to 'Dst'. Return true if every path from the entry block to 'Dst' passes via this edge. In particular 'Dst' must not be reachable via another edge from 'Src'. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l02063">2063</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                                                          {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">// While in theory it is interesting to consider the case in which Dst has</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="comment">// more than one predecessor, because Dst might be part of a loop which is</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="comment">// only reachable from Src, in practice it is pointless since at the time</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// GVN runs all such loops have preheaders, which means that Dst will have</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">// been changed to have only one predecessor, namely Src.</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = E.<a class="code" href="../../d5/de3/classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">getEnd</a>()-&gt;<a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Src = E.<a class="code" href="../../d5/de3/classllvm_1_1BasicBlockEdge.html#ae19ed5c4897c23cf94108549768fe2f4">getStart</a>();</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((!Pred || Pred == Src) &amp;&amp; <span class="stringliteral">&quot;No edge between these basic blocks!&quot;</span>);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  (void)Src;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="keywordflow">return</span> Pred != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1BasicBlockEdge_html_ae19ed5c4897c23cf94108549768fe2f4"><div class="ttname"><a href="../../d5/de3/classllvm_1_1BasicBlockEdge.html#ae19ed5c4897c23cf94108549768fe2f4">llvm::BasicBlockEdge::getStart</a></div><div class="ttdeci">const BasicBlock * getStart() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d50/Dominators_8h_source.html#l00055">Dominators.h:55</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlockEdge_html_ae855b6a8f5e36aa51ee96ff018af63d1"><div class="ttname"><a href="../../d5/de3/classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">llvm::BasicBlockEdge::getEnd</a></div><div class="ttdeci">const BasicBlock * getEnd() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d50/Dominators_8h_source.html#l00058">Dominators.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block. Otherwise return a null po...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/BasicBlock_8cpp_source.html#l00187">BasicBlock.cpp:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f8c728bc2ed20849bdc6b61d85f4bb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsValueFullyAvailableInBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d64/classllvm_1_1DenseMap.html">DenseMap</a>&lt; <a class="el" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *, char &gt; &amp;&#160;</td>
          <td class="paramname"><em>FullyAvailableBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>RecurseDepth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>IsValueFullyAvailableInBlock - Return true if we can prove that the value we're analyzing is fully available in the specified block. As we go, keep track of which blocks we know are fully alive in FullyAvailableBlocks. This map is actually a tri-state map with the following values: 0) we know the block <em>is not</em> fully available. 1) we know the block <em>is</em> fully available. 2) we do not know whether the block is fully available or not, but we are currently speculating that it will be. 3) we are speculating for this block and have used that to speculate for other blocks. </p>

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l00758">758</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                                   {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">if</span> (RecurseDepth &gt; <a class="code" href="../../d8/d00/GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a>)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// Optimistically assume that the block is fully available and check to see</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// if we already know about this block in one lookup.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  std::pair&lt;DenseMap&lt;BasicBlock*, char&gt;::iterator, <span class="keywordtype">char</span>&gt; IV =</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    FullyAvailableBlocks.<a class="code" href="../../d9/d72/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(BB, 2));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// If the entry already existed for this block, return the precomputed value.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (!IV.second) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// If this is a speculative &quot;available&quot; value, mark it as being used for</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">// speculation of other blocks.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (IV.first-&gt;second == 2)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      IV.first-&gt;second = 3;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">return</span> IV.first-&gt;second != 0;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// Otherwise, see if it is fully available in all predecessors.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="../../d2/df6/classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// If this block has no predecessors, it isn&#39;t live-in here.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordflow">if</span> (PI == PE)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">goto</span> SpeculationFailure;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">for</span> (; PI != PE; ++PI)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// If the value isn&#39;t fully available in one of our predecessors, then it</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// isn&#39;t fully available in this block either.  Undo our previous</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">// optimistic assumption and bail out.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d00/GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a>(*PI, FullyAvailableBlocks,RecurseDepth+1))</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">goto</span> SpeculationFailure;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">// SpeculationFailure - If we get here, we found out that this is not, after</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">// all, a fully-available block.  We have a problem if we speculated on this and</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">// used the speculation to mark other blocks as available.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;SpeculationFailure:</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">char</span> &amp;BBVal = FullyAvailableBlocks[BB];</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// If we didn&#39;t speculate on this, just return with it set to false.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">if</span> (BBVal == 2) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    BBVal = 0;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// If we did speculate on this value, we could have blocks set to 1 that are</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// incorrect.  Walk the (transitive) successors of this block and mark them as</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// 0 if set to one.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 32&gt;</a> BBWorklist;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  BBWorklist.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BB);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="../../d1/da7/classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = BBWorklist.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// Note that this sets blocks to 0 (unavailable) if they happen to not</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">// already be in FullyAvailableBlocks.  This is safe.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordtype">char</span> &amp;EntryVal = FullyAvailableBlocks[Entry];</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (EntryVal == 0) <span class="keywordflow">continue</span>;  <span class="comment">// Already unavailable.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// Mark as unavailable.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    EntryVal = 0;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    BBWorklist.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(<a class="code" href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(Entry), <a class="code" href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(Entry));</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  } <span class="keywordflow">while</span> (!BBWorklist.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="../../d2/df6/classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/IR_2CFG_8h_source.html#l00029">IR/CFG.h:29</a></div></div>
<div class="ttc" id="GVN_8cpp_html_ad0d196a9b22e43ebe2fe1bc471cefa45"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a></div><div class="ttdeci">static cl::opt&lt; uint32_t &gt; MaxRecurseDepth(&quot;max-recurse-depth&quot;, cl::Hidden, cl::init(1000), cl::ZeroOrMore, cl::desc(&quot;Max recurse depth (default = 1000)&quot;))</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00406">SmallVector.h:406</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00104">Interval.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="../../d1/da7/classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00114">Interval.h:114</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d55/Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00417">SmallVector.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="../../d9/d72/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/DenseMap_8h_source.html#l00154">DenseMap.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a0f8c728bc2ed20849bdc6b61d85f4bb2"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a></div><div class="ttdeci">static bool IsValueFullyAvailableInBlock(BasicBlock *BB, DenseMap&lt; BasicBlock *, char &gt; &amp;FullyAvailableBlocks, uint32_t RecurseDepth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l00758">GVN.cpp:758</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab85468c2bfc360b5d4bc512d241d1440"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void patchAndReplaceAllUsesWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Repl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01810">1810</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                                                                    {</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <a class="code" href="../../d8/d00/GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a>(I, Repl);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Repl);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;}</div>
<div class="ttc" id="GVN_8cpp_html_aec2b1a93f189c825a7d2e1ae14f1dc32"><div class="ttname"><a href="../../d8/d00/GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a></div><div class="ttdeci">static void patchReplacementInstruction(Instruction *I, Value *Repl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d00/GVN_8cpp_source.html#l01764">GVN.cpp:1764</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00340">Value.cpp:340</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aec2b1a93f189c825a7d2e1ae14f1dc32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void patchReplacementInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Repl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d00/GVN_8cpp_source.html#l01764">1764</a> of file <a class="el" href="../../d8/d00/GVN_8cpp_source.html">GVN.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                                                                     {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// Patch the replacement so that it is not more restrictive than the value</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// being replaced.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *ReplOp = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Repl);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keywordflow">if</span> (Op &amp;&amp; ReplOp &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(Op) &amp;&amp;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      isa&lt;OverflowingBinaryOperator&gt;(ReplOp)) {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">if</span> (ReplOp-&gt;hasNoSignedWrap() &amp;&amp; !Op-&gt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>())</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      ReplOp-&gt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">setHasNoSignedWrap</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">if</span> (ReplOp-&gt;hasNoUnsignedWrap() &amp;&amp; !Op-&gt;<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">hasNoUnsignedWrap</a>())</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      ReplOp-&gt;setHasNoUnsignedWrap(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *ReplInst = dyn_cast&lt;Instruction&gt;(Repl)) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, MDNode*&gt;</a>, 4&gt; Metadata;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    ReplInst-&gt;getAllMetadataOtherThanDebugLoc(Metadata);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, n = Metadata.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i &lt; n; ++i) {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/d54/YAMLIOTest_8cpp.html#aa10c9e8951b8ccf714a59ec321bdac5b">Kind</a> = Metadata[i].first;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a> *IMD = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(Kind);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="../../d0/d82/classllvm_1_1MDNode.html">MDNode</a> *ReplMD = Metadata[i].second;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">switch</span>(Kind) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        ReplInst-&gt;setMetadata(Kind, <span class="keyword">nullptr</span>); <span class="comment">// Remove unknown metadata</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_dbg:</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <a class="code" href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;getAllMetadataOtherThanDebugLoc returned a MD_dbg&quot;</span>);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_tbaa:</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        ReplInst-&gt;setMetadata(Kind, MDNode::getMostGenericTBAA(IMD, ReplMD));</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_range:</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        ReplInst-&gt;setMetadata(Kind, MDNode::getMostGenericRange(IMD, ReplMD));</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_prof:</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;MD_prof in a non-terminator instruction&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_fpmath:</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        ReplInst-&gt;setMetadata(Kind, MDNode::getMostGenericFPMath(IMD, ReplMD));</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">case</span> LLVMContext::MD_invariant_load:</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="comment">// Only set the !invariant.load if it is present in both instructions.</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        ReplInst-&gt;setMetadata(Kind, IMD);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a21ce697328893029ae2c63974061a294"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">llvm::BinaryOperator::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l02013">Instructions.cpp:2013</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="../../d0/d82/classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da9/Metadata_8h_source.html#l00074">Metadata.h:74</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="../../dd/d3f/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3f/ErrorHandling_8h_source.html#l00098">ErrorHandling.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a07783e6f39803037259a1ebe376c2b1e"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">llvm::BinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdoc">hasNoSignedWrap - Determine whether the no signed wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l02025">Instructions.cpp:2025</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00143">Instruction.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="YAMLIOTest_8cpp_html_aa10c9e8951b8ccf714a59ec321bdac5b"><div class="ttname"><a href="../../dc/d54/YAMLIOTest_8cpp.html#aa10c9e8951b8ccf714a59ec321bdac5b">Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d54/YAMLIOTest_8cpp_source.html#l00893">YAMLIOTest.cpp:893</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a5b6cd6c043f54b40899aff62e6e40488"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">llvm::BinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const </div><div class="ttdoc">hasNoUnsignedWrap - Determine whether the no unsigned wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l02021">Instructions.cpp:2021</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad7bf8a029cda4c015beec62bd3c1c701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNInstr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> deleted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a271b124ecf85f5bd9948497e9b77f8a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNLoad&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of loads deleted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a38c90d1777c1d165a47ab27aaeeb4750"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNPRE&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> PRE'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaac8f2ab863a0a25ab53011b272e2653"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNBlocks&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of blocks merged&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af4fc6a8791a30c0ee6ffc6ab230a564b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNSimpl&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="../../d3/deb/SimplifyInstructions_8cpp.html#afbf38da490ab8cea559fee0c9081db06">instructions</a> simplified&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a47c3a55bd44c5b9089214d2bd6cdb794"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGVNEqProp&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of equalities propagated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a0068d514f68a84a108ad366f8b9e84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumPRELoad&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of loads PRE'<a class="el" href="../../da/d6d/dwarfdump-test4-part2_8cc.html#adf9c47a27e5039f12e091a6ab7ad5e6a">d</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0f919fce34215a248b020304ab0f121b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; EnableLoadPRE(&quot;enable-load-pre&quot;, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9b51dd24187fb51cb70169bb921da81b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;bool&gt; EnablePRE(&quot;enable-pre&quot;, cl::init(<a class="el" href="../../d6/d0d/LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">true</a>), cl::Hidden)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0d196a9b22e43ebe2fe1bc471cefa45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1d/classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;uint32_t&gt; MaxRecurseDepth(&quot;max-recurse-depth&quot;, cl::Hidden, cl::init(1000), cl::ZeroOrMore, <a class="el" href="../../da/def/structllvm_1_1cl_1_1desc.html">cl::desc</a>(&quot;Max recurse depth (default = 1000)&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_f536250b88bf40822ad9f2d04ff3a034.html">Scalar</a></li><li class="navelem"><a class="el" href="../../d8/d00/GVN_8cpp.html">GVN.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:52 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
