<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: InstCombineLoadStoreAlloca.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/d7d/InstCombineLoadStoreAlloca_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">InstCombineLoadStoreAlloca.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../da/d79/InstCombine_8h_source.html">InstCombine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d5f/Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d2c/Loads_8h_source.html">llvm/Analysis/Loads.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dfe/IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d18/BasicBlockUtils_8h_source.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d6f/Local_8h_source.html">llvm/Transforms/Utils/Local.h</a>&quot;</code><br/>
</div>
<p><a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;instcombine&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a625d5d622944254b7dbb70dd891e93c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a625d5d622944254b7dbb70dd891e93c2">STATISTIC</a> (NumDeadStore,&quot;Number of dead stores eliminated&quot;)</td></tr>
<tr class="separator:a625d5d622944254b7dbb70dd891e93c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6867ac335953146c3413957d424db70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#aa6867ac335953146c3413957d424db70">STATISTIC</a> (NumGlobalCopies,&quot;Number of allocas copied from constant global&quot;)</td></tr>
<tr class="separator:aa6867ac335953146c3413957d424db70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d6752ff1d6270eefda9482e7694527c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V)</td></tr>
<tr class="separator:a4d6752ff1d6270eefda9482e7694527c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3395c705cfba0619ab922fe3f6c316e8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a3395c705cfba0619ab922fe3f6c316e8">isOnlyCopiedFromConstantGlobal</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *&amp;TheCopy, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;ToDelete)</td></tr>
<tr class="separator:a3395c705cfba0619ab922fe3f6c316e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a19298a0f0e2e2d887daf95114fee50"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a2a19298a0f0e2e2d887daf95114fee50">isOnlyCopiedFromConstantGlobal</a> (<a class="el" href="../../d2/dac/classllvm_1_1AllocaInst.html">AllocaInst</a> *AI, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;ToDelete)</td></tr>
<tr class="separator:a2a19298a0f0e2e2d887daf95114fee50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad95f55ca19b7e5aaa1fa895eacc90f5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#ad95f55ca19b7e5aaa1fa895eacc90f5c">InstCombineLoadCast</a> (<a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC, <a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> &amp;<a class="el" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="memdesc:ad95f55ca19b7e5aaa1fa895eacc90f5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">InstCombineLoadCast - Fold 'load (cast P)' -&gt; cast (load P)' when possible.  <a href="#ad95f55ca19b7e5aaa1fa895eacc90f5c">More...</a><br/></td></tr>
<tr class="separator:ad95f55ca19b7e5aaa1fa895eacc90f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61e162a34ba20be2024264e6d8d9a53"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">InstCombineStoreToCast</a> (<a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC, <a class="el" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> &amp;SI)</td></tr>
<tr class="separator:ac61e162a34ba20be2024264e6d8d9a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3265ae31efc424def9bd2a560a8a4c5a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="el" href="../../d4/dc4/structA.html">A</a>, <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *B)</td></tr>
<tr class="separator:a3265ae31efc424def9bd2a560a8a4c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;instcombine&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00023">23</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3265ae31efc424def9bd2a560a8a4c5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool equivalentAddressValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>equivalentAddressValues - Test if <a class="el" href="../../d4/dc4/structA.html">A</a> and B will obviously have the same value. This includes recognizing that t0 and t1 will have the same value in code like this: t0 = getelementptr @a, 0, 3 store i32 0, i32* t0 t1 = getelementptr @a, 0, 3 t2 = load i32* t1 </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00575">575</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                                        {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// Test if the values are trivially equivalent.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">if</span> (A == B) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// Test if the values come form identical arithmetic instructions.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// This uses isIdenticalToWhenDefined instead of isIdenticalTo because</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// its only used to compare two uses within the same basic block, which</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// means that they&#39;ll always either have the same value or one of them</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// will have an undefined value.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordflow">if</span> (isa&lt;BinaryOperator&gt;(A) ||</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      isa&lt;CastInst&gt;(A) ||</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      isa&lt;PHINode&gt;(A) ||</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      isa&lt;GetElementPtrInst&gt;(A))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *BI = dyn_cast&lt;Instruction&gt;(B))</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(A)-&gt;isIdenticalToWhenDefined(BI))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// Otherwise they may not be equivalent.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad95f55ca19b7e5aaa1fa895eacc90f5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>* InstCombineLoadCast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> &amp;&#160;</td>
          <td class="paramname"><em>LI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>InstCombineLoadCast - Fold 'load (cast P)' -&gt; cast (load P)' when possible. </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00295">295</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                                              {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *CI = cast&lt;User&gt;(LI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *CastOp = CI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *DestTy = cast&lt;PointerType&gt;(CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestPTy = DestTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *SrcTy = dyn_cast&lt;PointerType&gt;(CastOp-&gt;getType())) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// If the address spaces don&#39;t match, don&#39;t eliminate the cast.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() != SrcTy-&gt;getAddressSpace())</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcPTy = SrcTy-&gt;getElementType();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (DestPTy-&gt;isIntegerTy() || DestPTy-&gt;isPointerTy() ||</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         DestPTy-&gt;isVectorTy()) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// If the source is an array, the code below will not succeed.  Check to</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="comment">// see if a trivial &#39;gep P, 0, 0&#39; will help matters.  Only do this for</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// constants.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ASrcTy = dyn_cast&lt;ArrayType&gt;(SrcPTy))</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *CSrc = dyn_cast&lt;Constant&gt;(CastOp))</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          <span class="keywordflow">if</span> (ASrcTy-&gt;getNumElements() != 0) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *IdxTy = DL</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        ? DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(SrcTy)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        : Type::getInt64Ty(SrcTy-&gt;getContext());</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Idx = Constant::getNullValue(IdxTy);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Idxs[2] = { Idx, Idx };</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            CastOp = ConstantExpr::getGetElementPtr(CSrc, Idxs);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            SrcTy = cast&lt;PointerType&gt;(CastOp-&gt;getType());</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            SrcPTy = SrcTy-&gt;getElementType();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>() &amp;&amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          (SrcPTy-&gt;isIntegerTy() || SrcPTy-&gt;isPointerTy() ||</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            SrcPTy-&gt;isVectorTy()) &amp;&amp;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          <span class="comment">// Do not allow turning this into a load of an integer, which is then</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="comment">// casted to a pointer, this pessimizes pointer analysis a lot.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          (SrcPTy-&gt;isPtrOrPtrVectorTy() ==</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;           LI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcPTy) ==</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;               IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DestPTy)) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">// Okay, we are casting from one integer or pointer type to another of</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="comment">// the same size.  Instead of casting the pointer before the load, cast</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// the result of the loaded value.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad =</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(CastOp, LI.<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#aeb96f1a88b4e58c34a988eebd843f688">isVolatile</a>(), CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        NewLoad-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(LI.<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        NewLoad-&gt;<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">setAtomic</a>(LI.<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">getOrdering</a>(), LI.<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">getSynchScope</a>());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="comment">// Now cast the result of the load.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *OldTy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>&gt;(NewLoad-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *NewTy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>&gt;(LI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> (OldTy &amp;&amp; NewTy &amp;&amp;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            OldTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() != NewTy-&gt;getAddressSpace()) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d9/d64/classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(NewLoad, LI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a>(NewLoad, LI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_af440b535b3b4e8d0d089dd0ed2283a0f"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">llvm::IRBuilder::CreateLoad</a></div><div class="ttdeci">LoadInst * CreateLoad(Value *Ptr, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00901">IRBuilder.h:901</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ac830a02a025d9d5a5dc53c444cf625ee"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1AddrSpaceCastInst_html"><div class="ttname"><a href="../../d9/d64/classllvm_1_1AddrSpaceCastInst.html">llvm::AddrSpaceCastInst</a></div><div class="ttdoc">This class represents a conversion between pointers from one address space to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03766">Instructions.h:3766</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a4df7359cb36b166c0878e16291cbe183"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">llvm::LoadInst::getSynchScope</a></div><div class="ttdeci">SynchronizationScope getSynchScope() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00216">Instructions.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a06e392f502bff86e8f85092c135d2baf"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SynchronizationScope SynchScope=CrossThread)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00229">Instructions.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="../../df/d63/classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l03729">Instructions.h:3729</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/Instructions_8cpp_source.html#l01066">Instructions.cpp:1066</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_aeb96f1a88b4e58c34a988eebd843f688"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#aeb96f1a88b4e58c34a988eebd843f688">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00187">Instructions.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8c0a29ecc14dc5afe7573bf616da2361"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this fence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00205">Instructions.h:205</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00198">Instructions.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af8f657fc986a24024180134169326225"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00117">InstCombine.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac61e162a34ba20be2024264e6d8d9a53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>* InstCombineStoreToCast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d9c/classllvm_1_1StoreInst.html">StoreInst</a> &amp;&#160;</td>
          <td class="paramname"><em>SI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>InstCombineStoreToCast - Fold store V, (cast P) -&gt; store (cast V), P when possible. This makes it generally easy to do alias analysis and/or SROA/mem2reg of the memory object. </p>
<p>NewGEPIndices - If SrcPTy is an aggregate type, we can emit a "noop gep" to its first element. This allows us to handle things like: store i32 xxx, (bitcast {foo*, float}* P to i32*) on 32-bit hosts. </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00472">472</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                                                            {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <a class="code" href="../../d6/d1b/classllvm_1_1User.html">User</a> *CI = cast&lt;User&gt;(SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *CastOp = CI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestPTy = CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *SrcTy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>&gt;(CastOp-&gt;getType());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (!SrcTy) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcPTy = SrcTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (!DestPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; !DestPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">  /// NewGEPIndices - If SrcPTy is an aggregate type, we can emit a &quot;noop gep&quot;</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">  /// to its first element.  This allows us to handle things like:</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">  ///   store i32 xxx, (bitcast {foo*, float}* %P to i32*)</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">  /// on 32-bit hosts.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span>  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 4&gt;</a> NewGEPIndices;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// If the source is an array, the code below will not succeed.  Check to</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// see if a trivial &#39;gep P, 0, 0&#39; will help matters.  Only do this for</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// constants.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">if</span> (SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>() || SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>()) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// Index through pointer.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Zero = Constant::getNullValue(Type::getInt32Ty(SI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()));</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    NewGEPIndices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(SrcPTy)) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (!STy-&gt;getNumElements()) <span class="comment">/* Struct can be empty {} */</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        NewGEPIndices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        SrcPTy = STy-&gt;getElementType(0);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(SrcPTy)) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        NewGEPIndices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        SrcPTy = ATy-&gt;getElementType();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    SrcTy = PointerType::get(SrcPTy, SrcTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> (!SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; !SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// If the pointers point into different address spaces don&#39;t do the</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// transformation.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() != CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>())</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// If the pointers point to values of different sizes don&#39;t do the</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// transformation.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (!IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>() ||</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcPTy) !=</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DestPTy))</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// If the pointers point to pointers to different address spaces don&#39;t do the</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// transformation. It is not safe to introduce an addrspacecast instruction in</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// this case since, depending on the target, addrspacecast may not be a no-op</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// cast.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp; DestPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      SrcPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>() != DestPTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>())</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Okay, we are casting from one integer or pointer type to another of</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// the same size.  Instead of casting the pointer before</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// the store, cast the value to be stored.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *NewCast;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> opcode = Instruction::BitCast;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a>* CastSrcTy = DestPTy;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a>* CastDstTy = SrcPTy;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">if</span> (CastDstTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (CastSrcTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      opcode = Instruction::IntToPtr;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CastDstTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (CastSrcTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      opcode = Instruction::PtrToInt;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// SIOp0 is a pointer to aggregate and this is a store to the first field,</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// emit a GEP to index into its first field.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (!NewGEPIndices.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    CastOp = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a1f5e8b8d535e593299355288aa0cbd67">CreateInBoundsGEP</a>(CastOp, NewGEPIndices);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *SIOp0 = SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  NewCast = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">CreateCast</a>(opcode, SIOp0, CastDstTy,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                   SIOp0-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.c&quot;</span>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, NewCast);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  SI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, CastOp);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> &amp;SI;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8aca9237e5fbd3b1028d8fe92b5a74ee"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">llvm::IRBuilder::CreateCast</a></div><div class="ttdeci">Value * CreateCast(Instruction::CastOps Op, Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01190">IRBuilder.h:1190</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00035">User.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00212">Type.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00363">Type.h:363</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00168">Value.cpp:168</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00419">Instruction.h:419</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00213">Type.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a1f5e8b8d535e593299355288aa0cbd67"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a1f5e8b8d535e593299355288aa0cbd67">llvm::IRBuilder::CreateInBoundsGEP</a></div><div class="ttdeci">Value * CreateInBoundsGEP(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00970">IRBuilder.h:970</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00094">User.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00209">Type.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af8f657fc986a24024180134169326225"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00117">InstCombine.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00522">DataLayout.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3395c705cfba0619ab922fe3f6c316e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isOnlyCopiedFromConstantGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *&amp;&#160;</td>
          <td class="paramname"><em>TheCopy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ToDelete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isOnlyCopiedFromConstantGlobal - Recursively walk the uses of a (derived) pointer to an alloca. Ignore any reads of the pointer, return false if we see any stores or other unknown uses. If we see pointer arithmetic, keep track of whether it moves the pointer (with IsOffset) but otherwise traverse the uses. If we see a memcpy/memmove that targets an unoffseted pointer to the alloca, and if the source pointer is a pointer to a constant global, we can optimize this. </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00052">52</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                                                         {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// We track lifetime intrinsics as we encounter them.  If we decide to go</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// ahead and replace the value with the global, this lets the caller quickly</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// eliminate the markers.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Value *, bool&gt;</a>, 35&gt; ValuesToInspect;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  ValuesToInspect.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(V, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">while</span> (!ValuesToInspect.<a class="code" href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">auto</span> ValuePair = ValuesToInspect.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsOffset = ValuePair.second;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : ValuePair.first-&gt;uses()) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1b/classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a> = dyn_cast&lt;LoadInst&gt;(I)) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="comment">// Ignore non-volatile loads, they are always ok.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a>-&gt;isSimple()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(I) || isa&lt;AddrSpaceCastInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">// If uses of the bitcast are ok, we are ok.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        ValuesToInspect.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(I, IsOffset));</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(I)) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// If the GEP has all zero indices, it doesn&#39;t offset the pointer. If it</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">// doesn&#39;t, it does.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        ValuesToInspect.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            std::make_pair(I, IsOffset || !GEP-&gt;hasAllZeroIndices()));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8d/classllvm_1_1CallSite.html">CallSite</a> CS = I) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">// If this is the function being called then we treat it like a load and</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// ignore it.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">if</span> (CS.isCallee(&amp;U))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">// Inalloca arguments are clobbered by the call.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordtype">unsigned</span> ArgNo = CS.getArgumentNo(&amp;U);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (CS.isInAllocaArgument(ArgNo))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// If this is a readonly/readnone call site, then we know it is just a</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">// load (but one that potentially returns the value itself), so we can</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="comment">// ignore it if we know that the value isn&#39;t captured.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">if</span> (CS.onlyReadsMemory() &amp;&amp;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            (CS.getInstruction()-&gt;use_empty() || CS.doesNotCapture(ArgNo)))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">// If this is being passed as a byval argument, the caller is making a</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">// copy, so it is only a read of the alloca.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (CS.isByValArgument(ArgNo))</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment">// Lifetime intrinsics can be handled by the caller.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/da2/classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::lifetime_start ||</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            II-&gt;getIntrinsicID() == Intrinsic::lifetime_end) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(II-&gt;use_empty() &amp;&amp; <span class="stringliteral">&quot;Lifetime markers have no result to use!&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          ToDelete.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(II);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="comment">// If this is isn&#39;t our memcpy/memmove, reject it as something we can&#39;t</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment">// handle.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *<a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a>&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> (!MI)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="comment">// If the transfer is using the alloca as a source of the transfer, then</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="comment">// ignore it since it is a load (unless the transfer is volatile).</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">if</span> (U.getOperandNo() == 1) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="../../df/dc7/classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">isVolatile</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// If we already have seen a copy, reject the second one.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span> (TheCopy) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="comment">// If the pointer has been offset from the start of the alloca, we can&#39;t</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="comment">// safely handle this.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> (IsOffset) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="comment">// If the memintrinsic isn&#39;t using the alloca as the dest, reject it.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (U.getOperandNo() != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="comment">// If the source of the memcpy/move is not a constant global, reject it.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a>(MI-&gt;<a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>()))</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="comment">// Otherwise, the transform is safe.  Remember the copy instruction.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      TheCopy = <a class="code" href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">MI</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_a9558faebdbb62c072aed98e33604889d"><div class="ttname"><a href="../../df/dc7/classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">llvm::MemIntrinsic::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00139">IntrinsicInst.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="../../d9/d1b/classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00152">Instructions.h:152</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a4d6752ff1d6270eefda9482e7694527c"><div class="ttname"><a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a></div><div class="ttdeci">static bool pointsToConstantGlobal(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00031">InstCombineLoadStoreAlloca.cpp:31</a></div></div>
<div class="ttc" id="LoopInfoImpl_8h_html_ab7b7f3fe4279386eae18cf924053d077"><div class="ttname"><a href="../../d1/d64/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></div><div class="ttdeci">LoopInfoBase&lt; BlockT, LoopT &gt; * LI</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/LoopInfoImpl_8h_source.html#l00412">LoopInfoImpl.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00406">SmallVector.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="../../db/dc5/classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00057">SmallVector.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="../../d0/d74/classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l00775">Instructions.h:775</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00231">IntrinsicInst.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:220</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00"><div class="ttname"><a href="../../d5/df5/namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a913fd2deccaf3e27694eefb90ffeee00">llvm::AArch64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc0/AArch64BaseInfo_8h_source.html#l00197">AArch64BaseInfo.h:197</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="../../d2/d8d/classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daf/CallSite_8h_source.html#l00350">CallSite.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="../../df/da2/classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2a19298a0f0e2e2d887daf95114fee50"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a>* isOnlyCopiedFromConstantGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dac/classllvm_1_1AllocaInst.html">AllocaInst</a> *&#160;</td>
          <td class="paramname"><em>AI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ToDelete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isOnlyCopiedFromConstantGlobal - Return true if the specified alloca is only modified by a copy from a constant global. If we can prove this, we can replace any uses of the alloca with uses of the global directly. </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00157">157</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                                         {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="../../dc/dbd/classllvm_1_1MemTransferInst.html">MemTransferInst</a> *TheCopy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a3395c705cfba0619ab922fe3f6c316e8">isOnlyCopiedFromConstantGlobal</a>(AI, TheCopy, ToDelete))</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> TheCopy;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a3395c705cfba0619ab922fe3f6c316e8"><div class="ttname"><a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a3395c705cfba0619ab922fe3f6c316e8">isOnlyCopiedFromConstantGlobal</a></div><div class="ttdeci">static bool isOnlyCopiedFromConstantGlobal(Value *V, MemTransferInst *&amp;TheCopy, SmallVectorImpl&lt; Instruction * &gt; &amp;ToDelete)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00052">InstCombineLoadStoreAlloca.cpp:52</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="../../dc/dbd/classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfe/IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d6752ff1d6270eefda9482e7694527c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pointsToConstantGlobal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>pointsToConstantGlobal - Return true if V (possibly indirectly) points to some part of a constant global variable. This intentionally only accepts constant expressions because we can't rewrite arbitrary instructions. </p>

<p>Definition at line <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00031">31</a> of file <a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html">InstCombineLoadStoreAlloca.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                             {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/dd3/classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(V))</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">return</span> GV-&gt;isConstant();</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V)) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::BitCast ||</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        CE-&gt;getOpcode() == Instruction::AddrSpaceCast ||</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        CE-&gt;getOpcode() == Instruction::GetElementPtr)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a>(CE-&gt;getOperand(0));</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a4d6752ff1d6270eefda9482e7694527c"><div class="ttname"><a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a></div><div class="ttdeci">static bool pointsToConstantGlobal(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp_source.html#l00031">InstCombineLoadStoreAlloca.cpp:31</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="../../db/dd3/classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcc/GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a625d5d622944254b7dbb70dd891e93c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumDeadStore&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of dead stores eliminated&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6867ac335953146c3413957d424db70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumGlobalCopies&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of allocas copied from constant global&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_e1730ad7494653d691c84cfe5a5126ce.html">InstCombine</a></li><li class="navelem"><a class="el" href="../../d1/d7d/InstCombineLoadStoreAlloca_8cpp.html">InstCombineLoadStoreAlloca.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:58 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
