<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: InstCombineCasts.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/df6/InstCombineCasts_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">InstCombineCasts.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../da/d79/InstCombine_8h_source.html">InstCombine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d0a/ConstantFolding_8h_source.html">llvm/Analysis/ConstantFolding.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d19/DataLayout_8h_source.html">llvm/IR/DataLayout.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d65/PatternMatch_8h_source.html">llvm/IR/PatternMatch.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d1a/TargetLibraryInfo_8h_source.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</code><br/>
</div>
<p><a href="../../de/df6/InstCombineCasts_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;instcombine&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a865e260a33c703d12c88d6fa42f1afb9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a865e260a33c703d12c88d6fa42f1afb9">DecomposeSimpleLinearExpr</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Val, unsigned &amp;Scale, uint64_t &amp;Offset)</td></tr>
<tr class="separator:a865e260a33c703d12c88d6fa42f1afb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b642362414a2d9d1c0419b8ce72210"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a37b642362414a2d9d1c0419b8ce72210">isEliminableCastPair</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/dcc/classllvm_1_1CastInst.html">CastInst</a> *CI, unsigned opcode, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DstTy, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *<a class="el" href="../../df/dca/GlobalMerge_8cpp.html#a7f7b8906dab43d37c78e10eafe4c424f">DL</a>)</td></tr>
<tr class="separator:a37b642362414a2d9d1c0419b8ce72210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd17099ed520f179e5b481db961e0e1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="separator:a6fd17099ed520f179e5b481db961e0e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b384f8e288556dc7732b655b848692"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, unsigned &amp;BitsToClear)</td></tr>
<tr class="separator:a39b384f8e288556dc7732b655b848692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0001ad4269d3a92e51c5f8371b38364e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="separator:a0001ad4269d3a92e51c5f8371b38364e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7805b3730b5c1e081569451763e93ae"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#ad7805b3730b5c1e081569451763e93ae">FitsInFPType</a> (<a class="el" href="../../dc/da0/classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/d5a/structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem)</td></tr>
<tr class="separator:ad7805b3730b5c1e081569451763e93ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add636d783011465334249e1e4c64d09b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#add636d783011465334249e1e4c64d09b">LookThroughFPExtensions</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V)</td></tr>
<tr class="separator:add636d783011465334249e1e4c64d09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb5a7eff32dd4405f0e795ba98bdbc4e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#acb5a7eff32dd4405f0e795ba98bdbc4e">OptimizeVectorResize</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *InVal, <a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *DestTy, <a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC)</td></tr>
<tr class="separator:acb5a7eff32dd4405f0e795ba98bdbc4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8efab72b40fc7836709221d3e97139c6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a> (unsigned <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="separator:a8efab72b40fc7836709221d3e97139c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8947451998676abcce5452a1a8f5848"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a> (unsigned <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="separator:ac8947451998676abcce5452a1a8f5848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe93395b9183a889129e0c8158337486"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a> (<a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V, unsigned Shift, <a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;Elements, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *VecEltTy, <a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC)</td></tr>
<tr class="separator:abe93395b9183a889129e0c8158337486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a534902f6fff593cf4b50232cc58c580a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#a534902f6fff593cf4b50232cc58c580a">OptimizeIntegerToVectorInsertions</a> (<a class="el" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI, <a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC)</td></tr>
<tr class="separator:a534902f6fff593cf4b50232cc58c580a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac50270ed32cec6a5d8ec24e524846b13"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html#ac50270ed32cec6a5d8ec24e524846b13">OptimizeIntToFloatBitCast</a> (<a class="el" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI, <a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC)</td></tr>
<tr class="separator:ac50270ed32cec6a5d8ec24e524846b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;instcombine&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00022">22</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0001ad4269d3a92e51c5f8371b38364e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CanEvaluateSExtd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CanEvaluateSExtd - Return true if we can take the specified value and return it as type Ty without inserting any new casts and without changing the value of the common low bits. This is used by code that tries to promote integer operations to a wider types will allow us to eliminate the extension.</p>
<p>This function works on both vectors and scalars. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00984">984</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                                 {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &lt; Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &amp;&amp;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         <span class="stringliteral">&quot;Can&#39;t sign extend type to a smaller type&quot;</span>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// If this is a constant, it can be trivially promoted.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// If this is a truncate from the dest type, we can trivially eliminate it.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(I) &amp;&amp; I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Ty)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// We can&#39;t extend or shrink something that has multiple uses: doing so would</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// require duplicating the instruction in general, which isn&#39;t profitable.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:  <span class="comment">// sext(sext(x)) -&gt; sext(x)</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:  <span class="comment">// sext(zext(x)) -&gt; zext(x)</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc: <span class="comment">// sext(trunc(x)) -&gt; trunc(x) or sext(x)</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">// These operators can all arbitrarily be extended if their inputs can.</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty) &amp;&amp;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;           <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">//case Instruction::Shl:   TODO</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">//case Instruction::LShr:  TODO</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>:</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty) &amp;&amp;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;           <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), Ty);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>: {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i), Ty)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a0001ad4269d3a92e51c5f8371b38364e"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a0001ad4269d3a92e51c5f8371b38364e">CanEvaluateSExtd</a></div><div class="ttdeci">static bool CanEvaluateSExtd(Value *V, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00984">InstCombineCasts.cpp:984</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01875">APInt.h:1875</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6fd17099ed520f179e5b481db961e0e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CanEvaluateTruncated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CanEvaluateTruncated - Return true if we can evaluate the specified expression tree as type Ty instead of its larger type, and arrive with the same value. This is used by code that tries to eliminate truncates.</p>
<p>Ty will always be a type smaller than V. We should return true if trunc(V) can be computed by computing V in the smaller type. If V is an instruction, then trunc(inst(x,y)) can be computed as inst(trunc(x),trunc(y)), which only makes sense if x and y can be efficiently truncated.</p>
<p>This function works on both vectors and scalars. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00338">338</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                     {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// We can always evaluate constants in another type.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *OrigTy = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// If this is an extension from the dest type, we can eliminate it, even if it</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// has multiple uses.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> ((isa&lt;ZExtInst&gt;(I) || isa&lt;SExtInst&gt;(I)) &amp;&amp;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Ty)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// We can&#39;t extend or shrink something that has multiple uses: doing so would</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// require duplicating the instruction in general, which isn&#39;t profitable.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordtype">unsigned</span> Opc = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// These operators can all arbitrarily be extended or truncated.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty) &amp;&amp;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;           <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">case</span> Instruction::URem: {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// UDiv and URem can be truncated if all the truncated bits are zero.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    uint32_t OrigBitWidth = OrigTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    uint32_t BitWidth = Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (BitWidth &lt; OrigBitWidth) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> Mask = APInt::getHighBitsSet(OrigBitWidth, OrigBitWidth-BitWidth);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">MaskedValueIsZero</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Mask) &amp;&amp;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          <a class="code" href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">MaskedValueIsZero</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Mask)) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty) &amp;&amp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;               <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// If we are truncating the result of this SHL, and if it&#39;s a shift of a</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// constant amount, we can always perform a SHL in a smaller type.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      uint32_t BitWidth = Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;getLimitedValue(BitWidth) &lt; BitWidth)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// If this is a truncate of a logical shr, we can truncate it to a smaller</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// lshr iff we know that the bits we would otherwise be shifting in are</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// already zeros.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      uint32_t OrigBitWidth = OrigTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      uint32_t BitWidth = Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">MaskedValueIsZero</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            APInt::getHighBitsSet(OrigBitWidth, OrigBitWidth-BitWidth)) &amp;&amp;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          CI-&gt;getLimitedValue(BitWidth) &lt; BitWidth) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// trunc(trunc(x)) -&gt; trunc(x)</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// trunc(ext(x)) -&gt; ext(x) if the source type is smaller than the new dest</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// trunc(ext(x)) -&gt; trunc(x) if the source type is larger than the new dest</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>: {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html">SelectInst</a> *SI = cast&lt;SelectInst&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(SI-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>(), Ty) &amp;&amp;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;           <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(SI-&gt;<a class="code" href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>(), Ty);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>: {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i), Ty))</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a6fd17099ed520f179e5b481db961e0e1"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a6fd17099ed520f179e5b481db961e0e1">CanEvaluateTruncated</a></div><div class="ttdeci">static bool CanEvaluateTruncated(Value *V, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00338">InstCombineCasts.cpp:338</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01875">APInt.h:1875</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01565">Instructions.h:1565</a></div></div>
<div class="ttc" id="namespacellvm_html_aced442bb19fda71fd4883c90d240975a"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(Value *V, const APInt &amp;Mask, const DataLayout *TD=nullptr, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01116">ValueTracking.cpp:1116</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="../../d1/dd2/classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01566">Instructions.h:1566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a39b384f8e288556dc7732b655b848692"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CanEvaluateZExtd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>BitsToClear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CanEvaluateZExtd - Determine if the specified value can be computed in the specified wider type and produce the same low bits. If not, return false.</p>
<p>If this function returns true, it can also return a non-zero number of bits (in BitsToClear) which indicates that the value it computes is correct for the zero extend, but that the additional BitsToClear bits need to be zero'd out. For example, to promote something like:</p>
<p>B = trunc i64 A to i32 C = lshr i32 B, 8 E = zext i32 C to i64</p>
<p>CanEvaluateZExtd for the 'lshr' will return true, and BitsToClear will be set to 8 to indicate that the promoted value needs to have bits 24-31 cleared in addition to bits 32-63. Since an 'and' will be generated to clear the top bits anyway, doing this has no extra cost.</p>
<p>This function works on both vectors and scalars. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00654">654</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                                                                        {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  BitsToClear = 0;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// If the input is a truncate from the destination type, we can trivially</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// eliminate it.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(I) &amp;&amp; I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Ty)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// We can&#39;t extend or shrink something that has multiple uses: doing so would</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// require duplicating the instruction in general, which isn&#39;t profitable.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordtype">unsigned</span> Opc = I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), Tmp;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:  <span class="comment">// zext(zext(x)) -&gt; zext(x).</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:  <span class="comment">// zext(sext(x)) -&gt; sext(x).</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc: <span class="comment">// zext(trunc(x)) -&gt; trunc(x) or zext(x)</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty, BitsToClear) ||</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        !<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty, Tmp))</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// These can all be promoted if neither operand has &#39;bits to clear&#39;.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">if</span> (BitsToClear == 0 &amp;&amp; Tmp == 0)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">// If the operation is an AND/OR/XOR and the bits to clear are zero in the</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// other side, BitsToClear is ok.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (Tmp == 0 &amp;&amp;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        (Opc == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> || Opc == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a> ||</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         Opc == <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>)) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="comment">// We use MaskedValueIsZero here for generality, but the case we care</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="comment">// about the most is constant RHS.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordtype">unsigned</span> VSize = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">MaskedValueIsZero</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                            APInt::getHighBitsSet(VSize, BitsToClear)))</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// Otherwise, we don&#39;t know how to analyze this BitsToClear case yet.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// We can promote shl(x, cst) if we can promote x.  Since shl overwrites the</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// upper bits we can reduce BitsToClear by the shift amount.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty, BitsToClear))</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      uint64_t ShiftAmt = Amt-&gt;getZExtValue();</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      BitsToClear = ShiftAmt &lt; BitsToClear ? BitsToClear - ShiftAmt : 0;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// We can promote lshr(x, cst) if we can promote x.  This requires the</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// ultimate &#39;and&#39; to clear out the high zero bits we&#39;re clearing out though.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Ty, BitsToClear))</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      BitsToClear += Amt-&gt;getZExtValue();</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">if</span> (BitsToClear &gt; V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        BitsToClear = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// Cannot promote variable LSHR.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Ty, Tmp) ||</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        !<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), Ty, BitsToClear) ||</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="comment">// TODO: If important, we could handle the case when the BitsToClear are</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment">// known zero in the disagreeing side.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        Tmp != BitsToClear)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>: {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../da/d4a/classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(0), Ty, BitsToClear))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); i != e; ++i)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a>(PN-&gt;<a class="code" href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(i), Ty, Tmp) ||</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;          <span class="comment">// TODO: If important, we could handle the case when the BitsToClear</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;          <span class="comment">// are known zero in the disagreeing input.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;          Tmp != BitsToClear)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02076">Instructions.h:2076</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a39b384f8e288556dc7732b655b848692"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a39b384f8e288556dc7732b655b848692">CanEvaluateZExtd</a></div><div class="ttdeci">static bool CanEvaluateZExtd(Value *V, Type *Ty, unsigned &amp;BitsToClear)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00654">InstCombineCasts.cpp:654</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="../../de/d6e/namespacellvm_1_1MCID.html#a8b4809c6a85f035770c6b8b5df19c7a1a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02154">Instructions.h:2154</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01875">APInt.h:1875</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="namespacellvm_html_aced442bb19fda71fd4883c90d240975a"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#aced442bb19fda71fd4883c90d240975a">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(Value *V, const APInt &amp;Mask, const DataLayout *TD=nullptr, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l01116">ValueTracking.cpp:1116</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="../../da/d4a/classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l02158">Instructions.h:2158</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="../../d0/dea/namespacellvm_1_1TargetOpcode.html#af471f4e1c42e2028cc668e6f61883e43ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe93395b9183a889129e0c8158337486"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CollectInsertionElements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Shift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d30/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Elements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>VecEltTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CollectInsertionElements - V is a value which is inserted into a vector of VecEltTy. Look through the value to see if we can decompose it into insertions into the vector. See the example in the comment for OptimizeIntegerToVectorInsertions for the pattern this handles. The type of V is always a non-zero multiple of VecEltTy's size. Shift is the number of bits between the lsb of V and the lsb of the vector.</p>
<p>This returns false if the pattern can't be matched or true if it can, filling in Elements with the elements found here. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01587">1587</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                                                                       {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(Shift, VecEltTy) &amp;&amp;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;         <span class="stringliteral">&quot;Shift should be a multiple of the element type size&quot;</span>);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">// Undef values never contribute useful bits to the result.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// If we got down to a value of the right type, we win, try inserting into the</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// right element.</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == VecEltTy) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// Inserting null doesn&#39;t actually insert any elements.</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/structC.html">C</a>-&gt;isNullValue())</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordtype">unsigned</span> ElementIndex = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a>(Shift, VecEltTy);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      ElementIndex = Elements.<a class="code" href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() - ElementIndex - 1;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// Fail if multiple elements are inserted into this slot.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> (Elements[ElementIndex])</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    Elements[ElementIndex] = V;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// Figure out the # elements this provides, and bitcast it or slice it up</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// as required.</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordtype">unsigned</span> NumElts = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a>(<a class="code" href="../../db/db2/structC.html">C</a>-&gt;getType()-&gt;getPrimitiveSizeInBits(),</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                                        VecEltTy);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// If the constant is the size of a vector element, we just need to bitcast</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// it to the right type so it gets properly inserted.</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> (NumElts == 1)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(ConstantExpr::getBitCast(<a class="code" href="../../db/db2/structC.html">C</a>, VecEltTy),</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                                      Shift, Elements, VecEltTy, IC);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// Okay, this is a constant that covers multiple elements.  Slice it up into</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="comment">// pieces and insert each element-sized piece into the vector.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;IntegerType&gt;(<a class="code" href="../../db/db2/structC.html">C</a>-&gt;getType()))</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <a class="code" href="../../db/db2/structC.html">C</a> = ConstantExpr::getBitCast(<a class="code" href="../../db/db2/structC.html">C</a>, IntegerType::get(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                                       <a class="code" href="../../db/db2/structC.html">C</a>-&gt;getType()-&gt;getPrimitiveSizeInBits()));</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordtype">unsigned</span> ElementSize = VecEltTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElementIntTy = IntegerType::get(<a class="code" href="../../db/db2/structC.html">C</a>-&gt;getContext(), ElementSize);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != NumElts; ++i) {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordtype">unsigned</span> ShiftI = Shift+i*ElementSize;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Piece = ConstantExpr::getLShr(<a class="code" href="../../db/db2/structC.html">C</a>, ConstantInt::get(<a class="code" href="../../db/db2/structC.html">C</a>-&gt;getType(),</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                                                                  ShiftI));</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      Piece = ConstantExpr::getTrunc(Piece, ElementIntTy);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(Piece, ShiftI, Elements, VecEltTy, IC))</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="keywordflow">if</span> (!I) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Unhandled case.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Shift,</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                                    Elements, VecEltTy, IC);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                          I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>(),</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                              VecEltTy))</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Shift,</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                                    Elements, VecEltTy, IC);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Shift,</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                                    Elements, VecEltTy, IC) &amp;&amp;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;           <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Shift,</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                                    Elements, VecEltTy, IC);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="comment">// Must be shifting by a constant that is a multiple of the element size.</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (!CI) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    Shift += CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(Shift, VecEltTy)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(I-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Shift,</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                                    Elements, VecEltTy, IC);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="../../d4/d68/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00128">SmallVector.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_ac8947451998676abcce5452a1a8f5848"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a></div><div class="ttdeci">static unsigned getTypeSizeIndex(unsigned Value, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01573">InstCombineCasts.cpp:1573</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a8efab72b40fc7836709221d3e97139c6"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a></div><div class="ttdeci">static bool isMultipleOfTypeSize(unsigned Value, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01569">InstCombineCasts.cpp:1569</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00284">Value.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af8f657fc986a24024180134169326225"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00117">InstCombine.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_abe93395b9183a889129e0c8158337486"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a></div><div class="ttdeci">static bool CollectInsertionElements(Value *V, unsigned Shift, SmallVectorImpl&lt; Value * &gt; &amp;Elements, Type *VecEltTy, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01587">InstCombineCasts.cpp:1587</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a865e260a33c703d12c88d6fa42f1afb9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* DecomposeSimpleLinearExpr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>Scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>Offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>DecomposeSimpleLinearExpr - Analyze 'Val', seeing if it is a simple linear expression. If so, decompose it, returning some value X, such that Val is X*Scale+Offset. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00028">28</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                          {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Val)) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    Offset = CI-&gt;getZExtValue();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    Scale  = 0;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">return</span> ConstantInt::get(Val-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 0);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d24/classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;BinaryOperator&gt;(Val)) {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// Cannot look past anything that might overflow.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html">OverflowingBinaryOperator</a> *OBI = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html">OverflowingBinaryOperator</a>&gt;(Val);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span> (OBI &amp;&amp; !OBI-&gt;<a class="code" href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html#abe8af726db43885a1178cf75ed0725d9">hasNoUnsignedWrap</a>() &amp;&amp; !OBI-&gt;<a class="code" href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html#a5a1ebefdf12a23a94f8a135cdfa0cd90">hasNoSignedWrap</a>()) {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      Scale = 1;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      Offset = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1))) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Shl) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="comment">// This is a value scaled by &#39;1 &lt;&lt; the shift amt&#39;.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        Scale = UINT64_C(1) &lt;&lt; RHS-&gt;getZExtValue();</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        Offset = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Mul) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="comment">// This value is scaled by &#39;RHS&#39;.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        Scale = RHS-&gt;getZExtValue();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        Offset = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Add) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">// We have X+C.  Check to see if we really have (X*C2)+C1,</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">// where C1 is divisible by C2.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordtype">unsigned</span> SubScale;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *SubVal =</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;          <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a865e260a33c703d12c88d6fa42f1afb9">DecomposeSimpleLinearExpr</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), SubScale, Offset);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        Offset += RHS-&gt;getZExtValue();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        Scale = SubScale;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> SubVal;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// Otherwise, we can&#39;t look past this.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  Scale = 1;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  Offset = 0;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1OverflowingBinaryOperator_html_a5a1ebefdf12a23a94f8a135cdfa0cd90"><div class="ttname"><a href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html#a5a1ebefdf12a23a94f8a135cdfa0cd90">llvm::OverflowingBinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00107">Operator.h:107</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a865e260a33c703d12c88d6fa42f1afb9"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a865e260a33c703d12c88d6fa42f1afb9">DecomposeSimpleLinearExpr</a></div><div class="ttdeci">static Value * DecomposeSimpleLinearExpr(Value *Val, unsigned &amp;Scale, uint64_t &amp;Offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00028">InstCombineCasts.cpp:28</a></div></div>
<div class="ttc" id="classllvm_1_1OverflowingBinaryOperator_html"><div class="ttname"><a href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html">llvm::OverflowingBinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00079">Operator.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="../../d0/d24/classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1OverflowingBinaryOperator_html_abe8af726db43885a1178cf75ed0725d9"><div class="ttname"><a href="../../d8/df5/classllvm_1_1OverflowingBinaryOperator.html#abe8af726db43885a1178cf75ed0725d9">llvm::OverflowingBinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00101">Operator.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad7805b3730b5c1e081569451763e93ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* FitsInFPType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/da0/classllvm_1_1ConstantFP.html">ConstantFP</a> *&#160;</td>
          <td class="paramname"><em>CFP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/d5a/structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;&#160;</td>
          <td class="paramname"><em>Sem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FitsInFPType - Return a Constant* for the specified FP constant if it fits in the specified FP type without changing its value. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01133">1133</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                                                        {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordtype">bool</span> losesInfo;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="../../df/d77/classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = CFP-&gt;<a class="code" href="../../dc/da0/classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">getValueAPF</a>();</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  (void)F.<a class="code" href="../../df/d77/classllvm_1_1APFloat.html#a4fa2f1464bb4f645082d8aa0e0a9bc0e">convert</a>(Sem, APFloat::rmNearestTiesToEven, &amp;losesInfo);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">if</span> (!losesInfo)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">return</span> ConstantFP::get(CFP-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), <a class="code" href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;}</div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="../../d2/d14/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1APFloat_html"><div class="ttname"><a href="../../df/d77/classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdoc">A self-contained host- and target-independent arbitrary-precision floating-point software implementat...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/APFloat_8h_source.html#l00122">APFloat.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4fa2f1464bb4f645082d8aa0e0a9bc0e"><div class="ttname"><a href="../../df/d77/classllvm_1_1APFloat.html#a4fa2f1464bb4f645082d8aa0e0a9bc0e">llvm::APFloat::convert</a></div><div class="ttdeci">opStatus convert(const fltSemantics &amp;, roundingMode, bool *)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dab/APFloat_8cpp_source.html#l01958">APFloat.cpp:1958</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_a0f839f7633a4709c1d89e128f49b3d43"><div class="ttname"><a href="../../dc/da0/classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00263">Constants.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8947451998676abcce5452a1a8f5848"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned getTypeSizeIndex </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01573">1573</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                                                           {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> / Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37b642362414a2d9d1c0419b8ce72210"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> isEliminableCastPair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/dcc/classllvm_1_1CastInst.html">CastInst</a> *&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DstTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../de/d3a/classllvm_1_1DataLayout.html">DataLayout</a> *&#160;</td>
          <td class="paramname"><em>DL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is a wrapper around CastInst::isEliminableCastPair. It simply extracts arguments and returns what that function returns. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CI</td><td>The first cast instruction </td></tr>
    <tr><td class="paramname">opcode</td><td>The opcode of the second cast instruction </td></tr>
    <tr><td class="paramname">DstTy</td><td>The target type for the second cast instruction </td></tr>
    <tr><td class="paramname">DL</td><td>The target data for pointer size </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l00237">237</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcTy = CI-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();   <span class="comment">// A from above</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *MidTy = CI-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();                  <span class="comment">// B from above</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Get the opcodes of the two Cast instructions</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> firstOp = <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(CI-&gt;<a class="code" href="../../de/dcc/classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> secondOp = <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(opcode);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcIntPtrTy = DL &amp;&amp; SrcTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>() ?</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(SrcTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *MidIntPtrTy = DL &amp;&amp; MidTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>() ?</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(MidTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DstIntPtrTy = DL &amp;&amp; DstTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>() ?</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    DL-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(DstTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">unsigned</span> Res = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a37b642362414a2d9d1c0419b8ce72210">CastInst::isEliminableCastPair</a>(firstOp, secondOp, SrcTy, MidTy,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                                DstTy, SrcIntPtrTy, MidIntPtrTy,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                                DstIntPtrTy);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// We don&#39;t want to form an inttoptr or ptrtoint that converts to an integer</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// type that differs from the pointer size.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> ((Res == Instruction::IntToPtr &amp;&amp; SrcTy != DstIntPtrTy) ||</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      (Res == Instruction::PtrToInt &amp;&amp; DstTy != SrcIntPtrTy))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    Res = 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(Res);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1CastInst_html_adc3489e61d5f37a0e4c5589859fbccc2"><div class="ttname"><a href="../../de/dcc/classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const </div><div class="ttdoc">Return the opcode of this CastInst. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/InstrTypes_8h_source.html#l00624">InstrTypes.h:624</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ac830a02a025d9d5a5dc53c444cf625ee"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00419">Instruction.h:419</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d66/DataLayout_8cpp_source.html#l00703">DataLayout.cpp:703</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a37b642362414a2d9d1c0419b8ce72210"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a37b642362414a2d9d1c0419b8ce72210">isEliminableCastPair</a></div><div class="ttdeci">static Instruction::CastOps isEliminableCastPair(const CastInst *CI, unsigned opcode, Type *DstTy, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00237">InstCombineCasts.cpp:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8efab72b40fc7836709221d3e97139c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isMultipleOfTypeSize </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>Value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01569">1569</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                                           {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> % Ty-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() == 0;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add636d783011465334249e1e4c64d09b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* LookThroughFPExtensions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>V</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LookThroughFPExtensions - If this is an fp extension instruction, look through it until we get the source value. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01144">1144</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                                                {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::FPExt)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#add636d783011465334249e1e4c64d09b">LookThroughFPExtensions</a>(<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// If this value is a constant, return the constant in the smallest FP type</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// that can accurately represent it.  This allows us to turn</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// (float)((double)X+2.0) into x+2.0f.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da0/classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP = dyn_cast&lt;ConstantFP&gt;(V)) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (CFP-&gt;getType() == Type::getPPC_FP128Ty(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()))</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keywordflow">return</span> V;  <span class="comment">// No constant folding of this.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// See if the value can be truncated to half and then reextended.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#ad7805b3730b5c1e081569451763e93ae">FitsInFPType</a>(CFP, APFloat::IEEEhalf))</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// See if the value can be truncated to float and then reextended.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#ad7805b3730b5c1e081569451763e93ae">FitsInFPType</a>(CFP, APFloat::IEEEsingle))</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordflow">if</span> (CFP-&gt;getType()-&gt;isDoubleTy())</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="keywordflow">return</span> V;  <span class="comment">// Won&#39;t shrink.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *V = <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#ad7805b3730b5c1e081569451763e93ae">FitsInFPType</a>(CFP, APFloat::IEEEdouble))</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// Don&#39;t try to shrink to various long double types.</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div>
<div class="ttc" id="InstCombineCasts_8cpp_html_add636d783011465334249e1e4c64d09b"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#add636d783011465334249e1e4c64d09b">LookThroughFPExtensions</a></div><div class="ttdeci">static Value * LookThroughFPExtensions(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01144">InstCombineCasts.cpp:1144</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_ad7805b3730b5c1e081569451763e93ae"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#ad7805b3730b5c1e081569451763e93ae">FitsInFPType</a></div><div class="ttdeci">static Constant * FitsInFPType(ConstantFP *CFP, const fltSemantics &amp;Sem)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01133">InstCombineCasts.cpp:1133</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00032">Instruction.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="../../dc/da0/classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a534902f6fff593cf4b50232cc58c580a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a>* OptimizeIntegerToVectorInsertions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeIntegerToVectorInsertions - If the input is an 'or' instruction, we may be doing shifts and ors to assemble the elements of the vector manually. Try to rip the code out and replace it with insertelements. This is to optimize code like this:</p>
<p>tmp37 = bitcast float inc to i32 tmp38 = zext i32 tmp37 to i64 tmp31 = bitcast float inc5 to i32 tmp32 = zext i32 tmp31 to i64 tmp33 = shl i64 tmp32, 32 ins35 = or i64 tmp33, tmp38 tmp43 = bitcast i64 ins35 to &lt;2 x float&gt;</p>
<p>Into two insertelements that do "buildvector{%inc, %inc5}". </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01695">1695</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                                                                  {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// We need to know the target byte order to perform this optimization.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keywordflow">if</span> (!IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *DestVecTy = cast&lt;VectorType&gt;(CI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *IntInput = CI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Elements(DestVecTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>());</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a>(IntInput, 0, Elements,</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                                DestVecTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>(), IC))</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="comment">// If we succeeded, we know that all of the element are specified by Elements</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">// or are zero if Elements has a null entry.  Recast this as a set of</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="comment">// insertions.</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Result = Constant::getNullValue(CI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Elements.size(); i != e; ++i) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span> (!Elements[i]) <span class="keywordflow">continue</span>;  <span class="comment">// Unset element.</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    Result = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a40e48df9196b3c092096138cd9af8465">CreateInsertElement</a>(Result, Elements[i],</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                                             IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(i));</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a40e48df9196b3c092096138cd9af8465"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a40e48df9196b3c092096138cd9af8465">llvm::IRBuilder::CreateInsertElement</a></div><div class="ttdeci">Value * CreateInsertElement(Value *Vec, Value *NewElt, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01398">IRBuilder.h:1398</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00276">IRBuilder.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af8f657fc986a24024180134169326225"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00117">InstCombine.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_abe93395b9183a889129e0c8158337486"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#abe93395b9183a889129e0c8158337486">CollectInsertionElements</a></div><div class="ttdeci">static bool CollectInsertionElements(Value *V, unsigned Shift, SmallVectorImpl&lt; Value * &gt; &amp;Elements, Type *VecEltTy, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l01587">InstCombineCasts.cpp:1587</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac50270ed32cec6a5d8ec24e524846b13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>* OptimizeIntToFloatBitCast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d63/classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;&#160;</td>
          <td class="paramname"><em>CI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeIntToFloatBitCast - See if we can optimize an integer-&gt;float/double bitcast. The various long double bitcasts can't get in here. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01725">1725</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                                                                               {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// We need to know the target byte order to perform this optimization.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">if</span> (!IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestTy = CI.<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="comment">// If this is a bitcast from int to float, check to see if the int is an</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">// extraction from a vector.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *VecInput = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="comment">// bitcast(trunc(bitcast(somevector)))</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecInput)))) &amp;&amp;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      isa&lt;VectorType&gt;(VecInput-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = cast&lt;VectorType&gt;(VecInput-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordtype">unsigned</span> DestWidth = DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="keywordflow">if</span> (VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() % DestWidth == 0) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="comment">// If the element type of the vector doesn&#39;t match the result type,</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="comment">// bitcast it to be a vector type we can extract from.</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="keywordflow">if</span> (VecTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>() != DestTy) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        VecTy = VectorType::get(DestTy,</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                                VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() / DestWidth);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        VecInput = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(VecInput, VecTy);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="keywordtype">unsigned</span> Elt = 0;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        Elt = VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() / DestWidth - 1;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">ExtractElementInst::Create</a>(VecInput, IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(Elt));</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// bitcast(trunc(lshr(bitcast(somevector), cst))</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *ShAmt = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecInput)),</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                                <a class="code" href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(ShAmt)))) &amp;&amp;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      isa&lt;VectorType&gt;(VecInput-&gt;getType())) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VecTy = cast&lt;VectorType&gt;(VecInput-&gt;getType());</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordtype">unsigned</span> DestWidth = DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">if</span> (VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() % DestWidth == 0 &amp;&amp;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        ShAmt-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() % DestWidth == 0) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="comment">// If the element type of the vector doesn&#39;t match the result type,</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="comment">// bitcast it to be a vector type we can extract from.</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">if</span> (VecTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>() != DestTy) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        VecTy = VectorType::get(DestTy,</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                                VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() / DestWidth);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        VecInput = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(VecInput, VecTy);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordtype">unsigned</span> Elt = ShAmt-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() / DestWidth;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">getDataLayout</a>()-&gt;<a class="code" href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        Elt = VecTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() / DestWidth - 1 - Elt;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">ExtractElementInst::Create</a>(VecInput, IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(Elt));</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">m_Trunc </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00768">PatternMatch.h:768</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00491">PatternMatch.h:491</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="../../d8/d9f/namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">m_BitCast </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d65/PatternMatch_8h_source.html#l00754">PatternMatch.h:754</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01158">IRBuilder.h:1158</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="../../d4/db6/classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l00276">IRBuilder.h:276</a></div></div>
<div class="ttc" id="llvm-ar_8cpp_html_afdde8653309ceae1b97f0328e2d1a465"><div class="ttname"><a href="../../dc/dc6/llvm-ar_8cpp.html#afdde8653309ceae1b97f0328e2d1a465">Create</a></div><div class="ttdeci">static bool Create</div><div class="ttdoc">&#39;c&#39; modifier </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc6/llvm-ar_8cpp_source.html#l00117">llvm-ar.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af8f657fc986a24024180134169326225"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#af8f657fc986a24024180134169326225">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00117">InstCombine.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="../../de/d3a/classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/DataLayout_8h_source.html#l00210">DataLayout.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb5a7eff32dd4405f0e795ba98bdbc4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/d88/classllvm_1_1Instruction.html">Instruction</a>* OptimizeVectorResize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *&#160;</td>
          <td class="paramname"><em>InVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *&#160;</td>
          <td class="paramname"><em>DestTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dc0/classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;&#160;</td>
          <td class="paramname"><em>IC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>OptimizeVectorResize - This input value (which is known to have vector type) is being zero extended or truncated to the specified vector type. Try to replace it with a shuffle (and vector/vector bitcast) if possible.</p>
<p>The source and destination vector types may have different element types. </p>

<p>Definition at line <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html#l01517">1517</a> of file <a class="el" href="../../de/df6/InstCombineCasts_8cpp_source.html">InstCombineCasts.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                                                           {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// We can only do this optimization if the output is a multiple of the input</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// element size, or the input is a multiple of the output element size.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// Convert the input type to have the same element type as the output.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *SrcTy = cast&lt;VectorType&gt;(InVal-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>() != DestTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="comment">// The input types don&#39;t need to be identical, but for now they must be the</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">// same size.  There is no specific reason we couldn&#39;t handle things like</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// &lt;4 x i16&gt; -&gt; &lt;4 x i32&gt; by bitcasting to &lt;2 x i32&gt; but haven&#39;t gotten</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// there yet.</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>() !=</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        DestTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>())</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    SrcTy = VectorType::get(DestTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>(), SrcTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>());</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    InVal = IC.<a class="code" href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(InVal, SrcTy);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="comment">// Now that the element types match, get the shuffle mask and RHS of the</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="comment">// shuffle to use, which depends on whether we&#39;re increasing or decreasing the</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="comment">// size of the input.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 16&gt;</a> ShuffleMask;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *<a class="code" href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>() &gt; DestTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>()) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="comment">// If we&#39;re shrinking the number of elements, just shuffle in the low</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// elements from the input and use undef as the second shuffle input.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    V2 = UndefValue::get(SrcTy);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = DestTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>(); i != e; ++i)</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      ShuffleMask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(i);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="comment">// If we&#39;re increasing the number of elements, shuffle in all of the</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// elements from InVal and fill the rest of the result elements with zeros</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// from a constant zero.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    V2 = Constant::getNullValue(SrcTy);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordtype">unsigned</span> SrcElts = SrcTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = SrcElts; i != e; ++i)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      ShuffleMask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(i);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// The excess elements reference the first element of the zero input.</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = DestTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>()-SrcElts; i != e; ++i)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      ShuffleMask.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SrcElts);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../da/da0/classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(InVal, V2,</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                               ConstantDataVector::get(V2-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                                                       ShuffleMask));</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0f/NVPTX_8h_source.html#l00131">NVPTX.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="../../da/da0/classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/Instructions_8h_source.html#l01758">Instructions.h:1758</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="../../d5/dc0/classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d79/InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="../../d9/df8/classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/IRBuilder_8h_source.html#l01158">IRBuilder.h:1158</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector&lt; uint32_t, 16 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_5c496d779f2cb0b9e39446f1a293372b.html">Transforms</a></li><li class="navelem"><a class="el" href="../../dir_e1730ad7494653d691c84cfe5a5126ce.html">InstCombine</a></li><li class="navelem"><a class="el" href="../../de/df6/InstCombineCasts_8cpp.html">InstCombineCasts.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:58 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
