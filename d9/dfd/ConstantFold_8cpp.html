<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>legup-4.0: ConstantFold.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">legup-4.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d9/dfd/ConstantFold_8cpp.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ConstantFold.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/da5/ConstantFold_8h_source.html">ConstantFold.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../de/d33/SmallVector_8h_source.html">llvm/ADT/SmallVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/d45/Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/df5/DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/df5/Function_8h_source.html">llvm/IR/Function.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html">llvm/IR/GetElementPtrTypeIterator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/d9c/GlobalAlias_8h_source.html">llvm/IR/GlobalAlias.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../df/dcc/GlobalVariable_8h_source.html">llvm/IR/GlobalVariable.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d9/dd5/Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/ddf/Operator_8h_source.html">llvm/IR/Operator.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d3/d2c/Compiler_8h_source.html">llvm/Support/Compiler.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d3f/ErrorHandling_8h_source.html">llvm/Support/ErrorHandling.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../db/d92/ManagedStatic_8h_source.html">llvm/Support/ManagedStatic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/dab/MathExtras_8h_source.html">llvm/Support/MathExtras.h</a>&quot;</code><br/>
<code>#include &lt;limits&gt;</code><br/>
</div>
<p><a href="../../d9/dfd/ConstantFold_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2487a58853a5b267e639d31ca3661161"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a2487a58853a5b267e639d31ca3661161">BitCastConstantVector</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *CV, <a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *DstTy)</td></tr>
<tr class="separator:a2487a58853a5b267e639d31ca3661161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c03a4228af93098afb6ab60e7283f6"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a08c03a4228af93098afb6ab60e7283f6">foldConstantCastPair</a> (unsigned opc, <a class="el" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *Op, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DstTy)</td></tr>
<tr class="memdesc:a08c03a4228af93098afb6ab60e7283f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if it is valid to fold a cast of a cast.  <a href="#a08c03a4228af93098afb6ab60e7283f6">More...</a><br/></td></tr>
<tr class="separator:a08c03a4228af93098afb6ab60e7283f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f570fc754e1d24db0f84daa01ecfc10"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a6f570fc754e1d24db0f84daa01ecfc10">FoldBitCast</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *V, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestTy)</td></tr>
<tr class="separator:a6f570fc754e1d24db0f84daa01ecfc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7297a2f7b805f4b02a077059410b862"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>, unsigned ByteStart, unsigned ByteSize)</td></tr>
<tr class="separator:aa7297a2f7b805f4b02a077059410b862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5c0b904b0c7d1f2222486e1f91c604"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestTy, bool Folded)</td></tr>
<tr class="separator:aae5c0b904b0c7d1f2222486e1f91c604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484db6653636a4ed79d5facf3abd23d3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a484db6653636a4ed79d5facf3abd23d3">getFoldedAlignOf</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestTy, bool Folded)</td></tr>
<tr class="separator:a484db6653636a4ed79d5facf3abd23d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd2c30fee4d5f512f9a29c3e1d2d8d5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#accd2c30fee4d5f512f9a29c3e1d2d8d5">getFoldedOffsetOf</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *FieldNo, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DestTy, bool Folded)</td></tr>
<tr class="separator:accd2c30fee4d5f512f9a29c3e1d2d8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7daa2bbd118fbf9d77a9efb61a2bff39"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a> (<a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty)</td></tr>
<tr class="separator:a7daa2bbd118fbf9d77a9efb61a2bff39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5e52baf9c3773c59d6f09ef3bd4641"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *C1, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *C2, <a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElTy)</td></tr>
<tr class="separator:a7a5e52baf9c3773c59d6f09ef3bd4641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a492906941b2e0b27b8ef6cc54166103a"><td class="memItemLeft" align="right" valign="top">static FCmpInst::Predicate&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *V1, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *V2)</td></tr>
<tr class="separator:a492906941b2e0b27b8ef6cc54166103a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dc72eede9512ddb1764276cc197b4cb"><td class="memItemLeft" align="right" valign="top">static ICmpInst::Predicate&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV1, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2)</td></tr>
<tr class="separator:a3dc72eede9512ddb1764276cc197b4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5dbef2b409d565ac01ea7cdde4017e"><td class="memItemLeft" align="right" valign="top">static ICmpInst::Predicate&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *V1, <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *V2, bool isSigned)</td></tr>
<tr class="separator:a2c5dbef2b409d565ac01ea7cdde4017e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf1763d20509172e8577c019ee727ef1"><td class="memTemplParams" colspan="2">template&lt;typename IndexTy &gt; </td></tr>
<tr class="memitem:aaf1763d20509172e8577c019ee727ef1"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a> (<a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; IndexTy &gt; Idxs)</td></tr>
<tr class="separator:aaf1763d20509172e8577c019ee727ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f3efa10ef02a83f719de3970ef86be"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#ac8f3efa10ef02a83f719de3970ef86be">isIndexInRangeOfSequentialType</a> (<a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *STy, <a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI)</td></tr>
<tr class="memdesc:ac8f3efa10ef02a83f719de3970ef86be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether a given ConstantInt is in-range for a SequentialType.  <a href="#ac8f3efa10ef02a83f719de3970ef86be">More...</a><br/></td></tr>
<tr class="separator:ac8f3efa10ef02a83f719de3970ef86be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2844112344ae1cb205f97c277fb34f"><td class="memTemplParams" colspan="2">template&lt;typename IndexTy &gt; </td></tr>
<tr class="memitem:a0e2844112344ae1cb205f97c277fb34f"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html#a0e2844112344ae1cb205f97c277fb34f">ConstantFoldGetElementPtrImpl</a> (<a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="el" href="../../db/db2/structC.html">C</a>, bool inBounds, <a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; IndexTy &gt; Idxs)</td></tr>
<tr class="separator:a0e2844112344ae1cb205f97c277fb34f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3dc72eede9512ddb1764276cc197b4cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ICmpInst::Predicate areGlobalsPotentiallyEqual </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *&#160;</td>
          <td class="paramname"><em>GV1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *&#160;</td>
          <td class="paramname"><em>GV2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01337">1337</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                                                                              {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="comment">// Don&#39;t try to decide equality of aliases.</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;GlobalAlias&gt;(GV1) &amp;&amp; !isa&lt;GlobalAlias&gt;(GV2))</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (!GV1-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a543b0415de2670670f8346a7251391af">hasExternalWeakLinkage</a>() || !GV2-&gt;<a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html#a543b0415de2670670f8346a7251391af">hasExternalWeakLinkage</a>())</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a543b0415de2670670f8346a7251391af"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html#a543b0415de2670670f8346a7251391af">llvm::GlobalValue::hasExternalWeakLinkage</a></div><div class="ttdeci">bool hasExternalWeakLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00262">GlobalValue.h:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2487a58853a5b267e639d31ca3661161"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* BitCastConstantVector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>CV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *&#160;</td>
          <td class="paramname"><em>DstTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>BitCastConstantVector - Convert the specified vector Constant node to the specified vector type. At this point, we know that the elements of the input vector constant are all simple integer or FP values. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00044">44</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                                                        {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>()) <span class="keywordflow">return</span> Constant::getAllOnesValue(DstTy);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) <span class="keywordflow">return</span> Constant::getNullValue(DstTy);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// If this cast changes element count then we can&#39;t handle it here:</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// doing so requires endianness information.  This should be handled by</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Analysis/ConstantFolding.cpp</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = DstTy-&gt;<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (NumElts != CV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>())</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *DstEltTy = DstTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = IntegerType::get(CV-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), 32);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != NumElts; ++i) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> =</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      ConstantExpr::getExtractElement(CV, ConstantInt::get(Ty, i));</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    C = ConstantExpr::getBitCast(C, DstEltTy);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    Result.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(C);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> ConstantVector::get(Result);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00428">DerivedTypes.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad8f27f0b94a56abcd296b8461737a3af"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/Type_8cpp_source.html#l00208">Type.cpp:208</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ac8ddb745480a7e75a3862ddf0be3a298"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00088">Constants.cpp:88</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e2844112344ae1cb205f97c277fb34f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename IndexTy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* ConstantFoldGetElementPtrImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>inBounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; IndexTy &gt;&#160;</td>
          <td class="paramname"><em>Idxs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01961">1961</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                                                                       {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="keywordflow">if</span> (Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">empty</a>()) <span class="keywordflow">return</span> C;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Idx0 = cast&lt;Constant&gt;(Idxs[0]);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="keywordflow">if</span> ((Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() == 1 &amp;&amp; Idx0-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()))</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C)) {</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *Ptr = cast&lt;PointerType&gt;(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = GetElementPtrInst::getIndexedType(Ptr, Idxs);</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ty &amp;&amp; <span class="stringliteral">&quot;Invalid indices for GEP!&quot;</span>);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordflow">return</span> UndefValue::get(PointerType::get(Ty, Ptr-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>()));</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="keywordflow">if</span> (C-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../df/d75/namespacellvm_1_1yaml.html#ab49218a9ca3a0bd48b82726f80703afe">isNull</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); i != e; ++i)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keywordflow">if</span> (!cast&lt;Constant&gt;(Idxs[i])-&gt;isNullValue()) {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        isNull = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">if</span> (isNull) {</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *Ptr = cast&lt;PointerType&gt;(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = GetElementPtrInst::getIndexedType(Ptr, Idxs);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Ty &amp;&amp; <span class="stringliteral">&quot;Invalid indices for GEP!&quot;</span>);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      <span class="keywordflow">return</span> ConstantPointerNull::get(PointerType::get(Ty,</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                                                       Ptr-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>()));</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    }</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(C)) {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="comment">// Combine Indices - If the source pointer to this getelementptr instruction</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="comment">// is a getelementptr instruction, combine the indices of the two</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="comment">// getelementptr instructions into a single instruction.</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *LastTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(CE), E = <a class="code" href="../../d9/d4a/namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(CE);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;           <a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        LastTy = *<a class="code" href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="comment">// We cannot combine indices if doing so would take us outside of an</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="comment">// array or vector.  Doing otherwise could trick us if we evaluated such a</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="comment">// GEP as part of a load.</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="comment">// e.g. Consider if the original GEP was:</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <span class="comment">// i8* getelementptr ({ [2 x i8], i32, i8, [3 x i8] }* @main.c,</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="comment">//                    i32 0, i32 0, i64 0)</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <span class="comment">// If we then tried to offset it by &#39;8&#39; to get to the third element,</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="comment">// an i8, we should *not* get:</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      <span class="comment">// i8* getelementptr ({ [2 x i8], i32, i8, [3 x i8] }* @main.c,</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <span class="comment">//                    i32 0, i32 0, i64 8)</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <span class="comment">// This GEP tries to index array element &#39;8  which runs out-of-bounds.</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      <span class="comment">// Subsequent evaluation would get confused and produce erroneous results.</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <span class="comment">// The following prohibits such a GEP from being formed by checking to see</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="comment">// if the index is in-range with respect to an array or vector.</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <span class="keywordtype">bool</span> PerformFold = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">if</span> (Idx0-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>())</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        PerformFold = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *STy = dyn_cast_or_null&lt;SequentialType&gt;(LastTy))</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Idx0))</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;          PerformFold = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#ac8f3efa10ef02a83f719de3970ef86be">isIndexInRangeOfSequentialType</a>(STy, CI);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="keywordflow">if</span> (PerformFold) {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 16&gt;</a> NewIndices;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        NewIndices.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() + CE-&gt;getNumOperands());</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = CE-&gt;getNumOperands()-1; i != e; ++i)</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;          NewIndices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CE-&gt;getOperand(i));</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="comment">// Add the last index of the source with the first index of the new GEP.</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="comment">// Make sure to handle the case when they are actually different types.</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Combined = CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(CE-&gt;getNumOperands()-1);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <span class="comment">// Otherwise it must be an array.</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        <span class="keywordflow">if</span> (!Idx0-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;          <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *IdxTy = Combined-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;          <span class="keywordflow">if</span> (IdxTy != Idx0-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Int64Ty = Type::getInt64Ty(IdxTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>());</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *C1 = ConstantExpr::getSExtOrBitCast(Idx0, Int64Ty);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *C2 = ConstantExpr::getSExtOrBitCast(Combined, Int64Ty);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            Combined = ConstantExpr::get(Instruction::Add, C1, C2);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            Combined =</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;              ConstantExpr::get(Instruction::Add, Idx0, Combined);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        NewIndices.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Combined);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        NewIndices.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>() + 1, Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>());</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;          ConstantExpr::getGetElementPtr(CE-&gt;getOperand(0), NewIndices,</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                                         inBounds &amp;&amp;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                                           cast&lt;GEPOperator&gt;(CE)-&gt;isInBounds());</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      }</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="comment">// Attempt to fold casts to the same type away.  For example, folding:</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="comment">//   i32* getelementptr ([2 x i32]* bitcast ([3 x i32]* %X to [2 x i32]*),</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="comment">//                       i64 0, i64 0)</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="comment">// into:</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="comment">//   i32* getelementptr ([3 x i32]* %X, i64 0, i64 0)</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="comment">// Don&#39;t fold if the cast is changing address spaces.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;isCast() &amp;&amp; Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &gt; 1 &amp;&amp; Idx0-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *SrcPtrTy =</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>&gt;(CE-&gt;getOperand(0)-&gt;getType());</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *DstPtrTy = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a>&gt;(CE-&gt;getType());</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <span class="keywordflow">if</span> (SrcPtrTy &amp;&amp; DstPtrTy) {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *SrcArrayTy =</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;          <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a>&gt;(SrcPtrTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *DstArrayTy =</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;          <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a>&gt;(DstPtrTy-&gt;getElementType());</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">if</span> (SrcArrayTy &amp;&amp; DstArrayTy</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            &amp;&amp; SrcArrayTy-&gt;<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>() == DstArrayTy-&gt;getElementType()</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            &amp;&amp; SrcPtrTy-&gt;<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() == DstPtrTy-&gt;getAddressSpace())</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;          <span class="keywordflow">return</span> ConstantExpr::getGetElementPtr((<a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>*)CE-&gt;getOperand(0),</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                                                Idxs, inBounds);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  }</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="comment">// Check to see if any array indices are not within the corresponding</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">// notional array or vector bounds. If so, try to determine if they can be</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="comment">// factored out into preceding dimensions.</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d9/dec/NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fa4e81c184ac3ad48a389cd4454c4a05bb">Unknown</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 8&gt;</a> NewIdxs;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Ty = C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *Prev = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); i != e;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;       Prev = Ty, Ty = cast&lt;CompositeType&gt;(Ty)-&gt;getTypeAtIndex(Idxs[i]), ++i) {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Idxs[i])) {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ArrayType&gt;(Ty) || isa&lt;VectorType&gt;(Ty))</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;getSExtValue() &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            !<a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#ac8f3efa10ef02a83f719de3970ef86be">isIndexInRangeOfSequentialType</a>(cast&lt;SequentialType&gt;(Ty), CI)) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;          <span class="keywordflow">if</span> (isa&lt;SequentialType&gt;(Prev)) {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="comment">// It&#39;s out of range, but we can factor it into the prior</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            <span class="comment">// dimension.</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;            NewIdxs.<a class="code" href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>());</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            uint64_t NumElements = 0;</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty))</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;              NumElements = ATy-&gt;getNumElements();</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;              NumElements = cast&lt;VectorType&gt;(Ty)-&gt;getNumElements();</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Factor = ConstantInt::get(CI-&gt;getType(), NumElements);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            NewIdxs[i] = ConstantExpr::getSRem(CI, Factor);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *PrevIdx = cast&lt;Constant&gt;(Idxs[i-1]);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Div = ConstantExpr::getSDiv(CI, Factor);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="comment">// Before adding, extend both operands to i64 to avoid</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            <span class="comment">// overflow trouble.</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            <span class="keywordflow">if</span> (!PrevIdx-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(64))</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;              PrevIdx = ConstantExpr::getSExt(PrevIdx,</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                           Type::getInt64Ty(Div-&gt;getContext()));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="keywordflow">if</span> (!Div-&gt;getType()-&gt;isIntegerTy(64))</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;              Div = ConstantExpr::getSExt(Div,</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                                          Type::getInt64Ty(Div-&gt;getContext()));</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            NewIdxs[i-1] = ConstantExpr::getAdd(PrevIdx, Div);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="comment">// It&#39;s out of range, but the prior dimension is a struct</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            <span class="comment">// so we can&#39;t do anything about it.</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            Unknown = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;          }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <span class="comment">// We don&#39;t know if it&#39;s in range or not.</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      Unknown = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="comment">// If we did any factoring, start over with the adjusted indices.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="keywordflow">if</span> (!NewIdxs.empty()) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); i != e; ++i)</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordflow">if</span> (!NewIdxs[i]) NewIdxs[i] = cast&lt;Constant&gt;(Idxs[i]);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getGetElementPtr(C, NewIdxs, inBounds);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">// If all indices are known integers and normalized, we can do a simple</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// check for the &quot;inbounds&quot; property.</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="keywordflow">if</span> (!Unknown &amp;&amp; !inBounds &amp;&amp;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      isa&lt;GlobalVariable&gt;(C) &amp;&amp; <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a>(Idxs))</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getInBoundsGetElementPtr(C, Idxs);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="namespacellvm_html_a43c6ebb4fd35ebd815d66a2df4eed0b9"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">llvm::gep_type_end</a></div><div class="ttdeci">gep_type_iterator gep_type_end(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00089">GetElementPtrTypeIterator.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00465">DerivedTypes.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="NVPTXISelLowering_8cpp_html_ae1a90b5d85643644483b2ca70da4d13fa4e81c184ac3ad48a389cd4454c4a05bb"><div class="ttname"><a href="../../d9/dec/NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fa4e81c184ac3ad48a389cd4454c4a05bb">Unknown</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dec/NVPTXISelLowering_8cpp_source.html#l04042">NVPTXISelLowering.cpp:4042</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a3aa55c9d9145cd6b3b21c466b18abd80"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00104">ArrayRef.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00417">SmallVector.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_aaf1763d20509172e8577c019ee727ef1"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a></div><div class="ttdeci">static bool isInBoundsIndices(ArrayRef&lt; IndexTy &gt; Idxs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01912">ConstantFold.cpp:1912</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="../../d0/ddd/MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddd/MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="../../da/d30/classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00376">SmallVector.h:376</a></div></div>
<div class="ttc" id="namespacellvm_1_1yaml_html_ab49218a9ca3a0bd48b82726f80703afe"><div class="ttname"><a href="../../df/d75/namespacellvm_1_1yaml.html#ab49218a9ca3a0bd48b82726f80703afe">llvm::yaml::isNull</a></div><div class="ttdeci">bool isNull(StringRef S)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/YAMLTraits_8h_source.html#l00369">YAMLTraits.h:369</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_ac8f3efa10ef02a83f719de3970ef86be"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#ac8f3efa10ef02a83f719de3970ef86be">isIndexInRangeOfSequentialType</a></div><div class="ttdeci">static bool isIndexInRangeOfSequentialType(const SequentialType *STy, const ConstantInt *CI)</div><div class="ttdoc">Test whether a given ConstantInt is in-range for a SequentialType. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01930">ConstantFold.cpp:1930</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a492906941b2e0b27b8ef6cc54166103a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FCmpInst::Predicate evaluateFCmpRelation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>V1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>V2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>evaluateFCmpRelation - This function determines if there is anything we can decide about the two constants provided. This doesn't need to handle simple things like ConstantFP comparisons, but should instead handle ConstantExprs. If we can determine that the two constants have a particular relation to each other, we should return the corresponding FCmpInst predicate, otherwise return FCmpInst::BAD_FCMP_PREDICATE. This is used below in ConstantFoldCompareInstruction.</p>
<p>To simplify this code we canonicalize the relation so that the first operand is always the most "complex" of the two. We consider ConstantFP to be the simplest, and ConstantExprs to be the most complex. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01285">1285</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                                                                          {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(V1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == V2-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;         <span class="stringliteral">&quot;Cannot compare values of different types!&quot;</span>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// Handle degenerate case quickly</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">if</span> (V1 == V2) <span class="keywordflow">return</span> FCmpInst::FCMP_OEQ;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V1)) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V2)) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">// We distilled thisUse the standard constant folder for a few cases</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *R = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                      ConstantExpr::getFCmp(FCmpInst::FCMP_OEQ, V1, V2));</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">return</span> FCmpInst::FCMP_OEQ;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                      ConstantExpr::getFCmp(FCmpInst::FCMP_OLT, V1, V2));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">return</span> FCmpInst::FCMP_OLT;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                      ConstantExpr::getFCmp(FCmpInst::FCMP_OGT, V1, V2));</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">return</span> FCmpInst::FCMP_OGT;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="comment">// Nothing more we can do</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">return</span> FCmpInst::BAD_FCMP_PREDICATE;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">// If the first operand is simple and second is ConstantExpr, swap operands.</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">FCmpInst::Predicate</a> SwappedRelation = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a>(V2, V1);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">if</span> (SwappedRelation != FCmpInst::BAD_FCMP_PREDICATE)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">FCmpInst::getSwappedPredicate</a>(SwappedRelation);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// Ok, the LHS is known to be a constantexpr.  The RHS can be any of a</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="comment">// constantexpr or a simple constant.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = cast&lt;ConstantExpr&gt;(V1);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">switch</span> (CE1-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>()) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="comment">// We might be able to do something with these but we don&#39;t right now.</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// There are MANY other foldings that we could perform here.  They will</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// probably be added on demand, as they seem needed.</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">return</span> FCmpInst::BAD_FCMP_PREDICATE;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2a/PPCPredicates_8h_source.html#l00027">PPCPredicates.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a492906941b2e0b27b8ef6cc54166103a"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a></div><div class="ttdeci">static FCmpInst::Predicate evaluateFCmpRelation(Constant *V1, Constant *V2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01285">ConstantFold.cpp:1285</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPC_html_a12c2165ec169065a665bc3a9fcacea89"><div class="ttname"><a href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">llvm::PPC::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate(Predicate Opcode)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2c5dbef2b409d565ac01ea7cdde4017e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ICmpInst::Predicate evaluateICmpRelation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>V1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>V2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSigned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>evaluateICmpRelation - This function determines if there is anything we can decide about the two constants provided. This doesn't need to handle simple things like integer comparisons, but should instead handle ConstantExprs and GlobalValues. If we can determine that the two constants have a particular relation to each other, we should return the corresponding ICmp predicate, otherwise return ICmpInst::BAD_ICMP_PREDICATE.</p>
<p>To simplify this code we canonicalize the relation so that the first operand is always the most "complex" of the two. We consider simple constants (like ConstantInt) to be the simplest, followed by GlobalValues, followed by ConstantExpr's (the most complex). </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01358">1358</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                                                               {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(V1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == V2-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;         <span class="stringliteral">&quot;Cannot compare different types of values!&quot;</span>);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordflow">if</span> (V1 == V2) <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V1) &amp;&amp; !isa&lt;GlobalValue&gt;(V1) &amp;&amp;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      !isa&lt;BlockAddress&gt;(V1)) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;GlobalValue&gt;(V2) &amp;&amp; !isa&lt;ConstantExpr&gt;(<a class="code" href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>) &amp;&amp;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        !isa&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="comment">// We distilled this down to a simple case, use the standard constant</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="comment">// folder.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *R = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">ICmpInst::Predicate</a> pred = ICmpInst::ICMP_EQ;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ConstantExpr::getICmp(pred, V1, V2));</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      pred = isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ConstantExpr::getICmp(pred, V1, V2));</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>())</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      pred = isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      R = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ConstantExpr::getICmp(pred, V1, V2));</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>())</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">// If we couldn&#39;t figure it out, bail.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="comment">// If the first operand is simple, swap operands.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">ICmpInst::Predicate</a> SwappedRelation = </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">ICmpInst::getSwappedPredicate</a>(SwappedRelation);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(V1)) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(V2)) {  <span class="comment">// Swap as necessary.</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">ICmpInst::Predicate</a> SwappedRelation = </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">ICmpInst::getSwappedPredicate</a>(SwappedRelation);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">// Now we know that the RHS is a GlobalValue, BlockAddress or simple</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">// constant (which, since the types must match, means that it&#39;s a</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// ConstantPointerNull).</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2 = dyn_cast&lt;GlobalValue&gt;(V2)) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(GV, GV2);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">return</span> ICmpInst::ICMP_NE; <span class="comment">// Globals never equal labels.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(isa&lt;ConstantPointerNull&gt;(V2) &amp;&amp; <span class="stringliteral">&quot;Canonicalization guarantee!&quot;</span>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="comment">// GlobalVals can never be null unless they have external weak linkage.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="comment">// We don&#39;t try to evaluate aliases here.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">if</span> (!GV-&gt;hasExternalWeakLinkage() &amp;&amp; !isa&lt;GlobalAlias&gt;(GV))</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a> *BA = dyn_cast&lt;BlockAddress&gt;(V1)) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(V2)) {  <span class="comment">// Swap as necessary.</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">ICmpInst::Predicate</a> SwappedRelation = </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">ICmpInst::getSwappedPredicate</a>(SwappedRelation);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// Now we know that the RHS is a GlobalValue, BlockAddress or simple</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// constant (which, since the types must match, means that it is a</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="comment">// ConstantPointerNull).</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d2/d23/classllvm_1_1BlockAddress.html">BlockAddress</a> *BA2 = dyn_cast&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="comment">// Block address in another function can&#39;t equal this one, but block</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="comment">// addresses in the current function might be the same if blocks are</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <span class="comment">// empty.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">if</span> (BA2-&gt;getFunction() != BA-&gt;getFunction())</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// Block addresses aren&#39;t null, don&#39;t equal the address of globals.</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((isa&lt;ConstantPointerNull&gt;(V2) || isa&lt;GlobalValue&gt;(V2)) &amp;&amp;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;             <span class="stringliteral">&quot;Canonicalization guarantee!&quot;</span>);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="comment">// Ok, the LHS is known to be a constantexpr.  The RHS can be any of a</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="comment">// constantexpr, a global, block address, or a simple constant.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = cast&lt;ConstantExpr&gt;(V1);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *CE1Op0 = CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">switch</span> (CE1-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>()) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// We can&#39;t evaluate floating point casts or truncations.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="comment">// If the cast is not actually changing bits, and the second operand is a</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="comment">// null pointer, do the comparison with the pre-casted value.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="keywordflow">if</span> (V2-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>() &amp;&amp;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;          (CE1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() || CE1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <span class="keywordflow">if</span> (CE1-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>() == Instruction::ZExt) isSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="keywordflow">if</span> (CE1-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>() == Instruction::SExt) isSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(CE1Op0,</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                                    Constant::getNullValue(CE1Op0-&gt;getType()), </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                    isSigned);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">case</span> Instruction::GetElementPtr: {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html">GEPOperator</a> *CE1GEP = cast&lt;GEPOperator&gt;(CE1);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="comment">// Ok, since this is a getelementptr, we know that the constant has a</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="comment">// pointer type.  Check the various cases.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V2)) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">// If we are comparing a GEP to a null pointer, check to see if the base</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="comment">// of the GEP equals the null pointer.</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(CE1Op0)) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;          <span class="keywordflow">if</span> (GV-&gt;hasExternalWeakLinkage())</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <span class="comment">// Weak linkage GVals could be zero or not. We&#39;re comparing that</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            <span class="comment">// to null pointer so its greater-or-equal</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGE : ICmpInst::ICMP_UGE;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;          <span class="keywordflow">else</span> </div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <span class="comment">// If its not weak linkage, the GVal must have a non-zero address</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <span class="comment">// so the result is greater-than</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(CE1Op0)) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;          <span class="comment">// If we are indexing from a null pointer, check to see if we have any</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;          <span class="comment">// non-zero indices.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); i != e; ++i)</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            <span class="keywordflow">if</span> (!CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)-&gt;isNullValue())</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;              <span class="comment">// Offsetting from null, must not be equal.</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;              <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;          <span class="comment">// Only zero indexes from null, must still be zero.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;          <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="comment">// Otherwise, we can&#39;t really say if the first operand is null or not.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2 = dyn_cast&lt;GlobalValue&gt;(V2)) {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(CE1Op0)) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;          <span class="keywordflow">if</span> (GV2-&gt;hasExternalWeakLinkage())</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <span class="comment">// Weak linkage GVals could be zero or not. We&#39;re comparing it to</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <span class="comment">// a null pointer, so its less-or-equal</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLE : ICmpInst::ICMP_ULE;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            <span class="comment">// If its not weak linkage, the GVal must have a non-zero address</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <span class="comment">// so the result is less-than</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d4/db0/classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(CE1Op0)) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;          <span class="keywordflow">if</span> (GV == GV2) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            <span class="comment">// If this is a getelementptr of the same global, then it must be</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            <span class="comment">// different.  Because the types must match, the getelementptr could</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            <span class="comment">// only have at most one index, and because we fold getelementptr&#39;s</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <span class="comment">// with a single zero index, it must be nonzero.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 2 &amp;&amp;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                   !CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)-&gt;isNullValue() &amp;&amp;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                   <span class="stringliteral">&quot;Surprising getelementptr!&quot;</span>);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            <span class="keywordflow">if</span> (CE1GEP-&gt;<a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">hasAllZeroIndices</a>())</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(GV, GV2);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;          }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE2 = cast&lt;ConstantExpr&gt;(<a class="code" href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *CE2Op0 = CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="comment">// There are MANY other foldings that we could perform here.  They will</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="comment">// probably be added on demand, as they seem needed.</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">switch</span> (CE2-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>()) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;          <span class="comment">// By far the most common case to handle is when the base pointers are</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;          <span class="comment">// obviously to the same global.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;          <span class="keywordflow">if</span> (isa&lt;GlobalValue&gt;(CE1Op0) &amp;&amp; isa&lt;GlobalValue&gt;(CE2Op0)) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            <span class="comment">// Don&#39;t know relative ordering, but check for inequality.</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <span class="keywordflow">if</span> (CE1Op0 != CE2Op0) {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;              <a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html">GEPOperator</a> *CE2GEP = cast&lt;GEPOperator&gt;(CE2);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;              <span class="keywordflow">if</span> (CE1GEP-&gt;<a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">hasAllZeroIndices</a>() &amp;&amp; CE2GEP-&gt;<a class="code" href="../../da/d87/classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">hasAllZeroIndices</a>())</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(cast&lt;GlobalValue&gt;(CE1Op0),</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                                                  cast&lt;GlobalValue&gt;(CE2Op0));</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;              <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <span class="comment">// Ok, we know that both getelementptr instructions are based on the</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <span class="comment">// same global.  From this, we can precisely determine the relative</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="comment">// ordering of the resultant pointers.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keywordtype">unsigned</span> i = 1;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <span class="comment">// The logic below assumes that the result of the comparison</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            <span class="comment">// can be determined by finding the first index that differs.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <span class="comment">// This doesn&#39;t work if there is over-indexing in any</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="comment">// subsequent indices, so check for that case first.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="keywordflow">if</span> (!CE1-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#ae739c577bd624ff893c050032e754212">isGEPWithNoNotionalOverIndexing</a>() ||</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                !CE2-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#ae739c577bd624ff893c050032e754212">isGEPWithNoNotionalOverIndexing</a>())</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;               <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <span class="comment">// Compare all of the operands the GEP&#39;s have in common.</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            <a class="code" href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(CE1);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            <span class="keywordflow">for</span> (;i != CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &amp;&amp; i != CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>();</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                 ++i, ++GTI)</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;              <span class="keywordflow">switch</span> (<a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a>(CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i),</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                                 CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i), GTI.<a class="code" href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">getIndexedType</a>())) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;              <span class="keywordflow">case</span> -1: <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT:ICmpInst::ICMP_ULT;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;              <span class="keywordflow">case</span> 1:  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT:ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;              <span class="keywordflow">case</span> -2: <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;              }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            <span class="comment">// Ok, we ran out of things they have in common.  If any leftovers</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="comment">// are non-zero then we have a difference, otherwise we are equal.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            <span class="keywordflow">for</span> (; i &lt; CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); ++i)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;              <span class="keywordflow">if</span> (!CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)-&gt;isNullValue()) {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(CE1-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)))</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;              }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <span class="keywordflow">for</span> (; i &lt; CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); ++i)</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;              <span class="keywordflow">if</span> (!CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)-&gt;isNullValue()) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(CE2-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i)))</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;              }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;          }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html_aa9576aea404b156a949122affc839777"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">llvm::generic_gep_type_iterator::getIndexedType</a></div><div class="ttdeci">Type * getIndexedType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00057">GetElementPtrTypeIterator.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00110">User.h:110</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="../../d7/dcf/namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0f/NVPTX_8h_source.html#l00131">NVPTX.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="../../d6/d9f/classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html"><div class="ttname"><a href="../../d2/d23/classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00748">Constants.h:748</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a2c5dbef2b409d565ac01ea7cdde4017e"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a></div><div class="ttdeci">static ICmpInst::Predicate evaluateICmpRelation(Constant *V1, Constant *V2, bool isSigned)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01358">ConstantFold.cpp:1358</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a7a5e52baf9c3773c59d6f09ef3bd4641"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a></div><div class="ttdeci">static int IdxCompare(Constant *C1, Constant *C2, Type *ElTy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01242">ConstantFold.cpp:1242</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a3dc72eede9512ddb1764276cc197b4cb"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a></div><div class="ttdeci">static ICmpInst::Predicate areGlobalsPotentiallyEqual(const GlobalValue *GV1, const GlobalValue *GV2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01337">ConstantFold.cpp:1337</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="../../d4/db0/classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/GlobalValue_8h_source.html#l00030">GlobalValue.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html_a6941012bf4bc39a24118a66ee023c3d3"><div class="ttname"><a href="../../da/d87/classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">llvm::GEPOperator::hasAllZeroIndices</a></div><div class="ttdeci">bool hasAllZeroIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00419">Operator.h:419</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="../../d4/d19/namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2a/PPCPredicates_8h_source.html#l00027">PPCPredicates.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html"><div class="ttname"><a href="../../da/d87/classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Operator_8h_source.html#l00361">Operator.h:361</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae739c577bd624ff893c050032e754212"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#ae739c577bd624ff893c050032e754212">llvm::ConstantExpr::isGEPWithNoNotionalOverIndexing</a></div><div class="ttdeci">bool isGEPWithNoNotionalOverIndexing() const </div><div class="ttdoc">Return true if this is a getelementptr expression and all the index operands are compile-time known i...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l01082">Constants.cpp:1082</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPC_html_a12c2165ec169065a665bc3a9fcacea89"><div class="ttname"><a href="../../d4/d19/namespacellvm_1_1PPC.html#a12c2165ec169065a665bc3a9fcacea89">llvm::PPC::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate(Predicate Opcode)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7297a2f7b805f4b02a077059410b862"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* ExtractConstantBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ByteStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ByteSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ExtractConstantBytes - V is an integer constant which only has a subset of its bytes used. The bytes used are indicated by ByteStart (which is the first byte used, counting from the least significant byte) and ByteSize, which is the number of bytes used.</p>
<p>This function analyzes the specified constant to see if the specified byte range can be returned as a simplified constant. If so, the constant is returned, otherwise null is returned. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00197">197</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                         {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         (cast&lt;IntegerType&gt;(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="../../d7/ddf/ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>() &amp; 7) == 0 &amp;&amp;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;         <span class="stringliteral">&quot;Non-byte sized integer input&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">unsigned</span> CSize = cast&lt;IntegerType&gt;(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="../../d7/ddf/ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>()/8;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ByteSize &amp;&amp; <span class="stringliteral">&quot;Must be accessing some piece&quot;</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ByteStart+ByteSize &lt;= CSize &amp;&amp; <span class="stringliteral">&quot;Extracting invalid piece from input&quot;</span>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(ByteSize != CSize &amp;&amp; <span class="stringliteral">&quot;Should not extract everything&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// Constant Integers are simple.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(C)) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="../../de/d3b/classllvm_1_1APInt.html">APInt</a> V = CI-&gt;getValue();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (ByteStart)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      V = V.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">lshr</a>(ByteStart*8);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    V = V.<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a8cf5475fb3e9c737112cc248194c1040">trunc</a>(ByteSize*8);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> ConstantInt::get(CI-&gt;getContext(), V);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// In the input is a constant expr, we might be able to recursively simplify.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// If not, we definitely can&#39;t do anything.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a>&gt;(<a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (!CE) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">switch</span> (CE-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>()) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>: {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *RHS = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), ByteStart,ByteSize);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (!RHS)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// X | -1 -&gt; -1.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSC = dyn_cast&lt;ConstantInt&gt;(RHS))</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">if</span> (RHSC-&gt;isAllOnesValue())</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> RHSC;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *LHS = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ByteStart,ByteSize);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (!LHS)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getOr(LHS, RHS);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>: {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *RHS = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), ByteStart,ByteSize);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (!RHS)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// X &amp; 0 -&gt; 0.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (RHS-&gt;<a class="code" href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>())</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> RHS;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *LHS = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ByteStart,ByteSize);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (!LHS)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getAnd(LHS, RHS);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr: {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (!Amt)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">unsigned</span> ShAmt = Amt-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Cannot analyze non-byte shifts.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> ((ShAmt &amp; 7) != 0)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    ShAmt &gt;&gt;= 3;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// If the extract is known to be all zeros, return zero.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (ByteStart &gt;= CSize-ShAmt)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> Constant::getNullValue(IntegerType::get(CE-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                                     ByteSize*8));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// If the extract is known to be fully in the input, extract it.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (ByteStart+ByteSize+ShAmt &lt;= CSize)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ByteStart+ShAmt, ByteSize);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = <a class="code" href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">dyn_cast</a>&lt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!Amt)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">unsigned</span> ShAmt = Amt-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Cannot analyze non-byte shifts.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> ((ShAmt &amp; 7) != 0)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    ShAmt &gt;&gt;= 3;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// If the extract is known to be all zeros, return zero.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (ByteStart+ByteSize &lt;= ShAmt)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">return</span> Constant::getNullValue(IntegerType::get(CE-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                                     ByteSize*8));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// If the extract is known to be fully in the input, extract it.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (ByteStart &gt;= ShAmt)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ByteStart-ShAmt, ByteSize);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt: {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">unsigned</span> SrcBitSize =</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      cast&lt;IntegerType&gt;(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="../../d7/ddf/ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// If extracting something that is completely zero, return 0.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (ByteStart*8 &gt;= SrcBitSize)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> Constant::getNullValue(IntegerType::get(CE-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                                     ByteSize*8));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// If exactly extracting the input, return it.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (ByteStart == 0 &amp;&amp; ByteSize*8 == SrcBitSize)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// If extracting something completely in the input, if if the input is a</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// multiple of 8 bits, recurse.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> ((SrcBitSize&amp;7) == 0 &amp;&amp; (ByteStart+ByteSize)*8 &lt;= SrcBitSize)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a>(CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ByteStart, ByteSize);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// Otherwise, if extracting a subset of the input, which is not multiple of</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// 8 bits, do a shift and trunc to get the bits.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> ((ByteStart+ByteSize)*8 &lt; SrcBitSize) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((SrcBitSize&amp;7) &amp;&amp; <span class="stringliteral">&quot;Shouldn&#39;t get byte sized case here&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *Res = CE-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span> (ByteStart)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        Res = ConstantExpr::getLShr(Res, </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                 ConstantInt::get(Res-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), ByteStart*8));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">return</span> ConstantExpr::getTrunc(Res, IntegerType::get(C-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                                          ByteSize*8));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="../../d7/ddf/ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/ValueTracking_8cpp_source.html#l00042">ValueTracking.cpp:42</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa1953b3ad7ef6aa87dc0205db0c2ea45"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">llvm::APInt::lshr</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT lshr(unsigned shiftAmt) const </div><div class="ttdoc">Logical right-shift function. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l01128">APInt.cpp:1128</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00796">Constants.h:796</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a8cf5475fb3e9c737112cc248194c1040"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a8cf5475fb3e9c737112cc248194c1040">llvm::APInt::trunc</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT trunc(unsigned width) const </div><div class="ttdoc">Truncate to new width. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/APInt_8cpp_source.html#l00920">APInt.cpp:920</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01870">APInt.h:1870</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_aa7297a2f7b805f4b02a077059410b862"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#aa7297a2f7b805f4b02a077059410b862">ExtractConstantBytes</a></div><div class="ttdeci">static Constant * ExtractConstantBytes(Constant *C, unsigned ByteStart, unsigned ByteSize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l00197">ConstantFold.cpp:197</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_a3ef25ef75dac918e4dc006b078c49b3e"><div class="ttname"><a href="../../d9/d4a/namespacellvm.html#a3ef25ef75dac918e4dc006b078c49b3e">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_ATTRIBUTE_UNUSED_RESULT std::enable_if&lt; !is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/Casting_8h_source.html#l00265">Casting.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="../../db/dad/namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01865">APInt.h:1865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f570fc754e1d24db0f84daa01ecfc10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* FoldBitCast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DestTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00100">100</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                                        {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcTy = V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (SrcTy == DestTy)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> V; <span class="comment">// no-op cast</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Check to see if we are casting a pointer to an aggregate to a pointer to</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// the first element.  If so, return the appropriate GEP instruction.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *DPTy = dyn_cast&lt;PointerType&gt;(DestTy))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span> (PTy-&gt;getAddressSpace() == DPTy-&gt;getAddressSpace()</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;          &amp;&amp; DPTy-&gt;getElementType()-&gt;isSized()) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="../../d0/d78/classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> IdxList;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../dd/d38/classllvm_1_1Value.html">Value</a> *Zero =</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          Constant::getNullValue(Type::getInt32Ty(DPTy-&gt;getContext()));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        IdxList.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *ElTy = PTy-&gt;getElementType();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">while</span> (ElTy != DPTy-&gt;getElementType()) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(ElTy)) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">if</span> (STy-&gt;getNumElements() == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            ElTy = STy-&gt;getElementType(0);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            IdxList.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *STy = </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     dyn_cast&lt;SequentialType&gt;(ElTy)) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">if</span> (ElTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) <span class="keywordflow">break</span>;  <span class="comment">// Can&#39;t index into pointers!</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            ElTy = STy-&gt;getElementType();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            IdxList.<a class="code" href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;          }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> (ElTy == DPTy-&gt;getElementType())</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          <span class="comment">// This GEP is inbounds because all indices are zero.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;          <span class="keywordflow">return</span> ConstantExpr::getInBoundsGetElementPtr(V, IdxList);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// Handle casts from one vector constant to another.  We know that the src </span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// and dest type have the same size (otherwise its an illegal cast).</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *DestPTy = dyn_cast&lt;VectorType&gt;(DestTy)) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *SrcTy = dyn_cast&lt;VectorType&gt;(V-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(DestPTy-&gt;getBitWidth() == SrcTy-&gt;getBitWidth() &amp;&amp;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;             <span class="stringliteral">&quot;Not cast between same sized vectors!&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      SrcTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// First, check for null.  Undef is already handled.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(V))</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> Constant::getNullValue(DestTy);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="comment">// Handle ConstantVector and ConstantAggregateVector.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a2487a58853a5b267e639d31ca3661161">BitCastConstantVector</a>(V, DestPTy);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Canonicalize scalar-to-vector bitcasts into vector-to-vector bitcasts</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// This allows for other simplifications (although some of them</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// can only be handled by Analysis/ConstantFolding.cpp).</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(V) || isa&lt;ConstantFP&gt;(V))</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">return</span> ConstantExpr::getBitCast(ConstantVector::get(V), DestPTy);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// Finally, implement bitcast folding now.   The code below doesn&#39;t handle</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// bitcast right.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V))  <span class="comment">// ptr-&gt;ptr cast.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> ConstantPointerNull::get(cast&lt;PointerType&gt;(DestTy));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Handle integral constant input.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="comment">// Integral -&gt; Integral. This is a no-op because the bit widths must</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="comment">// be the same. Consequently, we just fold to V.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a40113570b0c52a18c34cabed8359e2c8">isFloatingPointTy</a>())</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> ConstantFP::get(DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(),</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                             <a class="code" href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(DestTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a60e80d9427d27573184d95640eafe328">getFltSemantics</a>(),</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                     CI-&gt;getValue()));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Otherwise, can&#39;t fold this (vector?)</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// Handle ConstantFP input: FP -&gt; Integral.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da0/classllvm_1_1ConstantFP.html">ConstantFP</a> *FP = dyn_cast&lt;ConstantFP&gt;(V))</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> ConstantInt::get(FP-&gt;getContext(),</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                            FP-&gt;getValueAPF().bitcastToAPInt());</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="../../d8/d71/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a2487a58853a5b267e639d31ca3661161"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a2487a58853a5b267e639d31ca3661161">BitCastConstantVector</a></div><div class="ttdeci">static Constant * BitCastConstantVector(Constant *CV, VectorType *DstTy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l00044">ConstantFold.cpp:44</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a40113570b0c52a18c34cabed8359e2c8"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a40113570b0c52a18c34cabed8359e2c8">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00159">Type.h:159</a></div></div>
<div class="ttc" id="namespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a"><div class="ttname"><a href="../../d6/d64/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">llvm::lltok::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcc/LLToken_8h_source.html#l00201">LLToken.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="../../dc/da0/classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="../../d9/d71/classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="../../d0/d78/classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d33/SmallVector_8h_source.html#l00845">SmallVector.h:845</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a60e80d9427d27573184d95640eafe328"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a60e80d9427d27573184d95640eafe328">llvm::Type::getFltSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getFltSemantics() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00166">Type.h:166</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00069">Value.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08c03a4228af93098afb6ab60e7283f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned foldConstantCastPair </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>opc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d41/classllvm_1_1ConstantExpr.html">ConstantExpr</a> *&#160;</td>
          <td class="paramname"><em>Op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DstTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if it is valid to fold a cast of a cast. </p>
<p>This function determines which opcode to use to fold two constant cast expressions together. It uses CastInst::isEliminableCastPair to determine the opcode. Consequently its just a wrapper around that function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opc</td><td>opcode of the second cast constant expression </td></tr>
    <tr><td class="paramname">Op</td><td>the first cast constant expression </td></tr>
    <tr><td class="paramname">DstTy</td><td>destination type of the first cast </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00075">75</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(Op &amp;&amp; Op-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#af5a739152c6b1f987b9d55a3c56e9aa8">isCast</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t fold cast of cast without a cast!&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(DstTy &amp;&amp; DstTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a367dd5f43f651df7c0dcaebd4cf89110">isFirstClassType</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid cast destination type&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>(CastInst::isCast(opc) &amp;&amp; <span class="stringliteral">&quot;Invalid cast opcode&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// The the types and opcodes for the two Cast constant expressions</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *SrcTy = Op-&gt;<a class="code" href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../db/d53/classllvm_1_1Type.html">Type</a> *MidTy = Op-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> firstOp = <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(Op-&gt;<a class="code" href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">getOpcode</a>());</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> secondOp = <a class="code" href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(opc);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Assume that pointers are never more than 64 bits wide, and only use this</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// for the middle type. Otherwise we could end up folding away illegal</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// bitcasts between address spaces with different sizes.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="../../dd/d56/classllvm_1_1IntegerType.html">IntegerType</a> *FakeIntPtrTy = Type::getInt64Ty(DstTy-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>());</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// Let CastInst::isEliminableCastPair do the heavy lifting.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../de/df6/InstCombineCasts_8cpp.html#a37b642362414a2d9d1c0419b8ce72210">CastInst::isEliminableCastPair</a>(firstOp, secondOp, SrcTy, MidTy, DstTy,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                        <span class="keyword">nullptr</span>, FakeIntPtrTy, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9c029996bf40f01fdebc1dfdf1cec4df"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#a9c029996bf40f01fdebc1dfdf1cec4df">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode - Return the opcode at the root of this constant expression </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l01063">Constants.h:1063</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="../../d2/d88/classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Instruction_8h_source.html#l00419">Instruction.h:419</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00125">Type.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a367dd5f43f651df7c0dcaebd4cf89110"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a367dd5f43f651df7c0dcaebd4cf89110">llvm::Type::isFirstClassType</a></div><div class="ttdeci">bool isFirstClassType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00242">Type.h:242</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="../../d6/d1b/classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/User_8h_source.html#l00090">User.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="../../dd/d56/classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_af5a739152c6b1f987b9d55a3c56e9aa8"><div class="ttname"><a href="../../d8/d41/classllvm_1_1ConstantExpr.html#af5a739152c6b1f987b9d55a3c56e9aa8">llvm::ConstantExpr::isCast</a></div><div class="ttdeci">bool isCast() const </div><div class="ttdoc">Return true if this is a convert constant expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc4/Constants_8cpp_source.html#l01074">Constants.cpp:1074</a></div></div>
<div class="ttc" id="InstCombineCasts_8cpp_html_a37b642362414a2d9d1c0419b8ce72210"><div class="ttname"><a href="../../de/df6/InstCombineCasts_8cpp.html#a37b642362414a2d9d1c0419b8ce72210">isEliminableCastPair</a></div><div class="ttdeci">static Instruction::CastOps isEliminableCastPair(const CastInst *CI, unsigned opcode, Type *DstTy, const DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/InstCombineCasts_8cpp_source.html#l00237">InstCombineCasts.cpp:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a484db6653636a4ed79d5facf3abd23d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* getFoldedAlignOf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DestTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Folded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>getFoldedAlignOf - Return a ConstantExpr with type DestTy for alignof on Ty, with any known factors factored out. If Folded is false, return null if no factoring was possible, to avoid endlessly bouncing an unfoldable expression back into the top-level folder. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00394">394</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                               {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// The alignment of an array is equal to the alignment of the</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// array element. Note that this is not always true for vectors.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = ConstantExpr::getAlignOf(ATy-&gt;getElementType());</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    C = ConstantExpr::getCast(CastInst::getCastOpcode(C, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                                      DestTy,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                                      <span class="keyword">false</span>),</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                              C, DestTy);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Packed structs always have an alignment of 1.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (STy-&gt;isPacked())</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">return</span> ConstantInt::get(DestTy, 1);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// Otherwise, struct alignment is the maximum alignment of any member.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Without target data, we can&#39;t compare much, but we can check to see</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// if all the members have the same alignment.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// An empty struct has minimal alignment.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span> ConstantInt::get(DestTy, 1);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Check for a struct with all members having the same alignment.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *MemberAlign =</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a484db6653636a4ed79d5facf3abd23d3">getFoldedAlignOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">if</span> (MemberAlign != <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a484db6653636a4ed79d5facf3abd23d3">getFoldedAlignOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (AllSame)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">return</span> MemberAlign;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// Pointer alignment doesn&#39;t depend on the pointee type, so canonicalize them</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// to an arbitrary pointee.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Ty))</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (!PTy-&gt;getElementType()-&gt;isIntegerTy(1))</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a484db6653636a4ed79d5facf3abd23d3">getFoldedAlignOf</a>(PointerType::get(IntegerType::get(PTy-&gt;getContext(),</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                                           1),</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                          PTy-&gt;getAddressSpace()),</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                         DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// Base case: Get a regular alignof expression.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *C = ConstantExpr::getAlignOf(Ty);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  C = ConstantExpr::getCast(CastInst::getCastOpcode(C, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                            C, DestTy);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a484db6653636a4ed79d5facf3abd23d3"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a484db6653636a4ed79d5facf3abd23d3">getFoldedAlignOf</a></div><div class="ttdeci">static Constant * getFoldedAlignOf(Type *Ty, Type *DestTy, bool Folded)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l00394">ConstantFold.cpp:394</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="accd2c30fee4d5f512f9a29c3e1d2d8d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* getFoldedOffsetOf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>FieldNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DestTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Folded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>getFoldedOffsetOf - Return a ConstantExpr with type DestTy for offsetof on Ty and FieldNo, with any known factors factored out. If Folded is false, return null if no factoring was possible, to avoid endlessly bouncing an unfoldable expression back into the top-level folder. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00460">460</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                                {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = ConstantExpr::getCast(CastInst::getCastOpcode(FieldNo, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                                                DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                        FieldNo, DestTy);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *E = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(ATy-&gt;getElementType(), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getNUWMul(E, N);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty))</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (!STy-&gt;isPacked()) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="comment">// An empty struct has no members.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">// Check for a struct with all members having the same size.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *MemberSize =</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (MemberSize !=</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">if</span> (AllSame) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *N = ConstantExpr::getCast(CastInst::getCastOpcode(FieldNo,</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                                                    <span class="keyword">false</span>,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                                                    DestTy,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                                                    <span class="keyword">false</span>),</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                            FieldNo, DestTy);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">return</span> ConstantExpr::getNUWMul(MemberSize, N);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// Base case: Get a regular offsetof expression.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = ConstantExpr::getOffsetOf(Ty, FieldNo);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  C = ConstantExpr::getCast(CastInst::getCastOpcode(C, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                            C, DestTy);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_aae5c0b904b0c7d1f2222486e1f91c604"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a></div><div class="ttdeci">static Constant * getFoldedSizeOf(Type *Ty, Type *DestTy, bool Folded)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l00337">ConstantFold.cpp:337</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae5c0b904b0c7d1f2222486e1f91c604"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a>* getFoldedSizeOf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>DestTy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Folded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>getFoldedSizeOf - Return a ConstantExpr with type DestTy for sizeof on Ty, with any known factors factored out. If Folded is false, return null if no factoring was possible, to avoid endlessly bouncing an unfoldable expression back into the top-level folder. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l00337">337</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                              {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = ConstantInt::get(DestTy, ATy-&gt;getNumElements());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *E = <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(ATy-&gt;getElementType(), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> ConstantExpr::getNUWMul(E, N);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty))</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (!STy-&gt;isPacked()) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// An empty struct has size zero.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">return</span> ConstantExpr::getNullValue(DestTy);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// Check for a struct with all members having the same size.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *MemberSize =</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (MemberSize !=</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">if</span> (AllSame) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *N = ConstantInt::get(DestTy, NumElems);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> ConstantExpr::getNUWMul(MemberSize, N);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Pointer size doesn&#39;t depend on the pointee type, so canonicalize them</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// to an arbitrary pointee.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Ty))</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (!PTy-&gt;getElementType()-&gt;isIntegerTy(1))</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a>(PointerType::get(IntegerType::get(PTy-&gt;getContext(), 1),</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                         PTy-&gt;getAddressSpace()),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Base case: Get a regular sizeof expression.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *<a class="code" href="../../db/db2/structC.html">C</a> = ConstantExpr::getSizeOf(Ty);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  C = ConstantExpr::getCast(CastInst::getCastOpcode(C, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                            C, DestTy);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="../../d3/de6/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d55/CallingConv_8h_source.html#l00031">CallingConv.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="../../d1/d57/classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_aae5c0b904b0c7d1f2222486e1f91c604"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#aae5c0b904b0c7d1f2222486e1f91c604">getFoldedSizeOf</a></div><div class="ttdeci">static Constant * getFoldedSizeOf(Type *Ty, Type *DestTy, bool Folded)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l00337">ConstantFold.cpp:337</a></div></div>
<div class="ttc" id="structC_html"><div class="ttname"><a href="../../db/db2/structC.html">C</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/dwarfdump-pubnames_8cc_source.html#l00005">dwarfdump-pubnames.cc:5</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="../../d0/d86/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a5e52baf9c3773c59d6f09ef3bd4641"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int IdxCompare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d57/classllvm_1_1Constant.html">Constant</a> *&#160;</td>
          <td class="paramname"><em>C2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>ElTy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>IdxCompare - Compare the two constants as though they were getelementptr indices. This allows coersion of the types to be the same thing.</p>
<p>If the two constants are the "same" (after coersion), return 0. If the first is less than the second, return -1, if the second is less than the first, return 1. If the constants are not integral, return -2. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01242">1242</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                                                              {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">if</span> (C1 == C2) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// Ok, we found a different index.  If they are not ConstantInt, we can&#39;t do</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// anything with them.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(C1) || !isa&lt;ConstantInt&gt;(C2))</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">return</span> -2; <span class="comment">// don&#39;t know!</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">// Ok, we have two differing integer indices.  Sign extend them to be the same</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// type.  Long is always big enough, so we use it.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">if</span> (!C1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(64))</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    C1 = ConstantExpr::getSExt(C1, Type::getInt64Ty(C1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()));</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (!C2-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(64))</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    C2 = ConstantExpr::getSExt(C2, Type::getInt64Ty(C1-&gt;<a class="code" href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> (C1 == C2) <span class="keywordflow">return</span> 0;  <span class="comment">// They are equal</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// If the type being indexed over is really just a zero sized type, there is</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// no pointer difference being made here.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(ElTy))</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">return</span> -2; <span class="comment">// dunno.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// If they are really different, now that they are the same type, then we</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// found a difference!</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(C1)-&gt;getSExtValue() &lt; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      cast&lt;ConstantInt&gt;(C2)-&gt;getSExtValue())</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/Value_8cpp_source.html#l00615">Value.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="../../dd/d38/classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8e/Value_8h_source.html#l00215">Value.h:215</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a7daa2bbd118fbf9d77a9efb61a2bff39"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a></div><div class="ttdeci">static bool isMaybeZeroSizedType(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01220">ConstantFold.cpp:1220</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="../../db/d53/classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/Type_8h_source.html#l00193">Type.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf1763d20509172e8577c019ee727ef1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename IndexTy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isInBoundsIndices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/de5/classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; IndexTy &gt;&#160;</td>
          <td class="paramname"><em>Idxs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isInBoundsIndices - Test whether the given sequence of <em>normalized</em> indices is "inbounds". </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01912">1912</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                                                      {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="comment">// No indices means nothing that could be out of bounds.</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordflow">if</span> (Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">empty</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="comment">// If the first index is zero, it&#39;s in bounds.</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keywordflow">if</span> (cast&lt;Constant&gt;(Idxs[0])-&gt;isNullValue()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// If the first index is one and all the rest are zero, it&#39;s in bounds,</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// by the one-past-the-end rule.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">if</span> (!cast&lt;ConstantInt&gt;(Idxs[0])-&gt;isOne())</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = Idxs.<a class="code" href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); i != e; ++i)</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">if</span> (!cast&lt;Constant&gt;(Idxs[i])-&gt;isNullValue())</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a3aa55c9d9145cd6b3b21c466b18abd80"><div class="ttname"><a href="../../d1/de5/classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da8/ArrayRef_8h_source.html#l00104">ArrayRef.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8f3efa10ef02a83f719de3970ef86be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isIndexInRangeOfSequentialType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../d9/d71/classllvm_1_1SequentialType.html">SequentialType</a> *&#160;</td>
          <td class="paramname"><em>STy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d1d/X86DisassemblerTables_8h.html#abdcf78c67e79bd295d02ec20ec81ccd0">const</a> <a class="el" href="../../dc/de1/classllvm_1_1ConstantInt.html">ConstantInt</a> *&#160;</td>
          <td class="paramname"><em>CI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether a given ConstantInt is in-range for a SequentialType. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01930">1930</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                                                                  {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d1/d2f/classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(STy))</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="comment">// Only handle pointers to sized types, not pointers to functions.</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordflow">return</span> PTy-&gt;getElementType()-&gt;isSized();</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  uint64_t NumElements = 0;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">// Determine the number of elements in our sequential type.</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(STy))</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    NumElements = ATy-&gt;getNumElements();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="../../d3/d45/classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(STy))</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    NumElements = VTy-&gt;getNumElements();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <a class="code" href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a>((isa&lt;ArrayType&gt;(STy) || NumElements &gt; 0) &amp;&amp;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         <span class="stringliteral">&quot;didn&#39;t expect non-array type to have zero elements!&quot;</span>);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="comment">// We cannot bounds check the index if it doesn&#39;t fit in an int64_t.</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="../../de/d3b/classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">getActiveBits</a>() &gt; 64)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">// A negative index or an index past the end of our sequential type is</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="comment">// considered out-of-range.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  int64_t IndexVal = CI-&gt;<a class="code" href="../../dc/de1/classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">getSExtValue</a>();</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="keywordflow">if</span> (IndexVal &lt; 0 || (NumElements &gt; 0 &amp;&amp; (uint64_t)IndexVal &gt;= NumElements))</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// Otherwise, it is in-range.</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a65eb40bd8c732c997e156e14f6b461f4"><div class="ttname"><a href="../../de/d3b/classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">llvm::APInt::getActiveBits</a></div><div class="ttdeci">unsigned getActiveBits() const </div><div class="ttdoc">Compute the number of active bits in the value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dcb/APInt_8h_source.html#l01272">APInt.h:1272</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="../../d1/d2f/classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="GlobalMerge_8cpp_html_a65c1240c404c646dd0e63fdcbf620730"><div class="ttname"><a href="../../df/dca/GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert</a></div><div class="ttdeci">assert(Globals.size() &gt; 1)</div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="../../d3/d45/classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a097c2d42e4deffabe6d54b007ad83367"><div class="ttname"><a href="../../dc/de1/classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdoc">Return the sign extended value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/Constants_8h_source.html#l00124">Constants.h:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7daa2bbd118fbf9d77a9efb61a2bff39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isMaybeZeroSizedType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d53/classllvm_1_1Type.html">Type</a> *&#160;</td>
          <td class="paramname"><em>Ty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isZeroSizedType - This type is zero sized if its an array or structure of zero sized types. The only leaf zero sized type is an empty structure. </p>

<p>Definition at line <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html#l01220">1220</a> of file <a class="el" href="../../d9/dfd/ConstantFold_8cpp_source.html">ConstantFold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                           {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d5c/classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (STy-&gt;isOpaque()) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Can&#39;t say.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// If all of elements have zero size, this does too.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = STy-&gt;getNumElements(); i != e; ++i)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(STy-&gt;getElementType(i))) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd7/classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(ATy-&gt;getElementType());</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="../../d2/d5c/classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="../../d0/dd7/classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="ConstantFold_8cpp_html_a7daa2bbd118fbf9d77a9efb61a2bff39"><div class="ttname"><a href="../../d9/dfd/ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a></div><div class="ttdeci">static bool isMaybeZeroSizedType(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfd/ConstantFold_8cpp_source.html#l01220">ConstantFold.cpp:1220</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_211fb134ce6a4c3329568c5b3817f0ae.html">llvm</a></li><li class="navelem"><a class="el" href="../../dir_68ef2609279916640dd02c22eb347286.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_1552751b3419a82d0990c41d62e1e63f.html">IR</a></li><li class="navelem"><a class="el" href="../../d9/dfd/ConstantFold_8cpp.html">ConstantFold.cpp</a></li>
    <li class="footer">Generated on Thu Oct 8 2015 11:43:28 for legup-4.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
